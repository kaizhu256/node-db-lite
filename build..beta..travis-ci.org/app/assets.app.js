/* this rollup was created with utility2 (https://github.com/kaizhu256/node-utility2) */



/*
assets.app.js

this zero-dependency package will provide a persistent, in-browser database, with a working web-demo

instruction
    1. save this script as assets.app.js
    2. run the shell-command:
        $ PORT=8081 node assets.app.js
    3. open a browser to http://127.0.0.1:8081 and play with the web-demo
    4. edit this script to suit your needs
*/
/* utility2.rollup.js begin */
/* istanbul ignore all */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function () {
    "use strict";
    // init utility2_app
    globalThis.utility2_app = (
        globalThis.utility2_app_old
        || globalThis.globalLocal
    );
    globalThis.utility2_app.local = globalThis.utility2_app;
    globalThis.utility2_app_old = null;
}());



/* script-begin /assets.utility2.rollup.js */
/* this rollup was created with utility2 (https://github.com/kaizhu256/node-utility2) */



/* script-begin /assets.utility2.rollup.begin.js */
/* utility2.rollup.js begin */
/* istanbul ignore all */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function () {
    "use strict";
    // init utility2_rollup
    globalThis.utility2_rollup = (
        globalThis.utility2_rollup_old
        || globalThis.globalLocal
    );
    globalThis.utility2_rollup.local = globalThis.utility2_rollup;
    globalThis.utility2_rollup_old = null;
}());
/* script-end /assets.utility2.rollup.begin.js */



/* script-begin /assets.utility2.lib.apidoc.js */
// usr/bin/env node
/*
 * lib.apidoc.js (2018.9.29)
 * https://github.com/kaizhu256/node-apidoc-lite
 * this zero-dependency package will auto-generate documentation for your npm-package with zero-config
 *
 */



/* istanbul instrument in package apidoc */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



/* istanbul ignore next */
// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    // || globalThis.utility2_rollup_old
    // || require("./assets.utility2.rollup.js")
    || globalThis.globalLocal
);
// init exports
if (local.isBrowser) {
    globalThis.utility2_apidoc = local;
} else {
    module.exports = local;
    module.exports.__dirname = __dirname;
}
// init lib main
local.apidoc = local;



/* validateLineSortedReset */
local.cliRun = function (option) {
/*
 * this function will run the cli
 */
    local.cliDict._eval = local.cliDict._eval || function () {
    /*
     * <code>
     * will eval <code>
     */
        globalThis.local = local;
        local.vm.runInThisContext(process.argv[3]);
    };
    local.cliDict["--eval"] = local.cliDict["--eval"] || local.cliDict._eval;
    local.cliDict["-e"] = local.cliDict["-e"] || local.cliDict._eval;
    local.cliDict._help = local.cliDict._help || function () {
    /*
     *
     * will print help
     */
        var commandList;
        var file;
        var packageJson;
        var text;
        var textDict;
        commandList = [{
            argList: "<arg2>  ...",
            description: "usage:",
            command: ["<arg1>"]
        }, {
            argList: "'console.log(\"hello world\")'",
            description: "example:",
            command: ["--eval"]
        }];
        file = __filename.replace((
            /.*\//
        ), "");
        option = Object.assign({}, option);
        packageJson = require("./package.json");
        // validate comment
        option.rgxComment = option.rgxComment || (
            /\)\u0020\{\n(?:|\u0020{4})\/\*\n(?:\u0020|\u0020{5})\*((?:\u0020<[^>]*?>|\u0020\.\.\.)*?)\n(?:\u0020|\u0020{5})\*\u0020(will\u0020.*?\S)\n(?:\u0020|\u0020{5})\*\/\n(?:\u0020{4}|\u0020{8})\S/
        );
        textDict = {};
        Object.keys(local.cliDict).sort().forEach(function (key, ii) {
            if (key[0] === "_" && key !== "_default") {
                return;
            }
            text = String(local.cliDict[key]);
            if (key === "_default") {
                key = "";
            }
            textDict[text] = textDict[text] || (ii + 2);
            ii = textDict[text];
            if (commandList[ii]) {
                commandList[ii].command.push(key);
                return;
            }
            try {
                commandList[ii] = option.rgxComment.exec(text);
                commandList[ii] = {
                    argList: (commandList[ii][1] || "").trim(),
                    command: [key],
                    description: commandList[ii][2]
                };
            } catch (ignore) {
                local.assertThrow(null, new Error(
                    "cliRun - cannot parse comment in COMMAND "
                    + key + ":\nnew RegExp("
                    + JSON.stringify(option.rgxComment.source)
                    + ").exec(" + JSON.stringify(text)
                    .replace((
                        /\\\\/g
                    ), "\u0000")
                    .replace((
                        /\\n/g
                    ), "\\n\\\n")
                    .replace((
                        /\u0000/g
                    ), "\\\\") + ");"
                ));
            }
        });
        text = "";
        text += packageJson.name + " (" + packageJson.version + ")\n\n";
        text += commandList
        .filter(function (element) {
            return element;
        })
        .map(function (element, ii) {
            element.command = element.command.filter(function (element) {
                return element;
            });
            switch (ii) {
            case 0:
            case 1:
                element.argList = [element.argList];
                break;
            default:
                element.argList = element.argList.split(" ");
                element.description = (
                    "# COMMAND "
                    + (element.command[0] || "<none>") + "\n# "
                    + element.description
                );
            }
            return (
                element.description + "\n  " + file
                + ("  " + element.command.sort().join("|") + "  ")
                    .replace((
                    /^\u0020{4}$/
                ), "  ")
                + element.argList.join("  ")
            );
        })
        .join("\n\n");
        console.log(text);
    };
    local.cliDict["--help"] = local.cliDict["--help"] || local.cliDict._help;
    local.cliDict["-h"] = local.cliDict["-h"] || local.cliDict._help;
    local.cliDict._default = local.cliDict._default || local.cliDict._help;
    local.cliDict.help = local.cliDict.help || local.cliDict._help;
    local.cliDict._interactive = local.cliDict._interactive || function () {
    /*
     *
     * will start interactive-mode
     */
        globalThis.local = local;
        local.identity(local.replStart || require("repl").start)({
            useGlobal: true
        });
    };
    local.cliDict["--interactive"] = (
        local.cliDict["--interactive"]
        || local.cliDict._interactive
    );
    local.cliDict["-i"] = local.cliDict["-i"] || local.cliDict._interactive;
    local.cliDict._version = local.cliDict._version || function () {
    /*
     *
     * will print version
     */
        console.log(require(__dirname + "/package.json").version);
    };
    local.cliDict["--version"] = (
        local.cliDict["--version"]
        || local.cliDict._version
    );
    local.cliDict["-v"] = local.cliDict["-v"] || local.cliDict._version;
    // default to --help command if no arguments are given
    if (process.argv.length <= 2) {
        local.cliDict._help();
        return;
    }
    if (local.cliDict[process.argv[2]]) {
        local.cliDict[process.argv[2]]();
        return;
    }
    local.cliDict._default();
};

local.moduleDirname = function (module, modulePathList) {
/*
 * this function will search modulePathList for the module's __dirname
 */
    var result;
    // search process.cwd()
    if (!module || module === "." || module.indexOf("/") >= 0) {
        return require("path").resolve(process.cwd(), module || "");
    }
    // search modulePathList
    ["node_modules"]
    .concat(modulePathList)
    .concat(require("module").globalPaths)
    .concat([process.env.HOME + "/node_modules", "/usr/local/lib/node_modules"])
    .some(function (modulePath) {
        try {
            result = require("path").resolve(
                process.cwd(),
                modulePath + "/" + module
            );
            result = require("fs").statSync(result).isDirectory() && result;
            return result;
        } catch (ignore) {
            result = null;
        }
        return result;
    });
    return result || "";
};

local.objectSetDefault = function (dict, defaults, depth) {
/*
 * this function will recursively set defaults for undefined-items in dict
 */
    dict = dict || {};
    defaults = defaults || {};
    Object.keys(defaults).forEach(function (key) {
        var defaults2;
        var dict2;
        dict2 = dict[key];
        // handle misbehaving getter
        try {
            defaults2 = defaults[key];
        } catch (ignore) {}
        if (defaults2 === undefined) {
            return;
        }
        // init dict[key] to default value defaults[key]
        switch (dict2) {
        case "":
        case null:
        case undefined:
            dict[key] = defaults2;
            return;
        }
        // if dict2 and defaults2 are both non-null and non-array objects,
        // then recurse with dict2 and defaults2
        if (
            depth > 1
            // dict2 is a non-null and non-array object
            && typeof dict2 === "object" && dict2 && !Array.isArray(dict2)
            // defaults2 is a non-null and non-array object
            && typeof defaults2 === "object" && defaults2
            && !Array.isArray(defaults2)
        ) {
            // recurse
            local.objectSetDefault(dict2, defaults2, depth - 1);
        }
    });
    return dict;
};

local.stringHtmlSafe = function (text) {
/*
 * this function will make the text html-safe
 * https://stackoverflow.com/questions/7381974/which-characters-need-to-be-escaped-on-html
 */
    return text
    .replace((
        /&/g
    ), "&amp;")
    .replace((
        /"/g
    ), "&quot;")
    .replace((
        /'/g
    ), "&apos;")
    .replace((
        /</g
    ), "&lt;")
    .replace((
        />/g
    ), "&gt;")
    .replace((
        /&amp;(amp;|apos;|gt;|lt;|quot;)/ig
    ), "&$1");
};

local.templateRender = function (template, dict, option) {
/*
 * this function will render the template with given dict
 */
    var argList;
    var getValue;
    var match;
    var renderPartial;
    var rgx;
    var skip;
    var value;
    dict = dict || {};
    option = option || {};
    getValue = function (key) {
        argList = key.split(" ");
        value = dict;
        if (argList[0] === "#this/") {
            return;
        }
        // iteratively lookup nested values in the dict
        argList[0].split(".").forEach(function (key) {
            value = value && value[key];
        });
        return value;
    };
    renderPartial = function (match0, helper, key, partial) {
        switch (helper) {
        case "each":
        case "eachTrimRightComma":
            value = getValue(key);
            value = (
                Array.isArray(value)
                ? value.map(function (dict) {
                    // recurse with partial
                    return local.templateRender(partial, dict, option);
                }).join("")
                : ""
            );
            // remove trailing-comma from last element
            if (helper === "eachTrimRightComma") {
                value = value.trimRight().replace((
                    /,$/
                ), "");
            }
            return value;
        case "if":
            partial = partial.split("{{#unless " + key + "}}");
            partial = (
                getValue(key)
                ? partial[0]
                // handle 'unless' case
                : partial.slice(1).join("{{#unless " + key + "}}")
            );
            // recurse with partial
            return local.templateRender(partial, dict, option);
        case "unless":
            return (
                getValue(key)
                ? ""
                // recurse with partial
                : local.templateRender(partial, dict, option)
            );
        default:
            // recurse with partial
            return match0[0] + local.templateRender(match0.slice(1), dict, option);
        }
    };
    // render partials
    rgx = (
        /\{\{#(\w+)\u0020([^}]+?)\}\}/g
    );
    template = template || "";
    match = rgx.exec(template);
    while (match) {
        rgx.lastIndex += 1 - match[0].length;
        template = template.replace(
            new RegExp(
                "\\{\\{#(" + match[1] + ") (" + match[2]
                + ")\\}\\}([\\S\\s]*?)\\{\\{/" + match[1] + " " + match[2]
                + "\\}\\}"
            ),
            renderPartial
        );
        match = rgx.exec(template);
    }
    // search for keys in the template
    return template.replace((
        /\{\{[^}]+?\}\}/g
    ), function (match0) {
        var markdownToHtml;
        var notHtmlSafe;
        notHtmlSafe = option.notHtmlSafe;
        try {
            getValue(match0.slice(2, -2));
            if (value === undefined) {
                return match0;
            }
            argList.slice(1).forEach(function (arg0, ii, list) {
                switch (arg0) {
                case "alphanumeric":
                    value = value.replace((
                        /\W/g
                    ), "_");
                    break;
                case "decodeURIComponent":
                    value = decodeURIComponent(value);
                    break;
                case "encodeURIComponent":
                    value = encodeURIComponent(value);
                    break;
                case "jsonStringify":
                    value = JSON.stringify(value);
                    break;
                case "jsonStringify4":
                    value = JSON.stringify(value, null, 4);
                    break;
                case "markdownSafe":
                    value = value.replace((
                        /`/g
                    ), "'");
                    break;
                case "markdownToHtml":
                    markdownToHtml = true;
                    break;
                case "notHtmlSafe":
                    notHtmlSafe = true;
                    break;
                case "truncate":
                    skip = ii + 1;
                    if (value.length > list[skip]) {
                        value = value.slice(0, list[skip] - 3).trimRight() + "...";
                    }
                    break;
                // default to String.prototype[arg0]()
                default:
                    if (ii === skip) {
                        break;
                    }
                    value = value[arg0]();
                }
            });
            value = String(value);
            // default to htmlSafe
            if (!notHtmlSafe) {
                value = value
                .replace((
                    /&/g
                ), "&amp;")
                .replace((
                    /"/g
                ), "&quot;")
                .replace((
                    /'/g
                ), "&apos;")
                .replace((
                    /</g
                ), "&lt;")
                .replace((
                    />/g
                ), "&gt;")
                .replace((
                    /&amp;(amp;|apos;|gt;|lt;|quot;)/ig
                ), "&$1");
            }
            markdownToHtml = (
                markdownToHtml
                && (typeof local.marked === "function" && local.marked)
            );
            if (markdownToHtml) {
                value = markdownToHtml(value)
                .replace((
                    /&amp;(amp;|apos;|gt;|lt;|quot;)/ig
                ), "&$1");
            }
            return value;
        } catch (errorCaught) {
            errorCaught.message = (
                "templateRender could not render expression "
                + JSON.stringify(match0) + "\n"
            ) + errorCaught.message;
            local.assertThrow(null, errorCaught);
        }
    });
};

local.tryCatchOnError = function (fnc, onError) {
/*
 * this function will run the fnc in a tryCatch block,
 * else call onError with the errorCaught
 */
    var result;
    // validate onError
    local.assertThrow(typeof onError === "function", typeof onError);
    try {
        // reset errorCaught
        local._debugTryCatchError = null;
        result = fnc();
        local._debugTryCatchError = null;
        return result;
    } catch (errorCaught) {
        // debug errorCaught
        local._debugTryCatchError = errorCaught;
        return onError(errorCaught);
    }
};
}());



// run shared js-env code - init-before
/* jslint ignore:start */
local.templateApidocHtml = '\
<div class="apidocDiv">\n\
<style>\n\
/*csslint\n\
*/\n\
.apidocDiv {\n\
    background: #fff;\n\
    font-family: Arial, Helvetica, sans-serif;\n\
}\n\
.apidocDiv a[href] {\n\
    color: #33f;\n\
    font-weight: bold;\n\
    text-decoration: none;\n\
}\n\
.apidocDiv a[href]:hover {\n\
    text-decoration: underline;\n\
}\n\
.apidocCodeCommentSpan {\n\
    background: #bbf;\n\
    color: #000;\n\
    display: block;\n\
}\n\
.apidocCodeKeywordSpan {\n\
    color: #d00;\n\
    font-weight: bold;\n\
}\n\
.apidocCodePre {\n\
    background: #eef;\n\
    border: 1px solid;\n\
    color: #777;\n\
    overflow-wrap: break-word;\n\
    padding: 5px;\n\
    white-space: pre-wrap;\n\
}\n\
.apidocFooterDiv {\n\
    margin-top: 20px;\n\
    text-align: center;\n\
}\n\
.apidocModuleLi {\n\
    margin-top: 10px;\n\
}\n\
.apidocSectionDiv {\n\
    border-top: 1px solid;\n\
    margin-top: 20px;\n\
}\n\
.apidocSignatureSpan {\n\
    color: #777;\n\
    font-weight: bold;\n\
}\n\
</style>\n\
<h1>api documentation for\n\
    <a\n\
        {{#if env.npm_package_homepage}}\n\
        href="{{env.npm_package_homepage}}"\n\
        {{/if env.npm_package_homepage}}\n\
    >{{env.npm_package_name}} ({{env.npm_package_version}})</a>\n\
</h1>\n\
<h4>{{env.npm_package_description}}</h4>\n\
<div class="apidocSectionDiv"><a\n\
    href="#apidoc.tableOfContents"\n\
    id="apidoc.tableOfContents"\n\
><h1>table of contents</h1></a><ol>\n\
    {{#each moduleList}}\n\
    <li class="apidocModuleLi"><a href="#{{id}}">module {{name}}</a><ol>\n\
        {{#each elementList}}\n\
        <li>\n\
            {{#if source}}\n\
            <a class="apidocElementLiA" href="#{{id}}">\n\
            {{name}}\n\
            <span class="apidocSignatureSpan">{{signature}}</span>\n\
            </a>\n\
            {{#unless source}}\n\
            <span class="apidocSignatureSpan">{{name}}</span>\n\
            {{/if source}}\n\
        </li>\n\
        {{/each elementList}}\n\
    </ol></li>\n\
    {{/each moduleList}}\n\
</ol></div>\n\
{{#each moduleList}}\n\
<div class="apidocSectionDiv">\n\
<h1><a href="#{{id}}" id="{{id}}">module {{name}}</a></h1>\n\
    {{#each elementList}}\n\
    {{#if source}}\n\
    <h2>\n\
        <a href="#{{id}}" id="{{id}}">\n\
        {{name}}\n\
        <span class="apidocSignatureSpan">{{signature}}</span>\n\
        </a>\n\
    </h2>\n\
    <ul>\n\
    <li>description and source-code<pre class="apidocCodePre">{{source truncate 4096}}</pre></li>\n\
    <li>example usage<pre class="apidocCodePre">{{example}}</pre></li>\n\
    </ul>\n\
    {{/if source}}\n\
    {{/each elementList}}\n\
</div>\n\
{{/each moduleList}}\n\
<div class="apidocFooterDiv">\n\
    [ this document was created with\n\
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>\n\
    ]\n\
</div>\n\
</div>\n\
';
/* jslint ignore:end */



// run shared js-env code - function
(function () {
local.apidocCreate = function (option) {
/*
 * this function will create the apidoc from option.dir
 */
    var elementCreate;
    var module;
    var moduleMain;
    var readExample;
    var tmp;
    var toString;
    var trimLeft;
    elementCreate = function (module, prefix, key) {
    /*
     * this function will create the apidoc-element in given module
     */
        var element;
        if (option.modeNoApidoc) {
            return element;
        }
        element = {};
        element.moduleName = prefix.split(".");
        // handle case where module is a function
        if (element.moduleName.slice(-1)[0] === key) {
            element.moduleName.pop();
        }
        element.moduleName = element.moduleName.join(".");
        element.id = encodeURIComponent("apidoc.element." + prefix + "." + key);
        element.typeof = typeof module[key];
        element.name = (
            element.typeof + " <span class=\"apidocSignatureSpan\">"
            + element.moduleName + ".</span>" + key
        )
            // handle case where module is a function
            .replace(">.<", "><");
        if (element.typeof !== "function") {
            return element;
        }
        // init source
        element.source = local.stringHtmlSafe(trimLeft(toString(module[key])) || "n/a")
        .replace((
            /\([\S\s]*?\)/
        ), function (match0) {
            // init signature
            element.signature = match0
            .replace((
                /\u0020*?\/\*[\S\s]*?\*\/\u0020*/g
            ), "")
            .replace((
                /,/g
            ), ", ")
            .replace((
                /\s+/g
            ), " ");
            return element.signature;
        })
        .replace((
            /(\u0020*?\/\*[\S\s]*?\*\/\n)/
        ), "<span class=\"apidocCodeCommentSpan\">$1</span>")
        .replace((
            /^function\u0020\(/
        ), key + " = function (");
        // init example
        option.exampleList.some(function (example) {
            example.replace(
                new RegExp("((?:\n.*?){8}\\.)(" + key + ")(\\((?:.*?\n){8})"),
                function (ignore, match1, match2, match3) {
                    element.example = "..." + trimLeft(
                        local.stringHtmlSafe(match1)
                        + "<span class=\"apidocCodeKeywordSpan\">"
                        + local.stringHtmlSafe(match2)
                        + "</span>"
                        + local.stringHtmlSafe(match3)
                    ).trimRight() + "\n...";
                }
            );
            return element.example;
        });
        element.example = element.example || "n/a";
        return element;
    };
    readExample = function (file) {
    /*
     * this function will read the example from given file
     */
        var result;
        local.tryCatchOnError(function () {
            file = local.path.resolve(option.dir, file);
            console.error("apidocCreate - readExample " + file);
            result = "";
            result = (
                "\n\n\n\n\n\n\n\n"
                // bug-workaround - truncate example to manageable size
                + local.fs.readFileSync(file, "utf8").slice(0, 262144)
                + "\n\n\n\n\n\n\n\n"
            ).replace((
                /\r\n*/g
            ), "\n");
        }, console.error);
        return result;
    };
    toString = function (value) {
    /*
     * this function will try to return the string form of the value
     */
        var result;
        local.tryCatchOnError(function () {
            result = "";
            result = String(value);
        }, console.error);
        return result;
    };
    trimLeft = function (text) {
    /*
     * this function will normalize the whitespace around the text
     */
        var whitespace;
        whitespace = "";
        text.trim().replace((
            /^\u0020*/gm
        ), function (match0) {
            if (!whitespace || match0.length < whitespace.length) {
                whitespace = match0;
            }
        });
        text = text.replace(new RegExp("^" + whitespace, "gm"), "");
        // enforce 128 character column limit
        text = text.replace((
            /^.{128}[^\\\n]+/gm
        ), function (match0) {
            return match0.replace((
                /(.{128}(?:\b|\w+))/g
            ), "$1\n").trimRight();
        });
        return text;
    };
    // init option
    option.dir = local.moduleDirname(
        option.dir,
        option.modulePathList || require("module").paths
    );
    local.objectSetDefault(option, {
        env: {
            npm_package_description: ""
        },
        packageJson: JSON.parse(readExample("package.json")),
        require: function (file) {
            return local.tryCatchOnError(function () {
                return require(file);
            }, console.error);
        }
    });
    Object.keys(option.packageJson).forEach(function (key) {
        tmp = option.packageJson[key];
        // strip email from npmdoc documentation
        // https://github.com/npmdoc/node-npmdoc-hpp/issues/1
        if (tmp) {
            if (tmp.email) {
                delete tmp.email;
            }
            if (Array.isArray(tmp)) {
                tmp.forEach(function (element) {
                    if (element && element.email) {
                        delete element.email;
                    }
                });
            }
        }
        if (key[0] === "_" || key === "readme") {
            delete option.packageJson[key];
        } else if (typeof tmp === "string") {
            option.env["npm_package_" + key] = tmp;
        }
    });
    local.objectSetDefault(option, {
        blacklistDict: {
            globalThis: globalThis
        },
        circularList: [globalThis],
        exampleDict: {},
        exampleList: [],
        html: "",
        libFileList: [],
        moduleDict: {},
        moduleExtraDict: {},
        packageJson: {
            bin: {}
        },
        template: local.templateApidocHtml,
        whitelistDict: {}
    }, 2);
    // init exampleList
    [1, 2, 3, 4].forEach(function (depth) {
        option.exampleList = option.exampleList.concat(
            // find . -maxdepth 1 -mindepth 1 -name "*.js" -type f
            // http://stackoverflow.com/questions/4509624/how-to-limit-depth-for-recursive-file-list
            local.child_process.execSync(
                "find \"" + option.dir
                + "\" -maxdepth " + depth + " -mindepth " + depth
                + " -type f | sed -e \"s|" + option.dir
                + "/||\" | grep -iv "
/* jslint ignore:start */
+ '"\
/\\.\\|\\(\\b\\|_\\)\\(\
bower_component\\|\
coverage\\|\
git\\|\
min\\|\
node_module\\|\
rollup\\|\
tmp\\|\
vendor\\)s\\{0,1\\}\\(\\b\\|_\\)\
" '
/* jslint ignore:end */
                + " | sort | head -n 256"
            ).toString()
            .split("\n")
        );
    });
    option.exampleList = option.exampleList.filter(function (file) {
        if (file && !option.exampleDict[file]) {
            option.exampleDict[file] = true;
            return true;
        }
    }).slice(0, 256).map(readExample);
    // init moduleMain
    local.tryCatchOnError(function () {
        console.error("apidocCreate - requiring " + option.dir + " ...");
        moduleMain = {};
        moduleMain = (
            option.moduleDict[option.env.npm_package_name]
            || option.require(option.dir)
            || option.require(
                option.dir + "/"
                + (option.packageJson.bin)[Object.keys(option.packageJson.bin)[0]]
            ) || {}
        );
        option.circularList.push(moduleMain);
        console.error("apidocCreate - ... required " + option.dir);
    }, console.error);
    tmp = {};
    // handle case where module is a function
    if (typeof moduleMain === "function") {
        (function () {
            var text;
            text = toString(moduleMain);
            tmp = function () {
                return;
            };
            // coverage-hack
            tmp();
            Object.defineProperties(tmp, {
                toString: {
                    get: function () {
                        return function () {
                            return text;
                        };
                    }
                }
            });
        }());
    }
    // normalize moduleMain
    moduleMain = local.objectSetDefault(tmp, moduleMain);
    option.moduleDict[option.env.npm_package_name] = moduleMain;
    // init circularList - builtins
    [
        "assert",
        "buffer",
        "child_process",
        "cluster",
        "crypto",
        "dgram",
        "dns",
        "domain",
        "events",
        "fs",
        "http",
        "https",
        "net",
        "os",
        "path",
        "querystring",
        "readline",
        "repl",
        "stream",
        "string_decoder",
        "timers",
        "tls",
        "tty",
        "url",
        "util",
        "vm",
        "zlib"
    ].forEach(function (key) {
        local.tryCatchOnError(function () {
            option.circularList.push(require(key));
        }, local.nop);
    });
    // init circularList - blacklistDict
    Object.keys(option.blacklistDict).forEach(function (key) {
        option.circularList.push(option.blacklistDict[key]);
    });
    // init circularList - moduleDict
    Object.keys(option.moduleDict).forEach(function (key) {
        option.circularList.push(option.moduleDict[key]);
    });
    // init circularList - prototype
    Object.keys(option.circularList).forEach(function (key) {
        tmp = option.circularList[key];
        option.circularList.push(tmp && tmp.prototype);
    });
    // deduplicate circularList
    tmp = option.circularList;
    option.circularList = [];
    tmp.forEach(function (element) {
        if (option.circularList.indexOf(element) < 0) {
            option.circularList.push(element);
        }
    });
    // init moduleDict child
    local.apidocModuleDictAdd(option, option.moduleDict);
    // init swgg.apiDict
    Object.keys((moduleMain.swgg && moduleMain.swgg.apiDict) || {}).forEach(function (key) {
        tmp = "swgg.apiDict";
        option.moduleDict[tmp] = option.moduleDict[tmp] || {};
        tmp = option.moduleDict[tmp];
        tmp[key + ".ajax"] = (
            moduleMain.swgg.apiDict[key]
            && moduleMain.swgg.apiDict[key].ajax
        );
    });
    // init moduleExtraDict
    option.moduleExtraDict[option.env.npm_package_name] = (
        option.moduleExtraDict[option.env.npm_package_name] || {}
    );
    module = option.moduleExtraDict[option.env.npm_package_name];
    [1, 2, 3, 4].forEach(function (depth) {
        option.libFileList = option.libFileList.concat(
            // find . -maxdepth 1 -mindepth 1 -name "*.js" -type f
            // http://stackoverflow.com/questions/4509624/how-to-limit-depth-for-recursive-file-list
            local.child_process.execSync(
                "find \"" + option.dir
                + "\" -maxdepth " + depth + " -mindepth " + depth
                + " -name \"*.js\" -type f | sed -e \"s|" + option.dir
                + "/||\" | grep -iv "
/* jslint ignore:start */
+ '"\
/\\.\\|\\(\\b\\|_\\)\\(\
archive\\|artifact\\|asset\\|\
bower_component\\|build\\|\
coverage\\|\
doc\\|dist\\|\
example\\|external\\|\
fixture\\|\
git\\|\
log\\|\
min\\|mock\\|\
node_module\\|\
rollup\\|\
spec\\|\
test\\|tmp\\|\
vendor\\)s\\{0,1\\}\\(\\b\\|_\\)\
" '
/* jslint ignore:end */
                + " | sort | head -n 256"
            ).toString()
            .split("\n")
        );
    });
    option.ii = 256;
    option.libFileList.every(function (file) {
        local.tryCatchOnError(function () {
            tmp = {};
            tmp.name = local.path.basename(file)
            .replace("lib.", "")
            .replace((
                /\.[^.]*?$/
            ), "")
            .replace((
                /\W/g
            ), "_");
            ([
                tmp.name,
                tmp.name.slice(0, 1).toUpperCase() + tmp.name.slice(1)
            ]).some(function (name) {
                tmp.isFiltered = name && (
                    !option.packageJson.main
                    || ("./" + file).indexOf(option.packageJson.main) < 0
                ) && !module[name];
                return !tmp.isFiltered;
            });
            if (!tmp.isFiltered) {
                return;
            }
            console.error("apidocCreate - libFile " + file);
            tmp.module = option.require(option.dir + "/" + file);
            // filter circular-reference
            if (!(tmp.module && option.circularList.indexOf(tmp.module) < 0)) {
                return;
            }
            option.ii -= 1;
            module[tmp.name] = tmp.module;
        }, console.error);
        return option.ii;
    });
    local.apidocModuleDictAdd(option, option.moduleExtraDict);
    Object.keys(option.moduleDict).forEach(function (key) {
        if (key.indexOf(option.env.npm_package_name + ".") !== 0) {
            return;
        }
        tmp = key.split(".").slice(1).join(".");
        moduleMain[tmp] = moduleMain[tmp] || option.moduleDict[key];
    });
    // init moduleList
    option.moduleList = Object.keys(option.moduleDict)
    .sort()
    .map(function (prefix) {
        module = option.moduleDict[prefix];
        // handle case where module is a function
        if (typeof module === "function") {
            local.tryCatchOnError(function () {
                module[prefix.split(".").slice(-1)[0]] = (
                    module[prefix.split(".").slice(-1)[0]] || module
                );
            }, console.error);
        }
        return {
            elementList: Object.keys(module)
            .filter(function (key) {
                return local.tryCatchOnError(function () {
                    return (
                        key
                        && (
                            /^\w[\w\-.]*?$/
                        ).test(key)
                        && key.indexOf("testCase_") !== 0
                        && (
                            module[key] !== option.blacklistDict[key]
                            || option.whitelistDict[key]
                        )
                    );
                }, console.error);
            })
            .map(function (key) {
                return elementCreate(module, prefix, key);
            })
            .sort(function (aa, bb) {
                return (
                    aa.name > bb.name
                    ? 1
                    : -1
                );
            }),
            id: encodeURIComponent("apidoc.module." + prefix),
            name: prefix
        };
    });
    // render apidoc
    option.result = local.templateRender(option.template, option, {
        notHtmlSafe: true
    })
    .trim()
    .replace((
        /\u0020+$/gm
    ), "") + "\n";
    return option.result;
};

local.apidocModuleDictAdd = function (option, moduleDict) {
/*
 * this function will add the modules in moduleDict to option.moduleDict
 */
    var isModule;
    var objectKeys;
    var tmp;
    objectKeys = function (dict) {
    /*
     * this function will return a list of the dict's keys, with valid getters
     */
        return Object.keys(dict).sort().filter(function (key) {
            return local.tryCatchOnError(function () {
                return dict[key] || true;
            }, local.nop);
        });
    };
    ["child", "prototype", "grandchild", "prototype"].forEach(function (element) {
        objectKeys(moduleDict).forEach(function (prefix) {
            if (!(
                /^\w[\w\-.]*?$/
            ).test(prefix)) {
                return;
            }
            objectKeys(moduleDict[prefix]).forEach(function (key) {
                if (!(
                    /^\w[\w\-.]*?$/
                ).test(key) || !moduleDict[prefix][key]) {
                    return;
                }
                tmp = (
                    element === "prototype"
                    ? {
                        module: moduleDict[prefix][key].prototype,
                        name: prefix + "." + key + ".prototype"
                    }
                    : {
                        module: moduleDict[prefix][key],
                        name: prefix + "." + key
                    }
                );
                if (
                    !tmp.module
                    || !(
                        typeof tmp.module === "function"
                        || typeof tmp.module === "object"
                    )
                    || Array.isArray(tmp.module)
                    || option.moduleDict[tmp.name]
                    || option.circularList.indexOf(tmp.module) >= 0
                ) {
                    return;
                }
                isModule = ([
                    tmp.module,
                    tmp.module.prototype
                ]).some(function (dict) {
                    return objectKeys(dict || {}).some(function (key) {
                        return typeof dict[key] === "function";
                    });
                });
                if (!isModule) {
                    return;
                }
                option.circularList.push(tmp.module);
                option.moduleDict[tmp.name] = tmp.module;
            });
        });
    });
};
}());



// run node js-env code - init-after
/* istanbul ignore next */
(function () {
if (local.isBrowser) {
    return;
}



local.cliDict = {};

local.cliDict._default = function () {
/*
 * <moduleDirectory>
 * will create apidoc from <moduleDirectory>
 */
    // jslint files
    process.stdout.write(local.apidocCreate({
        dir: process.argv[2],
        modulePathList: module.paths
    }));
};

// run cli
if (module === require.main && !globalThis.utility2_rollup) {
    local.cliRun();
}
}());



}());
/* script-end /assets.utility2.lib.apidoc.js */



/* script-begin /assets.utility2.lib.db.js */
// usr/bin/env node
/*
 * lib.db.js (2018.12.30)
 * https://github.com/kaizhu256/node-db-lite
 * this zero-dependency package will provide a persistent, in-browser database, with a working web-demo
 *
 * browser example:
 *     <script src="assets.db-lite.js"></script>
 *     <script>
 *     var dbTable1;
 *     dbTable1 = window.dbTable1 = window.utility2_db.dbTableCreateOne({ name: "dbTable1" });
 *     dbTable1.idIndexCreate({ name: "field1" });
 *     dbTable1.crudSetOneById({ field1: "hello", field2: "world" });
 *     console.log(dbTable1.crudGetManyByQuery({
 *         limit: Infinity,
 *         query: { field1: "hello" },
 *         skip: 0,
 *         sort: [{ fieldName: 'field1', isDescending: false }]
 *     }));
 *     </script>
 *
 * node example:
 *     var db, dbTable1;
 *     utility2_db = require("./assets.db-lite.js");
 *     dbTable1 = global.dbTable1 = utility2_db.dbTableCreateOne({ name: "dbTable1" });
 *     dbTable1.idIndexCreate({ name: "field1" });
 *     dbTable1.crudSetOneById({ field1: "hello", field2: "world" });
 *     console.log(dbTable1.crudGetManyByQuery({
 *         limit: Infinity,
 *         query: { field1: "hello" },
 *         skip: 0,
 *         sort: [{ fieldName: 'field1', isDescending: false }]
 *     }));
 */



/* istanbul instrument in package db */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



/* istanbul ignore next */
// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    // || globalThis.utility2_rollup_old
    // || require("./assets.utility2.rollup.js")
    || globalThis.globalLocal
);
// init exports
if (local.isBrowser) {
    globalThis.utility2_db = local;
} else {
    module.exports = local;
    module.exports.__dirname = __dirname;
}
// init lib main
local.db = local;



/* validateLineSortedReset */
local.cliRun = function (option) {
/*
 * this function will run the cli
 */
    local.cliDict._eval = local.cliDict._eval || function () {
    /*
     * <code>
     * will eval <code>
     */
        globalThis.local = local;
        local.vm.runInThisContext(process.argv[3]);
    };
    local.cliDict["--eval"] = local.cliDict["--eval"] || local.cliDict._eval;
    local.cliDict["-e"] = local.cliDict["-e"] || local.cliDict._eval;
    local.cliDict._help = local.cliDict._help || function () {
    /*
     *
     * will print help
     */
        var commandList;
        var file;
        var packageJson;
        var text;
        var textDict;
        commandList = [{
            argList: "<arg2>  ...",
            description: "usage:",
            command: ["<arg1>"]
        }, {
            argList: "'console.log(\"hello world\")'",
            description: "example:",
            command: ["--eval"]
        }];
        file = __filename.replace((
            /.*\//
        ), "");
        option = Object.assign({}, option);
        packageJson = require("./package.json");
        // validate comment
        option.rgxComment = option.rgxComment || (
            /\)\u0020\{\n(?:|\u0020{4})\/\*\n(?:\u0020|\u0020{5})\*((?:\u0020<[^>]*?>|\u0020\.\.\.)*?)\n(?:\u0020|\u0020{5})\*\u0020(will\u0020.*?\S)\n(?:\u0020|\u0020{5})\*\/\n(?:\u0020{4}|\u0020{8})\S/
        );
        textDict = {};
        Object.keys(local.cliDict).sort().forEach(function (key, ii) {
            if (key[0] === "_" && key !== "_default") {
                return;
            }
            text = String(local.cliDict[key]);
            if (key === "_default") {
                key = "";
            }
            textDict[text] = textDict[text] || (ii + 2);
            ii = textDict[text];
            if (commandList[ii]) {
                commandList[ii].command.push(key);
                return;
            }
            try {
                commandList[ii] = option.rgxComment.exec(text);
                commandList[ii] = {
                    argList: (commandList[ii][1] || "").trim(),
                    command: [key],
                    description: commandList[ii][2]
                };
            } catch (ignore) {
                local.assertThrow(null, new Error(
                    "cliRun - cannot parse comment in COMMAND "
                    + key + ":\nnew RegExp("
                    + JSON.stringify(option.rgxComment.source)
                    + ").exec(" + JSON.stringify(text)
                    .replace((
                        /\\\\/g
                    ), "\u0000")
                    .replace((
                        /\\n/g
                    ), "\\n\\\n")
                    .replace((
                        /\u0000/g
                    ), "\\\\") + ");"
                ));
            }
        });
        text = "";
        text += packageJson.name + " (" + packageJson.version + ")\n\n";
        text += commandList
        .filter(function (element) {
            return element;
        })
        .map(function (element, ii) {
            element.command = element.command.filter(function (element) {
                return element;
            });
            switch (ii) {
            case 0:
            case 1:
                element.argList = [element.argList];
                break;
            default:
                element.argList = element.argList.split(" ");
                element.description = (
                    "# COMMAND "
                    + (element.command[0] || "<none>") + "\n# "
                    + element.description
                );
            }
            return (
                element.description + "\n  " + file
                + ("  " + element.command.sort().join("|") + "  ")
                    .replace((
                    /^\u0020{4}$/
                ), "  ")
                + element.argList.join("  ")
            );
        })
        .join("\n\n");
        console.log(text);
    };
    local.cliDict["--help"] = local.cliDict["--help"] || local.cliDict._help;
    local.cliDict["-h"] = local.cliDict["-h"] || local.cliDict._help;
    local.cliDict._default = local.cliDict._default || local.cliDict._help;
    local.cliDict.help = local.cliDict.help || local.cliDict._help;
    local.cliDict._interactive = local.cliDict._interactive || function () {
    /*
     *
     * will start interactive-mode
     */
        globalThis.local = local;
        local.identity(local.replStart || require("repl").start)({
            useGlobal: true
        });
    };
    local.cliDict["--interactive"] = (
        local.cliDict["--interactive"]
        || local.cliDict._interactive
    );
    local.cliDict["-i"] = local.cliDict["-i"] || local.cliDict._interactive;
    local.cliDict._version = local.cliDict._version || function () {
    /*
     *
     * will print version
     */
        console.log(require(__dirname + "/package.json").version);
    };
    local.cliDict["--version"] = (
        local.cliDict["--version"]
        || local.cliDict._version
    );
    local.cliDict["-v"] = local.cliDict["-v"] || local.cliDict._version;
    // default to --help command if no arguments are given
    if (process.argv.length <= 2) {
        local.cliDict._help();
        return;
    }
    if (local.cliDict[process.argv[2]]) {
        local.cliDict[process.argv[2]]();
        return;
    }
    local.cliDict._default();
};

local.jsonCopy = function (obj) {
/*
 * this function will deep-copy obj
 */
    return (
        obj === undefined
        ? undefined
        : JSON.parse(JSON.stringify(obj))
    );
};

local.jsonStringifyOrdered = function (obj, replacer, space) {
/*
 * this function will JSON.stringify <obj>,
 * with object-keys sorted and circular-references removed
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Syntax
 */
    var circularSet;
    var stringify;
    var tmp;
    stringify = function (obj) {
    /*
     * this function will recursively JSON.stringify obj,
     * with object-keys sorted and circular-references removed
     */
        // if obj is not an object or function, then JSON.stringify as normal
        if (!(
            obj
            && typeof obj === "object"
            && typeof obj.toJSON !== "function"
        )) {
            return JSON.stringify(obj);
        }
        // ignore circular-reference
        if (circularSet.has(obj)) {
            return;
        }
        circularSet.add(obj);
        // if obj is an array, then recurse its items
        if (Array.isArray(obj)) {
            tmp = "[" + obj.map(function (obj) {
                // recurse
                tmp = stringify(obj);
                return (
                    typeof tmp === "string"
                    ? tmp
                    : "null"
                );
            }).join(",") + "]";
            circularSet.delete(obj);
            return tmp;
        }
        // if obj is not an array,
        // then recurse its items with object-keys sorted
        tmp = "{" + Object.keys(obj)
        // sort object-keys
        .sort()
        .map(function (key) {
            // recurse
            tmp = stringify(obj[key]);
            if (typeof tmp === "string") {
                return JSON.stringify(key) + ":" + tmp;
            }
        })
        .filter(function (obj) {
            return typeof obj === "string";
        })
        .join(",") + "}";
        circularSet.delete(obj);
        return tmp;
    };
    circularSet = new Set();
    return JSON.stringify((
        (typeof obj === "object" && obj)
        // recurse
        ? JSON.parse(stringify(obj))
        : obj
    ), replacer, space);
};

local.listShuffle = function (list) {
/*
 * this function will inplace shuffle the list using fisher-yates algorithm
 * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle
 */
    var ii;
    var random;
    var swap;
    ii = list.length;
    while (ii > 1) {
        ii -= 1;
        random = Math.floor(Math.random() * (ii + 1));
        swap = list[ii];
        list[ii] = list[random];
        list[random] = swap;
    }
    return list;
};

local.objectSetOverride = function (dict, overrides, depth, env) {
/*
 * this function will recursively set overrides for items in dict
 */
    dict = dict || {};
    env = env || (typeof process === "object" && process.env) || {};
    overrides = overrides || {};
    Object.keys(overrides).forEach(function (key) {
        var dict2;
        var overrides2;
        dict2 = dict[key];
        overrides2 = overrides[key];
        if (overrides2 === undefined) {
            return;
        }
        // if both dict2 and overrides2 are non-null and non-array objects,
        // then recurse with dict2 and overrides2
        if (
            depth > 1
            // dict2 is a non-null and non-array object
            && typeof dict2 === "object" && dict2 && !Array.isArray(dict2)
            // overrides2 is a non-null and non-array object
            && typeof overrides2 === "object" && overrides2
            && !Array.isArray(overrides2)
        ) {
            local.objectSetOverride(dict2, overrides2, depth - 1, env);
            return;
        }
        // else set dict[key] with overrides[key]
        dict[key] = (
            dict === env
            // if dict is env, then overrides falsy-value with empty-string
            ? overrides2 || ""
            : overrides2
        );
    });
    return dict;
};

local.onErrorDefault = function (error) {
/*
 * this function will if <error> exists, then print it to stderr
 */
    if (error) {
        console.error(error);
    }
    return error;
};

local.onErrorWithStack = function (onError) {
/*
 * this function will create a new callback that will call onError,
 * and append the current stack to any error
 */
    var onError2;
    var stack;
    stack = new Error().stack.replace((
        /(.*?)\n.*?$/m
    ), "$1");
    onError2 = function (error, data, meta) {
        if (
            error
            && typeof error.stack === "string"
            && error !== local.errorDefault
            && String(error.stack).indexOf(stack.split("\n")[2]) < 0
        ) {
            // append the current stack to error.stack
            error.stack += "\n" + stack;
        }
        onError(error, data, meta);
    };
    // debug onError
    onError2.toString = function () {
        return String(onError);
    };
    return onError2;
};

local.onParallel = function (onError, onEach, onRetry) {
/*
 * this function will create a function that will
 * 1. run async tasks in parallel
 * 2. if counter === 0 or error occurred, then call onError with error
 */
    var onParallel;
    onError = local.onErrorWithStack(onError);
    onEach = onEach || local.nop;
    onRetry = onRetry || local.nop;
    onParallel = function (error, data) {
        if (onRetry(error, data)) {
            return;
        }
        // decrement counter
        onParallel.counter -= 1;
        // validate counter
        if (!(onParallel.counter >= 0 || error || onParallel.error)) {
            error = new Error(
                "invalid onParallel.counter = " + onParallel.counter
            );
        // ensure onError is run only once
        } else if (onParallel.counter < 0) {
            return;
        }
        // handle error
        if (error) {
            onParallel.error = error;
            // ensure counter <= 0
            onParallel.counter = -Math.abs(onParallel.counter);
        }
        // call onError when isDone
        if (onParallel.counter <= 0) {
            onError(error, data);
            return;
        }
        onEach();
    };
    // init counter
    onParallel.counter = 0;
    // return callback
    return onParallel;
};

local.replStart = function () {
/*
 * this function will start the repl-debugger
 */
    var that;
    if (globalThis.utility2_serverRepl1) {
        return;
    }
    // start replServer
    that = require("repl").start({
        useGlobal: true
    });
    globalThis.utility2_serverRepl1 = that;
    that.onError = function (error) {
    /*
     * this function will debug any repl-error
     */
        // debug error
        globalThis.utility2_debugReplError = error;
        console.error(error);
    };
    // save repl eval function
    that.evalDefault = that.eval;
    // hook custom repl eval function
    that.eval = function (script, context, file, onError) {
        var onError2;
        onError2 = function (error, data) {
            // debug error
            globalThis.utility2_debugReplError = (
                error
                || globalThis.utility2_debugReplError
            );
            onError(error, data);
        };
        script.replace((
            /^(\S+)\u0020(.*?)\n/
        ), function (ignore, match1, match2) {
            switch (match1) {
            // syntax-sugar to run async shell-command
            case "$":
                switch (match2) {
                // syntax-sugar to run git diff
                case "git diff":
                    match2 = "git diff --color | cat";
                    break;
                // syntax-sugar to run git log
                case "git log":
                    match2 = "git log -n 4 | cat";
                    break;
                }
                // source lib.utility2.sh
                if (process.env.npm_config_dir_utility2 && (match2 !== ":")) {
                    match2 = (
                        ". " + process.env.npm_config_dir_utility2
                        + "/lib.utility2.sh;" + match2
                    );
                }
                // run async shell-command
                require("child_process").spawn(match2, {
                    shell: true,
                    stdio: ["ignore", 1, 2]
                })
                // on shell exit, print return prompt
                .on("exit", function (exitCode) {
                    console.error("exit-code " + exitCode);
                    that.evalDefault(
                        "\n",
                        context,
                        file,
                        onError2
                    );
                });
                script = "\n";
                break;
            // syntax-sugar to map text with charCodeAt
            case "charCode":
                console.error(
                    match2.split("").map(function (chr) {
                        return (
                            "\\u"
                            + chr.charCodeAt(0).toString(16).padStart(4, 0)
                        );
                    }).join("")
                );
                script = "\n";
                break;
            // syntax-sugar to sort chr
            case "charSort":
                console.error(JSON.stringify(match2.split("").sort().join("")));
                script = "\n";
                break;
            // syntax-sugar to grep current dir
            case "grep":
                // run async shell-command
                require("child_process").spawn((
                    "find . -type f | grep -v -E "
/* jslint ignore:start */
+ '"\
/\\.|(\\b|_)(\\.\\d|\
archive|artifact|\
bower_component|build|\
coverage|\
doc|\
external|\
fixture|\
git_module|\
jquery|\
log|\
min|mock|\
node_module|\
rollup|\
swp|\
tmp|\
vendor)s{0,1}(\\b|_)\
" '
/* jslint ignore:end */
                    + "| tr \"\\n\" \"\\000\" | xargs -0 grep -HIin -E \""
                    + match2 + "\""
                ), {
                    shell: true,
                    stdio: ["ignore", 1, 2]
                })
                // on shell exit, print return prompt
                .on("exit", function (exitCode) {
                    console.error("exit-code " + exitCode);
                    that.evalDefault(
                        "\n",
                        context,
                        file,
                        onError2
                    );
                });
                script = "\n";
                break;
            // syntax-sugar to list object's keys, sorted by item-type
            // console.error(Object.keys(global).map(function(key){return(typeof global[key]==='object'&&global[key]&&global[key]===global[key]?'global':typeof global[key])+' '+key;}).sort().join('\n')) // jslint ignore:line
            case "keys":
                script = (
                    "console.error(Object.keys(" + match2
                    + ").map(function(key){return("
                    + "typeof " + match2 + "[key]==='object'&&"
                    + match2 + "[key]&&"
                    + match2 + "[key]===global[key]"
                    + "?'global'"
                    + ":typeof " + match2 + "[key]"
                    + ")+' '+key;"
                    + "}).sort().join('\\n'))\n"
                );
                break;
            // syntax-sugar to print stringified arg
            case "print":
                script = "console.error(String(" + match2 + "))\n";
                break;
            // syntax-sugar to read file
            case "readFile":
                try {
                    console.error(JSON.stringify(
                        require("fs").readFileSync(match2, "utf8")
                    ));
                } catch (errorCaught) {
                    console.error(errorCaught);
                }
                script = "\n";
                break;
            }
        });
        // eval the script
        that.evalDefault(script, context, file, onError2);
    };
    that.socket = {
        end: local.nop,
        on: local.nop,
        write: local.nop
    };
    // init process.stdout
    process.stdout._writeDefault = (
        process.stdout._writeDefault
        || process.stdout._write
    );
    process.stdout._write = function (chunk, encoding, callback) {
        process.stdout._writeDefault(chunk, encoding, callback);
        // coverage-hack - ignore else-statement
        local.nop(that.socket.writable && (function () {
            that.socket.write(chunk, encoding);
        }()));
    };
    // start tcp-server
    globalThis.utility2_serverReplTcp1 = require("net").createServer(function (
        socket
    ) {
        // init socket
        that.socket = socket;
        that.socket.on("data", that.write.bind(that));
        that.socket.on("error", that.onError);
        that.socket.setKeepAlive(true);
    });
    // coverage-hack - ignore else-statement
    local.nop(process.env.PORT_REPL && (function () {
        console.error(
            "repl-server listening on tcp-port " + process.env.PORT_REPL
        );
        globalThis.utility2_serverReplTcp1.listen(process.env.PORT_REPL);
    }()));
};

local.setTimeoutOnError = function (onError, timeout, error, data) {
/*
 * this function will after timeout has passed, then call onError(error, data)
 */
    if (typeof onError === "function") {
        setTimeout(function () {
            onError(error, data);
        }, timeout);
    }
    return data;
};
}());



// run shared js-env code - lib.storage.js
(function (local) {
var child_process;
var clear;
var defer;
var deferList;
var fs;
var getItem;
var init;
var keys;
var length;
var os;
var removeItem;
var setItem;
var storage;
var storageDir;

storageDir = "tmp/storage." + (
    local.isBrowser
    ? "undefined"
    : process.env.NODE_ENV
);
if (!local.isBrowser) {
    // require modules
    child_process = require("child_process");
    fs = require("fs");
    os = require("os");
}

clear = function (onError) {
/*
 * this function will clear storage
 */
    defer({
        action: "clear"
    }, onError);
};

defer = function (option, onError) {
/*
 * this function will defer option.action until storage is ready
 */
    var data;
    var isDone;
    var objectStore;
    var onError2;
    var request;
    var tmp;
    onError = onError || function (error) {
        // validate no error occurred
        local.assertThrow(!error, error);
    };
    if (!storage) {
        deferList.push(function () {
            defer(option, onError);
        });
        init();
        return;
    }
    if (local.isBrowser) {
        onError2 = function () {
            /* istanbul ignore next */
            if (isDone) {
                return;
            }
            isDone = true;
            onError(
                request && (request.error || request.transaction.error),
                data || request.result || ""
            );
        };
        switch (option.action) {
        case "clear":
        case "removeItem":
        case "setItem":
            objectStore = storage
            .transaction(storageDir, "readwrite")
            .objectStore(storageDir);
            break;
        default:
            objectStore = storage
            .transaction(storageDir, "readonly")
            .objectStore(storageDir);
        }
        switch (option.action) {
        case "clear":
            request = objectStore.clear();
            break;
        case "getItem":
            request = objectStore.get(String(option.key));
            break;
        case "keys":
            data = [];
            request = objectStore.openCursor();
            request.onsuccess = function () {
                if (!request.result) {
                    onError2();
                    return;
                }
                data.push(request.result.key);
                request.result.continue();
            };
            break;
        case "length":
            request = objectStore.count();
            break;
        case "removeItem":
            request = objectStore.delete(String(option.key));
            break;
        case "setItem":
            request = objectStore.put(option.value, String(option.key));
            break;
        }
        ["onabort", "onerror", "onsuccess"].forEach(function (handler) {
            request[handler] = request[handler] || onError2;
        });
        // debug request
        local._debugStorageRequest = request;
    } else {
        switch (option.action) {
        case "clear":
            child_process.spawnSync("rm -f " + storage + "/*", {
                shell: true,
                stdio: ["ignore", 1, 2]
            });
            setTimeout(onError);
            break;
        case "getItem":
            fs.readFile(
                storage + "/" + encodeURIComponent(String(option.key)),
                "utf8",
                function (ignore, data) {
                    onError(null, data || "");
                }
            );
            break;
        case "keys":
            fs.readdir(storage, function (error, data) {
                onError(error, data && data.map(decodeURIComponent));
            });
            break;
        case "length":
            fs.readdir(storage, function (error, data) {
                onError(error, data && data.length);
            });
            break;
        case "removeItem":
            fs.unlink(
                storage + "/" + encodeURIComponent(String(option.key)),
                // ignore error
                function () {
                    onError();
                }
            );
            break;
        case "setItem":
            tmp = os.tmpdir() + "/" + Date.now() + Math.random();
            // save to tmp
            fs.writeFile(tmp, option.value, function (error) {
                // validate no error occurred
                local.assertThrow(!error, error);
                // rename tmp to key
                fs.rename(
                    tmp,
                    storage + "/" + encodeURIComponent(String(option.key)),
                    onError
                );
            });
            break;
        }
    }
};

deferList = [];

getItem = function (key, onError) {
/*
 * this function will get the item with given key from storage
 */
    defer({
        action: "getItem",
        key: key
    }, onError);
};

init = function () {
/*
 * this function will init storage
 */
    var onError;
    var request;
    onError = function (error) {
        // validate no error occurred
        local.assertThrow(!error, error);
        if (local.isBrowser) {
            storage = globalThis[storageDir];
        }
        while (deferList.length) {
            deferList.shift()();
        }
    };
    if (local.isBrowser) {
        storage = globalThis[storageDir];
    }
    if (storage) {
        onError();
        return;
    }
    if (local.isBrowser) {
        // init indexedDB
        try {
            request = globalThis.indexedDB.open(storageDir);
            // debug request
            local._debugStorageRequestIndexedDB = request;
            request.onerror = onError;
            request.onsuccess = function () {
                globalThis[storageDir] = request.result;
                onError();
            };
            request.onupgradeneeded = function () {
                if (!request.result.objectStoreNames.contains(storageDir)) {
                    request.result.createObjectStore(storageDir);
                }
            };
        } catch (ignore) {}
    } else {
        // mkdirp storage
        storage = storageDir;
        child_process.spawnSync("mkdir", ["-p", storage], {
            stdio: ["ignore", 1, 2]
        });
        onError();
    }
};

keys = function (onError) {
/*
 * this function will get all the keys in storage
 */
    defer({
        action: "keys"
    }, onError);
};

length = function (onError) {
/*
 * this function will get the number of items in storage
 */
    defer({
        action: "length"
    }, onError);
};

removeItem = function (key, onError) {
/*
 * this function will remove the item with given key from storage
 */
    defer({
        action: "removeItem",
        key: key
    }, onError);
};

setItem = function (key, value, onError) {
/*
 * this function will set the item with given key and value to storage
 */
    defer({
        action: "setItem",
        key: key,
        value: value
    }, onError);
};

// init local
local.storage = storage;
local.storageClear = clear;
local.storageDefer = defer;
local.storageDeferList = deferList;
local.storageDir = storageDir;
local.storageGetItem = getItem;
local.storageInit = init;
local.storageKeys = keys;
local.storageLength = length;
local.storageRemoveItem = removeItem;
local.storageSetItem = setItem;
}(local));



// run shared js-env code - lib.dbTable.js
(function () {
local._DbTable = function (option) {
/*
 * this function will create a dbTable
 */
    this.name = String(option.name);
    // register dbTable in dbTableDict
    local.dbTableDict[this.name] = this;
    this.dbRowList = [];
    this.isDirty = null;
    this.idIndexList = [{
        isInteger: false,
        name: "_id",
        dict: {}
    }];
    this.onSaveList = [];
    this.sizeLimit = option.sizeLimit || 0;
};

local._DbTable.prototype._cleanup = function () {
/*
 * this function will cleanup soft-deleted records from the dbTable
 */
    var dbRow;
    var ii;
    var list;
    if (!this.isDirty && this.dbRowList.length <= this.sizeLimit) {
        return;
    }
    this.isDirty = null;
    // cleanup dbRowList
    list = this.dbRowList;
    this.dbRowList = [];
    // optimization - while-loop
    ii = 0;
    while (ii < list.length) {
        dbRow = list[ii];
        // cleanup isRemoved
        if (!dbRow.$isRemoved) {
            this.dbRowList.push(dbRow);
        }
        ii += 1;
    }
    if (this.sizeLimit && this.dbRowList.length >= 1.5 * this.sizeLimit) {
        this.dbRowList = this._crudGetManyByQuery({}, this.sortDefault, 0, this.sizeLimit);
    }
};

local._DbTable.prototype._crudGetManyByQuery = function (
    query,
    sort,
    skip,
    limit,
    shuffle
) {
/*
 * this function will get the dbRow's in the dbTable,
 * with given query, sort, skip, and limit
 */
    var ii;
    var result;
    result = this.dbRowList;
    // get by query
    if (result.length && query && Object.keys(query).length) {
        result = local.dbRowListGetManyByQuery(this.dbRowList, query);
    }
    // sort
    (sort || []).forEach(function (element) {
        // bug-workaround - v8 does not have stable-sort
        // optimization - while-loop
        ii = 0;
        while (ii < result.length) {
            result[ii].$ii = ii;
            ii += 1;
        }
        result.sort(function (aa, bb) {
            return local.sortCompare(
                local.dbRowGetItem(aa, element.fieldName),
                local.dbRowGetItem(bb, element.fieldName),
                aa.$ii,
                bb.$ii
            );
        });
        if (element.isDescending) {
            result.reverse();
        }
    });
    // skip
    result = result.slice(skip || 0);
    // shuffle
    local.functionOrNop(shuffle && local.listShuffle)(result);
    // limit
    result = result.slice(0, limit || Infinity);
    return result;
};

local._DbTable.prototype._crudGetOneById = function (idDict) {
/*
 * this function will get the dbRow in the dbTable with given idDict
 */
    var id;
    var result;
    idDict = local.objectSetOverride(idDict);
    result = null;
    this.idIndexList.some(function (idIndex) {
        id = idDict[idIndex.name];
        // optimization - hasOwnProperty
        if (idIndex.dict.hasOwnProperty(id)) {
            result = idIndex.dict[id];
            return result;
        }
    });
    return result;
};

local._DbTable.prototype._crudRemoveOneById = function (idDict, circularList) {
/*
 * this function will remove the dbRow from the dbTable with given idDict
 */
    var id;
    var result;
    var that;
    if (!idDict) {
        return null;
    }
    that = this;
    circularList = circularList || [idDict];
    result = null;
    that.idIndexList.forEach(function (idIndex) {
        id = idDict[idIndex.name];
        // optimization - hasOwnProperty
        if (!idIndex.dict.hasOwnProperty(id)) {
            return;
        }
        result = idIndex.dict[id];
        delete idIndex.dict[id];
        // optimization - soft-delete
        result.$isRemoved = true;
        that.isDirty = true;
        if (circularList.indexOf(result) >= 0) {
            return;
        }
        circularList.push(result);
        // recurse
        that._crudRemoveOneById(result, circularList);
    });
    that.save();
    return result;
};

local._DbTable.prototype._crudSetOneById = function (dbRow) {
/*
 * this function will set the dbRow into the dbTable with given dbRow._id
 * WARNING - existing dbRow with conflicting dbRow._id will be removed
 */
    var existing;
    var id;
    var normalize;
    var timeNow;
    normalize = function (dbRow) {
    /*
     * this function will recursively normalize dbRow
     */
        switch (typeof dbRow) {
        case "boolean":
        case "string":
            return dbRow;
        case "number":
            return (
                Number.isFinite(dbRow)
                ? dbRow
                : undefined
            );
        case "object":
            if (!dbRow) {
                return;
            }
            break;
        default:
            return;
        }
        Object.keys(dbRow).forEach(function (key) {
            dbRow[key] = (
                (key[0] === "$" || key.indexOf(".") >= 0)
                // invalid-property
                ? undefined
                // recurse
                : normalize(dbRow[key])
            );
        });
        return dbRow;
    };
    dbRow = local.jsonCopy(local.objectSetOverride(dbRow));
    // update timestamp
    timeNow = new Date().toISOString();
    dbRow._timeCreated = dbRow._timeCreated || timeNow;
    if (!local.modeImport) {
        dbRow._timeUpdated = timeNow;
    }
    // normalize
    dbRow = normalize(dbRow);
    dbRow = local.jsonCopy(dbRow);
    // remove existing dbRow
    existing = this._crudRemoveOneById(dbRow) || dbRow;
    this.idIndexList.forEach(function (idIndex) {
        // auto-set id
        id = local.dbRowSetId(existing, idIndex);
        // copy id from existing to dbRow
        dbRow[idIndex.name] = id;
        // set dbRow
        idIndex.dict[id] = dbRow;
    });
    // update dbRowList
    this.dbRowList.push(dbRow);
    this.save();
    return dbRow;
};

local._DbTable.prototype._crudUpdateOneById = function (dbRow) {
/*
 * this function will update the dbRow in the dbTable,
 * if it exists with given dbRow._id
 * WARNING
 * existing dbRow's with conflicting unique-keys (besides the one being updated)
 * will be removed
 */
    var id;
    var result;
    dbRow = local.jsonCopy(local.objectSetOverride(dbRow));
    result = {};
    this.idIndexList.some(function (idIndex) {
        id = dbRow[idIndex.name];
        // optimization - hasOwnProperty
        if (idIndex.dict.hasOwnProperty(id)) {
            result = idIndex.dict[id];
            return true;
        }
    });
    // remove existing dbRow
    result = local.jsonCopy(this._crudRemoveOneById(result)) || result;
    // update dbRow
    delete dbRow._timeCreated;
    local.objectSetOverride(result, dbRow, 10);
    // replace dbRow
    result = this._crudSetOneById(result);
    return result;
};

local._DbTable.prototype.crudCountAll = function (onError) {
/*
 * this function will count all of dbRow's in the dbTable
 */
    this._cleanup();
    return local.setTimeoutOnError(onError, 0, null, this.dbRowList.length);
};

local._DbTable.prototype.crudCountManyByQuery = function (query, onError) {
/*
 * this function will count the number of dbRow's in the dbTable with given query
 */
    this._cleanup();
    return local.setTimeoutOnError(
        onError,
        0,
        null,
        this._crudGetManyByQuery(query).length
    );
};

local._DbTable.prototype.crudGetManyById = function (idDictList, onError) {
/*
 * this function will get the dbRow's in the dbTable with given idDictList
 */
    var that;
    this._cleanup();
    that = this;
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        (idDictList || []).map(function (idDict) {
            return that._crudGetOneById(idDict);
        })
    ));
};

local._DbTable.prototype.crudGetManyByQuery = function (option, onError) {
/*
 * this function will get the dbRow's in the dbTable with given option.query
 */
    this._cleanup();
    option = local.objectSetOverride(option);
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this._crudGetManyByQuery(
            option.query,
            option.sort || this.sortDefault,
            option.skip,
            option.limit,
            option.shuffle
        ),
        option.fieldList
    ));
};

local._DbTable.prototype.crudGetOneById = function (idDict, onError) {
/*
 * this function will get the dbRow in the dbTable with given idDict
 */
    this._cleanup();
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this._crudGetOneById(idDict)
    ));
};

local._DbTable.prototype.crudGetOneByQuery = function (query, onError) {
/*
 * this function will get the dbRow in the dbTable with given query
 */
    var ii;
    var result;
    this._cleanup();
    // optimization - while-loop
    ii = 0;
    while (ii < this.dbRowList.length) {
        result = local.dbRowListGetManyByQuery([this.dbRowList[ii]], query)[0];
        if (result) {
            break;
        }
        ii += 1;
    }
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(result));
};

local._DbTable.prototype.crudGetOneByRandom = function (onError) {
/*
 * this function will get a random dbRow in the dbTable
 */
    this._cleanup();
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this.dbRowList[Math.floor(Math.random() * this.dbRowList.length)]
    ));
};

local._DbTable.prototype.crudRemoveAll = function (onError) {
/*
 * this function will remove all of the dbRow's from the dbTable
 */
    var idIndexList;
    // save idIndexList
    idIndexList = this.idIndexList;
    // reset dbTable
    local._DbTable.call(this, this);
    // restore idIndexList
    local.dbTableCreateOne({
        name: this.name,
        idIndexCreateList: idIndexList
    }, onError);
};

local._DbTable.prototype.crudRemoveManyById = function (idDictList, onError) {
/*
 * this function will remove the dbRow's from the dbTable with given idDictList
 */
    var that;
    that = this;
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        (idDictList || []).map(function (dbRow) {
            return that._crudRemoveOneById(dbRow);
        })
    ));
};

local._DbTable.prototype.crudRemoveManyByQuery = function (query, onError) {
/*
 * this function will remove the dbRow's from the dbTable with given query
 */
    var that;
    that = this;
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        that._crudGetManyByQuery(query).map(function (dbRow) {
            return that._crudRemoveOneById(dbRow);
        })
    ));
};

local._DbTable.prototype.crudRemoveOneById = function (idDict, onError) {
/*
 * this function will remove the dbRow from the dbTable with given idDict
 */
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this._crudRemoveOneById(idDict)
    ));
};

local._DbTable.prototype.crudSetManyById = function (dbRowList, onError) {
/*
 * this function will set the dbRowList into the dbTable
 */
    var that;
    that = this;
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        (dbRowList || []).map(function (dbRow) {
            return that._crudSetOneById(dbRow);
        })
    ));
};

local._DbTable.prototype.crudSetOneById = function (dbRow, onError) {
/*
 * this function will set the dbRow into the dbTable with given dbRow._id
 */
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this._crudSetOneById(dbRow)
    ));
};

local._DbTable.prototype.crudUpdateManyById = function (dbRowList, onError) {
/*
 * this function will update the dbRowList in the dbTable,
 * if they exist with given dbRow._id's
 */
    var that;
    that = this;
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        (dbRowList || []).map(function (dbRow) {
            return that._crudUpdateOneById(dbRow);
        })
    ));
};

local._DbTable.prototype.crudUpdateManyByQuery = function (query, dbRow, onError) {
/*
 * this function will update the dbRow's in the dbTable with given query
 */
    var result;
    var that;
    var tmp;
    that = this;
    tmp = local.jsonCopy(local.objectSetOverride(dbRow));
    result = that._crudGetManyByQuery(query).map(function (dbRow) {
        tmp._id = dbRow._id;
        return that._crudUpdateOneById(tmp);
    });
    return local.setTimeoutOnError(onError, 0, null, result);
};

local._DbTable.prototype.crudUpdateOneById = function (dbRow, onError) {
/*
 * this function will update the dbRow in the dbTable,
 * if it exists with given dbRow._id
 */
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this._crudUpdateOneById(dbRow)
    ));
};

local._DbTable.prototype.drop = function (onError) {
/*
 * this function will drop the dbTable
 */
    console.error("db - dropping dbTable " + this.name + " ...");
    // cancel pending save
    this.timerSave = null;
    while (this.onSaveList.length) {
        this.onSaveList.shift()();
    }
    // reset dbTable
    local._DbTable.call(this, this);
    // clear persistence
    local.storageRemoveItem("dbTable." + this.name + ".json", onError);
};

local._DbTable.prototype.export = function (onError) {
/*
 * this function will export the db
 */
    var result;
    var that;
    this._cleanup();
    that = this;
    result = "";
    that.idIndexList.forEach(function (idIndex) {
        result += that.name + " idIndexCreate " + JSON.stringify({
            isInteger: idIndex.isInteger,
            name: idIndex.name
        }) + "\n";
    });
    result += that.name + " sizeLimit " + that.sizeLimit + "\n";
    result += that.name + " sortDefault " + JSON.stringify(that.sortDefault) + "\n";
    that.crudGetManyByQuery({}).forEach(function (dbRow) {
        result += that.name + " dbRowSet " + JSON.stringify(dbRow) + "\n";
    });
    return local.setTimeoutOnError(onError, 0, null, result.trim());
};

local._DbTable.prototype.idIndexCreate = function (option, onError) {
/*
 * this function will create an idIndex with given option.name
 */
    var dbRow;
    var idIndex;
    var ii;
    var name;
    option = local.objectSetOverride(option);
    name = String(option.name);
    // disallow idIndex with dot-name
    if (name.indexOf(".") >= 0 || name === "_id") {
        return local.setTimeoutOnError(onError);
    }
    // remove existing idIndex
    this.idIndexRemove(option);
    // init idIndex
    idIndex = {
        dict: {},
        isInteger: Boolean(option.isInteger),
        name: name
    };
    this.idIndexList.push(idIndex);
    // populate idIndex with dbRowList
    // optimization - while-loop
    ii = 0;
    while (ii < this.dbRowList.length) {
        dbRow = this.dbRowList[ii];
        // auto-set id
        if (!dbRow.$isRemoved) {
            idIndex.dict[local.dbRowSetId(dbRow, idIndex)] = dbRow;
        }
        ii += 1;
    }
    this.save();
    return local.setTimeoutOnError(onError);
};

local._DbTable.prototype.idIndexRemove = function (option, onError) {
/*
 * this function will remove the idIndex with given option.name
 */
    var name;
    option = local.objectSetOverride(option);
    name = String(option.name);
    this.idIndexList = this.idIndexList.filter(function (idIndex) {
        return idIndex.name !== name || idIndex.name === "_id";
    });
    this.save();
    return local.setTimeoutOnError(onError);
};

local._DbTable.prototype.save = function (onError) {
/*
 * this function will save the dbTable to storage
 */
    var that;
    that = this;
    if (local.modeImport) {
        return;
    }
    if (onError) {
        that.onSaveList.push(onError);
    }
    // throttle storage-writes to once every 1000 ms
    that.timerSave = that.timerSave || setTimeout(function () {
        that.timerSave = null;
        local.storageSetItem("dbTable." + that.name + ".json", that.export(), function (
            error
        ) {
            while (that.onSaveList.length) {
                that.onSaveList.shift()(error);
            }
        });
    }, 1000);
};

local.dbCrudRemoveAll = function (onError) {
/*
 * this function will remove all dbRow's from the db
 */
    var onParallel;
    onParallel = local.onParallel(function (error) {
        local.setTimeoutOnError(onError, 0, error);
    });
    onParallel.counter += 1;
    Object.keys(local.dbTableDict).forEach(function (key) {
        onParallel.counter += 1;
        local.dbTableDict[key].crudRemoveAll(onParallel);
    });
    onParallel();
};

local.dbDrop = function (onError) {
/*
 * this function will drop the db
 */
    var onParallel;
    console.error("db - dropping database ...");
    onParallel = local.onParallel(function (error) {
        local.setTimeoutOnError(onError, 0, error);
    });
    onParallel.counter += 1;
    onParallel.counter += 1;
    local.storageClear(onParallel);
    Object.keys(local.dbTableDict).forEach(function (key) {
        onParallel.counter += 1;
        local.dbTableDict[key].drop(onParallel);
    });
    onParallel();
};

local.dbExport = function (onError) {
/*
 * this function will export the db as serialized text
 */
    var result;
    result = "";
    Object.keys(local.dbTableDict).forEach(function (key) {
        console.error("db - exporting dbTable " + local.dbTableDict[key].name + " ...");
        result += local.dbTableDict[key].export();
        result += "\n\n";
    });
    return local.setTimeoutOnError(onError, 0, null, result.trim());
};

local.dbImport = function (text, onError) {
/*
 * this function will import the serialized text into the db
 */
    var dbTable;
    var dbTableDict;
    dbTableDict = {};
    local.modeImport = true;
    setTimeout(function () {
        local.modeImport = null;
    });
    text.replace((
        /^(\w\S*?)\u0020(\S+?)\u0020(\S.*?)$/gm
    ), function (match0, match1, match2, match3) {
        switch (match2) {
        case "dbRowSet":
            dbTableDict[match1] = true;
            dbTable = local.dbTableCreateOne({
                isLoaded: true,
                name: match1
            });
            dbTable.crudSetOneById(JSON.parse(match3));
            break;
        case "idIndexCreate":
            dbTableDict[match1] = true;
            dbTable = local.dbTableCreateOne({
                isLoaded: true,
                name: match1
            });
            dbTable.idIndexCreate(JSON.parse(match3));
            break;
        case "sizeLimit":
            dbTableDict[match1] = true;
            dbTable = local.dbTableCreateOne({
                isLoaded: true,
                name: match1
            });
            dbTable.sizeLimit = JSON.parse(match3);
            break;
        case "sortDefault":
            dbTableDict[match1] = true;
            dbTable = local.dbTableCreateOne({
                isLoaded: true,
                name: match1
            });
            dbTable.sortDefault = JSON.parse(match3);
            break;
        default:
            local.onErrorDefault(new Error(
                "db - dbImport - invalid operation - " + match0
            ));
        }
    });
    Object.keys(dbTableDict).forEach(function (name) {
        console.error("db - importing dbTable " + name + " ...");
    });
    local.modeImport = null;
    return local.setTimeoutOnError(onError);
};

local.dbLoad = function (onError) {
/*
 * this function will load the db from storage
 */
    var onParallel;
    onParallel = local.onParallel(function (error) {
        local.setTimeoutOnError(onError, 0, error);
    });
    local.storageKeys(function (error, data) {
        onParallel.counter += 1;
        // validate no error occurred
        onParallel.counter += 1;
        onParallel(error);
        (data || []).forEach(function (key) {
            if (key.indexOf("dbTable.") !== 0) {
                return;
            }
            onParallel.counter += 1;
            local.storageGetItem(key, function (error, data) {
                onParallel.counter += 1;
                onParallel(error);
                local.dbImport(data, onParallel);
            });
        });
        onParallel();
    });
};

local.dbReset = function (dbSeedList, onError) {
/*
 * this function will drop and seed the db with given dbSeedList
 */
    var onParallel;
    onParallel = globalThis.utility2_onReadyBefore || local.onParallel(onError);
    onParallel.counter += 1;
    // drop db
    onParallel.counter += 1;
    local.dbDrop(function (error) {
        local.onErrorDefault(error);
        // seed db
        local.dbSeed(dbSeedList, !globalThis.utility2_onReadyBefore && onParallel);
        local.functionOrNop(globalThis.utility2_onReadyBefore)();
    });
    local.functionOrNop(globalThis.utility2_onReadyAfter)(onError);
    onParallel();
};

local.dbRowGetItem = function (dbRow, key) {
/*
 * this function will get the item with given key from dbRow
 */
    var ii;
    var value;
    value = dbRow;
    key = String(key).split(".");
    // optimization - while-loop
    ii = 0;
    while (ii < key.length && typeof value === "object" && value) {
        value = value[key[ii]];
        ii += 1;
    }
    return (
        value === undefined
        ? null
        : value
    );
};

local.dbRowListGetManyByOperator = function (dbRowList, fieldName, operator, bb, not) {
/*
 * this function will get the dbRow's in dbRowList with given operator
 */
    var fieldValue;
    var ii;
    var jj;
    var result;
    var test;
    var typeof2;
    result = [];
    typeof2 = typeof bb;
    if (bb && typeof2 === "object") {
        switch (operator) {
        case "$in":
        case "$nin":
        case "$regex":
            break;
        default:
            return result;
        }
    }
    switch (operator) {
    case "$eq":
        test = function (aa, bb) {
            return aa === bb;
        };
        break;
    case "$exists":
        bb = !bb;
        test = function (aa, bb) {
            return !((aa === null) ^ bb); // jslint ignore:line
        };
        break;
    case "$gt":
        test = function (aa, bb, typeof1, typeof2) {
            return typeof1 === typeof2 && aa > bb;
        };
        break;
    case "$gte":
        test = function (aa, bb, typeof1, typeof2) {
            return typeof1 === typeof2 && aa >= bb;
        };
        break;
    case "$in":
        if (bb && typeof bb.indexOf === "function") {
            if (typeof2 === "string") {
                test = function (aa, bb, typeof1, typeof2) {
                    return typeof1 === typeof2 && bb.indexOf(aa) >= 0;
                };
            } else {
                test = function (aa, bb) {
                    return bb.indexOf(aa) >= 0;
                };
            }
        }
        break;
    case "$lt":
        test = function (aa, bb, typeof1, typeof2) {
            return typeof1 === typeof2 && aa < bb;
        };
        break;
    case "$lte":
        test = function (aa, bb, typeof1, typeof2) {
            return typeof1 === typeof2 && aa <= bb;
        };
        break;
    case "$ne":
        test = function (aa, bb) {
            return aa !== bb;
        };
        break;
    case "$nin":
        if (bb && typeof bb.indexOf === "function") {
            if (typeof2 === "string") {
                test = function (aa, bb, typeof1, typeof2) {
                    return typeof1 === typeof2 && bb.indexOf(aa) < 0;
                };
            } else {
                test = function (aa, bb) {
                    return bb.indexOf(aa) < 0;
                };
            }
        }
        break;
    case "$regex":
        if (bb && typeof bb.test === "function") {
            test = function (aa, bb) {
                return bb.test(aa);
            };
        }
        break;
    case "$typeof":
        test = function (ignore, bb, typeof1) {
            return typeof1 === bb;
        };
        break;
    }
    if (!test) {
        return result;
    }
    // optimization - while-loop
    ii = dbRowList.length;
    while (ii >= 1) {
        ii -= 1;
        fieldValue = local.dbRowGetItem(dbRowList[ii], fieldName);
        // normalize to list
        if (!Array.isArray(fieldValue)) {
            fieldValue = [fieldValue];
        }
        // optimization - while-loop
        jj = fieldValue.length;
        while (jj >= 1) {
            jj -= 1;
            if (Boolean(not ^ test(fieldValue[jj], bb, typeof fieldValue[jj], typeof2))) {
                result.push(dbRowList[ii]);
                break;
            }
        }
    }
    return result;
};

local.dbRowListGetManyByQuery = function (dbRowList, query, fieldName, not) {
/*
 * this function will get the dbRow's in dbRowList with given query
 */
    var bb;
    var dbRowDict;
    var result;
    // optimization - convert to boolean
    not = Boolean(not);
    result = dbRowList;
    if (!(typeof query === "object" && query)) {
        result = local.dbRowListGetManyByOperator(result, fieldName, "$eq", query, not);
        return result;
    }
    Object.keys(query).some(function (key) {
        bb = query[key];
        switch (key) {
        case "$not":
            key = fieldName;
            not = !not;
            break;
        case "$or":
            if (!Array.isArray(bb)) {
                break;
            }
            dbRowDict = {};
            bb.forEach(function (query) {
                // recurse
                local.dbRowListGetManyByQuery(result, query).forEach(function (dbRow) {
                    dbRowDict[dbRow._id] = dbRow;
                });
            });
            result = Object.keys(dbRowDict).map(function (id) {
                return dbRowDict[id];
            });
            return !result.length;
        }
        if (key[0] === "$") {
            result = local.dbRowListGetManyByOperator(result, fieldName, key, bb, not);
            return !result.length;
        }
        // recurse
        result = local.dbRowListGetManyByQuery(result, bb, key, not);
        return !result.length;
    });
    return result;
};

local.dbRowProject = function (dbRow, fieldList) {
/*
 * this function will deepcopy and project the dbRow with given fieldList
 */
    var result;
    if (!dbRow) {
        return null;
    }
    // handle list-case
    if (Array.isArray(dbRow)) {
        return dbRow.map(function (dbRow) {
            // recurse
            return local.dbRowProject(dbRow, fieldList);
        });
    }
    // normalize to list
    if (!(Array.isArray(fieldList) && fieldList.length)) {
        fieldList = Object.keys(dbRow);
    }
    result = {};
    fieldList.forEach(function (key) {
        if (key[0] !== "$") {
            result[key] = dbRow[key];
        }
    });
    return JSON.parse(local.jsonStringifyOrdered(result));
};

local.dbRowSetId = function (dbRow, idIndex) {
/*
 * this function will if does not exist,
 * then set a random and unique id into dbRow for given idIndex,
 */
    var id;
    id = dbRow[idIndex.name];
    if (typeof id !== "number" && typeof id !== "string") {
        do {
            id = (
                idIndex.isInteger
                ? (1 + Math.random()) * 0x10000000000000
                : "a" + ((1 + Math.random()) * 0x10000000000000).toString(36).slice(1)
            );
        // optimization - hasOwnProperty
        } while (idIndex.dict.hasOwnProperty(id));
        dbRow[idIndex.name] = id;
    }
    return id;
};

local.dbSave = function (onError) {
/*
 * this function will save the db to storage
 */
    var onParallel;
    onParallel = local.onParallel(function (error) {
        local.setTimeoutOnError(onError, 0, error);
    });
    onParallel.counter += 1;
    Object.keys(local.dbTableDict).forEach(function (key) {
        onParallel.counter += 1;
        local.dbTableDict[key].save(onParallel);
    });
    onParallel();
};

local.dbSeed = function (dbSeedList, onError) {
/*
 * this function will seed the db with given dbSeedList
 */
    var dbTableDict;
    var onParallel;
    dbTableDict = {};
    onParallel = globalThis.utility2_onReadyBefore || local.onParallel(onError);
    onParallel.counter += 1;
    // seed db
    onParallel.counter += 1;
    local.dbTableCreateMany(dbSeedList, onParallel);
    (dbSeedList || []).forEach(function (option) {
        dbTableDict[option.name] = true;
    });
    Object.keys(dbTableDict).forEach(function (name) {
        console.error("db - seeding dbTable " + name + " ...");
    });
    local.functionOrNop(globalThis.utility2_onReadyAfter)(onError);
    onParallel();
};

local.dbTableCreateMany = function (optionList, onError) {
/*
 * this function will create many dbTables with given optionList
 */
    var onParallel;
    var result;
    onParallel = local.onParallel(function (error) {
        local.setTimeoutOnError(onError, 0, error, result);
    });
    onParallel.counter += 1;
    result = (optionList || []).map(function (option) {
        onParallel.counter += 1;
        return local.dbTableCreateOne(option, onParallel);
    });
    return local.setTimeoutOnError(onParallel, 0, null, result);
};

local.dbTableCreateOne = function (option, onError) {
/*
 * this function will create a dbTable with given option
 */
    var DbTable;
    var that;
    option = local.objectSetOverride(option);
    // register dbTable
    DbTable = local._DbTable;
    local.dbTableDict[option.name] = local.dbTableDict[option.name] || new DbTable(option);
    that = local.dbTableDict[option.name];
    that.sortDefault = (
        option.sortDefault
        || that.sortDefault
        || [{
            fieldName: "_timeUpdated",
            isDescending: true
        }]
    );
    // remove idIndex
    (option.idIndexRemoveList || []).forEach(function (idIndex) {
        that.idIndexRemove(idIndex);
    });
    // create idIndex
    (option.idIndexCreateList || []).forEach(function (idIndex) {
        that.idIndexCreate(idIndex);
    });
    // upsert dbRow
    that.crudSetManyById(option.dbRowList);
    // restore dbTable from persistent-storage
    that.isLoaded = that.isLoaded || option.isLoaded;
    if (!that.isLoaded) {
        local.storageGetItem("dbTable." + that.name + ".json", function (error, data) {
            // validate no error occurred
            local.assertThrow(!error, error);
            if (!that.isLoaded) {
                local.dbImport(data);
            }
            that.isLoaded = true;
            local.setTimeoutOnError(onError, 0, null, that);
        });
        return that;
    }
    return local.setTimeoutOnError(onError, 0, null, that);
};

local.dbTableDict = {};

local.onEventDomDb = function (event) {
/*
 * this function will handle db dom-events
 */
    var ajaxProgressUpdate;
    var reader;
    var tmp;
    var utility2;
    utility2 = globalThis.utility2 || {};
    ajaxProgressUpdate = utility2.ajaxProgressUpdate || local.nop;
    switch (event.target.dataset.onEventDomDb || event.target.id) {
    case "dbExportButton1":
        tmp = globalThis.URL.createObjectURL(new globalThis.Blob([local.dbExport()]));
        document.querySelector(
            "#dbExportA1"
        ).href = tmp;
        document.querySelector(
            "#dbExportA1"
        ).click();
        setTimeout(function () {
            globalThis.URL.revokeObjectURL(tmp);
        }, 30000);
        break;
    case "dbImportButton1":
        tmp = document.querySelector(
            "#dbImportInput1"
        );
        if (!tmp.onEventDomDb) {
            tmp.onEventDomDb = local.onEventDomDb;
            tmp.addEventListener("change", local.onEventDomDb);
        }
        tmp.click();
        break;
    case "dbImportInput1":
        if (event.type !== "change") {
            return;
        }
        ajaxProgressUpdate();
        reader = new FileReader();
        tmp = document.querySelector(
            "#dbImportInput1"
        ).files[0];
        if (!tmp) {
            return;
        }
        reader.addEventListener("load", function () {
            local.dbImport(reader.result);
            ajaxProgressUpdate();
        });
        reader.readAsText(tmp);
        break;
    case "dbResetButton1":
        ajaxProgressUpdate();
        local.dbReset(globalThis.utility2_dbSeedList, function (error) {
            local.onErrorDefault(error);
            if (
                utility2.uiEventListenerDict
                && typeof utility2.uiEventListenerDict[".onEventUiReload"] === "function"
            ) {
                utility2.uiEventListenerDict[".onEventUiReload"]();
            }
        });
        break;
    }
};

local.sortCompare = function (aa, bb, ii, jj) {
/*
 * this function will compare aa vs bb and return:
 * -1 if aa < bb
 *  0 if aa === bb
 *  1 if aa > bb
 * the priority for comparing different typeof's is:
 * null < boolean < number < string < object < undefined
 */
    var typeof1;
    var typeof2;
    if (aa === bb) {
        return (
            ii < jj
            ? -1
            : 1
        );
    }
    if (aa === null) {
        return -1;
    }
    if (bb === null) {
        return 1;
    }
    typeof1 = typeof aa;
    typeof2 = typeof bb;
    if (typeof1 === typeof2) {
        return (
            typeof1 === "object"
            ? 0
            : aa > bb
            ? 1
            : -1
        );
    }
    if (typeof1 === "boolean") {
        return -1;
    }
    if (typeof2 === "boolean") {
        return 1;
    }
    if (typeof1 === "number") {
        return -1;
    }
    if (typeof2 === "number") {
        return 1;
    }
    if (typeof1 === "string") {
        return -1;
    }
    if (typeof2 === "string") {
        return 1;
    }
    return 0;
};
}());



// run node js-env code - init-after
/* istanbul ignore next */
(function () {
if (local.isBrowser) {
    return;
}



local.cliDict = {};

local.cliDict.dbTableCrudGetManyByQuery = function () {
/*
 * <dbTable> <query>
 * will get from <dbTable> with json <query>, <dbRowList>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        console.log(JSON.stringify(that.crudGetManyByQuery(
            JSON.parse(process.argv[4] || "{}")
        ), null, 4));
    });
};

local.cliDict.dbTableCrudRemoveManyByQuery = function () {
/*
 * <dbTable> <query>
 * will remove from <dbTable> with json <query>, <dbRowList>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        console.log(JSON.stringify(that.crudRemoveManyByQuery(
            JSON.parse(process.argv[4])
        ), null, 4));
    });
};

local.cliDict.dbTableCrudSetManyById = function () {
/*
 * <dbTable> <dbRowList>
 * will set in <dbTable>, <dbRowList>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        that.crudSetManyById(JSON.parse(process.argv[4]));
    });
};

local.cliDict.dbTableHeaderDictGet = function () {
/*
 * <dbTable>
 * will get from <dbTable>, <headerDict>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        var tmp;
        tmp = [];
        that.idIndexList.forEach(function (idIndex) {
            tmp.push({
                isInteger: idIndex.isInteger,
                name: idIndex.name
            });
        });
        console.log(JSON.stringify({
            idIndexList: tmp,
            sizeLimit: that.sizeLimit,
            sortDefault: that.sortDefault
        }, null, 4));
    });
};

local.cliDict.dbTableHeaderDictSet = function () {
/*
 * <dbTable> <headerDict>
 * will set in <dbTable>, <headerDict>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        local.tmp = JSON.parse(process.argv[4]);
        that.sizeLimit = local.tmp.sizeLimit || that.sizeLimit;
        that.sortDefault = local.tmp.sortDefault || that.sortDefault;
        that.save();
        local.tmp = [];
        that.idIndexList.forEach(function (idIndex) {
            local.tmp.push({
                isInteger: idIndex.isInteger,
                name: idIndex.name
            });
        });
        local.cliDict.dbTableHeaderDictGet();
    });
};

local.cliDict.dbTableIdIndexCreate = function () {
/*
 * <dbTable> <idIndex>
 * will create in <dbTable>, <idIndex>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        that.idIndexCreate(JSON.parse(process.argv[4]));
        that.save();
        local.tmp = [];
        that.idIndexList.forEach(function (idIndex) {
            local.tmp.push({
                isInteger: idIndex.isInteger,
                name: idIndex.name
            });
        });
        local.cliDict.dbTableHeaderDictGet();
    });
};

local.cliDict.dbTableIdIndexRemove = function () {
/*
 * <dbTable> <idIndex>
 * will remove from <dbTable>, <idIndex>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        that.idIndexRemove(JSON.parse(process.argv[4]));
        that.save();
        local.cliDict.dbTableHeaderDictGet();
    });
};

local.cliDict.dbTableList = function () {
/*
 *
 * will get from db, <dbTableList>
 */
    local.storageKeys(function (error, data) {
        // validate no error occurred
        local.assertThrow(!error, error);
        console.log(JSON.stringify(data.map(function (element) {
            return element.split(".").slice(1, -1).join(".");
        }), null, 4));
    });
};

local.cliDict.dbTableRemove = function () {
/*
 * <dbTable>
 * will remove from db, <dbTable>
 */
    local.storageRemoveItem("dbTable." + process.argv[3] + ".json", function (error) {
        // validate no error occurred
        local.assertThrow(!error, error);
        local.cliDict.dbTableList();
    });
};

// run cli
if (module === require.main && !globalThis.utility2_rollup) {
    local.cliRun();
}
}());



}());
/* script-end /assets.utility2.lib.db.js */



/* script-begin /assets.utility2.lib.github_crud.js */
// usr/bin/env node
/*
 * lib.github_crud.js (2018.8.8)
 * https://github.com/kaizhu256/node-github-crud
 * this zero-dependency package will provide a simple cli-tool to PUT / GET / DELETE github files
 *
 */



/* istanbul instrument in package github_crud */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



/* istanbul ignore next */
// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    // || globalThis.utility2_rollup_old
    // || require("./assets.utility2.rollup.js")
    || globalThis.globalLocal
);
// init exports
if (local.isBrowser) {
    globalThis.utility2_github_crud = local;
} else {
    module.exports = local;
    module.exports.__dirname = __dirname;
}
// init lib main
local.github_crud = local;



/* validateLineSortedReset */
local.ajax = function (option, onError) {
/*
 * this function will send an ajax-request with given <option>.url,
 * with error-handling and timeout
 * example usage:
    local.ajax({
        data: "hello world",
        header: {"x-header-hello": "world"},
        method: "POST",
        url: "/index.html"
    }, function (error, xhr) {
        console.log(xhr.statusCode);
        console.log(xhr.responseText);
    });
 */
    var ajaxProgressUpdate;
    var bufferValidateAndCoerce;
    var isDone;
    var local2;
    var onEvent;
    var streamCleanup;
    var timeout;
    var tmp;
    var xhr;
    var xhrInit;
    // init local2
    local2 = local.utility2 || {};
    // init function
    ajaxProgressUpdate = local2.ajaxProgressUpdate || local.nop;
    bufferValidateAndCoerce = local2.bufferValidateAndCoerce || function (
        bff,
        mode
    ) {
    /*
     * this function will validate and coerce/convert <bff> -> Buffer
     * (or String if <mode> = "string")
     */
        // coerce ArrayBuffer -> Buffer
        if (Object.prototype.toString.call(bff) === "[object ArrayBuffer]") {
            bff = new Uint8Array(bff);
        }
        // convert Buffer -> utf8
        if (mode === "string" && typeof bff !== "string") {
            bff = String(bff);
        }
        return bff;
    };
    onEvent = function (event) {
    /*
     * this function will handle events
     */
        if (Object.prototype.toString.call(event) === "[object Error]") {
            xhr.error = xhr.error || event;
            xhr.onEvent({
                type: "error"
            });
            return;
        }
        // init statusCode
        xhr.statusCode = (xhr.statusCode || xhr.status) | 0;
        switch (event.type) {
        case "abort":
        case "error":
        case "load":
            if (isDone) {
                return;
            }
            isDone = true;
            // decrement ajaxProgressCounter
            local2.ajaxProgressCounter = Math.max(
                local2.ajaxProgressCounter - 1,
                0
            );
            ajaxProgressUpdate();
            // handle abort or error event
            switch (!xhr.error && event.type) {
            case "abort":
            case "error":
                xhr.error = new Error("ajax - event " + event.type);
                break;
            case "load":
                if (xhr.statusCode >= 400) {
                    xhr.error = new Error(
                        "ajax - statusCode " + xhr.statusCode
                    );
                }
                break;
            }
            // debug statusCode / method / url
            if (xhr.error) {
                xhr.statusCode = xhr.statusCode || 500;
                xhr.error.statusCode = xhr.statusCode;
                tmp = (
                    // ternary-condition
                    (
                        local.isBrowser
                        ? "browser"
                        : "node"
                    )
                    + " - " + xhr.statusCode + " " + xhr.method + " " + xhr.url
                    + "\n"
                );
                xhr.error.message = tmp + xhr.error.message;
                xhr.error.stack = tmp + xhr.error.stack;
            }
            // update responseHeaders
            // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders
            if (xhr.getAllResponseHeaders) {
                xhr.getAllResponseHeaders().replace((
                    /(.*?):\u0020*(.*?)\r\n/g
                ), function (ignore, match1, match2) {
                    xhr.responseHeaders[match1.toLowerCase()] = match2;
                });
            }
            // debug ajaxResponse
            xhr.responseContentLength = (
                xhr.response
                && (xhr.response.byteLength || xhr.response.length)
            ) | 0;
            xhr.timeElapsed = Date.now() - xhr.timeStart;
            if (xhr.modeDebug) {
                console.error("serverLog - " + JSON.stringify({
                    time: new Date(xhr.timeStart).toISOString(),
                    type: "ajaxResponse",
                    method: xhr.method,
                    url: xhr.url,
                    statusCode: xhr.statusCode,
                    timeElapsed: xhr.timeElapsed,
                    // extra
                    responseContentLength: xhr.responseContentLength
                }));
            }
            // init responseType
            // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType
            switch (xhr.response && xhr.responseType) {
            // init responseText
            // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseText
            case "":
            case "text":
                if (typeof xhr.responseText === "string") {
                    break;
                }
                xhr.responseText = bufferValidateAndCoerce(
                    xhr.response,
                    "string"
                );
                break;
            case "arraybuffer":
                xhr.responseBuffer = bufferValidateAndCoerce(xhr.response);
                break;
            }
            // cleanup timerTimeout
            clearTimeout(xhr.timerTimeout);
            // cleanup requestStream and responseStream
            streamCleanup(xhr.requestStream);
            streamCleanup(xhr.responseStream);
            onError(xhr.error, xhr);
            break;
        }
    };
    streamCleanup = function (stream) {
    /*
     * this function will try to end or destroy the stream
     */
        var error;
        // try to end the stream
        try {
            stream.end();
        } catch (errorCaught) {
            error = errorCaught;
        }
        // if error, then try to destroy the stream
        if (error) {
            try {
                stream.destroy();
            } catch (ignore) {}
        }
    };
    xhrInit = function () {
    /*
     * this function will init xhr
     */
        // init option
        Object.keys(option).forEach(function (key) {
            if (key[0] !== "_") {
                xhr[key] = option[key];
            }
        });
        // init timeout
        timeout = xhr.timeout || local2.timeoutDefault || 30000;
        // init defaults
        local.objectAssignDefault(xhr, {
            corsForwardProxyHost: local2.corsForwardProxyHost,
            headers: {},
            location: (local.isBrowser && location) || {},
            method: "GET",
            responseType: ""
        });
        // init headers
        Object.keys(xhr.headers).forEach(function (key) {
            xhr.headers[key.toLowerCase()] = xhr.headers[key];
        });
        // coerce Uint8Array -> Buffer
        if (
            !local.isBrowser
            && !Buffer.isBuffer(xhr.data)
            && Object.prototype.toString.call(xhr.data)
            === "[object Uint8Array]"
        ) {
            Object.setPrototypeOf(xhr.data, Buffer.prototype);
        }
        // init misc
        local2._debugXhr = xhr;
        xhr.onEvent = onEvent;
        xhr.responseHeaders = {};
        xhr.timeStart = xhr.timeStart || Date.now();
    };
    // init onError
    if (local2.onErrorWithStack) {
        onError = local2.onErrorWithStack(onError);
    }
    // init xhr - XMLHttpRequest
    xhr = (
        local.isBrowser
        && !option.httpRequest
        && !(local2.serverLocalUrlTest && local2.serverLocalUrlTest(option.url))
        && new XMLHttpRequest()
    );
    // init xhr - http.request
    if (!xhr) {
        xhr = local.identity(local2.urlParse || require("url").parse)(
            option.url
        );
        // init xhr
        xhrInit();
        // init xhr - http.request
        xhr = local.identity(
            option.httpRequest
            || (local.isBrowser && local2.http.request)
            || require(xhr.protocol.slice(0, -1)).request
        )(xhr, function (responseStream) {
        /*
         * this function will read the responseStream
         */
            var chunkList;
            chunkList = [];
            xhr.responseHeaders = (
                responseStream.responseHeaders
                || responseStream.headers
            );
            xhr.responseStream = responseStream;
            xhr.statusCode = responseStream.statusCode;
            responseStream.dataLength = 0;
            responseStream.on("data", function (chunk) {
                chunkList.push(chunk);
            });
            responseStream.on("end", function () {
                xhr.response = (
                    local.isBrowser
                    ? chunkList[0]
                    : Buffer.concat(chunkList)
                );
                responseStream.dataLength = (
                    xhr.response.byteLength
                    || xhr.response.length
                );
                xhr.onEvent({
                    type: "load"
                });
            });
            responseStream.on("error", xhr.onEvent);
        });
        xhr.abort = function () {
        /*
         * this function will abort the xhr-request
         * https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/abort
         */
            xhr.onEvent({
                type: "abort"
            });
        };
        xhr.addEventListener = local.nop;
        xhr.open = local.nop;
        xhr.requestStream = xhr;
        xhr.send = xhr.end;
        xhr.setRequestHeader = local.nop;
        xhr.on("error", onEvent);
    }
    // init xhr
    xhrInit();
    // init timerTimeout
    xhr.timerTimeout = setTimeout(function () {
        xhr.error = xhr.error || new Error(
            "onTimeout - timeout-error - "
            + timeout + " ms - " + "ajax " + xhr.method + " " + xhr.url
        );
        xhr.abort();
        // cleanup requestStream and responseStream
        streamCleanup(xhr.requestStream);
        streamCleanup(xhr.responseStream);
    }, timeout);
    // increment ajaxProgressCounter
    local2.ajaxProgressCounter = local2.ajaxProgressCounter || 0;
    local2.ajaxProgressCounter += 1;
    // init event-handling
    xhr.addEventListener("abort", xhr.onEvent);
    xhr.addEventListener("error", xhr.onEvent);
    xhr.addEventListener("load", xhr.onEvent);
    xhr.addEventListener("loadstart", ajaxProgressUpdate);
    xhr.addEventListener("progress", ajaxProgressUpdate);
    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/upload
    if (xhr.upload && xhr.upload.addEventListener) {
        xhr.upload.addEventListener("progress", ajaxProgressUpdate);
    }
    // open url - corsForwardProxyHost
    if (local.functionOrNop(local2.corsForwardProxyHostIfNeeded)(xhr)) {
        xhr.open(xhr.method, local2.corsForwardProxyHostIfNeeded(xhr));
        xhr.setRequestHeader(
            "forward-proxy-headers",
            JSON.stringify(xhr.headers)
        );
        xhr.setRequestHeader("forward-proxy-url", xhr.url);
    // open url - default
    } else {
        xhr.open(xhr.method, xhr.url);
    }
    // send headers
    Object.keys(xhr.headers).forEach(function (key) {
        xhr.setRequestHeader(key, xhr.headers[key]);
    });
    // send data
    switch ((xhr.data && xhr.data.constructor) || true) {
    // Blob
    // https://developer.mozilla.org/en-US/docs/Web/API/Blob
    case local2.Blob:
    // FormData
    // https://developer.mozilla.org/en-US/docs/Web/API/FormData
    case local2.FormData:
        local2.blobRead(xhr.data, function (error, data) {
            if (error) {
                xhr.onEvent(error);
                return;
            }
            // send data
            xhr.send(data);
        });
        break;
    default:
        xhr.send(xhr.data);
    }
    return xhr;
};

local.cliRun = function (option) {
/*
 * this function will run the cli
 */
    local.cliDict._eval = local.cliDict._eval || function () {
    /*
     * <code>
     * will eval <code>
     */
        globalThis.local = local;
        local.vm.runInThisContext(process.argv[3]);
    };
    local.cliDict["--eval"] = local.cliDict["--eval"] || local.cliDict._eval;
    local.cliDict["-e"] = local.cliDict["-e"] || local.cliDict._eval;
    local.cliDict._help = local.cliDict._help || function () {
    /*
     *
     * will print help
     */
        var commandList;
        var file;
        var packageJson;
        var text;
        var textDict;
        commandList = [{
            argList: "<arg2>  ...",
            description: "usage:",
            command: ["<arg1>"]
        }, {
            argList: "'console.log(\"hello world\")'",
            description: "example:",
            command: ["--eval"]
        }];
        file = __filename.replace((
            /.*\//
        ), "");
        option = Object.assign({}, option);
        packageJson = require("./package.json");
        // validate comment
        option.rgxComment = option.rgxComment || (
            /\)\u0020\{\n(?:|\u0020{4})\/\*\n(?:\u0020|\u0020{5})\*((?:\u0020<[^>]*?>|\u0020\.\.\.)*?)\n(?:\u0020|\u0020{5})\*\u0020(will\u0020.*?\S)\n(?:\u0020|\u0020{5})\*\/\n(?:\u0020{4}|\u0020{8})\S/
        );
        textDict = {};
        Object.keys(local.cliDict).sort().forEach(function (key, ii) {
            if (key[0] === "_" && key !== "_default") {
                return;
            }
            text = String(local.cliDict[key]);
            if (key === "_default") {
                key = "";
            }
            textDict[text] = textDict[text] || (ii + 2);
            ii = textDict[text];
            if (commandList[ii]) {
                commandList[ii].command.push(key);
                return;
            }
            try {
                commandList[ii] = option.rgxComment.exec(text);
                commandList[ii] = {
                    argList: (commandList[ii][1] || "").trim(),
                    command: [key],
                    description: commandList[ii][2]
                };
            } catch (ignore) {
                local.assertThrow(null, new Error(
                    "cliRun - cannot parse comment in COMMAND "
                    + key + ":\nnew RegExp("
                    + JSON.stringify(option.rgxComment.source)
                    + ").exec(" + JSON.stringify(text)
                    .replace((
                        /\\\\/g
                    ), "\u0000")
                    .replace((
                        /\\n/g
                    ), "\\n\\\n")
                    .replace((
                        /\u0000/g
                    ), "\\\\") + ");"
                ));
            }
        });
        text = "";
        text += packageJson.name + " (" + packageJson.version + ")\n\n";
        text += commandList
        .filter(function (element) {
            return element;
        })
        .map(function (element, ii) {
            element.command = element.command.filter(function (element) {
                return element;
            });
            switch (ii) {
            case 0:
            case 1:
                element.argList = [element.argList];
                break;
            default:
                element.argList = element.argList.split(" ");
                element.description = (
                    "# COMMAND "
                    + (element.command[0] || "<none>") + "\n# "
                    + element.description
                );
            }
            return (
                element.description + "\n  " + file
                + ("  " + element.command.sort().join("|") + "  ")
                    .replace((
                    /^\u0020{4}$/
                ), "  ")
                + element.argList.join("  ")
            );
        })
        .join("\n\n");
        console.log(text);
    };
    local.cliDict["--help"] = local.cliDict["--help"] || local.cliDict._help;
    local.cliDict["-h"] = local.cliDict["-h"] || local.cliDict._help;
    local.cliDict._default = local.cliDict._default || local.cliDict._help;
    local.cliDict.help = local.cliDict.help || local.cliDict._help;
    local.cliDict._interactive = local.cliDict._interactive || function () {
    /*
     *
     * will start interactive-mode
     */
        globalThis.local = local;
        local.identity(local.replStart || require("repl").start)({
            useGlobal: true
        });
    };
    local.cliDict["--interactive"] = (
        local.cliDict["--interactive"]
        || local.cliDict._interactive
    );
    local.cliDict["-i"] = local.cliDict["-i"] || local.cliDict._interactive;
    local.cliDict._version = local.cliDict._version || function () {
    /*
     *
     * will print version
     */
        console.log(require(__dirname + "/package.json").version);
    };
    local.cliDict["--version"] = (
        local.cliDict["--version"]
        || local.cliDict._version
    );
    local.cliDict["-v"] = local.cliDict["-v"] || local.cliDict._version;
    // default to --help command if no arguments are given
    if (process.argv.length <= 2) {
        local.cliDict._help();
        return;
    }
    if (local.cliDict[process.argv[2]]) {
        local.cliDict[process.argv[2]]();
        return;
    }
    local.cliDict._default();
};

local.onErrorDefault = function (error) {
/*
 * this function will if <error> exists, then print it to stderr
 */
    if (error) {
        console.error(error);
    }
    return error;
};

local.onErrorWithStack = function (onError) {
/*
 * this function will create a new callback that will call onError,
 * and append the current stack to any error
 */
    var onError2;
    var stack;
    stack = new Error().stack.replace((
        /(.*?)\n.*?$/m
    ), "$1");
    onError2 = function (error, data, meta) {
        if (
            error
            && typeof error.stack === "string"
            && error !== local.errorDefault
            && String(error.stack).indexOf(stack.split("\n")[2]) < 0
        ) {
            // append the current stack to error.stack
            error.stack += "\n" + stack;
        }
        onError(error, data, meta);
    };
    // debug onError
    onError2.toString = function () {
        return String(onError);
    };
    return onError2;
};

local.onNext = function (option, onError) {
/*
 * this function will wrap onError inside the recursive function option.onNext,
 * and append the current stack to any error
 */
    option.onNext = local.onErrorWithStack(function (error, data, meta) {
        try {
            option.modeNext += (
                (error && !option.modeErrorIgnore)
                ? 1000
                : 1
            );
            if (option.modeDebug) {
                console.error("onNext - " + JSON.stringify({
                    modeNext: option.modeNext,
                    errorMessage: error && error.message
                }));
                if (error && error.stack) {
                    console.error(error.stack);
                }
            }
            onError(error, data, meta);
        } catch (errorCaught) {
            // throw errorCaught to break infinite recursion-loop
            if (option.errorCaught) {
                local.assertThrow(null, option.errorCaught);
            }
            option.errorCaught = errorCaught;
            option.onNext(errorCaught, data, meta);
        }
    });
    return option;
};

local.onParallel = function (onError, onEach, onRetry) {
/*
 * this function will create a function that will
 * 1. run async tasks in parallel
 * 2. if counter === 0 or error occurred, then call onError with error
 */
    var onParallel;
    onError = local.onErrorWithStack(onError);
    onEach = onEach || local.nop;
    onRetry = onRetry || local.nop;
    onParallel = function (error, data) {
        if (onRetry(error, data)) {
            return;
        }
        // decrement counter
        onParallel.counter -= 1;
        // validate counter
        if (!(onParallel.counter >= 0 || error || onParallel.error)) {
            error = new Error(
                "invalid onParallel.counter = " + onParallel.counter
            );
        // ensure onError is run only once
        } else if (onParallel.counter < 0) {
            return;
        }
        // handle error
        if (error) {
            onParallel.error = error;
            // ensure counter <= 0
            onParallel.counter = -Math.abs(onParallel.counter);
        }
        // call onError when isDone
        if (onParallel.counter <= 0) {
            onError(error, data);
            return;
        }
        onEach();
    };
    // init counter
    onParallel.counter = 0;
    // return callback
    return onParallel;
};

local.onParallelList = function (option, onEach, onError) {
/*
 * this function will
 * 1. async-run onEach in parallel,
 *    with given option.rateLimit and option.retryLimit
 * 2. call onError when onParallel.ii + 1 === option.list.length
 */
    var isListEnd;
    var onEach2;
    var onParallel;
    option.list = option.list || [];
    onEach2 = function () {
        while (true) {
            if (!(onParallel.ii + 1 < option.list.length)) {
                isListEnd = true;
                return;
            }
            if (!(onParallel.counter < option.rateLimit + 1)) {
                return;
            }
            onParallel.ii += 1;
            onEach({
                element: option.list[onParallel.ii],
                ii: onParallel.ii,
                list: option.list,
                retry: 0
            }, onParallel);
        }
    };
    onParallel = local.onParallel(onError, onEach2, function (error, data) {
        if (error && data && data.retry < option.retryLimit) {
            local.onErrorDefault(error);
            data.retry += 1;
            setTimeout(function () {
                onParallel.counter -= 1;
                onEach(data, onParallel);
            }, 1000);
            return true;
        }
        // restart if option.list has grown
        if (isListEnd && (onParallel.ii + 1 < option.list.length)) {
            isListEnd = null;
            onEach2();
        }
    });
    onParallel.ii = -1;
    option.rateLimit = Number(option.rateLimit) || 6;
    option.rateLimit = Math.max(option.rateLimit, 1);
    option.retryLimit = Number(option.retryLimit) || 2;
    onParallel.counter += 1;
    onEach2();
    onParallel();
};
}());



// run shared js-env code - function
(function () {
local.githubCrudAjax = function (option, onError) {
/*
 * this function will make a low-level content-request to github
 * https://developer.github.com/v3/repos/contents/
 */
    // init option
    option = {
        content: option.content,
        headers: Object.assign({
            // github oauth authentication
            Authorization: "token " + (
                typeof process === "object" && process && process.env.GITHUB_TOKEN
            ),
            // bug-workaround - https://developer.github.com/v3/#user-agent-required
            "User-Agent": "undefined"
        }, option.headers),
        httpRequest: option.httpRequest,
        message: option.message,
        method: option.method || "GET",
        responseJson: {},
        sha: option.sha,
        url: option.url
    };
    option.url = option.url
/* jslint ignore:start */
// parse https://github.com/:owner/:repo/blob/:branch/:path
.replace(
    (/^https:\/\/github.com\/([^\/]+?\/[^\/]+?)\/blob\/([^\/]+?)\/(.+)/),
    'https://api.github.com/repos/$1/contents/$3?branch=$2'
)
// parse https://github.com/:owner/:repo/tree/:branch/:path
.replace(
    (/^https:\/\/github.com\/([^\/]+?\/[^\/]+?)\/tree\/([^\/]+?)\/(.+)/),
    'https://api.github.com/repos/$1/contents/$3?branch=$2'
)
// parse https://raw.githubusercontent.com/:owner/:repo/:branch/:path
.replace(
(/^https:\/\/raw.githubusercontent.com\/([^\/]+?\/[^\/]+?)\/([^\/]+?)\/(.+)/),
    'https://api.github.com/repos/$1/contents/$3?branch=$2'
)
// parse https://:owner.github.io/:repo/:path
.replace(
    (/^https:\/\/([^\.]+?)\.github\.io\/([^\/]+?)\/(.+)/),
    'https://api.github.com/repos/$1/$2/contents/$3?branch=gh-pages'
)
// parse :owner/:repo
.replace(
    (/^([^\/]+?\/[^\/]+?)$/),
    'https://github.com/$1'
)
/* jslint ignore:end */
    .replace((
        /\?branch=(.*)/
    ), function (match0, match1) {
        option.branch = match1;
        if (option.method === "GET") {
            match0 = match0.replace("branch", "ref");
        }
        return match0;
    });
    if ((
        /^https:\/\/github\.com\/[^\/]+?\/[^\/]+?$/
    ).test(option.url)) {
        option.data = JSON.stringify({
            name: option.url.split("/")[4]
        });
        switch (option.method) {
        case "DELETE":
            option.url = (
                "https://api.github.com/repos/"
                + option.url.split("/").slice(3).join("/")
            );
            break;
        case "POST_ORG":
            option.url = (
                "https://api.github.com/orgs/"
                + option.url.split("/")[3] + "/repos"
            );
            break;
        case "POST_USER":
            option.url = "https://api.github.com/user/repos";
            break;
        }
        option.method = option.method.split("_")[0];
    } else {
        if (option.url.indexOf("https://api.github.com/repos/") !== 0) {
            console.error("githubCrud - invalid url " + option.url);
            onError(new Error("invalid url " + option.url));
            return;
        }
        if (option.method !== "GET") {
            option.message = (
                option.message
                || "[ci skip] " + option.method + " file "
                + option.url.replace((
                    /\?.*/
                ), "")
            );
            option.url += "&message=" + encodeURIComponent(option.message);
            if (option.sha) {
                option.url += "&sha=" + option.sha;
            }
            option.data = JSON.stringify({
                branch: option.branch,
                content: Buffer.from(option.content || "").toString("base64"),
                message: option.message,
                sha: option.sha
            });
        }
    }
    local.ajax(option, function (error, xhr) {
        console.error("serverLog - " + JSON.stringify({
            time: new Date(xhr.timeStart).toISOString(),
            type: "githubCrudResponse",
            method: xhr.method,
            url: xhr.url,
            statusCode: xhr.statusCode,
            timeElapsed: xhr.timeElapsed
        }));
        local.onErrorDefault(
            error
            && error.statusCode !== 404
            && xhr
            && ("githubCrud - " + xhr.responseText)
        );
        try {
            option.responseJson = JSON.parse(xhr.responseText);
        } catch (ignore) {}
        onError(
            !(option.method === "DELETE" && xhr.statusCode === 404) && error,
            option.responseJson
        );
    });
};

local.githubCrudContentDelete = function (option, onError) {
/*
 * this function will delete the github-file option.url
 * https://developer.github.com/v3/repos/contents/#delete-a-file
 */
    option = {
        httpRequest: option.httpRequest,
        message: option.message,
        url: option.url
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            // get sha
            local.githubCrudAjax({
                httpRequest: option.httpRequest,
                url: option.url
            }, option.onNext);
            break;
        case 2:
            // delete file with sha
            if (!error && data.sha) {
                local.githubCrudAjax({
                    httpRequest: option.httpRequest,
                    message: option.message,
                    method: "DELETE",
                    sha: data.sha,
                    url: option.url
                }, option.onNext);
                return;
            }
            // delete tree
            local.onParallelList({
                list: data
            }, function (option2, onParallel) {
                onParallel.counter += 1;
                // recurse
                local.githubCrudContentDelete({
                    httpRequest: option.httpRequest,
                    message: option.message,
                    url: option2.element.url
                }, onParallel);
            }, option.onNext);
            break;
        default:
            onError(error, data);
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.githubCrudContentGet = function (option, onError) {
/*
 * this function will get the github-file option.url
 * https://developer.github.com/v3/repos/contents/#get-contents
 */
    option = {
        httpRequest: option.httpRequest,
        url: option.url
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            local.githubCrudAjax({
                httpRequest: option.httpRequest,
                url: option.url
            }, option.onNext);
            break;
        case 2:
            option.onNext(null, Buffer.from(data.content || "", "base64"));
            break;
        default:
            onError(error, !error && data);
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.githubCrudContentPut = function (option, onError) {
/*
 * this function will put option.content to the github-file option.url
 * https://developer.github.com/v3/repos/contents/#create-a-file
 * https://developer.github.com/v3/repos/contents/#update-a-file
 */
    option = {
        content: option.content,
        httpRequest: option.httpRequest,
        message: option.message,
        modeErrorIgnore: true,
        url: option.url
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            // get sha
            local.githubCrudAjax({
                httpRequest: option.httpRequest,
                url: option.url
            }, option.onNext);
            break;
        case 2:
            // put file with sha
            local.githubCrudAjax({
                content: option.content,
                httpRequest: option.httpRequest,
                message: option.message,
                method: "PUT",
                sha: data.sha,
                url: option.url
            }, option.onNext);
            break;
        default:
            onError(error, data);
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.githubCrudContentPutFile = function (option, onError) {
/*
 * this function will put option.file to the github-file option.url
 * https://developer.github.com/v3/repos/contents/#update-a-file
 */
    option = {
        file: option.file,
        httpRequest: option.httpRequest,
        message: option.message,
        url: option.url
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            // get file from url
            if ((
                /^(?:http|https):\/\//
            ).test(option.file)) {
                local.ajax({
                    httpRequest: option.httpRequest,
                    url: option.file
                }, function (error, response) {
                    option.onNext(error, response && response.data);
                });
                return;
            }
            // get file
            local.fs.readFile(option.file, option.onNext);
            break;
        case 2:
            local.githubCrudContentPut({
                content: data,
                httpRequest: option.httpRequest,
                message: option.message,
                // resolve file in url
                url: (
                    // ternary-condition
                    (
                        /\/$/
                    ).test(option.url)
                    ? option.url + local.path.basename(option.file)
                    : option.url
                )
            }, option.onNext);
            break;
        default:
            onError(error, data);
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.githubCrudContentTouch = function (option, onError) {
/*
 * this function will touch the github-file option.url
 * https://developer.github.com/v3/repos/contents/#update-a-file
 */
    option = {
        httpRequest: option.httpRequest,
        message: option.message,
        modeErrorIgnore: true,
        url: option.url
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            // get sha
            local.githubCrudAjax({
                httpRequest: option.httpRequest,
                url: option.url
            }, option.onNext);
            break;
        case 2:
            // put file with sha
            local.githubCrudAjax({
                content: Buffer.from(data.content || "", "base64"),
                httpRequest: option.httpRequest,
                message: option.message,
                method: "PUT",
                sha: data.sha,
                url: option.url
            }, option.onNext);
            break;
        default:
            onError(error, data);
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.githubCrudContentTouchList = function (option, onError) {
/*
 * this function will touch the github-files option.urlList in parallel
 * https://developer.github.com/v3/repos/contents/#update-a-file
 */
    local.onParallelList({
        list: option.urlList
    }, function (option2, onParallel) {
        onParallel.counter += 1;
        local.githubCrudContentTouch({
            httpRequest: option.httpRequest,
            message: option.message,
            url: option2.element
        }, onParallel);
    }, onError);
};

local.githubCrudRepoCreate = function (option, onError) {
/*
 * this function will create the github-repo option.url
 * https://developer.github.com/v3/repos/#create
 */
    local.githubCrudAjax({
        httpRequest: option.httpRequest,
        method: "POST_ORG",
        url: option.url
    }, function (error, data) {
        if (!(error && error.statusCode === 404)) {
            onError(error, data);
            return;
        }
        local.githubCrudAjax({
            httpRequest: option.httpRequest,
            method: "POST_USER",
            url: option.url
        }, onError);
    });
};

local.githubCrudRepoCreateList = function (option, onError) {
/*
 * this function will create the github-repos option.urlList in parallel
 * https://developer.github.com/v3/repos/#create
 */
    local.onParallelList({
        list: option.urlList
    }, function (option2, onParallel) {
        onParallel.counter += 1;
        local.githubCrudRepoCreate({
            httpRequest: option.httpRequest,
            url: option2.element
        }, onParallel);
    }, onError);
};

local.githubCrudRepoDelete = function (option, onError) {
/*
 * this function will delete the github-repo option.url
 * https://developer.github.com/v3/repos/#delete-a-repository
 */
    local.githubCrudAjax({
        httpRequest: option.httpRequest,
        method: "DELETE",
        url: option.url
    }, onError);
};

local.githubCrudRepoDeleteList = function (option, onError) {
/*
 * this function will delete the github-repos option.urlList in parallel
 * https://developer.github.com/v3/repos/#delete-a-repository
 */
    local.onParallelList({
        list: option.urlList
    }, function (option2, onParallel) {
        onParallel.counter += 1;
        local.githubCrudRepoDelete({
            httpRequest: option.httpRequest,
            url: option2.element
        }, onParallel);
    }, onError);
};
}());



// run node js-env code - init-after
/* istanbul ignore next */
(function () {
if (local.isBrowser) {
    return;
}



local.cliDict = {};
local.cliDict.delete = function () {
/*
 * <fileRemote|dirRemote> <commitMessage>
 * will delete from github <fileRemote|dirRemote>
 */
    local.github_crud.githubCrudContentDelete({
        message: process.argv[4],
        url: process.argv[3]
    }, function (error) {
        process.exit(Boolean(error));
    });
};

local.cliDict.get = function () {
/*
 * <fileRemote>
 * will get from github <fileRemote>
 */
    local.github_crud.githubCrudContentGet({
        url: process.argv[3]
    }, function (error, data) {
        try {
            process.stdout.write(data);
        } catch (ignore) {}
        process.exit(Boolean(error));
    });
};

local.cliDict.put = function () {
/*
 * <fileRemote> <fileLocal> <commitMessage>
 * will put on github <fileRemote>, <fileLocal>
 */
    local.github_crud.githubCrudContentPutFile({
        message: process.argv[5],
        url: process.argv[3],
        file: process.argv[4]
    }, function (error) {
        process.exit(Boolean(error));
    });
};

local.cliDict.repo_create = function () {
/*
 * <repoList>
 * will create on github in parallel, comma-separated <repoList>
 */
    local.github_crud.githubCrudRepoCreateList({
        urlList: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (error) {
        process.exit(Boolean(error));
    });
};

local.cliDict.repo_delete = function () {
/*
 * <repoList>
 * will delete from github in parallel, comma-separated <repoList>
 */
    local.github_crud.githubCrudRepoDeleteList({
        urlList: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (error) {
        process.exit(Boolean(error));
    });
};

local.cliDict.touch = function () {
/*
 * <fileRemoteList> <commitMessage>
 * will touch on github in parallel, comma-separated <fileRemoteList>
 */
    local.github_crud.githubCrudContentTouchList({
        message: process.argv[4],
        urlList: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (error) {
        process.exit(Boolean(error));
    });
};

// run cli
if (module === require.main && !globalThis.utility2_rollup) {
    local.cliRun();
}
}());



}());
/* script-end /assets.utility2.lib.github_crud.js */



/* script-begin /assets.utility2.lib.istanbul.js */
// usr/bin/env node
/*
 * lib.istanbul.js (2018.9.10)
 * https://github.com/kaizhu256/node-istanbul-lite
 * this zero-dependency package will provide a browser-compatible version of the istanbul (v0.4.5) coverage-tool, with a working web-demo
 *
 */



/* istanbul instrument in package istanbul */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



/* istanbul ignore next */
// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    // || globalThis.utility2_rollup_old
    // || require("./assets.utility2.rollup.js")
    || globalThis.globalLocal
);
// init exports
if (local.isBrowser) {
    globalThis.utility2_istanbul = local;
} else {
    module.exports = local;
    module.exports.__dirname = __dirname;
}
// init lib main
local.istanbul = local;



/* validateLineSortedReset */
// init custom
if (!local.isBrowser) {
    local._istanbul_module = require("module");
    local.process = process;
    local.require = require;
}

local.cliRun = function (option) {
/*
 * this function will run the cli
 */
    local.cliDict._eval = local.cliDict._eval || function () {
    /*
     * <code>
     * will eval <code>
     */
        globalThis.local = local;
        local.vm.runInThisContext(process.argv[3]);
    };
    local.cliDict["--eval"] = local.cliDict["--eval"] || local.cliDict._eval;
    local.cliDict["-e"] = local.cliDict["-e"] || local.cliDict._eval;
    local.cliDict._help = local.cliDict._help || function () {
    /*
     *
     * will print help
     */
        var commandList;
        var file;
        var packageJson;
        var text;
        var textDict;
        commandList = [{
            argList: "<arg2>  ...",
            description: "usage:",
            command: ["<arg1>"]
        }, {
            argList: "'console.log(\"hello world\")'",
            description: "example:",
            command: ["--eval"]
        }];
        file = __filename.replace((
            /.*\//
        ), "");
        option = Object.assign({}, option);
        packageJson = require("./package.json");
        // validate comment
        option.rgxComment = option.rgxComment || (
            /\)\u0020\{\n(?:|\u0020{4})\/\*\n(?:\u0020|\u0020{5})\*((?:\u0020<[^>]*?>|\u0020\.\.\.)*?)\n(?:\u0020|\u0020{5})\*\u0020(will\u0020.*?\S)\n(?:\u0020|\u0020{5})\*\/\n(?:\u0020{4}|\u0020{8})\S/
        );
        textDict = {};
        Object.keys(local.cliDict).sort().forEach(function (key, ii) {
            if (key[0] === "_" && key !== "_default") {
                return;
            }
            text = String(local.cliDict[key]);
            if (key === "_default") {
                key = "";
            }
            textDict[text] = textDict[text] || (ii + 2);
            ii = textDict[text];
            if (commandList[ii]) {
                commandList[ii].command.push(key);
                return;
            }
            try {
                commandList[ii] = option.rgxComment.exec(text);
                commandList[ii] = {
                    argList: (commandList[ii][1] || "").trim(),
                    command: [key],
                    description: commandList[ii][2]
                };
            } catch (ignore) {
                local.assertThrow(null, new Error(
                    "cliRun - cannot parse comment in COMMAND "
                    + key + ":\nnew RegExp("
                    + JSON.stringify(option.rgxComment.source)
                    + ").exec(" + JSON.stringify(text)
                    .replace((
                        /\\\\/g
                    ), "\u0000")
                    .replace((
                        /\\n/g
                    ), "\\n\\\n")
                    .replace((
                        /\u0000/g
                    ), "\\\\") + ");"
                ));
            }
        });
        text = "";
        text += packageJson.name + " (" + packageJson.version + ")\n\n";
        text += commandList
        .filter(function (element) {
            return element;
        })
        .map(function (element, ii) {
            element.command = element.command.filter(function (element) {
                return element;
            });
            switch (ii) {
            case 0:
            case 1:
                element.argList = [element.argList];
                break;
            default:
                element.argList = element.argList.split(" ");
                element.description = (
                    "# COMMAND "
                    + (element.command[0] || "<none>") + "\n# "
                    + element.description
                );
            }
            return (
                element.description + "\n  " + file
                + ("  " + element.command.sort().join("|") + "  ")
                    .replace((
                    /^\u0020{4}$/
                ), "  ")
                + element.argList.join("  ")
            );
        })
        .join("\n\n");
        console.log(text);
    };
    local.cliDict["--help"] = local.cliDict["--help"] || local.cliDict._help;
    local.cliDict["-h"] = local.cliDict["-h"] || local.cliDict._help;
    local.cliDict._default = local.cliDict._default || local.cliDict._help;
    local.cliDict.help = local.cliDict.help || local.cliDict._help;
    local.cliDict._interactive = local.cliDict._interactive || function () {
    /*
     *
     * will start interactive-mode
     */
        globalThis.local = local;
        local.identity(local.replStart || require("repl").start)({
            useGlobal: true
        });
    };
    local.cliDict["--interactive"] = (
        local.cliDict["--interactive"]
        || local.cliDict._interactive
    );
    local.cliDict["-i"] = local.cliDict["-i"] || local.cliDict._interactive;
    local.cliDict._version = local.cliDict._version || function () {
    /*
     *
     * will print version
     */
        console.log(require(__dirname + "/package.json").version);
    };
    local.cliDict["--version"] = (
        local.cliDict["--version"]
        || local.cliDict._version
    );
    local.cliDict["-v"] = local.cliDict["-v"] || local.cliDict._version;
    // default to --help command if no arguments are given
    if (process.argv.length <= 2) {
        local.cliDict._help();
        return;
    }
    if (local.cliDict[process.argv[2]]) {
        local.cliDict[process.argv[2]]();
        return;
    }
    local.cliDict._default();
};

local.fsWriteFileWithMkdirpSync = function (file, data, mode) {
/*
 * this function will synchronously 'mkdir -p' and write the <data> to <file>
 */
    try {
        if (
            mode === "noWrite"
            || typeof require("fs").writeFileSync !== "function"
        ) {
            return;
        }
    } catch (ignore) {
        return;
    }
    // try to write to file
    try {
        require("fs").writeFileSync(file, data);
    } catch (ignore) {
        // mkdir -p
        require("child_process").spawnSync(
            "mkdir",
            ["-p", require("path").dirname(file)],
            {
                stdio: ["ignore", 1, 2]
            }
        );
        // re-write to file
        require("fs").writeFileSync(file, data);
    }
};
}());



// run shared js-env code - function
(function () {
var __dirname;
var process;
var require;
// jslint-hack
local.nop(__dirname, require);
/* istanbul ignore next */
globalThis.__coverageCodeDict__ = globalThis.__coverageCodeDict__ || {};
// mock builtins
__dirname = "";
process = local.process || {
    cwd: function () {
        return "";
    },
    env: {},
    stdout: {}
};
require = function (key) {
    try {
        return local["_istanbul_" + key] || local[key] || local.require(key);
    } catch (ignore) {}
};
local["./package.json"] = {};
// mock module fs
local._istanbul_fs = {};
local._istanbul_fs.readFileSync = function (file) {
    // return head.txt or foot.txt
    file = local[file.slice(-8)];
    if (local.isBrowser) {
        file = file
        .replace("<!doctype html>\n", "")
        .replace((
            /(<\/?)(?:body|html)/g
        ), "$1div");
    }
    if (!local.isBrowser && process.env.npm_package_homepage) {
        file = file
        .replace("{{env.npm_package_homepage}}", process.env.npm_package_homepage)
        .replace("{{env.npm_package_name}}", process.env.npm_package_name)
        .replace("{{env.npm_package_version}}", process.env.npm_package_version);
    } else {
        file = file.replace((
            /<h1\u0020[\S\s]*<\/h1>/
        ), "");
    }
    return file;
};

local._istanbul_fs.readdirSync = function () {
    return [];
};

// mock module path
local._istanbul_path = local.path || {
    dirname: function (file) {
        return file.replace((
            /\/[\w\-.]+?$/
        ), "");
    },
    resolve: function (aa, bb, cc, dd) {
        return dd || cc || bb || aa;
    }
};

local.coverageMerge = function (coverage1, coverage2) {
/*
 * this function will inplace-merge coverage2 into coverage1
 */
    var dict1;
    var dict2;
    coverage1 = coverage1 || {};
    coverage2 = coverage2 || {};
    Object.keys(coverage2).forEach(function (file) {
        if (!coverage2[file]) {
            return;
        }
        // if file is undefined in coverage1, then add it
        if (!coverage1[file]) {
            coverage1[file] = coverage2[file];
            return;
        }
        // merge file from coverage2 into coverage1
        ["b", "f", "s"].forEach(function (key) {
            dict1 = coverage1[file][key];
            dict2 = coverage2[file][key];
            switch (key) {
            // increment coverage for branch lines
            case "b":
                Object.keys(dict2).forEach(function (key) {
                    dict2[key].forEach(function (count, ii) {
                        dict1[key][ii] += count;
                    });
                });
                break;
            // increment coverage for function and statement lines
            case "f":
            case "s":
                Object.keys(dict2).forEach(function (key) {
                    dict1[key] += dict2[key];
                });
                break;
            }
        });
    });
    return coverage1;
};

local.coverageReportCreate = function () {
/*
 * this function will
 * 1. print coverage in text-format to stdout
 * 2. write coverage in html-format to filesystem
 * 3. return coverage in html-format as single document
 */
    var option;
    /* istanbul ignore next */
    if (!globalThis.__coverage__) {
        return "";
    }
    option = {};
    option.dir = process.cwd() + "/tmp/build/coverage.html";
    // merge previous coverage
    if (!local.isBrowser && process.env.npm_config_mode_coverage_merge) {
        console.log("merging file " + option.dir + "/coverage.json to coverage");
        try {
            local.coverageMerge(globalThis.__coverage__, JSON.parse(
                local.fs.readFileSync(option.dir + "/coverage.json", "utf8")
            ));
        } catch (ignore) {}
        try {
            option.coverageCodeDict = JSON.parse(local.fs.readFileSync(
                option.dir + "/coverage.code-dict.json",
                "utf8"
            ));
            Object.keys(option.coverageCodeDict).forEach(function (key) {
                globalThis.__coverageCodeDict__[key] = (
                    globalThis.__coverageCodeDict__[key]
                    || option.coverageCodeDict[key]
                );
            });
        } catch (ignore) {}
    }
    // init writer
    local.coverageReportHtml = "";
    local.coverageReportHtml += (
        "<div class=\"coverageReportDiv\">\n"
        + "<h1>coverage-report</h1>\n"
        + "<div style=\"background: #fff; border: 1px solid #000; margin 0; padding: 0;"
        + "\">\n"
    );
    local.writerData = "";
    option.sourceStore = {};
    option.writer = local.writer;
    // 1. print coverage in text-format to stdout
    new local.TextReport(option).writeReport(local.collector);
    // 2. write coverage in html-format to filesystem
    new local.HtmlReport(option).writeReport(local.collector);
    local.writer.writeFile("", local.nop);
    if (!local.isBrowser) {
        // write coverage.json
        local.fsWriteFileWithMkdirpSync(
            option.dir + "/coverage.json",
            JSON.stringify(globalThis.__coverage__)
        );
        // write coverage.code-dict.json
        local.fsWriteFileWithMkdirpSync(
            option.dir + "/coverage.code-dict.json",
            JSON.stringify(globalThis.__coverageCodeDict__)
        );
        // write coverage.badge.svg
        option.pct = local.coverageReportSummary.root.metrics.lines.pct;
        local.fsWriteFileWithMkdirpSync(
            local._istanbul_path.dirname(option.dir) + "/coverage.badge.svg",
            local.templateCoverageBadgeSvg
            // edit coverage badge percent
            .replace((
                /100.0/g
            ), option.pct)
            // edit coverage badge color
            .replace((
                /0d0/g
            ), (
                ("0" + Math.round((100 - option.pct) * 2.21).toString(16)).slice(-2)
                + ("0" + Math.round(option.pct * 2.21).toString(16)).slice(-2) + "00"
            ))
        );
    }
    console.log("created coverage file " + option.dir + "/index.html");
    // 3. return coverage in html-format as a single document
    local.coverageReportHtml += "</div>\n</div>\n";
    // write coverage.rollup.html
    if (!local.isBrowser) {
        local.fsWriteFileWithMkdirpSync(
            option.dir + "/coverage.rollup.html",
            local.coverageReportHtml
        );
    }
    return local.coverageReportHtml;
};

/* istanbul ignore next */
local.instrumentInPackage = function (code, file) {
/*
 * this function will instrument the code
 * only if the macro /\* istanbul instrument in package $npm_package_nameLib *\/
 * exists in the code
 */
    return (
        // ternary-condition
        (
            process.env.npm_config_mode_coverage
            && code.indexOf("/* istanbul ignore all */\n") < 0 && (
                process.env.npm_config_mode_coverage === "all"
                || code.indexOf(
                    "/* istanbul instrument in package "
                    + process.env.npm_package_nameLib + " */\n"
                ) >= 0
                || code.indexOf(
                    "/* istanbul instrument in package "
                    + process.env.npm_config_mode_coverage + " */\n"
                ) >= 0
            )
        )
        ? local.instrumentSync(code, file)
        : code
    );
};

local.instrumentSync = function (code, file) {
/*
 * this function will
 * 1. normalize the file
 * 2. save code to __coverageCodeDict__[file] for future html-report
 * 3. return instrumented code
 */
    // 1. normalize the file
    file = local._istanbul_path.resolve("/", file);
    // 2. save code to __coverageCodeDict__[file] for future html-report
    globalThis.__coverageCodeDict__[file] = code;
    // 3. return instrumented code
    return new local.Instrumenter({
        embedSource: true,
        esModules: true,
        noAutoWrap: true
    }).instrumentSync(code, file).trimLeft();
};

local.util = {
inherits: local.nop
};



/*
file esprima/esprima.js
2016-08-22T15:14:14Z - shGithubDateCommitted https://github.com/jquery/esprima/commits/2.7.3
https://github.com/jquery/esprima/blob/2.7.3/esprima.js
utility2-uglifyjs https://raw.githubusercontent.com/jquery/esprima/2.7.3/esprima.js > /tmp/aa.js
*/
/* istanbul ignore next */
/* jslint ignore:start */
(function () { var exports; exports = local.esprima = {};
(function(e,t){"use strict";typeof define=="function"&&define.amd?define(["exports"
],t):typeof exports!="undefined"?t(exports):t(e.esprima={})})(this,function(e){"use strict"
;function L(e,t){if(!e)throw new Error("ASSERT: "+t)}function A(e){return e>=48&&
e<=57}function O(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function M(e){return"01234567"
.indexOf(e)>=0}function _(e){var t=e!=="0",n="01234567".indexOf(e);return l<E&&M
(a[l])&&(t=!0,n=n*8+"01234567".indexOf(a[l++]),"0123".indexOf(e)>=0&&l<E&&M(a[l]
)&&(n=n*8+"01234567".indexOf(a[l++]))),{code:n,octal:t}}function D(e){return e===32||
e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197
,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function P(e){return e===10||
e===13||e===8232||e===8233}function H(e){return e<65536?String.fromCharCode(e):String
.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))}function B
(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&u.NonAsciiIdentifierStart
.test(H(e))}function j(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&
e<=57||e===92||e>=128&&u.NonAsciiIdentifierPart.test(H(e))}function F(e){switch(
e){case"enum":case"export":case"import":case"super":return!0;default:return!1}}function I
(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected"
:case"public":case"static":case"yield":case"let":return!0;default:return!1}}function q
(e){return e==="eval"||e==="arguments"}function R(e){switch(e.length){case 2:return e==="if"||
e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let"
;case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum"
;case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||
e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||
e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||
e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger"
;case 10:return e==="instanceof";default:return!1}}function U(e,t,n,r,i){var s;L
(typeof n=="number","Comment must have valid position"),x.lastCommentStart=n,s={
type:e,value:t},T.range&&(s.range=[n,r]),T.loc&&(s.loc=i),T.comments.push(s),T.attachComment&&
(T.leadingComments.push(s),T.trailingComments.push(s)),T.tokenize&&(s.type=s.type+"Comment"
,T.delegate&&(s=T.delegate(s)),T.tokens.push(s))}function z(e){var t,n,r,i;t=l-e
,n={start:{line:c,column:l-h-e}};while(l<E){r=a.charCodeAt(l),++l;if(P(r)){p=!0,
T.comments&&(i=a.slice(t+e,l-1),n.end={line:c,column:l-h-1},U("Line",i,t,l-1,n))
,r===13&&a.charCodeAt(l)===10&&++l,++c,h=l;return}}T.comments&&(i=a.slice(t+e,l)
,n.end={line:c,column:l-h},U("Line",i,t,l,n))}function W(){var e,t,n,r;T.comments&&
(e=l-2,t={start:{line:c,column:l-h-2}});while(l<E){n=a.charCodeAt(l);if(P(n))n===13&&
a.charCodeAt(l+1)===10&&++l,p=!0,++c,++l,h=l;else if(n===42){if(a.charCodeAt(l+1
)===47){++l,++l,T.comments&&(r=a.slice(e+2,l-2),t.end={line:c,column:l-h},U("Block"
,r,e,l,t));return}++l}else++l}T.comments&&(t.end={line:c,column:l-h},r=a.slice(e+2
,l),U("Block",r,e,l,t)),At()}function X(){var e,t;p=!1,t=l===0;while(l<E){e=a.charCodeAt
(l);if(D(e))++l;else if(P(e))p=!0,++l,e===13&&a.charCodeAt(l)===10&&++l,++c,h=l,
t=!0;else if(e===47){e=a.charCodeAt(l+1);if(e===47)++l,++l,z(2),t=!0;else{if(e!==42
)break;++l,++l,W()}}else if(t&&e===45){if(a.charCodeAt(l+1)!==45||a.charCodeAt(l+2
)!==62)break;l+=3,z(3)}else{if(e!==60)break;if(a.slice(l+1,l+4)!=="!--")break;++
l,++l,++l,++l,z(4)}}}function V(e){var t,n,r,i=0;n=e==="u"?4:2;for(t=0;t<n;++t){
if(!(l<E&&O(a[l])))return"";r=a[l++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase
())}return String.fromCharCode(i)}function $(){var e,t;e=a[l],t=0,e==="}"&&Lt();
while(l<E){e=a[l++];if(!O(e))break;t=t*16+"0123456789abcdef".indexOf(e.toLowerCase
())}return(t>1114111||e!=="}")&&Lt(),H(t)}function J(e){var t,n,r;return t=a.charCodeAt
(e),t>=55296&&t<=56319&&(r=a.charCodeAt(e+1),r>=56320&&r<=57343&&(n=t,t=(n-55296
)*1024+r-56320+65536)),t}function K(){var e,t,n;e=J(l),n=H(e),l+=n.length,e===92&&
(a.charCodeAt(l)!==117&&Lt(),++l,a[l]==="{"?(++l,t=$()):(t=V("u"),e=t.charCodeAt
(0),(!t||t==="\\"||!B(e))&&Lt()),n=t);while(l<E){e=J(l);if(!j(e))break;t=H(e),n+=
t,l+=t.length,e===92&&(n=n.substr(0,n.length-1),a.charCodeAt(l)!==117&&Lt(),++l,
a[l]==="{"?(++l,t=$()):(t=V("u"),e=t.charCodeAt(0),(!t||t==="\\"||!j(e))&&Lt()),
n+=t)}return n}function Q(){var e,t;e=l++;while(l<E){t=a.charCodeAt(l);if(t===92
)return l=e,K();if(t>=55296&&t<57343)return l=e,K();if(!j(t))break;++l}return a.
slice(e,l)}function G(){var e,n,r;return e=l,n=a.charCodeAt(l)===92?K():Q(),n.length===1?
r=t.Identifier:R(n)?r=t.Keyword:n==="null"?r=t.NullLiteral:n==="true"||n==="false"?
r=t.BooleanLiteral:r=t.Identifier,{type:r,value:n,lineNumber:c,lineStart:h,start
:e,end:l}}function Y(){var e,n;e={type:t.Punctuator,value:"",lineNumber:c,lineStart
:h,start:l,end:l},n=a[l];switch(n){case"(":T.tokenize&&(T.openParenToken=T.tokenValues
.length),++l;break;case"{":T.tokenize&&(T.openCurlyToken=T.tokenValues.length),x
.curlyStack.push("{"),++l;break;case".":++l,a[l]==="."&&a[l+1]==="."&&(l+=2,n="..."
);break;case"}":++l,x.curlyStack.pop();break;case")":case";":case",":case"[":case"]"
:case":":case"?":case"~":++l;break;default:n=a.substr(l,4),n===">>>="?l+=4:(n=n.
substr(0,3),n==="==="||n==="!=="||n===">>>"||n==="<<="||n===">>="?l+=3:(n=n.substr
(0,2),n==="&&"||n==="||"||n==="=="||n==="!="||n==="+="||n==="-="||n==="*="||n==="/="||
n==="++"||n==="--"||n==="<<"||n===">>"||n==="&="||n==="|="||n==="^="||n==="%="||
n==="<="||n===">="||n==="=>"?l+=2:(n=a[l],"<>=!+-*%&|^/".indexOf(n)>=0&&++l)))}return l===
e.start&&Lt(),e.end=l,e.value=n,e}function Z(e){var n="";while(l<E){if(!O(a[l]))
break;n+=a[l++]}return n.length===0&&Lt(),
a[l]==='n'&&(n+=a[l++]), // BigInt
B(a.charCodeAt(l))&&Lt(),{type:t.NumericLiteral
,value:parseInt("0x"+n,16),lineNumber:c,lineStart:h,start:e,end:l}}function et(e
){var n,r;r="";while(l<E){n=a[l];if(n!=="0"&&n!=="1")break;r+=a[l++]}return r.length===0&&
Lt(),
a[l]==='n'&&(r+=a[l++]), // BigInt
l<E&&(n=a.charCodeAt(l),(B(n)||A(n))&&Lt()),{type:t.NumericLiteral,value:parseInt
(r,2),lineNumber:c,lineStart:h,start:e,end:l}}function tt(e,n){var r,i;M(e)?(i=!0
,r="0"+a[l++]):(i=!1,++l,r="");while(l<E){if(!M(a[l]))break;r+=a[l++]}return!i&&
r.length===0&&Lt(),
a[l]==='n'&&(r+=a[l++]), // BigInt
(B(a.charCodeAt(l))||A(a.charCodeAt(l)))&&Lt(),{type:t.NumericLiteral
,value:parseInt(r,8),octal:i,lineNumber:c,lineStart:h,start:n,end:l}}function nt
(){var e,t;for(e=l+1;e<E;++e){t=a[e];if(t==="8"||t==="9")return!1;if(!M(t))return!0
}return!0}function rt(){var e,n,r;r=a[l],L(A(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"
),n=l,e="";if(r!=="."){e=a[l++],r=a[l];if(e==="0"){if(r==="x"||r==="X")return++l
,Z(n);if(r==="b"||r==="B")return++l,et(n);if(r==="o"||r==="O")return tt(r,n);if(
M(r)&&nt())return tt(r,n)}while(A(a.charCodeAt(l)))e+=a[l++];r=a[l]}if(r==="."){
e+=a[l++];while(A(a.charCodeAt(l)))e+=a[l++];r=a[l]}if(r==="e"||r==="E"){e+=a[l++
],r=a[l];if(r==="+"||r==="-")e+=a[l++];if(A(a.charCodeAt(l)))while(A(a.charCodeAt
(l)))e+=a[l++];else Lt()}
a[l]==='n'&&(e+=a[l++]) // BigInt
return B(a.charCodeAt(l))&&Lt(),{type:t.NumericLiteral,
value:parseFloat(e),lineNumber:c,lineStart:h,start:n,end:l}}function it(){var e=""
,n,r,i,s,o,u=!1;n=a[l],L(n==="'"||n==='"',"String literal must starts with a quote"
),r=l,++l;while(l<E){i=a[l++];if(i===n){n="";break}if(i==="\\"){i=a[l++];if(!i||!
P(i.charCodeAt(0)))switch(i){case"u":case"x":if(a[l]==="{")++l,e+=$();else{s=V(i
);if(!s)throw Lt();e+=s}break;case"n":e+="\n";break;case"r":e+="\r";break;case"t"
:e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\u000b";break;
case"8":case"9":e+=i,At();break;default:M(i)?(o=_(i),u=o.octal||u,e+=String.fromCharCode
(o.code)):e+=i}else++c,i==="\r"&&a[l]==="\n"&&++l,h=l}else{if(P(i.charCodeAt(0))
)break;e+=i}}return n!==""&&(l=r,Lt()),{type:t.StringLiteral,value:e,octal:u,lineNumber
:y,lineStart:b,start:r,end:l}}function st(){var e="",n,r,i,s,u,f,p,d;s=!1,f=!1,r=
l,u=a[l]==="`",i=2,++l;while(l<E){n=a[l++];if(n==="`"){i=1,f=!0,s=!0;break}if(n==="$"
){if(a[l]==="{"){x.curlyStack.push("${"),++l,s=!0;break}e+=n}else if(n==="\\"){n=
a[l++];if(!P(n.charCodeAt(0)))switch(n){case"n":e+="\n";break;case"r":e+="\r";break;
case"t":e+="\t";break;case"u":case"x":a[l]==="{"?(++l,e+=$()):(p=l,d=V(n),d?e+=d
:(l=p,e+=n));break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\u000b"
;break;default:n==="0"?(A(a.charCodeAt(l))&&Nt(o.TemplateOctalLiteral),e+="\0"):
M(n)?Nt(o.TemplateOctalLiteral):e+=n}else++c,n==="\r"&&a[l]==="\n"&&++l,h=l}else P
(n.charCodeAt(0))?(++c,n==="\r"&&a[l]==="\n"&&++l,h=l,e+="\n"):e+=n}return s||Lt
(),u||x.curlyStack.pop(),{type:t.Template,value:{cooked:e,raw:a.slice(r+1,l-i)},
head:u,tail:f,lineNumber:c,lineStart:h,start:r,end:l}}function ot(e,t){var n="\uffff"
,r=e;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g
,function(e,t,r){var i=parseInt(t||r,16);return i>1114111&&Lt(null,o.InvalidRegExp
),i<=65535?String.fromCharCode(i):n}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
n));try{RegExp(r)}catch(i){Lt(null,o.InvalidRegExp)}try{return new RegExp(e,t)}catch(
s){return null}}function ut(){var e,t,n,r,i;e=a[l],L(e==="/","Regular expression literal must start with a slash"
),t=a[l++],n=!1,r=!1;while(l<E){e=a[l++],t+=e;if(e==="\\")e=a[l++],P(e.charCodeAt
(0))&&Lt(null,o.UnterminatedRegExp),t+=e;else if(P(e.charCodeAt(0)))Lt(null,o.UnterminatedRegExp
);else if(n)e==="]"&&(n=!1);else{if(e==="/"){r=!0;break}e==="["&&(n=!0)}}return r||
Lt(null,o.UnterminatedRegExp),i=t.substr(1,t.length-2),{value:i,literal:t}}function at
(){var e,t,n,r;t="",n="";while(l<E){e=a[l];if(!j(e.charCodeAt(0)))break;++l;if(e==="\\"&&
l<E){e=a[l];if(e==="u"){++l,r=l,e=V("u");if(e){n+=e;for(t+="\\u";r<l;++r)t+=a[r]
}else l=r,n+="u",t+="\\u";At()}else t+="\\",At()}else n+=e,t+=e}return{value:n,literal
:t}}function ft(){var e,n,r,i;return w=!0,S=null,X(),e=l,n=ut(),r=at(),i=ot(n.value
,r.value),w=!1,T.tokenize?{type:t.RegularExpression,value:i,regex:{pattern:n.value
,flags:r.value},lineNumber:c,lineStart:h,start:e,end:l}:{literal:n.literal+r.literal
,value:i,regex:{pattern:n.value,flags:r.value},start:e,end:l}}function lt(){var e
,t,n,r;return X(),e=l,t={start:{line:c,column:l-h}},n=ft(),t.end={line:c,column:
l-h},T.tokenize||(T.tokens.length>0&&(r=T.tokens[T.tokens.length-1],r.range[0]===
e&&r.type==="Punctuator"&&(r.value==="/"||r.value==="/=")&&T.tokens.pop()),T.tokens
.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,l],loc:t}
)),n}function ct(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t
.BooleanLiteral||e.type===t.NullLiteral}function ht(){function i(e){return e&&e.
length>1&&e[0]>="a"&&e[0]<="z"}var e,t,n;t=T.tokenValues[T.tokenValues.length-1]
,e=t!==null;switch(t){case"this":case"]":e=!1;break;case")":n=T.tokenValues[T.openParenToken-1
],e=n==="if"||n==="while"||n==="for"||n==="with";break;case"}":e=!1,i(T.tokenValues
[T.openCurlyToken-3])?(n=T.tokenValues[T.openCurlyToken-4],e=n?r.indexOf(n)<0:!1
):i(T.tokenValues[T.openCurlyToken-4])&&(n=T.tokenValues[T.openCurlyToken-5],e=n?
r.indexOf(n)<0:!0)}return e?lt():Y()}function pt(){var e,n;if(l>=E)return{type:t
.EOF,lineNumber:c,lineStart:h,start:l,end:l};e=a.charCodeAt(l);if(B(e))return n=
G(),f&&I(n.value)&&(n.type=t.Keyword),n;if(e===40||e===41||e===59)return Y();if(
e===39||e===34)return it();if(e===46)return A(a.charCodeAt(l+1))?rt():Y();if(A(e
))return rt();if(T.tokenize&&e===47)return ht();if(e===96||e===125&&x.curlyStack
[x.curlyStack.length-1]==="${")return st();if(e>=55296&&e<57343){e=J(l);if(B(e))
return G()}return Y()}function dt(){var e,r,i,s;return e={start:{line:c,column:l-
h}},r=pt(),e.end={line:c,column:l-h},r.type!==t.EOF&&(i=a.slice(r.start,r.end),s=
{type:n[r.type],value:i,range:[r.start,r.end],loc:e},r.regex&&(s.regex={pattern:
r.regex.pattern,flags:r.regex.flags}),T.tokenValues&&T.tokenValues.push(s.type==="Punctuator"||
s.type==="Keyword"?s.value:null),T.tokenize&&(T.range||delete s.range,T.loc||delete
s.loc,T.delegate&&(s=T.delegate(s))),T.tokens.push(s)),r}function vt(){var e;return w=!0
,d=l,v=c,m=h,X(),e=S,g=l,y=c,b=h,S=typeof T.tokens!="undefined"?dt():pt(),w=!1,e
}function mt(){w=!0,X(),d=l,v=c,m=h,g=l,y=c,b=h,S=typeof T.tokens!="undefined"?dt
():pt(),w=!1}function gt(){this.line=y,this.column=g-b}function yt(){this.start=new
gt,this.end=null}function bt(e){this.start={line:e.lineNumber,column:e.start-e.lineStart
},this.end=null}function wt(){T.range&&(this.range=[g,0]),T.loc&&(this.loc=new yt
)}function Et(e){T.range&&(this.range=[e.start,0]),T.loc&&(this.loc=new bt(e))}function St
(e){var t,n;for(t=0;t<T.errors.length;t++){n=T.errors[t];if(n.index===e.index&&n
.message===e.message)return}T.errors.push(e)}function xt(e,t){var n=new Error(e)
;try{throw n}catch(r){Object.create&&Object.defineProperty&&(n=Object.create(r),
Object.defineProperty(n,"column",{value:t}))}finally{return n}}function Tt(e,t,n
){var r,i,s;return r="Line "+e+": "+n,i=t-(w?h:m)+1,s=xt(r,i),s.lineNumber=e,s.description=
n,s.index=t,s}function Nt(e){var t,n;throw t=Array.prototype.slice.call(arguments
,1),n=e.replace(/%(\d)/g,function(e,n){return L(n<t.length,"Message reference must be in range"
),t[n]}),Tt(v,d,n)}function Ct(e){var t,n,r;t=Array.prototype.slice.call(arguments
,1),n=e.replace(/%(\d)/g,function(e,n){return L(n<t.length,"Message reference must be in range"
),t[n]}),r=Tt(c,d,n);if(!T.errors)throw r;St(r)}function kt(e,n){var r,i=n||o.UnexpectedToken
;return e?(n||(i=e.type===t.EOF?o.UnexpectedEOS:e.type===t.Identifier?o.UnexpectedIdentifier
:e.type===t.NumericLiteral?o.UnexpectedNumber:e.type===t.StringLiteral?o.UnexpectedString
:e.type===t.Template?o.UnexpectedTemplate:o.UnexpectedToken,e.type===t.Keyword&&
(F(e.value)?i=o.UnexpectedReserved:f&&I(e.value)&&(i=o.StrictReservedWord))),r=e
.type===t.Template?e.value.raw:e.value):r="ILLEGAL",i=i.replace("%0",r),e&&typeof
e.lineNumber=="number"?Tt(e.lineNumber,e.start,i):Tt(w?c:v,w?l:d,i)}function Lt(
e,t){throw kt(e,t)}function At(e,t){var n=kt(e,t);if(!T.errors)throw n;St(n)}function Ot
(e){var n=vt();(n.type!==t.Punctuator||n.value!==e)&&Lt(n)}function Mt(){var e;T
.errors?(e=S,e.type===t.Punctuator&&e.value===","?vt():e.type===t.Punctuator&&e.
value===";"?(vt(),At(e)):At(e,o.UnexpectedToken)):Ot(",")}function _t(e){var n=vt
();(n.type!==t.Keyword||n.value!==e)&&Lt(n)}function Dt(e){return S.type===t.Punctuator&&
S.value===e}function Pt(e){return S.type===t.Keyword&&S.value===e}function Ht(e)
{return S.type===t.Identifier&&S.value===e}function Bt(){var e;return S.type!==t
.Punctuator?!1:(e=S.value,e==="="||e==="*="||e==="/="||e==="%="||e==="+="||e==="-="||
e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|=")}function jt(){if(
a.charCodeAt(g)===59||Dt(";")){vt();return}if(p)return;d=g,v=y,m=b,S.type!==t.EOF&&!
Dt("}")&&Lt(S)}function Ft(e){var t=N,n=C,r=k,i;return N=!0,C=!0,k=null,i=e(),k!==
null&&Lt(k),N=t,C=n,k=r,i}function It(e){var t=N,n=C,r=k,i;return N=!0,C=!0,k=null
,i=e(),N=N&&t,C=C&&n,k=r||k,i}function qt(e,t){var n=new wt,r=[],i,s;Ot("[");while(!
Dt("]"))if(Dt(","))vt(),r.push(null);else{if(Dt("...")){s=new wt,vt(),e.push(S),
i=kn(t),r.push(s.finishRestElement(i));break}r.push(Wt(e,t)),Dt("]")||Ot(",")}return Ot
("]"),n.finishArrayPattern(r)}function Rt(e,n){var r=new wt,i,s,o=Dt("["),u;if(S
.type===t.Identifier){s=S,i=kn();if(Dt("="))return e.push(s),vt(),u=Sn(),r.finishProperty
("init",i,!1,(new Et(s)).finishAssignmentPattern(i,u),!1,!0);if(!Dt(":"))return e
.push(s),r.finishProperty("init",i,!1,i,!1,!0)}else i=Jt();return Ot(":"),u=Wt(e
,n),r.finishProperty("init",i,o,u,!1,!1)}function Ut(e,t){var n=new wt,r=[];Ot("{"
);while(!Dt("}"))r.push(Rt(e,t)),Dt("}")||Ot(",");return vt(),n.finishObjectPattern
(r)}function zt(e,t){return Dt("[")?qt(e,t):Dt("{")?Ut(e,t):(Pt("let")&&(t==="const"||
t==="let")&&At(S,o.UnexpectedToken),e.push(S),kn(t))}function Wt(e,t){var n=S,r,
i,s;return r=zt(e,t),Dt("=")&&(vt(),i=x.allowYield,x.allowYield=!0,s=Ft(Sn),x.allowYield=
i,r=(new Et(n)).finishAssignmentPattern(r,s)),r}function Xt(){var e=[],t=new wt,
n;Ot("[");while(!Dt("]"))Dt(",")?(vt(),e.push(null)):Dt("...")?(n=new wt,vt(),n.
finishSpreadElement(It(Sn)),Dt("]")||(C=N=!1,Ot(",")),e.push(n)):(e.push(It(Sn))
,Dt("]")||Ot(","));return vt(),t.finishArrayExpression(e)}function Vt(e,t,n){var r
,i;return C=N=!1,r=f,i=Ft(tr),f&&t.firstRestricted&&At(t.firstRestricted,t.message
),f&&t.stricted&&At(t.stricted,t.message),f=r,e.finishFunctionExpression(null,t.
params,t.defaults,i,n)}function $t(){var e,t,n=new wt,r=x.allowYield;return x.allowYield=!1
,e=ir(),x.allowYield=r,x.allowYield=!1,t=Vt(n,e,!1),x.allowYield=r,t}function Jt
(){var e,n=new wt,r;e=vt();switch(e.type){case t.StringLiteral:case t.NumericLiteral
:return f&&e.octal&&At(e,o.StrictOctalLiteral),n.finishLiteral(e);case t.Identifier
:case t.BooleanLiteral:case t.NullLiteral:case t.Keyword:return n.finishIdentifier
(e.value);case t.Punctuator:if(e.value==="[")return r=Ft(Sn),Ot("]"),r}Lt(e)}function Kt
(){switch(S.type){case t.Identifier:case t.StringLiteral:case t.BooleanLiteral:case t
.NullLiteral:case t.NumericLiteral:case t.Keyword:return!0;case t.Punctuator:return S
.value==="["}return!1}function Qt(e,n,r,i){var s,o,u,a,f=x.allowYield;if(e.type===
t.Identifier){if(e.value==="get"&&Kt())return r=Dt("["),n=Jt(),u=new wt,Ot("("),
Ot(")"),x.allowYield=!1,s=Vt(u,{params:[],defaults:[],stricted:null,firstRestricted
:null,message:null},!1),x.allowYield=f,i.finishProperty("get",n,r,s,!1,!1);if(e.
value==="set"&&Kt())return r=Dt("["),n=Jt(),u=new wt,Ot("("),o={params:[],defaultCount
:0,defaults:[],firstRestricted:null,paramSet:{}},Dt(")")?At(S):(x.allowYield=!1,
rr(o),x.allowYield=f,o.defaultCount===0&&(o.defaults=[])),Ot(")"),x.allowYield=!1
,s=Vt(u,o,!1),x.allowYield=f,i.finishProperty("set",n,r,s,!1,!1)}else if(e.type===
t.Punctuator&&e.value==="*"&&Kt())return r=Dt("["),n=Jt(),u=new wt,x.allowYield=!0
,a=ir(),x.allowYield=f,x.allowYield=!1,s=Vt(u,a,!0),x.allowYield=f,i.finishProperty
("init",n,r,s,!0,!1);return n&&Dt("(")?(s=$t(),i.finishProperty("init",n,r,s,!0,!1
)):null}function Gt(e){var n=S,r=new wt,s,u,a,f,l;s=Dt("["),Dt("*")?vt():u=Jt(),
a=Qt(n,u,s,r);if(a)return a;u||Lt(S),s||(f=u.type===i.Identifier&&u.name==="__proto__"||
u.type===i.Literal&&u.value==="__proto__",e.value&&f&&Ct(o.DuplicateProtoProperty
),e.value|=f);if(Dt(":"))return vt(),l=It(Sn),r.finishProperty("init",u,s,l,!1,!1
);if(n.type===t.Identifier)return Dt("=")?(k=S,vt(),l=Ft(Sn),r.finishProperty("init"
,u,s,(new Et(n)).finishAssignmentPattern(u,l),!1,!0)):r.finishProperty("init",u,
s,u,!1,!0);Lt(S)}function Yt(){var e=[],t={value:!1},n=new wt;Ot("{");while(!Dt("}"
))e.push(Gt(t)),Dt("}")||Mt();return Ot("}"),n.finishObjectExpression(e)}function Zt
(e){var t;switch(e.type){case i.Identifier:case i.MemberExpression:case i.RestElement
:case i.AssignmentPattern:break;case i.SpreadElement:e.type=i.RestElement,Zt(e.argument
);break;case i.ArrayExpression:e.type=i.ArrayPattern;for(t=0;t<e.elements.length
;t++)e.elements[t]!==null&&Zt(e.elements[t]);break;case i.ObjectExpression:e.type=
i.ObjectPattern;for(t=0;t<e.properties.length;t++)Zt(e.properties[t].value);break;
case i.AssignmentExpression:e.type=i.AssignmentPattern,Zt(e.left);break;default:
}}function en(e){var n,r;return(S.type!==t.Template||e.head&&!S.head)&&Lt(),n=new
wt,r=vt(),n.finishTemplateElement({raw:r.value.raw,cooked:r.value.cooked},r.tail
)}function tn(){var e,t,n,r=new wt;e=en({head:!0}),t=[e],n=[];while(!e.tail)n.push
(xn()),e=en({head:!1}),t.push(e);return r.finishTemplateLiteral(t,n)}function nn
(){var e,t,n,r,o=[];Ot("(");if(Dt(")"))return vt(),Dt("=>")||Ot("=>"),{type:s.ArrowParameterPlaceHolder
,params:[],rawParams:[]};n=S;if(Dt("..."))return e=jn(o),Ot(")"),Dt("=>")||Ot("=>"
),{type:s.ArrowParameterPlaceHolder,params:[e]};N=!0,e=It(Sn);if(Dt(",")){C=!1,t=
[e];while(g<E){if(!Dt(","))break;vt();if(Dt("...")){N||Lt(S),t.push(jn(o)),Ot(")"
),Dt("=>")||Ot("=>"),N=!1;for(r=0;r<t.length;r++)Zt(t[r]);return{type:s.ArrowParameterPlaceHolder
,params:t}}t.push(It(Sn))}e=(new Et(n)).finishSequenceExpression(t)}Ot(")");if(Dt
("=>")){if(e.type===i.Identifier&&e.name==="yield")return{type:s.ArrowParameterPlaceHolder
,params:[e]};N||Lt(S);if(e.type===i.SequenceExpression)for(r=0;r<e.expressions.length
;r++)Zt(e.expressions[r]);else Zt(e);e={type:s.ArrowParameterPlaceHolder,params:
e.type===i.SequenceExpression?e.expressions:[e]}}return N=!1,e}function rn(){var e
,n,r,i;if(Dt("("))return N=!1,It(nn);if(Dt("["))return It(Xt);if(Dt("{"))return It
(Yt);e=S.type,i=new wt;if(e===t.Identifier)x.sourceType==="module"&&S.value==="await"&&
At(S),r=i.finishIdentifier(vt().value);else if(e===t.StringLiteral||e===t.NumericLiteral
)C=N=!1,f&&S.octal&&At(S,o.StrictOctalLiteral),r=i.finishLiteral(vt());else if(e===
t.Keyword){if(!f&&x.allowYield&&Pt("yield"))return on();if(!f&&Pt("let"))return i
.finishIdentifier(vt().value);C=N=!1;if(Pt("function"))return or();if(Pt("this")
)return vt(),i.finishThisExpression();if(Pt("class"))return fr();Lt(vt())}else e===
t.BooleanLiteral?(C=N=!1,n=vt(),n.value=n.value==="true",r=i.finishLiteral(n)):e===
t.NullLiteral?(C=N=!1,n=vt(),n.value=null,r=i.finishLiteral(n)):Dt("/")||Dt("/="
)?(C=N=!1,l=g,typeof T.tokens!="undefined"?n=lt():n=ft(),vt(),r=i.finishLiteral(
n)):e===t.Template?r=tn():Lt(vt());return r}function sn(){var e=[],t;Ot("(");if(!
Dt(")"))while(g<E){Dt("...")?(t=new wt,vt(),t.finishSpreadElement(Ft(Sn))):t=Ft(
Sn),e.push(t);if(Dt(")"))break;Mt()}return Ot(")"),e}function on(){var e,t=new wt
;return e=vt(),ct(e)||Lt(e),t.finishIdentifier(e.value)}function un(){return Ot("."
),on()}function an(){var e;return Ot("["),e=Ft(xn),Ot("]"),e}function fn(){var e
,n,r=new wt;_t("new");if(Dt(".")){vt();if(S.type===t.Identifier&&S.value==="target"&&
x.inFunctionBody)return vt(),r.finishMetaProperty("new","target");Lt(S)}return e=
Ft(cn),n=Dt("(")?sn():[],C=N=!1,r.finishNewExpression(e,n)}function ln(){var e,n
,r,i,s,o=x.allowIn;s=S,x.allowIn=!0,Pt("super")&&x.inFunctionBody?(n=new wt,vt()
,n=n.finishSuper(),!Dt("(")&&!Dt(".")&&!Dt("[")&&Lt(S)):n=It(Pt("new")?fn:rn);for(
;;)if(Dt("."))N=!1,C=!0,i=un(),n=(new Et(s)).finishMemberExpression(".",n,i);else if(
Dt("("))N=!1,C=!1,r=sn(),n=(new Et(s)).finishCallExpression(n,r);else if(Dt("[")
)N=!1,C=!0,i=an(),n=(new Et(s)).finishMemberExpression("[",n,i);else{if(S.type!==
t.Template||!S.head)break;e=tn(),n=(new Et(s)).finishTaggedTemplateExpression(n,
e)}return x.allowIn=o,n}function cn(){var e,n,r,i;L(x.allowIn,"callee of new expression always allow in keyword."
),i=S,Pt("super")&&x.inFunctionBody?(n=new wt,vt(),n=n.finishSuper(),!Dt("[")&&!
Dt(".")&&Lt(S)):n=It(Pt("new")?fn:rn);for(;;)if(Dt("["))N=!1,C=!0,r=an(),n=(new
Et(i)).finishMemberExpression("[",n,r);else if(Dt("."))N=!1,C=!0,r=un(),n=(new Et
(i)).finishMemberExpression(".",n,r);else{if(S.type!==t.Template||!S.head)break;
e=tn(),n=(new Et(i)).finishTaggedTemplateExpression(n,e)}return n}function hn(){
var e,n,r=S;return e=It(ln),!p&&S.type===t.Punctuator&&(Dt("++")||Dt("--"))&&(f&&
e.type===i.Identifier&&q(e.name)&&Ct(o.StrictLHSPostfix),C||Ct(o.InvalidLHSInAssignment
),C=N=!1,n=vt(),e=(new Et(r)).finishPostfixExpression(n.value,e)),e}function pn(
){var e,n,r;return S.type!==t.Punctuator&&S.type!==t.Keyword?n=hn():Dt("++")||Dt
("--")?(r=S,e=vt(),n=It(pn),f&&n.type===i.Identifier&&q(n.name)&&Ct(o.StrictLHSPrefix
),C||Ct(o.InvalidLHSInAssignment),n=(new Et(r)).finishUnaryExpression(e.value,n)
,C=N=!1):Dt("+")||Dt("-")||Dt("~")||Dt("!")?(r=S,e=vt(),n=It(pn),n=(new Et(r)).finishUnaryExpression
(e.value,n),C=N=!1):Pt("delete")||Pt("void")||Pt("typeof")?(r=S,e=vt(),n=It(pn),
n=(new Et(r)).finishUnaryExpression(e.value,n),f&&n.operator==="delete"&&n.argument
.type===i.Identifier&&Ct(o.StrictDelete),C=N=!1):n=hn(),n}function dn(e,n){var r=0
;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":
r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;
case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">="
:case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8
;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:}return r
}function vn(){var e,t,n,r,i,s,o,u,a,f;e=S,a=It(pn),r=S,i=dn(r,x.allowIn);if(i===0
)return a;C=N=!1,r.prec=i,vt(),t=[e,S],o=Ft(pn),s=[a,r,o];while((i=dn(S,x.allowIn
))>0){while(s.length>2&&i<=s[s.length-2].prec)o=s.pop(),u=s.pop().value,a=s.pop(
),t.pop(),n=(new Et(t[t.length-1])).finishBinaryExpression(u,a,o),s.push(n);r=vt
(),r.prec=i,s.push(r),t.push(S),n=Ft(pn),s.push(n)}f=s.length-1,n=s[f],t.pop();while(
f>1)n=(new Et(t.pop())).finishBinaryExpression(s[f-1].value,s[f-2],n),f-=2;return n
}function mn(){var e,t,n,r,i;return i=S,e=It(vn),Dt("?")&&(vt(),t=x.allowIn,x.allowIn=!0
,n=Ft(Sn),x.allowIn=t,Ot(":"),r=Ft(Sn),e=(new Et(i)).finishConditionalExpression
(e,n,r),C=N=!1),e}function gn(){return Dt("{")?tr():Ft(Sn)}function yn(e,t){var n
;switch(t.type){case i.Identifier:nr(e,t,t.name);break;case i.RestElement:yn(e,t
.argument);break;case i.AssignmentPattern:yn(e,t.left);break;case i.ArrayPattern
:for(n=0;n<t.elements.length;n++)t.elements[n]!==null&&yn(e,t.elements[n]);break;
case i.YieldExpression:break;default:L(t.type===i.ObjectPattern,"Invalid type");
for(n=0;n<t.properties.length;n++)yn(e,t.properties[n].value)}}function bn(e){var t
,n,r,u,a,l,c,h;a=[],l=0,u=[e];switch(e.type){case i.Identifier:break;case s.ArrowParameterPlaceHolder
:u=e.params;break;default:return null}c={paramSet:{}};for(t=0,n=u.length;t<n;t+=1
){r=u[t];switch(r.type){case i.AssignmentPattern:u[t]=r.left,r.right.type===i.YieldExpression&&
(r.right.argument&&Lt(S),r.right.type=i.Identifier,r.right.name="yield",delete r
.right.argument,delete r.right.delegate),a.push(r.right),++l,yn(c,r.left);break;
default:yn(c,r),u[t]=r,a.push(null)}}if(f||!x.allowYield)for(t=0,n=u.length;t<n;
t+=1)r=u[t],r.type===i.YieldExpression&&Lt(S);return c.message===o.StrictParamDupe&&
(h=f?c.stricted:c.firstRestricted,Lt(h,c.message)),l===0&&(a=[]),{params:u,defaults
:a,stricted:c.stricted,firstRestricted:c.firstRestricted,message:c.message}}function wn
(e,t){var n,r,s;return p&&At(S),Ot("=>"),n=f,r=x.allowYield,x.allowYield=!0,s=gn
(),f&&e.firstRestricted&&Lt(e.firstRestricted,e.message),f&&e.stricted&&At(e.stricted
,e.message),f=n,x.allowYield=r,t.finishArrowFunctionExpression(e.params,e.defaults
,s,s.type!==i.BlockStatement)}function En(){var e,n,r,i;return e=null,n=new wt,r=!1
,_t("yield"),p||(i=x.allowYield,x.allowYield=!1,r=Dt("*"),r?(vt(),e=Sn()):!Dt(";"
)&&!Dt("}")&&!Dt(")")&&S.type!==t.EOF&&(e=Sn()),x.allowYield=i),n.finishYieldExpression
(e,r)}function Sn(){var e,t,n,r,u;return u=S,e=S,!x.allowYield&&Pt("yield")?En()
:(t=mn(),t.type===s.ArrowParameterPlaceHolder||Dt("=>")?(C=N=!1,r=bn(t),r?(k=null
,wn(r,new Et(u))):t):(Bt()&&(C||Ct(o.InvalidLHSInAssignment),f&&t.type===i.Identifier&&
(q(t.name)&&At(e,o.StrictLHSAssignment),I(t.name)&&At(e,o.StrictReservedWord)),Dt
("=")?Zt(t):C=N=!1,e=vt(),n=Ft(Sn),t=(new Et(u)).finishAssignmentExpression(e.value
,t,n),k=null),t))}function xn(){var e,t=S,n;e=Ft(Sn);if(Dt(",")){n=[e];while(g<E
){if(!Dt(","))break;vt(),n.push(Ft(Sn))}e=(new Et(t)).finishSequenceExpression(n
)}return e}function Tn(){if(S.type===t.Keyword)switch(S.value){case"export":return x
.sourceType!=="module"&&At(S,o.IllegalExportDeclaration),vr();case"import":return x
.sourceType!=="module"&&At(S,o.IllegalImportDeclaration),wr();case"const":return Bn
({inFor:!1});case"function":return sr(new wt);case"class":return ar()}return Pt("let"
)&&Hn()?Bn({inFor:!1}):er()}function Nn(){var e=[];while(g<E){if(Dt("}"))break;e
.push(Tn())}return e}function Cn(){var e,t=new wt;return Ot("{"),e=Nn(),Ot("}"),
t.finishBlockStatement(e)}function kn(e){var n,r=new wt;return n=vt(),n.type===t
.Keyword&&n.value==="yield"?(f&&At(n,o.StrictReservedWord),x.allowYield||Lt(n)):
n.type!==t.Identifier?f&&n.type===t.Keyword&&I(n.value)?At(n,o.StrictReservedWord
):(f||n.value!=="let"||e!=="var")&&Lt(n):x.sourceType==="module"&&n.type===t.Identifier&&
n.value==="await"&&At(n),r.finishIdentifier(n.value)}function Ln(e){var t=null,n
,r=new wt,s=[];return n=zt(s,"var"),f&&q(n.name)&&Ct(o.StrictVarName),Dt("=")?(vt
(),t=Ft(Sn)):n.type!==i.Identifier&&!e.inFor&&Ot("="),r.finishVariableDeclarator
(n,t)}function An(e){var t,n;t={inFor:e.inFor},n=[Ln(t)];while(Dt(","))vt(),n.push
(Ln(t));return n}function On(e){var t;return _t("var"),t=An({inFor:!1}),jt(),e.finishVariableDeclaration
(t)}function Mn(e,t){var n=null,r,s=new wt,u=[];r=zt(u,e),f&&r.type===i.Identifier&&
q(r.name)&&Ct(o.StrictVarName);if(e==="const")!Pt("in")&&!Ht("of")&&(Ot("="),n=Ft
(Sn));else if(!t.inFor&&r.type!==i.Identifier||Dt("="))Ot("="),n=Ft(Sn);return s
.finishVariableDeclarator(r,n)}function _n(e,t){var n=[Mn(e,t)];while(Dt(","))vt
(),n.push(Mn(e,t));return n}function Dn(){return{index:l,lineNumber:c,lineStart:
h,hasLineTerminator:p,lastIndex:d,lastLineNumber:v,lastLineStart:m,startIndex:g,
startLineNumber:y,startLineStart:b,lookahead:S,tokenCount:T.tokens?T.tokens.length
:0}}function Pn(e){l=e.index,c=e.lineNumber,h=e.lineStart,p=e.hasLineTerminator,
d=e.lastIndex,v=e.lastLineNumber,m=e.lastLineStart,g=e.startIndex,y=e.startLineNumber
,b=e.startLineStart,S=e.lookahead,T.tokens&&T.tokens.splice(e.tokenCount,T.tokens
.length)}function Hn(){var e,n;return n=Dn(),vt(),e=S.type===t.Identifier||Dt("["
)||Dt("{")||Pt("let")||Pt("yield"),Pn(n),e}function Bn(e){var t,n,r=new wt;return t=
vt().value,L(t==="let"||t==="const","Lexical declaration must be either let or const"
),n=_n(t,e),jt(),r.finishLexicalDeclaration(n,t)}function jn(e){var t,n=new wt;return vt
(),Dt("{")&&Nt(o.ObjectPatternAsRestParameter),e.push(S),t=kn(),Dt("=")&&Nt(o.DefaultRestParameter
),Dt(")")||Nt(o.ParameterAfterRestParameter),n.finishRestElement(t)}function Fn(
e){return Ot(";"),e.finishEmptyStatement()}function In(e){var t=xn();return jt()
,e.finishExpressionStatement(t)}function qn(e){var t,n,r;return _t("if"),Ot("(")
,t=xn(),Ot(")"),n=er(),Pt("else")?(vt(),r=er()):r=null,e.finishIfStatement(t,n,r
)}function Rn(e){var t,n,r;return _t("do"),r=x.inIteration,x.inIteration=!0,t=er
(),x.inIteration=r,_t("while"),Ot("("),n=xn(),Ot(")"),Dt(";")&&vt(),e.finishDoWhileStatement
(t,n)}function Un(e){var t,n,r;return _t("while"),Ot("("),t=xn(),Ot(")"),r=x.inIteration
,x.inIteration=!0,n=er(),x.inIteration=r,e.finishWhileStatement(t,n)}function zn
(e){var t,n,r,i,s,u,a,l,c,h,p,d,v=x.allowIn;t=s=u=null,n=!0,_t("for"),Ot("(");if(
Dt(";"))vt();else if(Pt("var"))t=new wt,vt(),x.allowIn=!1,h=An({inFor:!0}),x.allowIn=
v,h.length===1&&Pt("in")?(t=t.finishVariableDeclaration(h),vt(),a=t,l=xn(),t=null
):h.length===1&&h[0].init===null&&Ht("of")?(t=t.finishVariableDeclaration(h),vt(
),a=t,l=Sn(),t=null,n=!1):(t=t.finishVariableDeclaration(h),Ot(";"));else if(Pt("const"
)||Pt("let"))t=new wt,c=vt().value,!f&&S.value==="in"?(t=t.finishIdentifier(c),vt
(),a=t,l=xn(),t=null):(x.allowIn=!1,h=_n(c,{inFor:!0}),x.allowIn=v,h.length===1&&
h[0].init===null&&Pt("in")?(t=t.finishLexicalDeclaration(h,c),vt(),a=t,l=xn(),t=
null):h.length===1&&h[0].init===null&&Ht("of")?(t=t.finishLexicalDeclaration(h,c
),vt(),a=t,l=Sn(),t=null,n=!1):(jt(),t=t.finishLexicalDeclaration(h,c)));else{i=
S,x.allowIn=!1,t=It(Sn),x.allowIn=v;if(Pt("in"))C||Ct(o.InvalidLHSInForIn),vt(),
Zt(t),a=t,l=xn(),t=null;else if(Ht("of"))C||Ct(o.InvalidLHSInForLoop),vt(),Zt(t)
,a=t,l=Sn(),t=null,n=!1;else{if(Dt(",")){r=[t];while(Dt(","))vt(),r.push(Ft(Sn))
;t=(new Et(i)).finishSequenceExpression(r)}Ot(";")}}return typeof a=="undefined"&&
(Dt(";")||(s=xn()),Ot(";"),Dt(")")||(u=xn())),Ot(")"),d=x.inIteration,x.inIteration=!0
,p=Ft(er),x.inIteration=d,typeof a=="undefined"?e.finishForStatement(t,s,u,p):n?
e.finishForInStatement(a,l,p):e.finishForOfStatement(a,l,p)}function Wn(e){var n=
null,r;return _t("continue"),a.charCodeAt(g)===59?(vt(),x.inIteration||Nt(o.IllegalContinue
),e.finishContinueStatement(null)):p?(x.inIteration||Nt(o.IllegalContinue),e.finishContinueStatement
(null)):(S.type===t.Identifier&&(n=kn(),r="$"+n.name,Object.prototype.hasOwnProperty
.call(x.labelSet,r)||Nt(o.UnknownLabel,n.name)),jt(),n===null&&!x.inIteration&&Nt
(o.IllegalContinue),e.finishContinueStatement(n))}function Xn(e){var n=null,r;return _t
("break"),a.charCodeAt(d)===59?(vt(),!x.inIteration&&!x.inSwitch&&Nt(o.IllegalBreak
),e.finishBreakStatement(null)):(p?!x.inIteration&&!x.inSwitch&&Nt(o.IllegalBreak
):S.type===t.Identifier&&(n=kn(),r="$"+n.name,Object.prototype.hasOwnProperty.call
(x.labelSet,r)||Nt(o.UnknownLabel,n.name)),jt(),n===null&&!x.inIteration&&!x.inSwitch&&
Nt(o.IllegalBreak),e.finishBreakStatement(n))}function Vn(e){var n=null;return _t
("return"),x.inFunctionBody||Ct(o.IllegalReturn),a.charCodeAt(d)===32&&B(a.charCodeAt
(d+1))?(n=xn(),jt(),e.finishReturnStatement(n)):p?e.finishReturnStatement(null):
(Dt(";")||!Dt("}")&&S.type!==t.EOF&&(n=xn()),jt(),e.finishReturnStatement(n))}function $n
(e){var t,n;return f&&Ct(o.StrictModeWith),_t("with"),Ot("("),t=xn(),Ot(")"),n=er
(),e.finishWithStatement(t,n)}function Jn(){var e,t=[],n,r=new wt;Pt("default")?
(vt(),e=null):(_t("case"),e=xn()),Ot(":");while(g<E){if(Dt("}")||Pt("default")||
Pt("case"))break;n=Tn(),t.push(n)}return r.finishSwitchCase(e,t)}function Kn(e){
var t,n,r,i,s;_t("switch"),Ot("("),t=xn(),Ot(")"),Ot("{"),n=[];if(Dt("}"))return vt
(),e.finishSwitchStatement(t,n);i=x.inSwitch,x.inSwitch=!0,s=!1;while(g<E){if(Dt
("}"))break;r=Jn(),r.test===null&&(s&&Nt(o.MultipleDefaultsInSwitch),s=!0),n.push
(r)}return x.inSwitch=i,Ot("}"),e.finishSwitchStatement(t,n)}function Qn(e){var t
;return _t("throw"),p&&Nt(o.NewlineAfterThrow),t=xn(),jt(),e.finishThrowStatement
(t)}function Gn(){var e,t=[],n={},r,i,s,u=new wt;_t("catch"),Ot("("),Dt(")")&&Lt
(S),e=zt(t);for(i=0;i<t.length;i++)r="$"+t[i].value,Object.prototype.hasOwnProperty
.call(n,r)&&Ct(o.DuplicateBinding,t[i].value),n[r]=!0;return f&&q(e.name)&&Ct(o.
StrictCatchVariable),Ot(")"),s=Cn(),u.finishCatchClause(e,s)}function Yn(e){var t
,n=null,r=null;return _t("try"),t=Cn(),Pt("catch")&&(n=Gn()),Pt("finally")&&(vt(
),r=Cn()),!n&&!r&&Nt(o.NoCatchOrFinally),e.finishTryStatement(t,n,r)}function Zn
(e){return _t("debugger"),jt(),e.finishDebuggerStatement()}function er(){var e=S
.type,n,r,s,u;e===t.EOF&&Lt(S);if(e===t.Punctuator&&S.value==="{")return Cn();C=
N=!0,u=new wt;if(e===t.Punctuator)switch(S.value){case";":return Fn(u);case"(":return In
(u);default:}else if(e===t.Keyword)switch(S.value){case"break":return Xn(u);case"continue"
:return Wn(u);case"debugger":return Zn(u);case"do":return Rn(u);case"for":return zn
(u);case"function":return sr(u);case"if":return qn(u);case"return":return Vn(u);
case"switch":return Kn(u);case"throw":return Qn(u);case"try":return Yn(u);case"var"
:return On(u);case"while":return Un(u);case"with":return $n(u);default:}return n=
xn(),n.type===i.Identifier&&Dt(":")?(vt(),s="$"+n.name,Object.prototype.hasOwnProperty
.call(x.labelSet,s)&&Nt(o.Redeclaration,"Label",n.name),x.labelSet[s]=!0,r=er(),delete
x.labelSet[s],u.finishLabeledStatement(n,r)):(jt(),u.finishExpressionStatement(n
))}function tr(){var e,n=[],r,s,u,l,c,h,p,d=new wt;Ot("{");while(g<E){if(S.type!==
t.StringLiteral)break;r=S,e=Tn(),n.push(e);if(e.expression.type!==i.Literal)break;
s=a.slice(r.start+1,r.end-1),s==="use strict"?(f=!0,u&&At(u,o.StrictOctalLiteral
)):!u&&r.octal&&(u=r)}l=x.labelSet,c=x.inIteration,h=x.inSwitch,p=x.inFunctionBody
,x.labelSet={},x.inIteration=!1,x.inSwitch=!1,x.inFunctionBody=!0;while(g<E){if(
Dt("}"))break;n.push(Tn())}return Ot("}"),x.labelSet=l,x.inIteration=c,x.inSwitch=
h,x.inFunctionBody=p,d.finishBlockStatement(n)}function nr(e,t,n){var r="$"+n;f?
(q(n)&&(e.stricted=t,e.message=o.StrictParamName),Object.prototype.hasOwnProperty
.call(e.paramSet,r)&&(e.stricted=t,e.message=o.StrictParamDupe)):e.firstRestricted||
(q(n)?(e.firstRestricted=t,e.message=o.StrictParamName):I(n)?(e.firstRestricted=
t,e.message=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet
,r)&&(e.stricted=t,e.message=o.StrictParamDupe)),e.paramSet[r]=!0}function rr(e)
{var t,n,r=[],s,o;t=S;if(t.value==="...")return n=jn(r),nr(e,n.argument,n.argument
.name),e.params.push(n),e.defaults.push(null),!1;n=Wt(r);for(s=0;s<r.length;s++)
nr(e,r[s],r[s].value);return n.type===i.AssignmentPattern&&(o=n.right,n=n.left,++
e.defaultCount),e.params.push(n),e.defaults.push(o),!Dt(")")}function ir(e){var t
;t={params:[],defaultCount:0,defaults:[],firstRestricted:e},Ot("(");if(!Dt(")"))
{t.paramSet={};while(g<E){if(!rr(t))break;Ot(",")}}return Ot(")"),t.defaultCount===0&&
(t.defaults=[]),{params:t.params,defaults:t.defaults,stricted:t.stricted,firstRestricted
:t.firstRestricted,message:t.message}}function sr(e,t){var n=null,r=[],i=[],s,u,
a,l,c,h,p,d,v;v=x.allowYield,_t("function"),d=Dt("*"),d&&vt();if(!t||!Dt("("))u=
S,n=kn(),f?q(u.value)&&At(u,o.StrictFunctionName):q(u.value)?(c=u,h=o.StrictFunctionName
):I(u.value)&&(c=u,h=o.StrictReservedWord);return x.allowYield=!d,l=ir(c),r=l.params
,i=l.defaults,a=l.stricted,c=l.firstRestricted,l.message&&(h=l.message),p=f,s=tr
(),f&&c&&Lt(c,h),f&&a&&At(a,h),f=p,x.allowYield=v,e.finishFunctionDeclaration(n,
r,i,s,d)}function or(){var e,t=null,n,r,i,s,u=[],a=[],l,c,h=new wt,p,d;return d=
x.allowYield,_t("function"),p=Dt("*"),p&&vt(),x.allowYield=!p,Dt("(")||(e=S,t=!f&&!
p&&Pt("yield")?on():kn(),f?q(e.value)&&At(e,o.StrictFunctionName):q(e.value)?(r=
e,i=o.StrictFunctionName):I(e.value)&&(r=e,i=o.StrictReservedWord)),s=ir(r),u=s.
params,a=s.defaults,n=s.stricted,r=s.firstRestricted,s.message&&(i=s.message),c=
f,l=tr(),f&&r&&Lt(r,i),f&&n&&At(n,i),f=c,x.allowYield=d,h.finishFunctionExpression
(t,u,a,l,p)}function ur(){var e,t,n,r=!1,s,u,a,f;e=new wt,Ot("{"),s=[];while(!Dt
("}"))Dt(";")?vt():(u=new wt,t=S,n=!1,a=Dt("["),Dt("*")?vt():(f=Jt(),f.name==="static"&&
(Kt()||Dt("*"))&&(t=S,n=!0,a=Dt("["),Dt("*")?vt():f=Jt())),u=Qt(t,f,a,u),u?(u["static"
]=n,u.kind==="init"&&(u.kind="method"),n?!u.computed&&(u.key.name||u.key.value.toString
())==="prototype"&&Lt(t,o.StaticPrototype):!u.computed&&(u.key.name||u.key.value
.toString())==="constructor"&&((u.kind!=="method"||!u.method||u.value.generator)&&
Lt(t,o.ConstructorSpecialMethod),r?Lt(t,o.DuplicateConstructor):r=!0,u.kind="constructor"
),u.type=i.MethodDefinition,delete u.method,delete u.shorthand,s.push(u)):Lt(S))
;return vt(),e.finishClassBody(s)}function ar(e){var n=null,r=null,i=new wt,s,o=
f;f=!0,_t("class");if(!e||S.type===t.Identifier)n=kn();return Pt("extends")&&(vt
(),r=Ft(ln)),s=ur(),f=o,i.finishClassDeclaration(n,r,s)}function fr(){var e=null
,n=null,r=new wt,i,s=f;return f=!0,_t("class"),S.type===t.Identifier&&(e=kn()),Pt
("extends")&&(vt(),n=Ft(ln)),i=ur(),f=s,r.finishClassExpression(e,n,i)}function lr
(){var e=new wt;return S.type!==t.StringLiteral&&Nt(o.InvalidModuleSpecifier),e.
finishLiteral(vt())}function cr(){var e,t,n=new wt,r;return Pt("default")?(r=new
wt,vt(),t=r.finishIdentifier("default")):t=kn(),Ht("as")&&(vt(),e=on()),n.finishExportSpecifier
(t,e)}function hr(e){var n=null,r,i=null,s=[];if(S.type===t.Keyword)switch(S.value
){case"let":case"const":return n=Bn({inFor:!1}),e.finishExportNamedDeclaration(n
,s,null);case"var":case"class":case"function":return n=Tn(),e.finishExportNamedDeclaration
(n,s,null)}Ot("{");while(!Dt("}")){r=r||Pt("default"),s.push(cr());if(!Dt("}")){
Ot(",");if(Dt("}"))break}}return Ot("}"),Ht("from")?(vt(),i=lr(),jt()):r?Nt(S.value?
o.UnexpectedToken:o.MissingFromClause,S.value):jt(),e.finishExportNamedDeclaration
(n,s,i)}function pr(e){var t=null,n=null;return _t("default"),Pt("function")?(t=
sr(new wt,!0),e.finishExportDefaultDeclaration(t)):Pt("class")?(t=ar(!0),e.finishExportDefaultDeclaration
(t)):(Ht("from")&&Nt(o.UnexpectedToken,S.value),Dt("{")?n=Yt():Dt("[")?n=Xt():n=
Sn(),jt(),e.finishExportDefaultDeclaration(n))}function dr(e){var t;return Ot("*"
),Ht("from")||Nt(S.value?o.UnexpectedToken:o.MissingFromClause,S.value),vt(),t=lr
(),jt(),e.finishExportAllDeclaration(t)}function vr(){var e=new wt;return x.inFunctionBody&&
Nt(o.IllegalExportDeclaration),_t("export"),Pt("default")?pr(e):Dt("*")?dr(e):hr
(e)}function mr(){var e,t,n=new wt;return t=on(),Ht("as")&&(vt(),e=kn()),n.finishImportSpecifier
(e,t)}function gr(){var e=[];Ot("{");while(!Dt("}")){e.push(mr());if(!Dt("}")){Ot
(",");if(Dt("}"))break}}return Ot("}"),e}function yr(){var e,t=new wt;return e=on
(),t.finishImportDefaultSpecifier(e)}function br(){var e,t=new wt;return Ot("*")
,Ht("as")||Nt(o.NoAsAfterImportNamespace),vt(),e=on(),t.finishImportNamespaceSpecifier
(e)}function wr(){var e=[],n,r=new wt;return x.inFunctionBody&&Nt(o.IllegalImportDeclaration
),_t("import"),S.type===t.StringLiteral?n=lr():(Dt("{")?e=e.concat(gr()):Dt("*")?
e.push(br()):ct(S)&&!Pt("default")?(e.push(yr()),Dt(",")&&(vt(),Dt("*")?e.push(br
()):Dt("{")?e=e.concat(gr()):Lt(S))):Lt(vt()),Ht("from")||Nt(S.value?o.UnexpectedToken
:o.MissingFromClause,S.value),vt(),n=lr()),jt(),r.finishImportDeclaration(e,n)}function Er
(){var e,n=[],r,s,u;while(g<E){r=S;if(r.type!==t.StringLiteral)break;e=Tn(),n.push
(e);if(e.expression.type!==i.Literal)break;s=a.slice(r.start+1,r.end-1),s==="use strict"?
(f=!0,u&&At(u,o.StrictOctalLiteral)):!u&&r.octal&&(u=r)}while(g<E){e=Tn();if(typeof
e=="undefined")break;n.push(e)}return n}function Sr(){var e,t;return mt(),t=new
wt,e=Er(),t.finishProgram(e,x.sourceType)}function xr(){var e,t,n,r=[];for(e=0;e<
T.tokens.length;++e)t=T.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex=
{pattern:t.regex.pattern,flags:t.regex.flags}),T.range&&(n.range=t.range),T.loc&&
(n.loc=t.loc),r.push(n);T.tokens=r}function Tr(e,n,r){var i,s;i=String,typeof e!="string"&&!
(e instanceof String)&&(e=i(e)),a=e,l=0,c=a.length>0?1:0,h=0,g=l,y=c,b=h,E=a.length
,S=null,x={allowIn:!0,allowYield:!0,labelSet:{},inFunctionBody:!1,inIteration:!1
,inSwitch:!1,lastCommentStart:-1,curlyStack:[]},T={},n=n||{},n.tokens=!0,T.tokens=
[],T.tokenValues=[],T.tokenize=!0,T.delegate=r,T.openParenToken=-1,T.openCurlyToken=-1
,T.range=typeof n.range=="boolean"&&n.range,T.loc=typeof n.loc=="boolean"&&n.loc
,typeof n.comment=="boolean"&&n.comment&&(T.comments=[]),typeof n.tolerant=="boolean"&&
n.tolerant&&(T.errors=[]);try{mt();if(S.type===t.EOF)return T.tokens;vt();while(
S.type!==t.EOF)try{vt()}catch(o){if(T.errors){St(o);break}throw o}s=T.tokens,typeof
T.errors!="undefined"&&(s.errors=T.errors)}catch(u){throw u}finally{T={}}return s
}function Nr(e,t){var n,r;r=String,typeof e!="string"&&!(e instanceof String)&&(
e=r(e)),a=e,l=0,c=a.length>0?1:0,h=0,g=l,y=c,b=h,E=a.length,S=null,x={allowIn:!0
,allowYield:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart
:-1,curlyStack:[],sourceType:"script"},f=!1,T={},typeof t!="undefined"&&(T.range=typeof
t.range=="boolean"&&t.range,T.loc=typeof t.loc=="boolean"&&t.loc,T.attachComment=typeof
t.attachComment=="boolean"&&t.attachComment,T.loc&&t.source!==null&&t.source!==undefined&&
(T.source=r(t.source)),typeof t.tokens=="boolean"&&t.tokens&&(T.tokens=[]),typeof
t.comment=="boolean"&&t.comment&&(T.comments=[]),typeof t.tolerant=="boolean"&&t
.tolerant&&(T.errors=[]),T.attachComment&&(T.range=!0,T.comments=[],T.bottomRightStack=
[],T.trailingComments=[],T.leadingComments=[]),t.sourceType==="module"&&(x.sourceType=
t.sourceType,f=!0));try{n=Sr(),typeof T.comments!="undefined"&&(n.comments=T.comments
),typeof T.tokens!="undefined"&&(xr(),n.tokens=T.tokens),typeof T.errors!="undefined"&&
(n.errors=T.errors)}catch(i){throw i}finally{T={}}return n}var t,n,r,i,s,o,u,a,f
,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k;t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword
:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression
:9,Template:10},n={},n[t.BooleanLiteral]="Boolean",n[t.EOF]="<end>",n[t.Identifier
]="Identifier",n[t.Keyword]="Keyword",n[t.NullLiteral]="Null",n[t.NumericLiteral
]="Numeric",n[t.Punctuator]="Punctuator",n[t.StringLiteral]="String",n[t.RegularExpression
]="RegularExpression",n[t.Template]="Template",r=["(","{","[","in","typeof","instanceof"
,"new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<="
,">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&"
,"|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],i={AssignmentExpression
:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression"
,ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement
:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement"
,CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody"
,ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression
:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement"
,DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration
:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration
:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement"
,ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement"
,FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression"
,Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration"
,ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier"
,ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement"
,LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty
:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression"
,ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program"
,Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement"
,SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super"
,SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression
:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral"
,ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement"
,UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration
:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement"
,WithStatement:"WithStatement",YieldExpression:"YieldExpression"},s={ArrowParameterPlaceHolder
:"ArrowParameterPlaceHolder"},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber
:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier"
,UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0"
,UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw"
,InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /"
,InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn
:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop"
,MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally
:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration
:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement"
,IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement"
,StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable
:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode"
,StrictParamName:"Parameter name eval or arguments is not allowed in strict mode"
,StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName
:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode."
,StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictLHSAssignment
:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix
:"Postfix increment/decrement may not have eval or arguments operand in strict mode"
,StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode"
,StrictReservedWord:"Use of future reserved word in strict mode",TemplateOctalLiteral
:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter
:"Rest parameter must be last formal parameter",DefaultRestParameter:"Unexpected token ="
,ObjectPatternAsRestParameter:"Unexpected token {",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals"
,ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor
:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype"
,MissingFromClause:"Unexpected token",NoAsAfterImportNamespace:"Unexpected token"
,InvalidModuleSpecifier:"Unexpected token",IllegalImportDeclaration:"Unexpected token"
,IllegalExportDeclaration:"Unexpected token",DuplicateBinding:"Duplicate binding %0"
},u={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDE00-\uDE11\uDE13-\uDE2B\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDE00-\uDE2F\uDE44\uDE80-\uDEAA]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/
,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDD0-\uDDDA\uDE00-\uDE11\uDE13-\uDE37\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF01-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/
},Et.prototype=wt.prototype={processComment:function(){var e,t,n,r,s=T.bottomRightStack
,o,u,a=s[s.length-1];if(this.type===i.Program&&this.body.length>0)return;if(this
.type===i.BlockStatement&&this.body.length===0){t=[];for(o=T.leadingComments.length-1
;o>=0;--o)u=T.leadingComments[o],this.range[1]>=u.range[1]&&(t.unshift(u),T.leadingComments
.splice(o,1),T.trailingComments.splice(o,1));if(t.length){this.innerComments=t;return}
}if(T.trailingComments.length>0){r=[];for(o=T.trailingComments.length-1;o>=0;--o
)u=T.trailingComments[o],u.range[0]>=this.range[1]&&(r.unshift(u),T.trailingComments
.splice(o,1));T.trailingComments=[]}else a&&a.trailingComments&&a.trailingComments
[0].range[0]>=this.range[1]&&(r=a.trailingComments,delete a.trailingComments);while(
a&&a.range[0]>=this.range[0])e=s.pop(),a=s[s.length-1];if(e){if(e.leadingComments
){n=[];for(o=e.leadingComments.length-1;o>=0;--o)u=e.leadingComments[o],u.range[1
]<=this.range[0]&&(n.unshift(u),e.leadingComments.splice(o,1));e.leadingComments
.length||(e.leadingComments=undefined)}}else if(T.leadingComments.length>0){n=[]
;for(o=T.leadingComments.length-1;o>=0;--o)u=T.leadingComments[o],u.range[1]<=this
.range[0]&&(n.unshift(u),T.leadingComments.splice(o,1))}n&&n.length>0&&(this.leadingComments=
n),r&&r.length>0&&(this.trailingComments=r),s.push(this)},finish:function(){T.range&&
(this.range[1]=d),T.loc&&(this.loc.end={line:v,column:d-m},T.source&&(this.loc.source=
T.source)),T.attachComment&&this.processComment()},finishArrayExpression:function(
e){return this.type=i.ArrayExpression,this.elements=e,this.finish(),this},finishArrayPattern
:function(e){return this.type=i.ArrayPattern,this.elements=e,this.finish(),this}
,finishArrowFunctionExpression:function(e,t,n,r){return this.type=i.ArrowFunctionExpression
,this.id=null,this.params=e,this.defaults=t,this.body=n,this.generator=!1,this.expression=
r,this.finish(),this},finishAssignmentExpression:function(e,t,n){return this.type=
i.AssignmentExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this
},finishAssignmentPattern:function(e,t){return this.type=i.AssignmentPattern,this
.left=e,this.right=t,this.finish(),this},finishBinaryExpression:function(e,t,n){
return this.type=e==="||"||e==="&&"?i.LogicalExpression:i.BinaryExpression,this.
operator=e,this.left=t,this.right=n,this.finish(),this},finishBlockStatement:function(
e){return this.type=i.BlockStatement,this.body=e,this.finish(),this},finishBreakStatement
:function(e){return this.type=i.BreakStatement,this.label=e,this.finish(),this},
finishCallExpression:function(e,t){return this.type=i.CallExpression,this.callee=
e,this.arguments=t,this.finish(),this},finishCatchClause:function(e,t){return this
.type=i.CatchClause,this.param=e,this.body=t,this.finish(),this},finishClassBody
:function(e){return this.type=i.ClassBody,this.body=e,this.finish(),this},finishClassDeclaration
:function(e,t,n){return this.type=i.ClassDeclaration,this.id=e,this.superClass=t
,this.body=n,this.finish(),this},finishClassExpression:function(e,t,n){return this
.type=i.ClassExpression,this.id=e,this.superClass=t,this.body=n,this.finish(),this
},finishConditionalExpression:function(e,t,n){return this.type=i.ConditionalExpression
,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishContinueStatement
:function(e){return this.type=i.ContinueStatement,this.label=e,this.finish(),this
},finishDebuggerStatement:function(){return this.type=i.DebuggerStatement,this.finish
(),this},finishDoWhileStatement:function(e,t){return this.type=i.DoWhileStatement
,this.body=e,this.test=t,this.finish(),this},finishEmptyStatement:function(){return this
.type=i.EmptyStatement,this.finish(),this},finishExpressionStatement:function(e)
{return this.type=i.ExpressionStatement,this.expression=e,this.finish(),this},finishForStatement
:function(e,t,n,r){return this.type=i.ForStatement,this.init=e,this.test=t,this.
update=n,this.body=r,this.finish(),this},finishForOfStatement:function(e,t,n){return this
.type=i.ForOfStatement,this.left=e,this.right=t,this.body=n,this.finish(),this},
finishForInStatement:function(e,t,n){return this.type=i.ForInStatement,this.left=
e,this.right=t,this.body=n,this.each=!1,this.finish(),this},finishFunctionDeclaration
:function(e,t,n,r,s){return this.type=i.FunctionDeclaration,this.id=e,this.params=
t,this.defaults=n,this.body=r,this.generator=s,this.expression=!1,this.finish(),
this},finishFunctionExpression:function(e,t,n,r,s){return this.type=i.FunctionExpression
,this.id=e,this.params=t,this.defaults=n,this.body=r,this.generator=s,this.expression=!1
,this.finish(),this},finishIdentifier:function(e){return this.type=i.Identifier,
this.name=e,this.finish(),this},finishIfStatement:function(e,t,n){return this.type=
i.IfStatement,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this}
,finishLabeledStatement:function(e,t){return this.type=i.LabeledStatement,this.label=
e,this.body=t,this.finish(),this},finishLiteral:function(e){return this.type=i.Literal
,this.value=e.value,this.raw=a.slice(e.start,e.end),e.regex&&(this.regex=e.regex
),this.finish(),this},finishMemberExpression:function(e,t,n){return this.type=i.
MemberExpression,this.computed=e==="[",this.object=t,this.property=n,this.finish
(),this},finishMetaProperty:function(e,t){return this.type=i.MetaProperty,this.meta=
e,this.property=t,this.finish(),this},finishNewExpression:function(e,t){return this
.type=i.NewExpression,this.callee=e,this.arguments=t,this.finish(),this},finishObjectExpression
:function(e){return this.type=i.ObjectExpression,this.properties=e,this.finish()
,this},finishObjectPattern:function(e){return this.type=i.ObjectPattern,this.properties=
e,this.finish(),this},finishPostfixExpression:function(e,t){return this.type=i.UpdateExpression
,this.operator=e,this.argument=t,this.prefix=!1,this.finish(),this},finishProgram
:function(e,t){return this.type=i.Program,this.body=e,this.sourceType=t,this.finish
(),this},finishProperty:function(e,t,n,r,s,o){return this.type=i.Property,this.key=
t,this.computed=n,this.value=r,this.kind=e,this.method=s,this.shorthand=o,this.finish
(),this},finishRestElement:function(e){return this.type=i.RestElement,this.argument=
e,this.finish(),this},finishReturnStatement:function(e){return this.type=i.ReturnStatement
,this.argument=e,this.finish(),this},finishSequenceExpression:function(e){return this
.type=i.SequenceExpression,this.expressions=e,this.finish(),this},finishSpreadElement
:function(e){return this.type=i.SpreadElement,this.argument=e,this.finish(),this
},finishSwitchCase:function(e,t){return this.type=i.SwitchCase,this.test=e,this.
consequent=t,this.finish(),this},finishSuper:function(){return this.type=i.Super
,this.finish(),this},finishSwitchStatement:function(e,t){return this.type=i.SwitchStatement
,this.discriminant=e,this.cases=t,this.finish(),this},finishTaggedTemplateExpression
:function(e,t){return this.type=i.TaggedTemplateExpression,this.tag=e,this.quasi=
t,this.finish(),this},finishTemplateElement:function(e,t){return this.type=i.TemplateElement
,this.value=e,this.tail=t,this.finish(),this},finishTemplateLiteral:function(e,t
){return this.type=i.TemplateLiteral,this.quasis=e,this.expressions=t,this.finish
(),this},finishThisExpression:function(){return this.type=i.ThisExpression,this.
finish(),this},finishThrowStatement:function(e){return this.type=i.ThrowStatement
,this.argument=e,this.finish(),this},finishTryStatement:function(e,t,n){return this
.type=i.TryStatement,this.block=e,this.guardedHandlers=[],this.handlers=t?[t]:[]
,this.handler=t,this.finalizer=n,this.finish(),this},finishUnaryExpression:function(
e,t){return this.type=e==="++"||e==="--"?i.UpdateExpression:i.UnaryExpression,this
.operator=e,this.argument=t,this.prefix=!0,this.finish(),this},finishVariableDeclaration
:function(e){return this.type=i.VariableDeclaration,this.declarations=e,this.kind="var"
,this.finish(),this},finishLexicalDeclaration:function(e,t){return this.type=i.VariableDeclaration
,this.declarations=e,this.kind=t,this.finish(),this},finishVariableDeclarator:function(
e,t){return this.type=i.VariableDeclarator,this.id=e,this.init=t,this.finish(),this
},finishWhileStatement:function(e,t){return this.type=i.WhileStatement,this.test=
e,this.body=t,this.finish(),this},finishWithStatement:function(e,t){return this.
type=i.WithStatement,this.object=e,this.body=t,this.finish(),this},finishExportSpecifier
:function(e,t){return this.type=i.ExportSpecifier,this.exported=t||e,this.local=
e,this.finish(),this},finishImportDefaultSpecifier:function(e){return this.type=
i.ImportDefaultSpecifier,this.local=e,this.finish(),this},finishImportNamespaceSpecifier
:function(e){return this.type=i.ImportNamespaceSpecifier,this.local=e,this.finish
(),this},finishExportNamedDeclaration:function(e,t,n){return this.type=i.ExportNamedDeclaration
,this.declaration=e,this.specifiers=t,this.source=n,this.finish(),this},finishExportDefaultDeclaration
:function(e){return this.type=i.ExportDefaultDeclaration,this.declaration=e,this
.finish(),this},finishExportAllDeclaration:function(e){return this.type=i.ExportAllDeclaration
,this.source=e,this.finish(),this},finishImportSpecifier:function(e,t){return this
.type=i.ImportSpecifier,this.local=e||t,this.imported=t,this.finish(),this},finishImportDeclaration
:function(e,t){return this.type=i.ImportDeclaration,this.specifiers=e,this.source=
t,this.finish(),this},finishYieldExpression:function(e,t){return this.type=i.YieldExpression
,this.argument=e,this.delegate=t,this.finish(),this}},e.version="2.7.3",e.tokenize=
Tr,e.parse=Nr,e.Syntax=function(){var e,t={};typeof Object.create=="function"&&(
t=Object.create(null));for(e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return typeof
Object.freeze=="function"&&Object.freeze(t),t}()})
}());



/*
file estraverse/estraverse.js
2015-03-05T15:18:29Z - shGithubDateCommitted https://github.com/estools/estraverse/commits/1.9.3
https://github.com/estools/estraverse/blob/1.9.3/estraverse.js
utility2-uglifyjs https://raw.githubusercontent.com/estools/estraverse/1.9.3/estraverse.js > /tmp/aa.js
*/
/* istanbul ignore next */
(function () { var exports; exports = local.estraverse = {};
(function(e,t){"use strict";typeof define=="function"&&define.amd?define(["exports"
],t):typeof exports!="undefined"?t(exports):t(e.estraverse={})})(this,function e
(t){"use strict";function c(){}function h(e){var t={},n,r;for(n in e)e.hasOwnProperty
(n)&&(r=e[n],typeof r=="object"&&r!==null?t[n]=h(r):t[n]=r);return t}function p(
e){var t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function d(e,
t){var n,r,i,s;r=e.length,i=0;while(r)n=r>>>1,s=i+n,t(e[s])?r=n:(i=s+1,r-=n+1);return i
}function v(e,t){var n,r,i,s;r=e.length,i=0;while(r)n=r>>>1,s=i+n,t(e[s])?(i=s+1
,r-=n+1):r=n;return i}function m(e,t){var n=u(t),r,i,s;for(i=0,s=n.length;i<s;i+=1
)r=n[i],e[r]=t[r];return e}function g(e,t){this.parent=e,this.key=t}function y(e
,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function b(){}function w(
e){return e==null?!1:typeof e=="object"&&typeof e.type=="string"}function E(e,t)
{return(e===n.ObjectExpression||e===n.ObjectPattern)&&"properties"===t}function S
(e,t){var n=new b;return n.traverse(e,t)}function x(e,t){var n=new b;return n.replace
(e,t)}function T(e,t){var n;return n=d(t,function(n){return n.range[0]>e.range[0
]}),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[
n].range[0]),n-=1,n>=0&&(e.extendedRange[0]=t[n].range[1]),e}function N(e,t,n){var r=
[],s,o,u,a;if(!e.range)throw new Error("attachComments needs range information")
;if(!n.length){if(t.length){for(u=0,o=t.length;u<o;u+=1)s=h(t[u]),s.extendedRange=
[0,e.range[0]],r.push(s);e.leadingComments=r}return e}for(u=0,o=t.length;u<o;u+=1
)r.push(T(h(t[u]),n));return a=0,S(e,{enter:function(e){var t;while(a<r.length){
t=r[a];if(t.extendedRange[1]>e.range[0])break;t.extendedRange[1]===e.range[0]?(e
.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),r.splice(a,1)
):a+=1}if(a===r.length)return i.Break;if(r[a].extendedRange[0]>e.range[1])return i
.Skip}}),a=0,S(e,{leave:function(e){var t;while(a<r.length){t=r[a];if(e.range[1]<
t.extendedRange[0])break;e.range[1]===t.extendedRange[0]?(e.trailingComments||(e
.trailingComments=[]),e.trailingComments.push(t),r.splice(a,1)):a+=1}if(a===r.length
)return i.Break;if(r[a].extendedRange[0]>e.range[1])return i.Skip}}),e}var n,r,i
,s,o,u,a,f,l;return r=Array.isArray,r||(r=function(t){return Object.prototype.toString
.call(t)==="[object Array]"}),c(p),c(v),o=Object.create||function(){function e()
{}return function(t){return e.prototype=t,new e}}(),u=Object.keys||function(e){var t=
[],n;for(n in e)t.push(n);return t},n={AssignmentExpression:"AssignmentExpression"
,ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression
:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement"
,BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression
:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration
:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock"
,ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression"
,ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement
:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement"
,ExportBatchSpecifier:"ExportBatchSpecifier",ExportDeclaration:"ExportDeclaration"
,ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement
:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",
FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression"
,GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement"
,ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier"
,ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier"
,Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression"
,MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier
:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression"
,ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement
:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement"
,SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression
:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral"
,ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement"
,UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration
:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement"
,WithStatement:"WithStatement",YieldExpression:"YieldExpression"},s={AssignmentExpression
:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression
:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement
:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression
:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration
:["id","body","superClass"],ClassExpression:["id","body","superClass"],ComprehensionBlock
:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression
:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement
:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportBatchSpecifier
:[],ExportDeclaration:["declaration","specifiers","source"],ExportSpecifier:["id"
,"name"],ExpressionStatement:["expression"],ForStatement:["init","test","update"
,"body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"
],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression
:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter"
,"body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration
:["specifiers","source"],ImportDefaultSpecifier:["id"],ImportNamespaceSpecifier:
["id"],ImportSpecifier:["id","name"],Literal:[],LabeledStatement:["label","body"
],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition
:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression
:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"
],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:
["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"
],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis"
,"expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block"
,"handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"
],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator
:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression
:["argument"]},a={},f={},l={},i={Break:a,Skip:f,Remove:l},g.prototype.replace=function(
t){this.parent[this.key]=t},g.prototype.remove=function(){return r(this.parent)?
(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},b.prototype.path=function(
){function a(e,t){if(r(t))for(i=0,s=t.length;i<s;++i)e.push(t[i]);else e.push(t)
}var t,n,i,s,o,u;if(!this.__current.path)return null;o=[];for(t=2,n=this.__leavelist
.length;t<n;++t)u=this.__leavelist[t],a(o,u.path);return a(o,this.__current.path
),o},b.prototype.type=function(){var e=this.current();return e.type||this.__current
.wrap},b.prototype.parents=function(){var t,n,r;r=[];for(t=1,n=this.__leavelist.
length;t<n;++t)r.push(this.__leavelist[t].node);return r},b.prototype.current=function(
){return this.__current.node},b.prototype.__execute=function(t,n){var r,i;return i=
undefined,r=this.__current,this.__current=n,this.__state=null,t&&(i=t.call(this,
n.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=r,i},b.
prototype.notify=function(t){this.__state=t},b.prototype.skip=function(){this.notify
(f)},b.prototype["break"]=function(){this.notify(a)},b.prototype.remove=function(
){this.notify(l)},b.prototype.__initialize=function(e,t){this.visitor=t,this.root=
e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this
.__fallback=t.fallback==="iteration",this.__keys=s,t.keys&&(this.__keys=m(o(this
.__keys),t.keys))},b.prototype.traverse=function(t,n){var i,s,o,l,c,h,p,d,v,m,g,
b;this.__initialize(t,n),b={},i=this.__worklist,s=this.__leavelist,i.push(new y(
t,null,null,null)),s.push(new y(null,null,null,null));while(i.length){o=i.pop();
if(o===b){o=s.pop(),h=this.__execute(n.leave,o);if(this.__state===a||h===a)return;
continue}if(o.node){h=this.__execute(n.enter,o);if(this.__state===a||h===a)return;
i.push(b),s.push(o);if(this.__state===f||h===f)continue;l=o.node,c=o.wrap||l.type
,m=this.__keys[c];if(!m){if(!this.__fallback)throw new Error("Unknown node type "+
c+".");m=u(l)}d=m.length;while((d-=1)>=0){p=m[d],g=l[p];if(!g)continue;if(r(g)){
v=g.length;while((v-=1)>=0){if(!g[v])continue;if(E(c,m[d]))o=new y(g[v],[p,v],"Property"
,null);else{if(!w(g[v]))continue;o=new y(g[v],[p,v],null,null)}i.push(o)}}else w
(g)&&i.push(new y(g,p,null,null))}}}},b.prototype.replace=function(t,n){function i
(e){var t,n,r,i;if(e.ref.remove()){n=e.ref.key,i=e.ref.parent,t=s.length;while(t--
){r=s[t];if(r.ref&&r.ref.parent===i){if(r.ref.key<n)break;--r.ref.key}}}}var s,o
,c,h,p,d,v,m,b,S,x,T,N;this.__initialize(t,n),x={},s=this.__worklist,o=this.__leavelist
,T={root:t},d=new y(t,null,null,new g(T,"root")),s.push(d),o.push(d);while(s.length
){d=s.pop();if(d===x){d=o.pop(),p=this.__execute(n.leave,d),p!==undefined&&p!==a&&
p!==f&&p!==l&&d.ref.replace(p),(this.__state===l||p===l)&&i(d);if(this.__state===
a||p===a)return T.root;continue}p=this.__execute(n.enter,d),p!==undefined&&p!==a&&
p!==f&&p!==l&&(d.ref.replace(p),d.node=p);if(this.__state===l||p===l)i(d),d.node=
null;if(this.__state===a||p===a)return T.root;c=d.node;if(!c)continue;s.push(x),
o.push(d);if(this.__state===f||p===f)continue;h=d.wrap||c.type,b=this.__keys[h];
if(!b){if(!this.__fallback)throw new Error("Unknown node type "+h+".");b=u(c)}v=
b.length;while((v-=1)>=0){N=b[v],S=c[N];if(!S)continue;if(r(S)){m=S.length;while(
(m-=1)>=0){if(!S[m])continue;if(E(h,b[v]))d=new y(S[m],[N,m],"Property",new g(S,
m));else{if(!w(S[m]))continue;d=new y(S[m],[N,m],null,new g(S,m))}s.push(d)}}else w
(S)&&s.push(new y(S,N,null,new g(c,N)))}}return T.root},t.version="1.8.1-dev",t.
Syntax=n,t.traverse=S,t.replace=x,t.attachComments=N,t.VisitorKeys=s,t.VisitorOption=
i,t.Controller=b,t.cloneEnvironment=function(){return e({})},t})
}());



/*
file esutils/lib/code.js
2015-03-14T17:10:47Z - shGithubDateCommitted https://github.com/estools/esutils/commits/2.0.2
https://github.com/estools/esutils/blob/2.0.2/lib/code.js
utility2-uglifyjs https://raw.githubusercontent.com/estools/esutils/2.0.2/lib/code.js > /tmp/aa.js
*/
/* istanbul ignore next */
(function () { var module; module = {};
(function(){"use strict";function o(e){return 48<=e&&e<=57}function u(e){return 48<=
e&&e<=57||97<=e&&e<=102||65<=e&&e<=70}function a(e){return e>=48&&e<=55}function f
(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&n.indexOf(e)>=0}function l
(e){return e===10||e===13||e===8232||e===8233}function c(e){if(e<=65535)return String
.fromCharCode(e);var t=String.fromCharCode(Math.floor((e-65536)/1024)+55296),n=String
.fromCharCode((e-65536)%1024+56320);return t+n}function h(e){return e<128?r[e]:t
.NonAsciiIdentifierStart.test(c(e))}function p(e){return e<128?i[e]:t.NonAsciiIdentifierPart
.test(c(e))}function d(t){return t<128?r[t]:e.NonAsciiIdentifierStart.test(c(t))
}function v(t){return t<128?i[t]:e.NonAsciiIdentifierPart.test(c(t))}var e,t,n,r
,i,s;t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/
,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/
},e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDE00-\uDE11\uDE13-\uDE2B\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDE00-\uDE2F\uDE44\uDE80-\uDEAA]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/
,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDD0-\uDDDA\uDE00-\uDE11\uDE13-\uDE37\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF01-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/
},n=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288
,65279],r=new Array(128);for(s=0;s<128;++s)r[s]=s>=97&&s<=122||s>=65&&s<=90||s===36||
s===95;i=new Array(128);for(s=0;s<128;++s)i[s]=s>=97&&s<=122||s>=65&&s<=90||s>=48&&
s<=57||s===36||s===95;module.exports={isDecimalDigit:o,isHexDigit:u,isOctalDigit
:a,isWhiteSpace:f,isLineTerminator:l,isIdentifierStartES5:h,isIdentifierPartES5:
p,isIdentifierStartES6:d,isIdentifierPartES6:v}})()
local.esutils = { code: module.exports }; }());



/*
file escodegen/escodegen.js
2016-08-06T18:04:07Z - shGithubDateCommitted https://github.com/estools/escodegen/commits/1.8.1
https://github.com/estools/escodegen/blob/1.8.1/escodegen.js
utility2-uglifyjs https://raw.githubusercontent.com/estools/escodegen/1.8.1/escodegen.js > /tmp/aa.js
*/
/* istanbul ignore next */
(function () { var exports; exports = local.escodegen = {};
(function(){"use strict";function k(e){return bt.Expression.hasOwnProperty(e.type
)}function L(e){return bt.Statement.hasOwnProperty(e.type)}function V(){return{indent
:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment
:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless
:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines
:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap
:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,
sourceCode:null}}function $(e,t){var n="";for(t|=0;t>0;t>>>=1,e+=e)t&1&&(n+=e);return n
}function J(e){return/[\r\n]/g.test(e)}function K(e){var t=e.length;return t&&s.
code.isLineTerminator(e.charCodeAt(t-1))}function Q(e,t){var n;for(n in t)t.hasOwnProperty
(n)&&(e[n]=t[n]);return e}function G(e,t){function i(e){return typeof e=="object"&&
e instanceof Object&&!(e instanceof RegExp)}var n,r;for(n in t)t.hasOwnProperty(
n)&&(r=t[n],i(r)?i(e[n])?G(e[n],r):e[n]=G({},r):e[n]=r);return e}function Y(e){var t
,n,r,i,s;if(e!==e)throw new Error("Numeric literal whose value is NaN");if(e<0||
e===0&&1/e<0)throw new Error("Numeric literal whose value is negative");if(e===1/0
)return f?"null":l?"1e400":"1e+400";t=""+e;if(!l||t.length<3)return t;n=t.indexOf
("."),!f&&t.charCodeAt(0)===48&&n===1&&(n=0,t=t.slice(1)),r=t,t=t.replace("e+","e"
),i=0,(s=r.indexOf("e"))>0&&(i=+r.slice(s+1),r=r.slice(0,s)),n>=0&&(i-=r.length-
n-1,r=+(r.slice(0,n)+r.slice(n+1))+""),s=0;while(r.charCodeAt(r.length+s-1)===48
)--s;return s!==0&&(i-=s,r=r.slice(0,s)),i!==0&&(r+="e"+i),(r.length<t.length||c&&
e>1e12&&Math.floor(e)===e&&(r="0x"+e.toString(16)).length<t.length)&&+r===e&&(t=
r),t}function Z(e,t){return(e&-2)===8232?(t?"u":"\\u")+(e===8232?"2028":"2029"):
e===10||e===13?(t?"":"\\")+(e===10?"n":"r"):String.fromCharCode(e)}function et(e
){var t,n,r,i,s,o,u,a;n=e.toString();if(e.source){t=n.match(/\/([^/]*)$/);if(!t)
return n;r=t[1],n="",u=!1,a=!1;for(i=0,s=e.source.length;i<s;++i)o=e.source.charCodeAt
(i),a?(n+=Z(o,a),a=!1):(u?o===93&&(u=!1):o===47?n+="\\":o===91&&(u=!0),n+=Z(o,a)
,a=o===92);return"/"+n+"/"+r}return n}function tt(e,t){var n;return e===8?"\\b":
e===12?"\\f":e===9?"\\t":(n=e.toString(16).toUpperCase(),f||e>255?"\\u"+"0000".slice
(n.length)+n:e===0&&!s.code.isDecimalDigit(t)?"\\0":e===11?"\\x0B":"\\x"+"00".slice
(n.length)+n)}function nt(e){if(e===92)return"\\\\";if(e===10)return"\\n";if(e===13
)return"\\r";if(e===8232)return"\\u2028";if(e===8233)return"\\u2029";throw new Error
("Incorrectly classified character")}function rt(e){var t,n,r,i;i=h==="double"?'"'
:"'";for(t=0,n=e.length;t<n;++t){r=e.charCodeAt(t);if(r===39){i='"';break}if(r===34
){i="'";break}r===92&&++t}return i+e+i}function it(e){var t="",n,r,i,o=0,u=0,a,l
;for(n=0,r=e.length;n<r;++n){i=e.charCodeAt(n);if(i===39)++o;else if(i===34)++u;
else if(i===47&&f)t+="\\";else{if(s.code.isLineTerminator(i)||i===92){t+=nt(i);continue}
if(!s.code.isIdentifierPartES5(i)&&(f&&i<32||!f&&!p&&(i<32||i>126))){t+=tt(i,e.charCodeAt
(n+1));continue}}t+=String.fromCharCode(i)}a=!(h==="double"||h==="auto"&&u<o),l=
a?"'":'"';if(a?!o:!u)return l+t+l;e=t,t=l;for(n=0,r=e.length;n<r;++n){i=e.charCodeAt
(n);if(i===39&&a||i===34&&!a)t+="\\";t+=String.fromCharCode(i)}return t+l}function st
(e){var t,n,r,i="";for(t=0,n=e.length;t<n;++t)r=e[t],i+=o(r)?st(r):r;return i}function ot
(e,t){if(!S)return o(e)?st(e):e;if(t==null){if(e instanceof r)return e;t={}}return t
.loc==null?new r(null,null,S,e,t.name||null):new r(t.loc.start.line,t.loc.start.
column,S===!0?t.loc.source||null:S,e,t.name||null)}function ut(){return v?v:" "}
function at(e,t){var n,r,i,o;return n=ot(e).toString(),n.length===0?[t]:(r=ot(t)
.toString(),r.length===0?[e]:(i=n.charCodeAt(n.length-1),o=r.charCodeAt(0),(i===43||
i===45)&&i===o||s.code.isIdentifierPartES5(i)&&s.code.isIdentifierPartES5(o)||i===47&&
o===105?[e,ut(),t]:s.code.isWhiteSpace(i)||s.code.isLineTerminator(i)||s.code.isWhiteSpace
(o)||s.code.isLineTerminator(o)?[e,t]:[e,v,t]))}function ft(e){return[u,e]}function lt
(e){var t;t=u,u+=a,e(u),u=t}function ct(e){var t;for(t=e.length-1;t>=0;--t)if(s.
code.isLineTerminator(e.charCodeAt(t)))break;return e.length-1-t}function ht(e,t
){var n,r,i,o,a,f,l,c;n=e.split(/\r\n|[\r\n]/),f=Number.MAX_VALUE;for(r=1,i=n.length
;r<i;++r){o=n[r],a=0;while(a<o.length&&s.code.isWhiteSpace(o.charCodeAt(a)))++a;
f>a&&(f=a)}typeof t!="undefined"?(l=u,n[1][f]==="*"&&(t+=" "),u=t):(f&1&&--f,l=u
);for(r=1,i=n.length;r<i;++r)c=ot(ft(n[r].slice(f))),n[r]=S?c.join(""):c;return u=
l,n.join("\n")}function pt(e,t){if(e.type==="Line"){if(K(e.value))return"//"+e.value
;var n="//"+e.value;return T||(n+="\n"),n}return w.format.indent.adjustMultilineComment&&/[\n\r]/
.test(e.value)?ht("/*"+e.value+"*/",t):"/*"+e.value+"*/"}function dt(t,n){var r,
i,s,o,f,l,c,h,p,d,v,m,g,b;if(t.leadingComments&&t.leadingComments.length>0){o=n;
if(T){s=t.leadingComments[0],n=[],h=s.extendedRange,p=s.range,v=x.substring(h[0]
,p[0]),b=(v.match(/\n/g)||[]).length,b>0?(n.push($("\n",b)),n.push(ft(pt(s)))):(
n.push(v),n.push(pt(s))),d=p;for(r=1,i=t.leadingComments.length;r<i;r++)s=t.leadingComments
[r],p=s.range,m=x.substring(d[1],p[0]),b=(m.match(/\n/g)||[]).length,n.push($("\n"
,b)),n.push(ft(pt(s))),d=p;g=x.substring(p[1],h[1]),b=(g.match(/\n/g)||[]).length
,n.push($("\n",b))}else{s=t.leadingComments[0],n=[],y&&t.type===e.Program&&t.body
.length===0&&n.push("\n"),n.push(pt(s)),K(ot(n).toString())||n.push("\n");for(r=1
,i=t.leadingComments.length;r<i;++r)s=t.leadingComments[r],c=[pt(s)],K(ot(c).toString
())||c.push("\n"),n.push(ft(c))}n.push(ft(o))}if(t.trailingComments)if(T)s=t.trailingComments
[0],h=s.extendedRange,p=s.range,v=x.substring(h[0],p[0]),b=(v.match(/\n/g)||[]).
length,b>0?(n.push($("\n",b)),n.push(ft(pt(s)))):(n.push(v),n.push(pt(s)));else{
f=!K(ot(n).toString()),l=$(" ",ct(ot([u,n,a]).toString()));for(r=0,i=t.trailingComments
.length;r<i;++r)s=t.trailingComments[r],f?(r===0?n=[n,a]:n=[n,l],n.push(pt(s,l))
):n=[n,ft(pt(s))],r!==i-1&&!K(ot(n).toString())&&(n=[n,"\n"])}return n}function vt
(e,t,n){var r,i=0;for(r=e;r<t;r++)x[r]==="\n"&&i++;for(r=1;r<i;r++)n.push(d)}function mt
(e,t,n){return t<n?["(",e,")"]:e}function gt(e){var t,n,r;r=e.split(/\r\n|\n/);for(
t=1,n=r.length;t<n;t++)r[t]=d+u+r[t];return r}function yt(e,n){var r,i,s;return r=
e[w.verbatim],typeof r=="string"?i=mt(gt(r),t.Sequence,n):(i=gt(r.content),s=r.precedence!=
null?r.precedence:t.Sequence,i=mt(i,s,n)),ot(i,e)}function bt(){}function wt(e){
return ot(e.name,e)}function Et(e,t){return e.async?"async"+(t?ut():v):""}function St
(e){var t=e.generator&&!w.moz.starlessGenerator;return t?"*"+v:""}function xt(e)
{var t=e.value;return t.async?Et(t,!e.computed):St(t)?"*":""}function Tt(e){var n
;n=new bt;if(L(e))return n.generateStatement(e,R);if(k(e))return n.generateExpression
(e,t.Sequence,j);throw new Error("Unknown node type: "+e.type)}function Nt(e,t){
var n=V(),i,s;return t!=null?(typeof t.indent=="string"&&(n.format.indent.style=
t.indent),typeof t.base=="number"&&(n.format.indent.base=t.base),t=G(n,t),a=t.format
.indent.style,typeof t.base=="string"?u=t.base:u=$(a,t.format.indent.base)):(t=n
,a=t.format.indent.style,u=$(a,t.format.indent.base)),f=t.format.json,l=t.format
.renumber,c=f?!1:t.format.hexadecimal,h=f?"double":t.format.quotes,p=t.format.escapeless
,d=t.format.newline,v=t.format.space,t.format.compact&&(d=v=a=u=""),m=t.format.parentheses
,g=t.format.semicolons,y=t.format.safeConcatenation,b=t.directive,E=f?null:t.parse
,S=t.sourceMap,x=t.sourceCode,T=t.format.preserveBlankLines&&x!==null,w=t,S&&(exports
.browser?r=global.sourceMap.SourceNode:r=require("source-map").SourceNode),i=Tt(
e),S?(s=i.toStringWithSourceMap({file:t.file,sourceRoot:t.sourceMapRoot}),t.sourceContent&&
s.map.setSourceContent(t.sourceMap,t.sourceContent),t.sourceMapWithCode?s:s.map.
toString()):(s={code:i.toString(),map:null},t.sourceMapWithCode?s:s.code)}var e,
t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C;i=require("estraverse"),s=require
("esutils"),e=i.Syntax,t={Sequence:0,Yield:1,Await:1,Assignment:1,Conditional:2,
ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality
:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14
,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19},n={"||":t.LogicalOR,"&&"
:t.LogicalAND,"|":t.BitwiseOR,"^":t.BitwiseXOR,"&":t.BitwiseAND,"==":t.Equality,"!="
:t.Equality,"===":t.Equality,"!==":t.Equality,is:t.Equality,isnt:t.Equality,"<":
t.Relational,">":t.Relational,"<=":t.Relational,">=":t.Relational,"in":t.Relational
,"instanceof":t.Relational,"<<":t.BitwiseSHIFT,">>":t.BitwiseSHIFT,">>>":t.BitwiseSHIFT
,"+":t.Additive,"-":t.Additive,"*":t.Multiplicative,"%":t.Multiplicative,"/":t.Multiplicative
};var A=1,O=2,M=4,_=8,D=16,P=32,H=O|M,B=A|O,j=A|O|M,F=A,I=M,q=A|M,R=A,U=A|P,z=0,
W=A|D,X=A|_;o=Array.isArray,o||(o=function(t){return Object.prototype.toString.call
(t)==="[object Array]"}),bt.prototype.maybeBlock=function(t,n){var r,i,s=this;return i=!
w.comment||!t.leadingComments,t.type===e.BlockStatement&&i?[v,this.generateStatement
(t,n)]:t.type===e.EmptyStatement&&i?";":(lt(function(){r=[d,ft(s.generateStatement
(t,n))]}),r)},bt.prototype.maybeBlockSuffix=function(t,n){var r=K(ot(n).toString
());return t.type===e.BlockStatement&&(!w.comment||!t.leadingComments)&&!r?[n,v]
:r?[n,u]:[n,d,u]},bt.prototype.generatePattern=function(t,n,r){return t.type===e
.Identifier?wt(t):this.generateExpression(t,n,r)},bt.prototype.generateFunctionParams=
function(n){var r,i,s,o;o=!1;if(n.type===e.ArrowFunctionExpression&&!n.rest&&(!n
.defaults||n.defaults.length===0)&&n.params.length===1&&n.params[0].type===e.Identifier
)s=[Et(n,!0),wt(n.params[0])];else{s=n.type===e.ArrowFunctionExpression?[Et(n,!1
)]:[],s.push("("),n.defaults&&(o=!0);for(r=0,i=n.params.length;r<i;++r)o&&n.defaults
[r]?s.push(this.generateAssignment(n.params[r],n.defaults[r],"=",t.Assignment,j)
):s.push(this.generatePattern(n.params[r],t.Assignment,j)),r+1<i&&s.push(","+v);
n.rest&&(n.params.length&&s.push(","+v),s.push("..."),s.push(wt(n.rest))),s.push
(")")}return s},bt.prototype.generateFunctionBody=function(n){var r,i;return r=this
.generateFunctionParams(n),n.type===e.ArrowFunctionExpression&&(r.push(v),r.push
("=>")),n.expression?(r.push(v),i=this.generateExpression(n.body,t.Assignment,j)
,i.toString().charAt(0)==="{"&&(i=["(",i,")"]),r.push(i)):r.push(this.maybeBlock
(n.body,X)),r},bt.prototype.generateIterationForStatement=function(n,r,i){var s=
["for"+v+"("],o=this;return lt(function(){r.left.type===e.VariableDeclaration?lt
(function(){s.push(r.left.kind+ut()),s.push(o.generateStatement(r.left.declarations
[0],z))}):s.push(o.generateExpression(r.left,t.Call,j)),s=at(s,n),s=[at(s,o.generateExpression
(r.right,t.Sequence,j)),")"]}),s.push(this.maybeBlock(r.body,i)),s},bt.prototype
.generatePropertyKey=function(e,n,r){var i=[];return n&&i.push("["),r.type==="AssignmentPattern"?
i.push(this.AssignmentPattern(r,t.Sequence,j)):i.push(this.generateExpression(e,
t.Sequence,j)),n&&i.push("]"),i},bt.prototype.generateAssignment=function(e,n,r,
i,s){return t.Assignment<i&&(s|=A),mt([this.generateExpression(e,t.Call,s),v+r+v
,this.generateExpression(n,t.Assignment,s)],t.Assignment,i)},bt.prototype.semicolon=
function(e){return!g&&e&P?"":";"},bt.Statement={BlockStatement:function(e,t){var n
,r,i=["{",d],s=this;return lt(function(){e.body.length===0&&T&&(n=e.range,n[1]-n
[0]>2&&(r=x.substring(n[0]+1,n[1]-1),r[0]==="\n"&&(i=["{"]),i.push(r)));var o,u,
a,f;f=R,t&_&&(f|=D);for(o=0,u=e.body.length;o<u;++o)T&&(o===0&&(e.body[0].leadingComments&&
(n=e.body[0].leadingComments[0].extendedRange,r=x.substring(n[0],n[1]),r[0]==="\n"&&
(i=["{"])),e.body[0].leadingComments||vt(e.range[0],e.body[0].range[0],i)),o>0&&!
e.body[o-1].trailingComments&&!e.body[o].leadingComments&&vt(e.body[o-1].range[1
],e.body[o].range[0],i)),o===u-1&&(f|=P),e.body[o].leadingComments&&T?a=s.generateStatement
(e.body[o],f):a=ft(s.generateStatement(e.body[o],f)),i.push(a),K(ot(a).toString(
))||(T&&o<u-1?e.body[o+1].leadingComments||i.push(d):i.push(d)),T&&o===u-1&&(e.body
[o].trailingComments||vt(e.body[o].range[1],e.range[1],i))}),i.push(ft("}")),i},
BreakStatement:function(e,t){return e.label?"break "+e.label.name+this.semicolon
(t):"break"+this.semicolon(t)},ContinueStatement:function(e,t){return e.label?"continue "+
e.label.name+this.semicolon(t):"continue"+this.semicolon(t)},ClassBody:function(
e,n){var r=["{",d],i=this;return lt(function(n){var s,o;for(s=0,o=e.body.length;
s<o;++s)r.push(n),r.push(i.generateExpression(e.body[s],t.Sequence,j)),s+1<o&&r.
push(d)}),K(ot(r).toString())||r.push(d),r.push(u),r.push("}"),r},ClassDeclaration
:function(e,n){var r,i;return r=["class"],e.id&&(r=at(r,this.generateExpression(
e.id,t.Sequence,j))),e.superClass&&(i=at("extends",this.generateExpression(e.superClass
,t.Assignment,j)),r=at(r,i)),r.push(v),r.push(this.generateStatement(e.body,U)),
r},DirectiveStatement:function(e,t){return w.raw&&e.raw?e.raw+this.semicolon(t):
rt(e.directive)+this.semicolon(t)},DoWhileStatement:function(e,n){var r=at("do",
this.maybeBlock(e.body,R));return r=this.maybeBlockSuffix(e.body,r),at(r,["while"+
v+"(",this.generateExpression(e.test,t.Sequence,j),")"+this.semicolon(n)])},CatchClause
:function(e,n){var r,i=this;return lt(function(){var n;r=["catch"+v+"(",i.generateExpression
(e.param,t.Sequence,j),")"],e.guard&&(n=i.generateExpression(e.guard,t.Sequence,
j),r.splice(2,0," if ",n))}),r.push(this.maybeBlock(e.body,R)),r},DebuggerStatement
:function(e,t){return"debugger"+this.semicolon(t)},EmptyStatement:function(e,t){
return";"},ExportDefaultDeclaration:function(e,n){var r=["export"],i;return i=n&
P?U:R,r=at(r,"default"),L(e.declaration)?r=at(r,this.generateStatement(e.declaration
,i)):r=at(r,this.generateExpression(e.declaration,t.Assignment,j)+this.semicolon
(n)),r},ExportNamedDeclaration:function(n,r){var i=["export"],s,o=this;return s=
r&P?U:R,n.declaration?at(i,this.generateStatement(n.declaration,s)):(n.specifiers&&
(n.specifiers.length===0?i=at(i,"{"+v+"}"):n.specifiers[0].type===e.ExportBatchSpecifier?
i=at(i,this.generateExpression(n.specifiers[0],t.Sequence,j)):(i=at(i,"{"),lt(function(
e){var r,s;i.push(d);for(r=0,s=n.specifiers.length;r<s;++r)i.push(e),i.push(o.generateExpression
(n.specifiers[r],t.Sequence,j)),r+1<s&&i.push(","+d)}),K(ot(i).toString())||i.push
(d),i.push(u+"}")),n.source?i=at(i,["from"+v,this.generateExpression(n.source,t.
Sequence,j),this.semicolon(r)]):i.push(this.semicolon(r))),i)},ExportAllDeclaration
:function(e,n){return["export"+v,"*"+v,"from"+v,this.generateExpression(e.source
,t.Sequence,j),this.semicolon(n)]},ExpressionStatement:function(n,r){function u(
e){var t;return e.slice(0,5)!=="class"?!1:(t=e.charCodeAt(5),t===123||s.code.isWhiteSpace
(t)||s.code.isLineTerminator(t))}function a(e){var t;return e.slice(0,8)!=="function"?!1
:(t=e.charCodeAt(8),t===40||s.code.isWhiteSpace(t)||t===42||s.code.isLineTerminator
(t))}function f(e){var t,n,r;if(e.slice(0,5)!=="async")return!1;if(!s.code.isWhiteSpace
(e.charCodeAt(5)))return!1;for(n=6,r=e.length;n<r;++n)if(!s.code.isWhiteSpace(e.
charCodeAt(n)))break;return n===r?!1:e.slice(n,n+8)!=="function"?!1:(t=e.charCodeAt
(n+8),t===40||s.code.isWhiteSpace(t)||t===42||s.code.isLineTerminator(t))}var i,
o;return i=[this.generateExpression(n.expression,t.Sequence,j)],o=ot(i).toString
(),o.charCodeAt(0)===123||u(o)||a(o)||f(o)||b&&r&D&&n.expression.type===e.Literal&&typeof
n.expression.value=="string"?i=["(",i,")"+this.semicolon(r)]:i.push(this.semicolon
(r)),i},ImportDeclaration:function(n,r){var i,s,o=this;return n.specifiers.length===0?
["import",v,this.generateExpression(n.source,t.Sequence,j),this.semicolon(r)]:(i=
["import"],s=0,n.specifiers[s].type===e.ImportDefaultSpecifier&&(i=at(i,[this.generateExpression
(n.specifiers[s],t.Sequence,j)]),++s),n.specifiers[s]&&(s!==0&&i.push(","),n.specifiers
[s].type===e.ImportNamespaceSpecifier?i=at(i,[v,this.generateExpression(n.specifiers
[s],t.Sequence,j)]):(i.push(v+"{"),n.specifiers.length-s===1?(i.push(v),i.push(this
.generateExpression(n.specifiers[s],t.Sequence,j)),i.push(v+"}"+v)):(lt(function(
e){var r,u;i.push(d);for(r=s,u=n.specifiers.length;r<u;++r)i.push(e),i.push(o.generateExpression
(n.specifiers[r],t.Sequence,j)),r+1<u&&i.push(","+d)}),K(ot(i).toString())||i.push
(d),i.push(u+"}"+v)))),i=at(i,["from"+v,this.generateExpression(n.source,t.Sequence
,j),this.semicolon(r)]),i)},VariableDeclarator:function(e,n){var r=n&A?j:H;return e
.init?[this.generateExpression(e.id,t.Assignment,r),v,"=",v,this.generateExpression
(e.init,t.Assignment,r)]:this.generatePattern(e.id,t.Assignment,r)},VariableDeclaration
:function(e,t){function a(){s=e.declarations[0],w.comment&&s.leadingComments?(n.
push("\n"),n.push(ft(u.generateStatement(s,o)))):(n.push(ut()),n.push(u.generateStatement
(s,o)));for(r=1,i=e.declarations.length;r<i;++r)s=e.declarations[r],w.comment&&s
.leadingComments?(n.push(","+d),n.push(ft(u.generateStatement(s,o)))):(n.push(","+
v),n.push(u.generateStatement(s,o)))}var n,r,i,s,o,u=this;return n=[e.kind],o=t&
A?R:z,e.declarations.length>1?lt(a):a(),n.push(this.semicolon(t)),n},ThrowStatement
:function(e,n){return[at("throw",this.generateExpression(e.argument,t.Sequence,j
)),this.semicolon(n)]},TryStatement:function(e,t){var n,r,i,s;n=["try",this.maybeBlock
(e.block,R)],n=this.maybeBlockSuffix(e.block,n);if(e.handlers)for(r=0,i=e.handlers
.length;r<i;++r){n=at(n,this.generateStatement(e.handlers[r],R));if(e.finalizer||
r+1!==i)n=this.maybeBlockSuffix(e.handlers[r].body,n)}else{s=e.guardedHandlers||
[];for(r=0,i=s.length;r<i;++r){n=at(n,this.generateStatement(s[r],R));if(e.finalizer||
r+1!==i)n=this.maybeBlockSuffix(s[r].body,n)}if(e.handler)if(o(e.handler))for(r=0
,i=e.handler.length;r<i;++r){n=at(n,this.generateStatement(e.handler[r],R));if(e
.finalizer||r+1!==i)n=this.maybeBlockSuffix(e.handler[r].body,n)}else n=at(n,this
.generateStatement(e.handler,R)),e.finalizer&&(n=this.maybeBlockSuffix(e.handler
.body,n))}return e.finalizer&&(n=at(n,["finally",this.maybeBlock(e.finalizer,R)]
)),n},SwitchStatement:function(e,n){var r,i,s,o,u,a=this;lt(function(){r=["switch"+
v+"(",a.generateExpression(e.discriminant,t.Sequence,j),")"+v+"{"+d]});if(e.cases
){u=R;for(s=0,o=e.cases.length;s<o;++s)s===o-1&&(u|=P),i=ft(this.generateStatement
(e.cases[s],u)),r.push(i),K(ot(i).toString())||r.push(d)}return r.push(ft("}")),
r},SwitchCase:function(n,r){var i,s,o,u,a,f=this;return lt(function(){n.test?i=[
at("case",f.generateExpression(n.test,t.Sequence,j)),":"]:i=["default:"],o=0,u=n
.consequent.length,u&&n.consequent[0].type===e.BlockStatement&&(s=f.maybeBlock(n
.consequent[0],R),i.push(s),o=1),o!==u&&!K(ot(i).toString())&&i.push(d),a=R;for(
;o<u;++o)o===u-1&&r&P&&(a|=P),s=ft(f.generateStatement(n.consequent[o],a)),i.push
(s),o+1!==u&&!K(ot(s).toString())&&i.push(d)}),i},IfStatement:function(n,r){var i
,s,o,u=this;return lt(function(){i=["if"+v+"(",u.generateExpression(n.test,t.Sequence
,j),")"]}),o=r&P,s=R,o&&(s|=P),n.alternate?(i.push(this.maybeBlock(n.consequent,
R)),i=this.maybeBlockSuffix(n.consequent,i),n.alternate.type===e.IfStatement?i=at
(i,["else ",this.generateStatement(n.alternate,s)]):i=at(i,at("else",this.maybeBlock
(n.alternate,s)))):i.push(this.maybeBlock(n.consequent,s)),i},ForStatement:function(
n,r){var i,s=this;return lt(function(){i=["for"+v+"("],n.init?n.init.type===e.VariableDeclaration?
i.push(s.generateStatement(n.init,z)):(i.push(s.generateExpression(n.init,t.Sequence
,H)),i.push(";")):i.push(";"),n.test?(i.push(v),i.push(s.generateExpression(n.test
,t.Sequence,j)),i.push(";")):i.push(";"),n.update?(i.push(v),i.push(s.generateExpression
(n.update,t.Sequence,j)),i.push(")")):i.push(")")}),i.push(this.maybeBlock(n.body
,r&P?U:R)),i},ForInStatement:function(e,t){return this.generateIterationForStatement
("in",e,t&P?U:R)},ForOfStatement:function(e,t){return this.generateIterationForStatement
("of",e,t&P?U:R)},LabeledStatement:function(e,t){return[e.label.name+":",this.maybeBlock
(e.body,t&P?U:R)]},Program:function(e,t){var n,r,i,s,o;s=e.body.length,n=[y&&s>0?"\n"
:""],o=W;for(i=0;i<s;++i)!y&&i===s-1&&(o|=P),T&&(i===0&&(e.body[0].leadingComments||
vt(e.range[0],e.body[i].range[0],n)),i>0&&!e.body[i-1].trailingComments&&!e.body
[i].leadingComments&&vt(e.body[i-1].range[1],e.body[i].range[0],n)),r=ft(this.generateStatement
(e.body[i],o)),n.push(r),i+1<s&&!K(ot(r).toString())&&(T?e.body[i+1].leadingComments||
n.push(d):n.push(d)),T&&i===s-1&&(e.body[i].trailingComments||vt(e.body[i].range
[1],e.range[1],n));return n},FunctionDeclaration:function(e,t){return[Et(e,!0),"function"
,St(e)||ut(),e.id?wt(e.id):"",this.generateFunctionBody(e)]},ReturnStatement:function(
e,n){return e.argument?[at("return",this.generateExpression(e.argument,t.Sequence
,j)),this.semicolon(n)]:["return"+this.semicolon(n)]},WhileStatement:function(e,
n){var r,i=this;return lt(function(){r=["while"+v+"(",i.generateExpression(e.test
,t.Sequence,j),")"]}),r.push(this.maybeBlock(e.body,n&P?U:R)),r},WithStatement:function(
e,n){var r,i=this;return lt(function(){r=["with"+v+"(",i.generateExpression(e.object
,t.Sequence,j),")"]}),r.push(this.maybeBlock(e.body,n&P?U:R)),r}},Q(bt.prototype
,bt.Statement),bt.Expression={SequenceExpression:function(e,n,r){var i,s,o;t.Sequence<
n&&(r|=A),i=[];for(s=0,o=e.expressions.length;s<o;++s)i.push(this.generateExpression
(e.expressions[s],t.Assignment,r)),s+1<o&&i.push(","+v);return mt(i,t.Sequence,n
)},AssignmentExpression:function(e,t,n){return this.generateAssignment(e.left,e.
right,e.operator,t,n)},ArrowFunctionExpression:function(e,n,r){return mt(this.generateFunctionBody
(e),t.ArrowFunction,n)},ConditionalExpression:function(e,n,r){return t.Conditional<
n&&(r|=A),mt([this.generateExpression(e.test,t.LogicalOR,r),v+"?"+v,this.generateExpression
(e.consequent,t.Assignment,r),v+":"+v,this.generateExpression(e.alternate,t.Assignment
,r)],t.Conditional,n)},LogicalExpression:function(e,t,n){return this.BinaryExpression
(e,t,n)},BinaryExpression:function(e,t,r){var i,o,u,a;return o=n[e.operator],o<t&&
(r|=A),u=this.generateExpression(e.left,o,r),a=u.toString(),a.charCodeAt(a.length-1
)===47&&s.code.isIdentifierPartES5(e.operator.charCodeAt(0))?i=[u,ut(),e.operator
]:i=at(u,e.operator),u=this.generateExpression(e.right,o+1,r),e.operator==="/"&&
u.toString().charAt(0)==="/"||e.operator.slice(-1)==="<"&&u.toString().slice(0,3
)==="!--"?(i.push(ut()),i.push(u)):i=at(i,u),e.operator==="in"&&!(r&A)?["(",i,")"
]:mt(i,o,t)},CallExpression:function(e,n,r){var i,s,o;i=[this.generateExpression
(e.callee,t.Call,B)],i.push("(");for(s=0,o=e.arguments.length;s<o;++s)i.push(this
.generateExpression(e.arguments[s],t.Assignment,j)),s+1<o&&i.push(","+v);return i
.push(")"),r&O?mt(i,t.Call,n):["(",i,")"]},NewExpression:function(e,n,r){var i,s
,o,u,a;s=e.arguments.length,a=r&M&&!m&&s===0?q:F,i=at("new",this.generateExpression
(e.callee,t.New,a));if(!(r&M)||m||s>0){i.push("(");for(o=0,u=s;o<u;++o)i.push(this
.generateExpression(e.arguments[o],t.Assignment,j)),o+1<u&&i.push(","+v);i.push(")"
)}return mt(i,t.New,n)},MemberExpression:function(n,r,i){var o,u;return o=[this.
generateExpression(n.object,t.Call,i&O?B:F)],n.computed?(o.push("["),o.push(this
.generateExpression(n.property,t.Sequence,i&O?j:q)),o.push("]")):(n.object.type===
e.Literal&&typeof n.object.value=="number"&&(u=ot(o).toString(),u.indexOf(".")<0&&!/[eExX]/
.test(u)&&s.code.isDecimalDigit(u.charCodeAt(u.length-1))&&!(u.length>=2&&u.charCodeAt
(0)===48)&&o.push(".")),o.push("."),o.push(wt(n.property))),mt(o,t.Member,r)},MetaProperty
:function(e,n,r){var i;return i=[],i.push(e.meta),i.push("."),i.push(e.property)
,mt(i,t.Member,n)},UnaryExpression:function(e,n,r){var i,o,u,a,f;return o=this.generateExpression
(e.argument,t.Unary,j),v===""?i=at(e.operator,o):(i=[e.operator],e.operator.length>2?
i=at(i,o):(a=ot(i).toString(),f=a.charCodeAt(a.length-1),u=o.toString().charCodeAt
(0),(f===43||f===45)&&f===u||s.code.isIdentifierPartES5(f)&&s.code.isIdentifierPartES5
(u)?(i.push(ut()),i.push(o)):i.push(o))),mt(i,t.Unary,n)},YieldExpression:function(
e,n,r){var i;return e.delegate?i="yield*":i="yield",e.argument&&(i=at(i,this.generateExpression
(e.argument,t.Yield,j))),mt(i,t.Yield,n)},AwaitExpression:function(e,n,r){var i=
at(e.all?"await*":"await",this.generateExpression(e.argument,t.Await,j));return mt
(i,t.Await,n)},UpdateExpression:function(e,n,r){return e.prefix?mt([e.operator,this
.generateExpression(e.argument,t.Unary,j)],t.Unary,n):mt([this.generateExpression
(e.argument,t.Postfix,j),e.operator],t.Postfix,n)},FunctionExpression:function(e
,t,n){var r=[Et(e,!0),"function"];return e.id?(r.push(St(e)||ut()),r.push(wt(e.id
))):r.push(St(e)||v),r.push(this.generateFunctionBody(e)),r},ArrayPattern:function(
e,t,n){return this.ArrayExpression(e,t,n,!0)},ArrayExpression:function(e,n,r,i){
var s,o,a=this;return e.elements.length?(o=i?!1:e.elements.length>1,s=["[",o?d:""
],lt(function(n){var r,i;for(r=0,i=e.elements.length;r<i;++r)e.elements[r]?(s.push
(o?n:""),s.push(a.generateExpression(e.elements[r],t.Assignment,j))):(o&&s.push(
n),r+1===i&&s.push(",")),r+1<i&&s.push(","+(o?d:v))}),o&&!K(ot(s).toString())&&s
.push(d),s.push(o?u:""),s.push("]"),s):"[]"},RestElement:function(e,t,n){return"..."+
this.generatePattern(e.argument)},ClassExpression:function(e,n,r){var i,s;return i=
["class"],e.id&&(i=at(i,this.generateExpression(e.id,t.Sequence,j))),e.superClass&&
(s=at("extends",this.generateExpression(e.superClass,t.Assignment,j)),i=at(i,s))
,i.push(v),i.push(this.generateStatement(e.body,U)),i},MethodDefinition:function(
e,t,n){var r,i;return e["static"]?r=["static"+v]:r=[],e.kind==="get"||e.kind==="set"?
i=[at(e.kind,this.generatePropertyKey(e.key,e.computed,e.value)),this.generateFunctionBody
(e.value)]:i=[xt(e),this.generatePropertyKey(e.key,e.computed,e.value),this.generateFunctionBody
(e.value)],at(r,i)},Property:function(e,n,r){return e.kind==="get"||e.kind==="set"?
[e.kind,ut(),this.generatePropertyKey(e.key,e.computed,e.value),this.generateFunctionBody
(e.value)]:e.shorthand?this.generatePropertyKey(e.key,e.computed,e.value):e.method?
[xt(e),this.generatePropertyKey(e.key,e.computed,e.value),this.generateFunctionBody
(e.value)]:[this.generatePropertyKey(e.key,e.computed,e.value),":"+v,this.generateExpression
(e.value,t.Assignment,j)]},ObjectExpression:function(e,n,r){var i,s,o,a=this;return e
.properties.length?(i=e.properties.length>1,lt(function(){o=a.generateExpression
(e.properties[0],t.Sequence,j)}),!i&&!J(ot(o).toString())?["{",v,o,v,"}"]:(lt(function(
n){var r,u;s=["{",d,n,o];if(i){s.push(","+d);for(r=1,u=e.properties.length;r<u;++
r)s.push(n),s.push(a.generateExpression(e.properties[r],t.Sequence,j)),r+1<u&&s.
push(","+d)}}),K(ot(s).toString())||s.push(d),s.push(u),s.push("}"),s)):"{}"},AssignmentPattern
:function(e,t,n){return this.generateAssignment(e.left,e.right,"=",t,n)},ObjectPattern
:function(n,r,i){var s,o,a,f,l,c=this;if(!n.properties.length)return"{}";f=!1;if(
n.properties.length===1)l=n.properties[0],l.value.type!==e.Identifier&&(f=!0);else for(
o=0,a=n.properties.length;o<a;++o){l=n.properties[o];if(!l.shorthand){f=!0;break}
}return s=["{",f?d:""],lt(function(e){var r,i;for(r=0,i=n.properties.length;r<i;++
r)s.push(f?e:""),s.push(c.generateExpression(n.properties[r],t.Sequence,j)),r+1<
i&&s.push(","+(f?d:v))}),f&&!K(ot(s).toString())&&s.push(d),s.push(f?u:""),s.push
("}"),s},ThisExpression:function(e,t,n){return"this"},Super:function(e,t,n){return"super"
},Identifier:function(e,t,n){return wt(e)},ImportDefaultSpecifier:function(e,t,n
){return wt(e.id||e.local)},ImportNamespaceSpecifier:function(e,t,n){var r=["*"]
,i=e.id||e.local;return i&&r.push(v+"as"+ut()+wt(i)),r},ImportSpecifier:function(
e,t,n){var r=e.imported,i=[r.name],s=e.local;return s&&s.name!==r.name&&i.push(ut
()+"as"+ut()+wt(s)),i},ExportSpecifier:function(e,t,n){var r=e.local,i=[r.name],
s=e.exported;return s&&s.name!==r.name&&i.push(ut()+"as"+ut()+wt(s)),i},Literal:
function(t,n,r){var i;if(t.hasOwnProperty("raw")&&E&&w.raw)try{i=E(t.raw).body[0
].expression;if(i.type===e.Literal&&i.value===t.value)return t.raw}catch(s){}return t
.value===null?"null":typeof t.value=="string"?it(t.value):typeof t.value=="number"?
Y(t.value):typeof t.value=="boolean"?t.value?"true":"false":et(t.value)},GeneratorExpression
:function(e,t,n){return this.ComprehensionExpression(e,t,n)},ComprehensionExpression
:function(n,r,i){var s,o,u,a,f=this;return s=n.type===e.GeneratorExpression?["("
]:["["],w.moz.comprehensionExpressionStartsWithAssignment&&(a=this.generateExpression
(n.body,t.Assignment,j),s.push(a)),n.blocks&&lt(function(){for(o=0,u=n.blocks.length
;o<u;++o)a=f.generateExpression(n.blocks[o],t.Sequence,j),o>0||w.moz.comprehensionExpressionStartsWithAssignment?
s=at(s,a):s.push(a)}),n.filter&&(s=at(s,"if"+v),a=this.generateExpression(n.filter
,t.Sequence,j),s=at(s,["(",a,")"])),w.moz.comprehensionExpressionStartsWithAssignment||
(a=this.generateExpression(n.body,t.Assignment,j),s=at(s,a)),s.push(n.type===e.GeneratorExpression?")"
:"]"),s},ComprehensionBlock:function(n,r,i){var s;return n.left.type===e.VariableDeclaration?
s=[n.left.kind,ut(),this.generateStatement(n.left.declarations[0],z)]:s=this.generateExpression
(n.left,t.Call,j),s=at(s,n.of?"of":"in"),s=at(s,this.generateExpression(n.right,
t.Sequence,j)),["for"+v+"(",s,")"]},SpreadElement:function(e,n,r){return["...",this
.generateExpression(e.argument,t.Assignment,j)]},TaggedTemplateExpression:function(
e,n,r){var i=B;r&O||(i=F);var s=[this.generateExpression(e.tag,t.Call,i),this.generateExpression
(e.quasi,t.Primary,I)];return mt(s,t.TaggedTemplate,n)},TemplateElement:function(
e,t,n){return e.value.raw},TemplateLiteral:function(e,n,r){var i,s,o;i=["`"];for(
s=0,o=e.quasis.length;s<o;++s)i.push(this.generateExpression(e.quasis[s],t.Primary
,j)),s+1<o&&(i.push("${"+v),i.push(this.generateExpression(e.expressions[s],t.Sequence
,j)),i.push(v+"}"));return i.push("`"),i},ModuleSpecifier:function(e,t,n){return this
.Literal(e,t,n)}},Q(bt.prototype,bt.Expression),bt.prototype.generateExpression=
function(t,n,r){var i,s;return s=t.type||e.Property,w.verbatim&&t.hasOwnProperty
(w.verbatim)?yt(t,n):(i=this[s](t,n,r),w.comment&&(i=dt(t,i)),ot(i,t))},bt.prototype
.generateStatement=function(t,n){var r,i;return r=this[t.type](t,n),w.comment&&(
r=dt(t,r)),i=ot(r).toString(),t.type===e.Program&&!y&&d===""&&i.charAt(i.length-1
)==="\n"&&(r=S?ot(r).replaceRight(/\s+$/,""):i.replace(/\s+$/,"")),ot(r,t)},N={indent
:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact
:!0,parentheses:!1,semicolons:!1},C=V().format,exports.version=require("./package.json"
).version,exports.generate=Nt,exports.attachComments=i.attachComments,exports.Precedence=
G({},t),exports.browser=!1,exports.FORMAT_MINIFY=N,exports.FORMAT_DEFAULTS=C})()
}());
/* jslint ignore:end */



/*
file handlebars.js/handlebars.js
2013-12-26T22:37:39Z - shGithubDateCommitted https://github.com/components/handlebars.js/commits/v1.2.1
https://github.com/components/handlebars.js/blob/v1.2.1/handlebars.js
curl https://raw.githubusercontent.com/components/handlebars.js/v1.2.1/handlebars.js > /tmp/aa.js
*/
/* validateLineSortedReset */
local.handlebars = {};
local.handlebars.compile = function (template) {
/*
 * this function will return a function
 * that will render <template> with given <dict>
 */
    return function (dict) {
        var result;
        result = template;
        // render triple-curly-brace
        result = result.replace((
            /\{\{\{/g
        ), "{{").replace((
            /\}\}\}/g
        ), "}}");
        // render with-statement
        result = result.replace((
            /\{\{#with\u0020(.+?)\}\}([\S\s]+?)\{\{\/with\}\}/g
        ), function (ignore, match1, match2) {
            return local.handlebars.replace(match2, dict, match1 + ".");
        });
        // render helper
        result = result.replace(
            "{{#show_ignores metrics}}{{/show_ignores}}",
            function () {
                return local.handlebars.show_ignores(dict.metrics);
            }
        );
        result = result.replace((
            "{{#show_line_execution_counts fileCoverage}}"
            + "{{maxLines}}{{/show_line_execution_counts}}"
        ), function () {
            return local.handlebars.show_line_execution_counts(
                dict.fileCoverage,
                {
                    fn: function () {
                        return dict.maxLines;
                    }
                }
            );
        });
        result = result.replace(
            "{{#show_lines}}{{maxLines}}{{/show_lines}}",
            function () {
                return local.handlebars.show_lines({
                    fn: function () {
                        return dict.maxLines;
                    }
                });
            }
        );
        result = result.replace(
            "{{#show_picture}}{{metrics.statements.pct}}{{/show_picture}}",
            function () {
                return local.handlebars.show_picture({
                    fn: function () {
                        return dict.metrics.statements.pct;
                    }
                });
            }
        );
        result = local.handlebars.replace(result, dict, "");
        // show code last
        result = result.replace(
            "{{#show_code structured}}{{/show_code}}",
            function () {
                return local.handlebars.show_code(dict.structured);
            }
        );
        return result;
    };
};

local.handlebars.registerHelper = function (key, helper) {
/*
 * this function will register the helper-function
 */
    local.handlebars[key] = function (aa, bb) {
        try {
            return helper(aa, bb);
        } catch (ignore) {}
    };
};

local.handlebars.replace = function (template, dict, withPrefix) {
/*
 * this function will render <template> with given <dict>
 */
    var value;
    // search for keys in the template
    return template.replace((
        /\{\{.+?\}\}/g
    ), function (match0) {
        value = dict;
        // iteratively lookup nested values in the dict
        (withPrefix + match0.slice(2, -2)).split(".").forEach(function (key) {
            value = value && value[key];
        });
        return (
            value === undefined
            ? match0
            : String(value)
        );
    });
};

/*
file istanbul/lib/collector.js
2014-07-04T07:47:53Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.2.16
https://github.com/gotwarlost/istanbul/blob/v0.2.16/lib/collector.js
curl https://raw.githubusercontent.com/gotwarlost/istanbul/v0.2.16/lib/collector.js > /tmp/aa.js
*/
/* validateLineSortedReset */
local.collector = {
    fileCoverageFor: function (file) {
        return globalThis.__coverage__[file];
    },
    files: function () {
        return Object.keys(globalThis.__coverage__).filter(function (key) {
            if (
                globalThis.__coverage__[key]
                && globalThis.__coverageCodeDict__[key]
            ) {
                // reset derived info
                globalThis.__coverage__[key].l = null;
                return true;
            }
        });
    }
};



/*
file istanbul/lib/util/insertion-text.js
2014-07-04T07:47:53Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.2.16
https://github.com/gotwarlost/istanbul/blob/v0.2.16/lib/util/insertion-text.js
utility2-uglifyjs https://raw.githubusercontent.com/gotwarlost/istanbul/v0.2.16/lib/util/insertion-text.js > /tmp/aa.js
*/
/* istanbul ignore next */
/* jslint ignore:start */
(function () { var module; module = {};
function InsertionText(e,t){this.text=e,this.origLength=e.length,this.offsets=[]
,this.consumeBlanks=t,this.startPos=this.findFirstNonBlank(),this.endPos=this.findLastNonBlank
()}var WHITE_RE=/[ \f\n\r\t\v\u00A0\u2028\u2029]/;InsertionText.prototype={findFirstNonBlank
:function(){var e=-1,t=this.text,n=t.length,r;for(r=0;r<n;r+=1)if(!t.charAt(r).match
(WHITE_RE)){e=r;break}return e},findLastNonBlank:function(){var e=this.text,t=e.
length,n=e.length+1,r;for(r=t-1;r>=0;r-=1)if(!e.charAt(r).match(WHITE_RE)){n=r;break}
return n},originalLength:function(){return this.origLength},insertAt:function(e,
t,n,r){r=typeof r=="undefined"?this.consumeBlanks:r,e=e>this.originalLength()?this
.originalLength():e,e=e<0?0:e,r&&(e<=this.startPos&&(e=0),e>this.endPos&&(e=this
.origLength));var i=t.length,s=this.findOffset(e,i,n),o=e+s,u=this.text;return this
.text=u.substring(0,o)+t+u.substring(o),this},findOffset:function(e,t,n){var r=this
.offsets,i,s=0,o;for(o=0;o<r.length;o+=1){i=r[o];if(i.pos<e||i.pos===e&&!n)s+=i.
len;if(i.pos>=e)break}return i&&i.pos===e?i.len+=t:r.splice(o,0,{pos:e,len:t}),s
},wrap:function(e,t,n,r,i){return this.insertAt(e,t,!0,i),this.insertAt(n,r,!1,i
),this},wrapLine:function(e,t){this.wrap(0,e,this.originalLength(),t)},toString:
function(){return this.text}},module.exports=InsertionText
local["../util/insertion-text"] = module.exports; }());



/*
file istanbul/lib/instrumenter.js
2016-08-21T19:53:22Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.4.5
https://github.com/gotwarlost/istanbul/blob/v0.4.5/lib/instrumenter.js
utility2-uglifyjs https://raw.githubusercontent.com/gotwarlost/istanbul/v0.4.5/lib/instrumenter.js > /tmp/aa.js
*/
/* istanbul ignore next */
(function () { var escodegen, esprima, module, window; escodegen = local.escodegen; esprima = local.esprima; module = undefined; window = local;
(function(e){"use strict";function p(e,t){var n,r;return s!==null?(n=s.createHash
("md5"),n.update(e),r=n.digest("base64"),r=r.replace(new RegExp("=","g"),"").replace
(new RegExp("\\+","g"),"_").replace(new RegExp("/","g"),"$")):(window.__cov_seq=
window.__cov_seq||0,window.__cov_seq+=1,r=window.__cov_seq),"__cov_"+Math.random().toString(16).slice(2)}function d
(e,t){h(t)||(t=[t]),Array.prototype.push.apply(e,t)}function v(e,t,n,r){this.walkMap=
e,this.preprocessor=t,this.scope=n,this.debug=r,this.debug&&(this.level=0,this.seq=!0
)}function m(e,n){var r=e.type,i,s,o=t[r],u=!!e.loc||e.type===t.Program.name,a=u?
n.walkMap[r]:null,f,l,c,p,v,m,g,y,b,w,E;if(!t[r]){console.error(e),console.error
("Unsupported node type:"+r);return}o=t[r].children;if(e.walking)throw new Error
("Infinite regress: Custom walkers may NOT call walker.apply(node)");e.walking=!0
,m=n.apply(e,n.preprocessor),i=m.preprocessor,i&&(delete m.preprocessor,m=n.apply
(e,i));if(h(a))for(c=0;c<a.length;c+=1){E=c===a.length-1,m=n.apply(m,a[c]);if(m.
type!==r&&!E)throw new Error("Only the last walker is allowed to change the node type: [type was: "+
r+" ]")}else a&&(m=n.apply(e,a));if(e.skipSelf)return;for(f=0;f<o.length;f+=1){p=
o[f],v=e[p];if(v&&!v.skipWalk){b={node:e,property:p};if(h(v)){g=[];for(l=0;l<v.length
;l+=1)y=v[l],b.index=l,y?(w=n.apply(y,null,b),h(w.prepend)&&(d(g,w.prepend),delete
w.prepend)):w=undefined,d(g,w);e[p]=g}else{w=n.apply(v,null,b);if(h(w.prepend))throw new
Error("Internal error: attempt to prepend statements in disallowed (non-array) context"
);e[p]=w}}}return s=m.postprocessor,s&&(delete m.postprocessor,m=n.apply(m,s)),delete
e.walking,m}function g(e){this.opts=e||{debug:!1,walkDebug:!1,coverageVariable:"__coverage__"
,codeGenerationOptions:undefined,noAutoWrap:!1,noCompact:!1,embedSource:!1,preserveComments
:!1,esModules:!1},this.opts.esModules&&!this.opts.noAutoWrap&&(this.opts.noAutoWrap=!0
,this.opts.debug&&console.log("Setting noAutoWrap to true as required by esModules"
)),this.walker=new v({ArrowFunctionExpression:[this.arrowBlockConverter],ExpressionStatement
:this.coverStatement,ExportNamedDeclaration:this.coverExport,BreakStatement:this
.coverStatement,ContinueStatement:this.coverStatement,DebuggerStatement:this.coverStatement
,ReturnStatement:this.coverStatement,ThrowStatement:this.coverStatement,TryStatement
:[this.paranoidHandlerCheck,this.coverStatement],VariableDeclaration:this.coverStatement
,IfStatement:[this.ifBlockConverter,this.coverStatement,this.ifBranchInjector],ForStatement
:[this.skipInit,this.loopBlockConverter,this.coverStatement],ForInStatement:[this
.skipLeft,this.loopBlockConverter,this.coverStatement],ForOfStatement:[this.skipLeft
,this.loopBlockConverter,this.coverStatement],WhileStatement:[this.loopBlockConverter
,this.coverStatement],DoWhileStatement:[this.loopBlockConverter,this.coverStatement
],SwitchStatement:[this.coverStatement,this.switchBranchInjector],SwitchCase:[this
.switchCaseInjector],WithStatement:[this.withBlockConverter,this.coverStatement]
,FunctionDeclaration:[this.coverFunction,this.coverStatement],FunctionExpression
:this.coverFunction,LabeledStatement:this.coverStatement,ConditionalExpression:this
.conditionalBranchInjector,LogicalExpression:this.logicalExpressionBranchInjector
,ObjectExpression:this.maybeAddType,MetaProperty:this.coverMetaProperty},this.extractCurrentHint
,this,this.opts.walkDebug),this.opts.backdoor&&this.opts.backdoor.omitTrackerSuffix&&
(this.omitTrackerSuffix=!0)}var t,n,r=e?require("esprima"):esprima,i=e?require("escodegen"
):escodegen,s=e?require("crypto"):null,o="(function () { ",u="\n}());",a=/^\s*istanbul\s+ignore\s+(if|else|next)(?=\W|$)/
,f,l,c,h=Array.isArray;h||(h=function(e){return e&&Object.prototype.toString.call
(e)==="[object Array]"});if(!e){l={"Could not find esprima":r,"Could not find escodegen"
:i,"JSON object not in scope":JSON,"Array does not implement push":[].push,"Array does not implement unshift"
:[].unshift};for(c in l)if(l.hasOwnProperty(c)&&!l[c])throw new Error(c)}t={AssignmentExpression
:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"
],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression
:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement
:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody
:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass"
,"body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter"
,"body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement
:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"
],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"
],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported"
,"local"],ExpressionStatement:["expression"],ForStatement:["init","test","update"
,"body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"
],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"
],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test"
,"consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier
:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"
],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"
],MetaProperty:["meta","property"],MemberExpression:["object","property"],MethodDefinition
:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression
:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"
],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"
],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase
:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:
[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"
],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression
:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"
],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression
:["argument"]};for(n in t)t.hasOwnProperty(n)&&(t[n]={name:n,children:t[n]});f={
variable:function(e){return{type:t.Identifier.name,name:e}},stringLiteral:function(
e){return{type:t.Literal.name,value:String(e)}},numericLiteral:function(e){return{
type:t.Literal.name,value:Number(e)}},statement:function(e){return{type:t.ExpressionStatement
.name,expression:e}},dot:function(e,n){return{type:t.MemberExpression.name,computed
:!1,object:e,property:n}},subscript:function(e,n){return{type:t.MemberExpression
.name,computed:!0,object:e,property:n}},postIncrement:function(e){return{type:t.
UpdateExpression.name,operator:"++",prefix:!1,argument:e}},sequence:function(e,n
){return{type:t.SequenceExpression.name,expressions:[e,n]}},returnStatement:function(
e){return{type:t.ReturnStatement.name,argument:e}}},v.prototype={startWalk:function(
e){this.path=[],this.apply(e)},apply:function(e,t,n){var r,i,s,o;t=t||m;if(this.
debug){this.seq+=1,this.level+=1,s=this.seq,o="";for(i=0;i<this.level;i+=1)o+="    "
;console.log(o+"Enter ("+s+"):"+e.type)}return n&&this.path.push(n),r=t.call(this
.scope,e,this),n&&this.path.pop(),this.debug&&(this.level-=1,console.log(o+"Return ("+
s+"):"+e.type)),r||e},startLineForNode:function(e){return e&&e.loc&&e.loc.start?
e.loc.start.line:null},ancestor:function(e){return this.path.length>e-1?this.path
[this.path.length-e]:null},parent:function(){return this.ancestor(1)},isLabeled:
function(){var e=this.parent();return e&&e.node.type===t.LabeledStatement.name}}
,g.prototype={instrumentSync:function(e,n){var s;if(typeof e!="string")throw new
Error("Code must be string");e.charAt(0)==="#"&&(e="//"+e),this.opts.noAutoWrap||
(e=o+e+u);try{s=r.parse(e,{loc:!0,range:!0,tokens:this.opts.preserveComments,comment
:!0,sourceType:this.opts.esModules?"module":"script"})}catch(a){throw console.log
("Failed to parse file: "+n),a}return this.opts.preserveComments&&(s=i.attachComments
(s,s.comments,s.tokens)),this.opts.noAutoWrap||(s={type:t.Program.name,body:s.body
[0].expression.callee.body.body,comments:s.comments}),this.instrumentASTSync(s,n
,e)},filterHints:function(e){var t=[],n,r,i;if(!e||!h(e))return t;for(n=0;n<e.length
;n+=1)r=e[n],r&&r.value&&r.range&&h(r.range)&&(i=String(r.value).match(a),i&&t.push
({type:i[1],start:r.range[0],end:r.range[1]}));return t},extractCurrentHint:function(
e){if(!e.range)return;var t=this.currentState.lastHintPosition+1,n=this.currentState
.hints,r=e.range[0],i;this.currentState.currentHint=null;
if(e.type==="Program"){return;}
while(t<n.length){i=n[t
];if(!(i.end<r))break;this.currentState.currentHint=i,this.currentState.lastHintPosition=
t,t+=1}},instrumentASTSync:function(e,t,n){var r=!1,s,o,u,a,f;t=t||String((new Date
).getTime())+".js",this.sourceMap=null,this.coverState={path:t,s:{},b:{},f:{},fnMap
:{},statementMap:{},branchMap:{}},this.currentState={trackerVar:p(t,this.omitTrackerSuffix
),func:0,branch:0,variable:0,statement:0,hints:this.filterHints(e.comments),currentHint
:null,lastHintPosition:-1,ignoring:0},e.body&&e.body.length>0&&this.isUseStrictExpression
(e.body[0])&&(e.body.shift(),r=!0),this.walker.startWalk(e),s=this.opts.codeGenerationOptions||
{format:{compact:!this.opts.noCompact}},s.comment=this.opts.preserveComments,o=i
.generate(e,s),u=this.getPreamble(n||"",r);if(o.map&&o.code){a=u.split(/\r\n|\r|\n/
).length;for(f=0;f<o.map._mappings._array.length;f+=1)o.map._mappings._array[f].
generatedLine+=a;this.sourceMap=o.map,o=o.code}return u+"\n"+o+"\n"},instrument:
function(e,t,n){!n&&typeof t=="function"&&(n=t,t=null);try{n(null,this.instrumentSync
(e,t))}catch(r){n(r)}},lastFileCoverage:function(){return this.coverState},lastSourceMap
:function(){return this.sourceMap},fixColumnPositions:function(e){var t=o.length
,n=function(e){e.start.line===1&&(e.start.column-=t),e.end.line===1&&(e.end.column-=
t)},r,i,s,u;i=e.statementMap;for(r in i)i.hasOwnProperty(r)&&n(i[r]);i=e.fnMap;for(
r in i)i.hasOwnProperty(r)&&n(i[r].loc);i=e.branchMap;for(r in i)if(i.hasOwnProperty
(r)){u=i[r].locations;for(s=0;s<u.length;s+=1)n(u[s])}},getPreamble:function(e,t
){var n=this.opts.coverageVariable||"__coverage__",r=this.coverState.path.replace
(/\\/g,"\\\\"),i=this.currentState.trackerVar,s,o=t?'"use strict";':"",u=function(
e){return function(){return e}},a;return this.opts.noAutoWrap||this.fixColumnPositions
(this.coverState),this.opts.embedSource&&(this.coverState.code=e.split(/(?:\r?\n)|\r/
)),s=this.opts.debug?JSON.stringify(this.coverState,undefined,4):JSON.stringify(
this.coverState),a=["%STRICT%","var %VAR% = (Function('return this'))();","if (!%VAR%.%GLOBAL%) { %VAR%.%GLOBAL% = {}; }"
,"%VAR% = %VAR%.%GLOBAL%;","if (!(%VAR%['%FILE%'])) {","   %VAR%['%FILE%'] = %OBJECT%;"
,"}","%VAR% = %VAR%['%FILE%'];"].join("\n").replace(/%STRICT%/g,u(o)).replace(/%VAR%/g
,u(i)).replace(/%GLOBAL%/g,u(n)).replace(/%FILE%/g,u(r)).replace(/%OBJECT%/g,u(s
)),a},startIgnore:function(){this.currentState.ignoring+=1},endIgnore:function()
{this.currentState.ignoring-=1},convertToBlock:function(e){return e?e.type==="BlockStatement"?
e:{type:"BlockStatement",body:[e]}:{type:"BlockStatement",body:[]}},arrowBlockConverter
:function(e){var t;e.expression&&(t=f.returnStatement(e.body),t.loc=e.body.loc,e
.body=this.convertToBlock(t),e.expression=!1)},paranoidHandlerCheck:function(e){!
e.handler&&e.handlers&&(e.handler=e.handlers[0])},ifBlockConverter:function(e){e
.consequent=this.convertToBlock(e.consequent),e.alternate=this.convertToBlock(e.
alternate)},loopBlockConverter:function(e){e.body=this.convertToBlock(e.body)},withBlockConverter
:function(e){e.body=this.convertToBlock(e.body)},statementName:function(e,t){var n
,r=!!this.currentState.ignoring;return e.skip=r||undefined,t=t||0,this.currentState
.statement+=1,n=this.currentState.statement,this.coverState.statementMap[n]=e,this
.coverState.s[n]=t,n},skipInit:function(e){e.init&&(e.init.skipWalk=!0)},skipLeft
:function(e){e.left.skipWalk=!0},isUseStrictExpression:function(e){return e&&e.type===
t.ExpressionStatement.name&&e.expression&&e.expression.type===t.Literal.name&&e.
expression.value==="use strict"},maybeSkipNode:function(e,t){var n=!!this.currentState
.ignoring,r=this.currentState.currentHint,i=!n&&r&&r.type===t;return i?(this.startIgnore
(),e.postprocessor=this.endIgnore,!0):!1},coverMetaProperty:function(e){e.skipSelf=!0
},coverStatement:function(e,n){var r,i,s,o;this.maybeSkipNode(e,"next");if(this.
isUseStrictExpression(e)){o=n.ancestor(2);if(o&&(o.node.type===t.FunctionExpression
.name||o.node.type===t.FunctionDeclaration.name)&&n.parent().node.body[0]===e)return}
if(e.type===t.FunctionDeclaration.name)this.statementName(e.loc,1);else{s=n.parent
();if(s&&s.node.type===t.ExportNamedDeclaration.name)return;r=this.statementName
(e.loc),i=f.statement(f.postIncrement(f.subscript(f.dot(f.variable(this.currentState
.trackerVar),f.variable("s")),f.stringLiteral(r)))),this.splice(i,e,n)}},coverExport
:function(e,t){var n,r;if(!e.declaration||!e.declaration.declarations)return;this
.maybeSkipNode(e,"next"),n=this.statementName(e.declaration.loc),r=f.statement(f
.postIncrement(f.subscript(f.dot(f.variable(this.currentState.trackerVar),f.variable
("s")),f.stringLiteral(n)))),this.splice(r,e,t)},splice:function(e,t,n){var r=n.
isLabeled()?n.parent().node:t;r.prepend=r.prepend||[],d(r.prepend,e)},functionName
:function(e,t,n){this.currentState.func+=1;var r=this.currentState.func,i=!!this
.currentState.ignoring,s=e.id?e.id.name:"(anonymous_"+r+")",o=function(e){var t=
n[e]||{};return{line:t.line,column:t.column}};return this.coverState.fnMap[r]={name
:s,line:t,loc:{start:o("start"),end:o("end")},skip:i||undefined},this.coverState
.f[r]=0,r},coverFunction:function(e,t){var n,r=e.body,i=r.body,s;this.maybeSkipNode
(e,"next"),n=this.functionName(e,t.startLineForNode(e),{start:e.loc.start,end:{line
:e.body.loc.start.line,column:e.body.loc.start.column}}),i.length>0&&this.isUseStrictExpression
(i[0])&&(s=i.shift()),i.unshift(f.statement(f.postIncrement(f.subscript(f.dot(f.
variable(this.currentState.trackerVar),f.variable("f")),f.stringLiteral(n))))),s&&
i.unshift(s)},branchName:function(e,t,n){var r,i=[],s=[],o,u=!!this.currentState
.ignoring;this.currentState.branch+=1,r=this.currentState.branch;for(o=0;o<n.length
;o+=1)n[o].skip=n[o].skip||u||undefined,s.push(n[o]),i.push(0);return this.coverState
.b[r]=i,this.coverState.branchMap[r]={line:t,type:e,locations:s},r},branchIncrementExprAst
:function(e,t,n){var r=f.postIncrement(f.subscript(f.subscript(f.dot(f.variable(
this.currentState.trackerVar),f.variable("b")),f.stringLiteral(e)),f.numericLiteral
(t)),n);return r},locationsForNodes:function(e){var t=[],n;for(n=0;n<e.length;n+=1
)t.push(e[n].loc);return t},ifBranchInjector:function(e,t){var n=!!this.currentState
.ignoring,r=this.currentState.currentHint,i=!n&&r&&r.type==="if",s=!n&&r&&r.type==="else"
,o=e.loc.start.line,u=e.loc.start.column,a=function(){return{line:o,column:u}},l=
this.branchName("if",t.startLineForNode(e),[{start:a(),end:a(),skip:i||undefined
},{start:a(),end:a(),skip:s||undefined}]),c=e.consequent.body,h=e.alternate.body
,p;c.unshift(f.statement(this.branchIncrementExprAst(l,0))),h.unshift(f.statement
(this.branchIncrementExprAst(l,1))),i&&(p=e.consequent,p.preprocessor=this.startIgnore
,p.postprocessor=this.endIgnore),s&&(p=e.alternate,p.preprocessor=this.startIgnore
,p.postprocessor=this.endIgnore)},branchLocationFor:function(e,t){return this.coverState
.branchMap[e].locations[t]},switchBranchInjector:function(e,t){var n=e.cases,r,i
;if(!(n&&n.length>0))return;r=this.branchName("switch",t.startLineForNode(e),this
.locationsForNodes(n));for(i=0;i<n.length;i+=1)n[i].branchLocation=this.branchLocationFor
(r,i),n[i].consequent.unshift(f.statement(this.branchIncrementExprAst(r,i)))},switchCaseInjector
:function(e){var t=e.branchLocation;delete e.branchLocation,this.maybeSkipNode(e
,"next")&&(t.skip=!0)},conditionalBranchInjector:function(e,t){var n=this.branchName
("cond-expr",t.startLineForNode(e),this.locationsForNodes([e.consequent,e.alternate
])),r=this.branchIncrementExprAst(n,0),i=this.branchIncrementExprAst(n,1);e.consequent
.preprocessor=this.maybeAddSkip(this.branchLocationFor(n,0)),e.alternate.preprocessor=
this.maybeAddSkip(this.branchLocationFor(n,1)),e.consequent=f.sequence(r,e.consequent
),e.alternate=f.sequence(i,e.alternate)},maybeAddSkip:function(e){return function(
t){var n=!!this.currentState.ignoring,r=this.currentState.currentHint,i=!n&&r&&r
.type==="next";i&&(this.startIgnore(),t.postprocessor=this.endIgnore);if(i||n)e.
skip=!0}},logicalExpressionBranchInjector:function(e,n){var r=n.parent(),i=[],s,
o,u;this.maybeSkipNode(e,"next");if(r&&r.node.type===t.LogicalExpression.name)return;
this.findLeaves(e,i),s=this.branchName("binary-expr",n.startLineForNode(e),this.
locationsForNodes(i.map(function(e){return e.node})));for(u=0;u<i.length;u+=1)o=
i[u],o.parent[o.property]=f.sequence(this.branchIncrementExprAst(s,u),o.node),o.
node.preprocessor=this.maybeAddSkip(this.branchLocationFor(s,u))},findLeaves:function(
e,n,r,i){e.type===t.LogicalExpression.name?(this.findLeaves(e.left,n,e,"left"),this
.findLeaves(e.right,n,e,"right")):n.push({node:e,parent:r,property:i})},maybeAddType
:function(e){var n=e.properties,r,i;for(r=0;r<n.length;r+=1)i=n[r],i.type||(i.type=
t.Property.name)}},e?module.exports=g:window.Instrumenter=g})(typeof module!="undefined"&&typeof
module.exports!="undefined"&&typeof exports!="undefined")
}());



/*
file istanbul/lib/object-utils.js
2014-07-04T07:47:53Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.2.16
https://github.com/gotwarlost/istanbul/blob/v0.2.16/lib/object-utils.js
utility2-uglifyjs https://raw.githubusercontent.com/gotwarlost/istanbul/v0.2.16/lib/object-utils.js > /tmp/aa.js
*/
/* istanbul ignore next */
(function () { var module, window; module = undefined; window = local;
(function(e){function t(e){var t=e.statementMap,n=e.s,r;e.l||(e.l=r={},Object.keys
(n).forEach(function(e){var i=t[e].start.line,s=n[e],o=r[i];s===0&&t[e].skip&&(s=1
);if(typeof o=="undefined"||o<s)r[i]=s}))}function n(e){Object.keys(e).forEach(function(
n){t(e[n])})}function r(e){Object.keys(e).forEach(function(t){delete e[t].l})}function i
(e,t){var n;return t>0?(n=1e5*e/t+5,Math.floor(n/10)/100):100}function s(e,t,n){
var r=e[t],s=n?e[n]:null,o={total:0,covered:0,skipped:0};return Object.keys(r).forEach
(function(e){var t=!!r[e],n=s&&s[e].skip;o.total+=1;if(t||n)o.covered+=1;!t&&n&&
(o.skipped+=1)}),o.pct=i(o.covered,o.total),o}function o(e){var t=e.b,n=e.branchMap
,r={total:0,covered:0,skipped:0};return Object.keys(t).forEach(function(e){var i=
t[e],s=n[e],o,u,a;for(a=0;a<i.length;a+=1){o=i[a]>0,u=s.locations&&s.locations[a
]&&s.locations[a].skip;if(o||u)r.covered+=1;!o&&u&&(r.skipped+=1)}r.total+=i.length
}),r.pct=i(r.covered,r.total),r}function u(){return{lines:{total:0,covered:0,skipped
:0,pct:"Unknown"},statements:{total:0,covered:0,skipped:0,pct:"Unknown"},functions
:{total:0,covered:0,skipped:0,pct:"Unknown"},branches:{total:0,covered:0,skipped
:0,pct:"Unknown"}}}function a(e){var n=u();return t(e),n.lines=s(e,"l"),n.functions=
s(e,"f","fnMap"),n.statements=s(e,"s","statementMap"),n.branches=o(e),n}function f
(e,t){var n=JSON.parse(JSON.stringify(e)),r;return delete n.l,Object.keys(t.s).forEach
(function(e){n.s[e]+=t.s[e]}),Object.keys(t.f).forEach(function(e){n.f[e]+=t.f[e
]}),Object.keys(t.b).forEach(function(e){var i=n.b[e],s=t.b[e];for(r=0;r<i.length
;r+=1)i[r]+=s[r]}),n}function l(){var e=u(),t=Array.prototype.slice.call(arguments
),n=["lines","statements","branches","functions"],r=function(t){t&&n.forEach(function(
n){e[n].total+=t[n].total,e[n].covered+=t[n].covered,e[n].skipped+=t[n].skipped}
)};return t.forEach(function(e){r(e)}),n.forEach(function(t){e[t].pct=i(e[t].covered
,e[t].total)}),e}function c(e){var t=[];return Object.keys(e).forEach(function(n
){t.push(a(e[n]))}),l.apply(null,t)}function h(e){var t={};return n(e),Object.keys
(e).forEach(function(n){var r=e[n],i=r.l,s=r.f,o=r.fnMap,u;u=t[n]={lines:{},calledLines
:0,coveredLines:0,functions:{},calledFunctions:0,coveredFunctions:0},Object.keys
(i).forEach(function(e){u.lines[e]=i[e],u.coveredLines+=1,i[e]>0&&(u.calledLines+=1
)}),Object.keys(s).forEach(function(e){var t=o[e].name+":"+o[e].line;u.functions
[t]=s[e],u.coveredFunctions+=1,s[e]>0&&(u.calledFunctions+=1)})}),t}var p={addDerivedInfo
:n,addDerivedInfoForFile:t,removeDerivedInfo:r,blankSummary:u,summarizeFileCoverage
:a,summarizeCoverage:c,mergeFileCoverage:f,mergeSummaryObjects:l,toYUICoverage:h
};e?module.exports=p:window.coverageUtils=p})(typeof module!="undefined"&&typeof
module.exports!="undefined"&&typeof exports!="undefined")
local["../object-utils"] = window.coverageUtils; }());



/*
file istanbul/lib/report/common/defaults.js
2014-07-04T07:47:53Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.2.16
https://github.com/gotwarlost/istanbul/blob/v0.2.16/lib/report/common/defaults.js
utility2-uglifyjs https://raw.githubusercontent.com/gotwarlost/istanbul/v0.2.16/lib/report/common/defaults.js > /tmp/aa.js
*/
/* istanbul ignore next */
(function () { var module; module = {};
module.exports={watermarks:function(){return{statements:[50,80],lines:[50,80],functions
:[50,80],branches:[50,80]}},classFor:function(e,t,n){var r=n[e],i=t[e].pct;return i>=
r[1]?"high":i>=r[0]?"medium":"low"},colorize:function(e,t){if(process.stdout.isTTY
)switch(t){case"low":e="\u001b[91m"+e+"\u001b[0m";break;case"medium":e="\u001b[93m"+
e+"\u001b[0m";break;case"high":e="\u001b[92m"+e+"\u001b[0m"}return e}}
local["./common/defaults"] = module.exports; }());
/* jslint ignore:end */



/*
file istanbul/lib/report/index.js
2014-07-04T07:47:53Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.2.16
https://github.com/gotwarlost/istanbul/blob/v0.2.16/lib/report/index.js
curl https://raw.githubusercontent.com/gotwarlost/istanbul/v0.2.16/lib/report/index.js > /tmp/aa.js
*/
local["./index"] = {
    call: local.nop,
    mix: function (klass, prototype) {
        klass.prototype = prototype;
    }
};



/*
file istanbul/lib/report/templates/foot.txt
2014-07-04T07:47:53Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.2.16
https://github.com/gotwarlost/istanbul/blob/v0.2.16/lib/report/templates/foot.txt
curl https://raw.githubusercontent.com/gotwarlost/istanbul/v0.2.16/lib/report/templates/foot.txt > /tmp/aa.js
*/
/* jslint ignore:start */
local["foot.txt"] = '\
</div>\n\
<div class="footer">\n\
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at {{datetime}}</div>\n\
</div>\n\
</body>\n\
</html>\n\
';



/*
file istanbul/lib/report/templates/head.txt
2014-07-04T07:47:53Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.2.16
https://github.com/gotwarlost/istanbul/blob/v0.2.16/lib/report/templates/head.txt
curl https://raw.githubusercontent.com/gotwarlost/istanbul/v0.2.16/lib/report/templates/head.txt > /tmp/aa.js
*/
local["head.txt"] = '\
<!doctype html>\n\
<html lang="en" class="x-istanbul">\n\
<head>\n\
    <title>Code coverage report for {{entity}}</title>\n\
    <meta charset="utf-8">\n\
<style>\n\
/* jslint utility2:true */\n\
/*csslint\n\
    box-model: false,\n\
    important: false,\n\
    qualified-headings: false,\n\
*/\n\
/* csslint ignore:start */\n\
*,\n\
*:after,\n\
*:before {\n\
    box-sizing: border-box;\n\
}\n\
/* csslint ignore:end */\n\
.x-istanbul {\n\
    font-family: Helvetica Neue, Helvetica,Arial;\n\
    font-size: 10pt;\n\
    margin: 0;\n\
    padding: 0;\n\
}\n\
.x-istanbul h1 {\n\
    font-size: large;\n\
}\n\
.x-istanbul pre {\n\
    font-family: Consolas, Menlo, Monaco, monospace;\n\
    font-size: 14px;\n\
    margin: 0;\n\
    padding: 0;\n\
    tab-size: 2;\n\
}\n\
.x-istanbul .cbranch-no {\n\
    background: yellow !important;\n\
    color: #111;\n\
}\n\
.x-istanbul .cbranch-skip {\n\
    background: #ddd !important;\n\
    color: #111;\n\
}\n\
.x-istanbul .com {\n\
    color: #999 !important;\n\
}\n\
.x-istanbul .cover-empty,\n\
.x-istanbul .cover-fill {\n\
    background: white;\n\
    border: 1px solid #444;\n\
    display: inline-block;\n\
    height: 12px;\n\
}\n\
.x-istanbul .cover-empty {\n\
    background: white;\n\
    border-left: none;\n\
}\n\
.x-istanbul .cover-fill {\n\
    background: #ccc;\n\
    border-right: 1px solid #444;\n\
}\n\
.x-istanbul .cover-full {\n\
    border-right: none !important;\n\
}\n\
.x-istanbul .coverage {\n\
    border-collapse: collapse;\n\
    margin: 0;\n\
    padding: 0\n\
}\n\
.x-istanbul .coverage td {\n\
    color: #111;\n\
    margin: 0;\n\
    padding: 0;\n\
    vertical-align: top;\n\
}\n\
.x-istanbul .coverage td .cline-any {\n\
    display: inline-block;\n\
    padding: 0 5px;\n\
    width: 60px;\n\
}\n\
.x-istanbul .coverage td .cline-neutral {\n\
    background: #eee;\n\
}\n\
.x-istanbul .coverage td .cline-no {\n\
    background: #fc8c84;\n\
}\n\
.x-istanbul .coverage td .cline-yes {\n\
    background: #b5d592;\n\
    color: #999;\n\
}\n\
.x-istanbul .coverage .line-count {\n\
    padding-right: 5px;\n\
    text-align: right;\n\
    width: 50px;\n\
}\n\
.x-istanbul .coverage .line-count a {\n\
    text-decoration: none;\n\
}\n\
.x-istanbul .coverage .line-coverage {\n\
    border-left: 1px solid #666;\n\
    border-right: 1px solid #666;\n\
    color: #777 !important;\n\
    text-align: right;\n\
}\n\
.x-istanbul .coverage-summary {\n\
    padding: 20px;\n\
}\n\
.x-istanbul .coverage-summary table {\n\
    border-collapse: collapse;\n\
    margin: auto;\n\
    table-layout: fixed;\n\
    text-align: left;\n\
    width: 100%\n\
}\n\
.x-istanbul .coverage-summary td {\n\
    border: 1px solid #666;\n\
    margin: 0;\n\
    padding: 5px;\n\
    white-space: nowrap;\n\
}\n\
.x-istanbul .coverage-summary th {\n\
    margin: 0;\n\
    padding: 0 0 2px 0;\n\
}\n\
.x-istanbul .cstat-no {\n\
    background: #fc8c84;\n\
    color: #111;\n\
}\n\
.x-istanbul .cstat-skip {\n\
    background: #ddd;\n\
    color: #111;\n\
}\n\
.x-istanbul .cstat-yes {\n\
    color: #111;\n\
}\n\
.x-istanbul .entity,\n\
.x-istanbul .metric {\n\
    font-weight: bold;\n\
}\n\
.x-istanbul .footer,\n\
.x-istanbul .header {\n\
    background: #eee;\n\
    padding: 20px;\n\
}\n\
.x-istanbul .footer {\n\
    border-top: 1px solid #666;\n\
}\n\
.x-istanbul .fstat-no {\n\
    background: #ffc520;\n\
    color: #111 !important;\n\
}\n\
.x-istanbul .fstat-skip {\n\
    background: #ddd;\n\
    color: #111 !important;\n\
}\n\
.x-istanbul .header {\n\
    border-bottom: 1px solid #666;\n\
    top: 0;\n\
    width: 100%;\n\
}\n\
.x-istanbul .high {\n\
    background: #b5d592 !important;\n\
}\n\
.x-istanbul .ignore-none {\n\
    color: #999;\n\
    font-weight: normal;\n\
}\n\
.x-istanbul .low {\n\
    background: #fc8c84 !important;\n\
}\n\
.x-istanbul .medium {\n\
    background: #ffe87c !important;\n\
}\n\
.x-istanbul .meta {\n\
    text-align: center;\n\
}\n\
.x-istanbul .metric {\n\
    background: white;\n\
    border: 1px solid #333;\n\
    display: inline-block;\n\
    padding: .3em;\n\
}\n\
.x-istanbul .missing-if-branch {\n\
    background: black;\n\
    color: yellow;\n\
    display: inline-block;\n\
    margin-right: 10px;\n\
    padding: 0 4px;\n\
    position: relative;\n\
}\n\
.x-istanbul .missing-if-branch .typ,\n\
.x-istanbul .skip-if-branch .typ {\n\
    color: inherit !important;\n\
}\n\
.x-istanbul .prettyprint {\n\
    border: none !important;\n\
    margin: 0 !important;\n\
    padding: 0 !important;\n\
}\n\
.x-istanbul .skip-if-branch {\n\
    background: #ccc;\n\
    color: white;\n\
    display: none;\n\
    margin-right: 10px;\n\
    padding: 0 4px;\n\
    position: relative;\n\
}\n\
/* validateLineSortedReset */\n\
.x-istanbul a {\n\
    color: #00d;\n\
    text-decoration: underline;\n\
}\n\
.x-istanbul pre {\n\
    overflow: visible;\n\
    white-space: pre\n\
}\n\
.x-istanbul .file div {\n\
    margin-bottom: 2px;\n\
    overflow-wrap: break-word;\n\
    white-space: normal;\n\
    width: 100%;\n\
}\n\
.x-istanbul .tableHeader {\n\
    border-collapse: collapse;\n\
    margin: 0 auto 10px auto;\n\
    table-layout: fixed;\n\
    text-align: left;\n\
    width: 100%;\n\
}\n\
.x-istanbul .tableHeader td {\n\
    background: #fff;\n\
    border: 1px solid #666;\n\
    padding: 5px;\n\
}\n\
.x-istanbul .tableHeader th {\n\
    padding: 0 0 2px 0;\n\
}\n\
</style>\n\
</head>\n\
<body class="x-istanbul">\n\
<script>\n\
// init domOnEventSelectAllWithinPre\n\
(function () {\n\
/*\n\
 * this function will limit select-all within <pre tabIndex="0"> elements\n\
 * https://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse\n\
 */\n\
    "use strict";\n\
    if (window.domOnEventSelectAllWithinPre) {\n\
        return;\n\
    }\n\
    window.domOnEventSelectAllWithinPre = function (event) {\n\
        var range;\n\
        var selection;\n\
        if (event &&\n\
                event.key === "a" &&\n\
                (event.ctrlKey || event.metaKey) &&\n\
                event.target.closest("pre")) {\n\
            range = document.createRange();\n\
            range.selectNodeContents(event.target.closest("pre"));\n\
            selection = window.getSelection();\n\
            selection.removeAllRanges();\n\
            selection.addRange(range);\n\
            event.preventDefault();\n\
        }\n\
    };\n\
    document.addEventListener("keydown", window.domOnEventSelectAllWithinPre);\n\
}());\n\
</script>\n\
<div class="header {{reportClass}}">\n\
    <h1 style="font-weight: bold;">\n\
        <a href="{{env.npm_package_homepage}}">{{env.npm_package_name}} ({{env.npm_package_version}})</a>\n\
    </h1>\n\
    <h1>Code coverage report for <span class="entity">{{entity}}</span></h1>\n\
    <table class="tableHeader">\n\
    <thead>\n\
    <tr>\n\
        <th>Ignored</th>\n\
        <th>Statements</th>\n\
        <th>Branches</th>\n\
        <th>Functions</th>\n\
        <th>Lines</th>\n\
    </tr>\n\
    </thead>\n\
    <tbody>\n\
        <td>{{#show_ignores metrics}}{{/show_ignores}}</td>\n\
        <td>{{#with metrics.statements}}{{pct}}%<br>({{covered}} / {{total}}){{/with}}</td>\n\
        <td>{{#with metrics.branches}}{{pct}}%<br>({{covered}} / {{total}}){{/with}}</td>\n\
        <td>{{#with metrics.functions}}{{pct}}%<br>({{covered}} / {{total}}){{/with}}</td>\n\
        <td>{{#with metrics.lines}}{{pct}}%<br>({{covered}} / {{total}}){{/with}}</td>\n\
    </tbody>\n\
    </table>\n\
    {{{pathHtml}}}\n\
</div>\n\
<div class="body">\n\
';
/* jslint ignore:end */



/*
file istanbul/lib/util/file-writer.js
2014-07-04T07:47:53Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.2.16
https://github.com/gotwarlost/istanbul/blob/v0.2.16/lib/util/file-writer.js
curl https://raw.githubusercontent.com/gotwarlost/istanbul/v0.2.16/lib/util/file-writer.js > /tmp/aa.js
*/
local.writer = {
    write: function (data) {
        local.writerData += data;
    },
    writeFile: function (file, onError) {
        local.coverageReportHtml += local.writerData + "\n\n";
        if (!local.isBrowser && local.writerFile) {
            local.fsWriteFileWithMkdirpSync(local.writerFile, local.writerData);
        }
        local.writerData = "";
        local.writerFile = file;
        onError(local.writer);
    }
};



/*
file istanbul/lib/util/tree-summarizer.js
2014-07-04T07:47:53Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.2.16
https://github.com/gotwarlost/istanbul/blob/v0.2.16/lib/util/tree-summarizer.js
utility2-uglifyjs https://raw.githubusercontent.com/gotwarlost/istanbul/v0.2.16/lib/util/tree-summarizer.js > /tmp/aa.js
*/
/* istanbul ignore next */
(function () {
    var module;
    module = {};
/* jslint ignore:start */
function commonArrayPrefix(e,t){var n=e.length<t.length?e.length:t.length,r,i=[]
;for(r=0;r<n;r+=1){if(e[r]!==t[r])break;i.push(e[r])}return i}function findCommonArrayPrefix
(e){if(e.length===0)return[];var t=e.map(function(e){return e.split(SEP)}),n=t.pop
();return t.length===0?n.slice(0,n.length-1):t.reduce(commonArrayPrefix,n)}function Node
(e,t,n){this.name=e,this.fullName=e,this.kind=t,this.metrics=n||null,this.parent=
null,this.children=[]}function TreeSummary(e,t){this.prefix=t,this.convertToTree
(e,t)}function TreeSummarizer(){this.summaryMap={}}var path=require("path"),SEP=
path.sep||"/",utils=require("../object-utils");Node.prototype={displayShortName:
function(){return this.relativeName},fullPath:function(){return this.fullName},addChild
:function(e){this.children.push(e),e.parent=this},toJSON:function(){return{name:
this.name,relativeName:this.relativeName,fullName:this.fullName,kind:this.kind,metrics
:this.metrics,parent:this.parent===null?null:this.parent.name,children:this.children
.map(function(e){return e.toJSON()})}}},TreeSummary.prototype={getNode:function(
e){return this.map[e]},convertToTree:function(e,t){var n=[],r=t.join(SEP)+SEP,i=new
Node(r,"dir"),s,o,u={},a=!1;u[r]=i,Object.keys(e).forEach(function(t){var r=e[t]
,s,o,f;s=new Node(t,"file",r),u[t]=s,n.push(s),o=path.dirname(t)+SEP,o===SEP+SEP&&
(o=SEP+"__root__"+SEP),f=u[o],f||(f=new Node(o,"dir"),i.addChild(f),u[o]=f),f.addChild
(s),f===i&&(a=!0)}),a&&t.length>0&&(t.pop(),s=i,o=s.children,s.children=[],i=new
Node(t.join(SEP)+SEP,"dir"),i.addChild(s),o.forEach(function(e){e.kind==="dir"?i
.addChild(e):s.addChild(e)})),this.fixupNodes(i,t.join(SEP)+SEP),this.calculateMetrics
(i),this.root=i,this.map={},this.indexAndSortTree(i,this.map)},fixupNodes:function(
e,t,n){var r=this;e.name.indexOf(t)===0&&(e.name=e.name.substring(t.length)),e.name
.charAt(0)===SEP&&(e.name=e.name.substring(1)),n?n.name!=="__root__/"?e.relativeName=
e.name.substring(n.name.length):e.relativeName=e.name:e.relativeName=e.name.substring
(t.length),e.children.forEach(function(n){r.fixupNodes(n,t,e)})},calculateMetrics
:function(e){var t=this,n;if(e.kind!=="dir")return;e.children.forEach(function(e
){t.calculateMetrics(e)}),e.metrics=utils.mergeSummaryObjects.apply(null,e.children
.map(function(e){return e.metrics})),n=e.children.filter(function(e){return e.kind!=="dir"
}),n.length>0?e.packageMetrics=utils.mergeSummaryObjects.apply(null,n.map(function(
e){return e.metrics})):e.packageMetrics=null},indexAndSortTree:function(e,t){var n=
this;t[e.name]=e,e.children.sort(function(e,t){return e=e.relativeName,t=t.relativeName
,e<t?-1:e>t?1:0}),e.children.forEach(function(e){n.indexAndSortTree(e,t)})},toJSON
:function(){return{prefix:this.prefix,root:this.root.toJSON()}}},TreeSummarizer.
prototype={addFileCoverageSummary:function(e,t){this.summaryMap[e]=t},getTreeSummary
:function(){var e=findCommonArrayPrefix(Object.keys(this.summaryMap));return new
TreeSummary(this.summaryMap,e)}},module.exports=TreeSummarizer
/* jslint ignore:end */
    local["../util/tree-summarizer"] = module.exports;
    module.exports.prototype._getTreeSummary = (
        module.exports.prototype.getTreeSummary
    );
    module.exports.prototype.getTreeSummary = function () {
        local.coverageReportSummary = this._getTreeSummary();
        return local.coverageReportSummary;
    };
}());



/*
file istanbul/lib/report/html.js
2014-07-04T07:47:53Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.2.16
https://github.com/gotwarlost/istanbul/blob/v0.2.16/lib/report/html.js
utility2-uglifyjs https://raw.githubusercontent.com/gotwarlost/istanbul/v0.2.16/lib/report/html.js > /tmp/aa.js
*/
/* istanbul ignore next */
/* jslint ignore:start */
(function () { var module; module = {};
function customEscape(e){return e=e.toString(),e.replace(RE_AMP,"&amp;").replace
(RE_LT,"&lt;").replace(RE_GT,"&gt;").replace(RE_lt,"<").replace(RE_gt,">")}function title
(e){return' title="'+e+'" '}function annotateLines(e,t){var n=e.l;if(!n)return;Object
.keys(n).forEach(function(e){var r=n[e];t[e].covered=r>0?"yes":"no"}),t.forEach(
function(e){e.covered===null&&(e.covered="neutral")})}function annotateStatements
(e,t){var n=e.s,r=e.statementMap;Object.keys(n).forEach(function(e){var i=n[e],s=
r[e],o=i>0?"yes":"no",u=s.start.column,a=s.end.column+1,f=s.start.line,l=s.end.line
,c=lt+'span class="'+(s.skip?"cstat-skip":"cstat-no")+'"'+title("statement not covered"
)+gt,h=lt+"/span"+gt,p;o==="no"&&(l!==f&&(l=f,a=t[f].text.originalLength()),p=t[
f].text,p.wrap(u,c,f===l?a:p.originalLength(),h))})}function annotateFunctions(e
,t){var n=e.f,r=e.fnMap;if(!n)return;Object.keys(n).forEach(function(e){var i=n[
e],s=r[e],o=i>0?"yes":"no",u=s.loc.start.column,a=s.loc.end.column+1,f=s.loc.start
.line,l=s.loc.end.line,c=lt+'span class="'+(s.skip?"fstat-skip":"fstat-no")+'"'+
title("function not covered")+gt,h=lt+"/span"+gt,p;o==="no"&&(l!==f&&(l=f,a=t[f]
.text.originalLength()),p=t[f].text,p.wrap(u,c,f===l?a:p.originalLength(),h))})}
function annotateBranches(e,t){var n=e.b,r=e.branchMap;if(!n)return;Object.keys(
n).forEach(function(e){var i=n[e],s=i.reduce(function(e,t){return e+t},0),o=r[e]
.locations,u,a,f,l,c,h,p,d,v,m,g;if(s>0)for(u=0;u<i.length;u+=1)a=i[u],f=o[u],l=
a>0?"yes":"no",c=f.start.column,h=f.end.column+1,p=f.start.line,d=f.end.line,v=lt+'span class="branch-'+
u+" "+(f.skip?"cbranch-skip":"cbranch-no")+'"'+title("branch not covered")+gt,m=
lt+"/span"+gt,a===0&&(d!==p&&(d=p,h=t[p].text.originalLength()),g=t[p].text,r[e]
.type==="if"?g.insertAt(c,lt+'span class="'+(f.skip?"skip-if-branch":"missing-if-branch"
)+'"'+title((u===0?"if":"else")+" path not taken")+gt+(u===0?"I":"E")+lt+"/span"+
gt,!0,!1):g.wrap(c,v,p===d?h:g.originalLength(),m))})}function getReportClass(e,
t){var n=e.pct,r=1;return n*r===n?n>=t[1]?"high":n>=t[0]?"medium":"low":""}function HtmlReport
(e){Report.call(this),this.opts=e||{},this.opts.dir=this.opts.dir||path.resolve(
process.cwd(),"html-report"),this.opts.sourceStore=this.opts.sourceStore||Store.
create("fslookup"),this.opts.linkMapper=this.opts.linkMapper||this.standardLinkMapper
(),this.opts.writer=this.opts.writer||null,this.opts.templateData={datetime:new Date
().toGMTString()},this.opts.watermarks=this.opts.watermarks||defaults.watermarks()}var handlebars=
require("handlebars"),defaults=require("./common/defaults"),path=require("path")
,SEP=path.sep||"/",fs=require("fs"),util=require("util"),FileWriter=require("../util/file-writer"
),Report=require("./index"),Store=require("../store"),InsertionText=require("../util/insertion-text"
),TreeSummarizer=require("../util/tree-summarizer"),utils=require("../object-utils"
),templateFor=function(e){return handlebars.compile(fs.readFileSync(path.resolve
(__dirname,"templates",e+".txt"),"utf8"))},headerTemplate=templateFor("head"),footerTemplate=
templateFor("foot"),pathTemplate=handlebars.compile('<div class="path">{{{html}}}</div>'
),detailTemplate=handlebars.compile(["<tr>",'<td class="line-count">{{#show_lines}}{{maxLines}}{{/show_lines}}</td>'
,'<td class="line-coverage">{{#show_line_execution_counts fileCoverage}}{{maxLines}}{{/show_line_execution_counts}}</td>'
,'<td class="text"><pre class="prettyprint lang-js" tabIndex="0">{{#show_code structured}}{{/show_code}}</pre></td>'
,"</tr>\n"].join("")),summaryTableHeader=['<div class="coverage-summary">',"<table>"
,"<thead>","<tr>",'   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>'
,'   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>'
,'   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>'
,'   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>'
,'   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>'
,"</tr>","</thead>","<tbody>"].join("\n"),summaryLineTemplate=handlebars.compile
(["<tr>",'<td class="file {{reportClasses.statements}}" data-value="{{file}}"><a href="{{output}}"><div>{{file}}</div>{{#show_picture}}{{metrics.statements.pct}}{{/show_picture}}</a></td>'
,'<td data-value="{{metrics.statements.pct}}" class="pct {{reportClasses.statements}}">{{metrics.statements.pct}}%<br>({{metrics.statements.covered}} / {{metrics.statements.total}})</td>'
,'<td data-value="{{metrics.branches.pct}}" class="pct {{reportClasses.branches}}">{{metrics.branches.pct}}%<br>({{metrics.branches.covered}} / {{metrics.branches.total}})</td>'
,'<td data-value="{{metrics.functions.pct}}" class="pct {{reportClasses.functions}}">{{metrics.functions.pct}}%<br>({{metrics.functions.covered}} / {{metrics.functions.total}})</td>'
,'<td data-value="{{metrics.lines.pct}}" class="pct {{reportClasses.lines}}">{{metrics.lines.pct}}%<br>({{metrics.lines.covered}} / {{metrics.lines.total}})</td>'
,"</tr>\n"].join("\n\t")),summaryTableFooter=["</tbody>","</table>","</div>"].join
("\n"),lt="\u0001",gt="\u0002",RE_LT=/</g,RE_GT=/>/g,RE_AMP=/&/g,RE_lt=/\u0001/g
,RE_gt=/\u0002/g;handlebars.registerHelper("show_picture",function(e){var t=Number
(e.fn(this)),n,r="";return isFinite(t)?(t===100&&(r=" cover-full"),t=Math.floor(
t),n=100-t,'<span class="cover-fill'+r+'" style="width: '+t+'px;"></span>'+'<span class="cover-empty" style="width:'+
n+'px;"></span>'):""}),handlebars.registerHelper("show_ignores",function(e){var t=
e.statements.skipped,n=e.functions.skipped,r=e.branches.skipped,i;return t===0&&
n===0&&r===0?'<span class="ignore-none">none</span>':(i=[],r>0&&i.push("branches: "+r),t>0&&i.push(
"statements: "+t),n>0&&i.push("functions: "+n),i.join("<br>"))}),handlebars.registerHelper("show_lines",function(
e){var t=Number(e.fn(this)),n,r="";for(n=1;n<=t;n+=1){r+='<a href="#L'+n+'" id="L'+n+'">'+n+'</a>\n';}return r
}),handlebars.registerHelper("show_line_execution_counts",function(e,t){var n=e.
l,r=Number(t.fn(this)),i,s,o=[],u,a="";for(i=0;i<r;i+=1)s=i+1,a="&nbsp;",u="neutral"
,n.hasOwnProperty(s)&&(n[s]>0?(u="yes",a=n[s]):u="no"),o.push('<span class="cline-any cline-'+
u+'">'+a+"</span>");return o.join("\n")}),handlebars.registerHelper("show_code",
function(e){var t=[];return e.forEach(function(e){t.push(customEscape(e.text)||"&nbsp;"
)}),t.join("\n")}),HtmlReport.TYPE="html",util.inherits(HtmlReport,Report),Report
.mix(HtmlReport,{getPathHtml:function(e,t){var n=e.parent,r=[],i=[],s;while(n)r.
push(n),n=n.parent;for(s=0;s<r.length;s+=1)i.push('<a href="'+t.ancestor(e,s+1)+'">'+
(r[s].relativeName||"All files")+"</a>");return i.reverse(),i.length>0?i.join(" &#187; "
)+" &#187; "+e.displayShortName():""},fillTemplate:function(e,t){var n=this.opts
,r=n.linkMapper;t.entity=e.name||"All files",t.metrics=e.metrics,t.reportClass=getReportClass
(e.metrics.statements,n.watermarks.statements),t.pathHtml=pathTemplate({html:this
.getPathHtml(e,r)}),t.prettify={js:r.asset(e,"prettify.js"),css:r.asset(e,"prettify.css"
)}},writeDetailPage:function(e,t,n){var r=this.opts,i=r.sourceStore,s=r.templateData
,o=n.code&&Array.isArray(n.code)?n.code.join("\n")+"\n":i.get(n.path),u=o.split(/(?:\r?\n)|\r/
),a=0,f=u.map(function(e){return a+=1,{line:a,covered:null,text:new InsertionText
(e,!0)}}),l;f.unshift({line:0,covered:null,text:new InsertionText("")}),this.fillTemplate
(t,s),e.write(headerTemplate(s)),e.write('<pre><table class="coverage">\n'),annotateLines
(n,f),annotateBranches(n,f),annotateFunctions(n,f),annotateStatements(n,f),f.shift
(),l={structured:f,maxLines:f.length,fileCoverage:n},e.write(detailTemplate(l)),
e.write("</table></pre>\n"),e.write(footerTemplate(s))},writeIndexPage:function(
e,t){var n=this.opts.linkMapper,r=this.opts.templateData,i=Array.prototype.slice
.apply(t.children),s=this.opts.watermarks;i.sort(function(e,t){return e.name<t.name?-1
:1}),this.fillTemplate(t,r),e.write(headerTemplate(r)),e.write(summaryTableHeader
),i.forEach(function(t){var r=t.metrics,i={statements:getReportClass(r.statements
,s.statements),lines:getReportClass(r.lines,s.lines),functions:getReportClass(r.
functions,s.functions),branches:getReportClass(r.branches,s.branches)},o={metrics
:r,reportClasses:i,file:t.displayShortName(),output:n.fromParent(t)};e.write(summaryLineTemplate
(o)+"\n")}),e.write(summaryTableFooter),e.write(footerTemplate(r))},writeFiles:function(
e,t,n,r){var i=this,s=path.resolve(n,"index.html"),o;this.opts.verbose&&console.
error("Writing "+s),e.writeFile(s,function(e){i.writeIndexPage(e,t)}),t.children
.forEach(function(t){t.kind==="dir"?i.writeFiles(e,t,path.resolve(n,t.relativeName
),r):(o=path.resolve(n,t.relativeName+".html"),i.opts.verbose&&console.error("Writing "+
o),e.writeFile(o,function(e){i.writeDetailPage(e,t,r.fileCoverageFor(t.fullPath(
)))}))})},standardLinkMapper:function(){return{fromParent:function(e){var t=0,n=
e.relativeName,r;if(SEP!=="/"){n="";for(t=0;t<e.relativeName.length;t+=1)r=e.relativeName
.charAt(t),r===SEP?n+="/":n+=r}return e.kind==="dir"?n+"index.html":n+".html"},ancestorHref
:function(e,t){var n="",r,i,s,o;for(s=0;s<t;s+=1){r=e.relativeName.split(SEP),i=
r.length-1;for(o=0;o<i;o+=1)n+="../";e=e.parent}return n},ancestor:function(e,t)
{return this.ancestorHref(e,t)+"index.html"},asset:function(e,t){var n=0,r=e.parent
;while(r)n+=1,r=r.parent;return this.ancestorHref(e,n)+t}}},writeReport:function(
e,t){var n=this.opts,r=n.dir,i=new TreeSummarizer,s=n.writer||new FileWriter(t),
o;e.files().forEach(function(t){i.addFileCoverageSummary(t,utils.summarizeFileCoverage
(e.fileCoverageFor(t)))}),o=i.getTreeSummary(),fs.readdirSync(path.resolve(__dirname
,"..","vendor")).forEach(function(e){var t=path.resolve(__dirname,"..","vendor",
e),i=path.resolve(r,e),o=fs.statSync(t);o.isFile()&&(n.verbose&&console.log("Write asset: "+
i),s.copyFile(t,i))}),this.writeFiles(s,o.root,r,e)}}),module.exports=HtmlReport
local.HtmlReport = module.exports; }());



/*
file istanbul/lib/report/text.js
2014-07-04T07:47:53Z - shGithubDateCommitted https://github.com/gotwarlost/istanbul/commits/v0.2.16
https://github.com/gotwarlost/istanbul/blob/v0.2.16/lib/report/text.js
utility2-uglifyjs https://raw.githubusercontent.com/gotwarlost/istanbul/v0.2.16/lib/report/text.js > /tmp/aa.js
*/
/* istanbul ignore next */
(function () { var module; module = {};
function TextReport(e){Report.call(this),e=e||{},this.dir=e.dir||process.cwd(),this
.file=e.file,this.summary=e.summary,this.maxCols=e.maxCols||0,this.watermarks=e.
watermarks||defaults.watermarks()}function padding(e,t){var n="",r;t=t||" ";for(
r=0;r<e;r+=1)n+=t;return n}function fill(e,t,n,r,i){r=r||0,e=String(e);var s=r*TAB_SIZE
,o=t-s,u=padding(s),a="",f,l=e.length;return o>0&&(o>=l?(f=padding(o-l),a=n?f+e:
e+f):(a=e.substring(l-o),a="... "+a.substring(4))),a=defaults.colorize(a,i),u+a}
function formatName(e,t,n,r){return fill(e,t,!1,n,r)}function formatPct(e,t){return fill
(e,PCT_COLS,!0,0,t)}function nodeName(e){return e.displayShortName()||"All files"
}function tableHeader(e){var t=[];return t.push(formatName("File",e,0)),t.push(formatPct
("% Stmts")),t.push(formatPct("% Branches")),t.push(formatPct("% Funcs")),t.push
(formatPct("% Lines")),t.join(" |")+" |"}function tableRow(e,t,n,r){var i=nodeName
(e),s=e.metrics.statements.pct,o=e.metrics.branches.pct,u=e.metrics.functions.pct
,a=e.metrics.lines.pct,f=[];return f.push(formatName(i,t,n,defaults.classFor("statements"
,e.metrics,r))),f.push(formatPct(s,defaults.classFor("statements",e.metrics,r)))
,f.push(formatPct(o,defaults.classFor("branches",e.metrics,r))),f.push(formatPct
(u,defaults.classFor("functions",e.metrics,r))),f.push(formatPct(a,defaults.classFor
("lines",e.metrics,r))),f.join(DELIM)+DELIM}function findNameWidth(e,t,n){n=n||0
,t=t||0;var r=TAB_SIZE*t+nodeName(e).length;return r>n&&(n=r),e.children.forEach
(function(e){n=findNameWidth(e,t+1,n)}),n}function makeLine(e){var t=padding(e,"-"
),n=padding(PCT_COLS,"-"),r=[];return r.push(t),r.push(n),r.push(n),r.push(n),r.
push(n),r.join(COL_DELIM)+COL_DELIM}function walk(e,t,n,r,i){var s;r===0?(s=makeLine
(t),n.push(s),n.push(tableHeader(t)),n.push(s)):n.push(tableRow(e,t,r,i)),e.children
.forEach(function(e){walk(e,t,n,r+1,i)}),r===0&&(n.push(s),n.push(tableRow(e,t,r
,i)),n.push(s))}var path=require("path"),mkdirp=require("mkdirp"),fs=require("fs"
),defaults=require("./common/defaults"),Report=require("./index"),TreeSummarizer=
require("../util/tree-summarizer"),utils=require("../object-utils"),PCT_COLS=10,
TAB_SIZE=3,DELIM=" |",COL_DELIM="-|";TextReport.TYPE="text",Report.mix(TextReport
,{writeReport:function(e){var t=new TreeSummarizer,n,r,i,s=4*(PCT_COLS+2),o,u=[]
,a;e.files().forEach(function(n){t.addFileCoverageSummary(n,utils.summarizeFileCoverage
(e.fileCoverageFor(n)))}),n=t.getTreeSummary(),r=n.root,i=findNameWidth(r),this.
maxCols>0&&(o=this.maxCols-s-2,i>o&&(i=o)),walk(r,i,u,0,this.watermarks),a=u.join
("\n")+"\n",this.file?(mkdirp.sync(this.dir),fs.writeFileSync(path.join(this.dir
,this.file),a,"utf8")):console.log(a)}}),module.exports=TextReport
local.TextReport = module.exports; }());



/*
https://img.shields.io/badge/coverage-100.0%-00dd00.svg?style=flat
*/
local.templateCoverageBadgeSvg =
'<svg xmlns="http://www.w3.org/2000/svg" width="117" height="20"><linearGradient id="a" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><rect rx="0" width="117" height="20" fill="#555"/><rect rx="0" x="63" width="54" height="20" fill="#0d0"/><path fill="#0d0" d="M63 0h4v20h-4z"/><rect rx="0" width="117" height="20" fill="url(#a)"/><g fill="#fff" text-anchor="middle" font-family="DejaVu Sans,Verdana,Geneva,sans-serif" font-size="11"><text x="32.5" y="15" fill="#010101" fill-opacity=".3">coverage</text><text x="32.5" y="14">coverage</text><text x="89" y="15" fill="#010101" fill-opacity=".3">100.0%</text><text x="89" y="14">100.0%</text></g></svg>';
/*
file none
*/
/* jslint ignore:end */
}());



// run node js-env code - init-after
/* istanbul ignore next */
(function () {
if (local.isBrowser) {
    return;
}



local.cliDict = {};
local.cliDict.cover = function () {
/*
 * <script>
 * will run and cover <script>
 */
    var tmp;
    try {
        tmp = JSON.parse(local.fs.readFileSync("package.json", "utf8"));
        process.env.npm_package_nameLib = (
            process.env.npm_package_nameLib
            || tmp.nameLib
            || tmp.name.replace((
                /-/g
            ), "_")
        );
    } catch (ignore) {}
    process.env.npm_config_mode_coverage = (
        process.env.npm_config_mode_coverage
        || process.env.npm_package_nameLib
        || "all"
    );
    // add coverage hook to require
    local._istanbul_moduleExtensionsJs = (
        local._istanbul_module._extensions[".js"]
    );
    local._istanbul_module._extensions[".js"] = function (module, file) {
        if (typeof file === "string" && (
            file.indexOf(process.env.npm_config_mode_coverage_dir) === 0 || (
                file.indexOf(process.cwd()) === 0
                && file.indexOf(process.cwd() + "/node_modules/") !== 0
            )
        )) {
            module._compile(local.instrumentInPackage(
                local.fs.readFileSync(file, "utf8"),
                file
            ), file);
            return;
        }
        local._istanbul_moduleExtensionsJs(module, file);
    };
    // init process.argv
    process.argv.splice(1, 2);
    process.argv[1] = local.path.resolve(process.cwd(), process.argv[1]);
    console.log("\ncovering $ " + process.argv.join(" "));
    // create coverage on exit
    process.on("exit", function () {
        local.coverageReportCreate({
            coverage: globalThis.__coverage__
        });
    });
    // re-init cli
    local._istanbul_module.runMain();
};

local.cliDict.instrument = function () {
/*
 * <script>
 * will instrument <script> and print result to stdout
 */
    process.argv[3] = local.path.resolve(process.cwd(), process.argv[3]);
    process.stdout.write(local.instrumentSync(
        local.fs.readFileSync(process.argv[3], "utf8"),
        process.argv[3]
    ));
};

//
local.cliDict.test = function () {
/*
 * <script>
 * will run and cover <script> if env var $npm_config_mode_coverage is set
 */
    if (process.env.npm_config_mode_coverage) {
        process.argv[2] = "cover";
        // re-init cli
        local.cliDict[process.argv[2]]();
        return;
    }
    // restart node with __filename removed from process.argv
    process.argv.splice(1, 2);
    process.argv[1] = local.path.resolve(process.cwd(), process.argv[1]);
    // re-init cli
    local._istanbul_module.runMain();
};

// run cli
if (module === require.main && !globalThis.utility2_rollup) {
    local.cliRun();
}
}());



}());
/* script-end /assets.utility2.lib.istanbul.js */



/* script-begin /assets.utility2.lib.jslint.js */
// usr/bin/env node
/*
 * lib.jslint.js (2018.11.14)
 * https://github.com/kaizhu256/node-jslint-lite
 * this zero-dependency package will provide browser-compatible versions of jslint (v2018.10.26) and csslint (v1.0.5), with a working web-demo
 *
 */



/* istanbul instrument in package jslint */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



/* istanbul ignore next */
// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    // || globalThis.utility2_rollup_old
    // || require("./assets.utility2.rollup.js")
    || globalThis.globalLocal
);
// init exports
if (local.isBrowser) {
    globalThis.utility2_jslint = local;
} else {
    module.exports = local;
    module.exports.__dirname = __dirname;
}
// init lib main
local.jslint = local;



/* validateLineSortedReset */
local.cliRun = function (option) {
/*
 * this function will run the cli
 */
    local.cliDict._eval = local.cliDict._eval || function () {
    /*
     * <code>
     * will eval <code>
     */
        globalThis.local = local;
        local.vm.runInThisContext(process.argv[3]);
    };
    local.cliDict["--eval"] = local.cliDict["--eval"] || local.cliDict._eval;
    local.cliDict["-e"] = local.cliDict["-e"] || local.cliDict._eval;
    local.cliDict._help = local.cliDict._help || function () {
    /*
     *
     * will print help
     */
        var commandList;
        var file;
        var packageJson;
        var text;
        var textDict;
        commandList = [{
            argList: "<arg2>  ...",
            description: "usage:",
            command: ["<arg1>"]
        }, {
            argList: "'console.log(\"hello world\")'",
            description: "example:",
            command: ["--eval"]
        }];
        file = __filename.replace((
            /.*\//
        ), "");
        option = Object.assign({}, option);
        packageJson = require("./package.json");
        // validate comment
        option.rgxComment = option.rgxComment || (
            /\)\u0020\{\n(?:|\u0020{4})\/\*\n(?:\u0020|\u0020{5})\*((?:\u0020<[^>]*?>|\u0020\.\.\.)*?)\n(?:\u0020|\u0020{5})\*\u0020(will\u0020.*?\S)\n(?:\u0020|\u0020{5})\*\/\n(?:\u0020{4}|\u0020{8})\S/
        );
        textDict = {};
        Object.keys(local.cliDict).sort().forEach(function (key, ii) {
            if (key[0] === "_" && key !== "_default") {
                return;
            }
            text = String(local.cliDict[key]);
            if (key === "_default") {
                key = "";
            }
            textDict[text] = textDict[text] || (ii + 2);
            ii = textDict[text];
            if (commandList[ii]) {
                commandList[ii].command.push(key);
                return;
            }
            try {
                commandList[ii] = option.rgxComment.exec(text);
                commandList[ii] = {
                    argList: (commandList[ii][1] || "").trim(),
                    command: [key],
                    description: commandList[ii][2]
                };
            } catch (ignore) {
                local.assertThrow(null, new Error(
                    "cliRun - cannot parse comment in COMMAND "
                    + key + ":\nnew RegExp("
                    + JSON.stringify(option.rgxComment.source)
                    + ").exec(" + JSON.stringify(text)
                    .replace((
                        /\\\\/g
                    ), "\u0000")
                    .replace((
                        /\\n/g
                    ), "\\n\\\n")
                    .replace((
                        /\u0000/g
                    ), "\\\\") + ");"
                ));
            }
        });
        text = "";
        text += packageJson.name + " (" + packageJson.version + ")\n\n";
        text += commandList
        .filter(function (element) {
            return element;
        })
        .map(function (element, ii) {
            element.command = element.command.filter(function (element) {
                return element;
            });
            switch (ii) {
            case 0:
            case 1:
                element.argList = [element.argList];
                break;
            default:
                element.argList = element.argList.split(" ");
                element.description = (
                    "# COMMAND "
                    + (element.command[0] || "<none>") + "\n# "
                    + element.description
                );
            }
            return (
                element.description + "\n  " + file
                + ("  " + element.command.sort().join("|") + "  ")
                    .replace((
                    /^\u0020{4}$/
                ), "  ")
                + element.argList.join("  ")
            );
        })
        .join("\n\n");
        console.log(text);
    };
    local.cliDict["--help"] = local.cliDict["--help"] || local.cliDict._help;
    local.cliDict["-h"] = local.cliDict["-h"] || local.cliDict._help;
    local.cliDict._default = local.cliDict._default || local.cliDict._help;
    local.cliDict.help = local.cliDict.help || local.cliDict._help;
    local.cliDict._interactive = local.cliDict._interactive || function () {
    /*
     *
     * will start interactive-mode
     */
        globalThis.local = local;
        local.identity(local.replStart || require("repl").start)({
            useGlobal: true
        });
    };
    local.cliDict["--interactive"] = (
        local.cliDict["--interactive"]
        || local.cliDict._interactive
    );
    local.cliDict["-i"] = local.cliDict["-i"] || local.cliDict._interactive;
    local.cliDict._version = local.cliDict._version || function () {
    /*
     *
     * will print version
     */
        console.log(require(__dirname + "/package.json").version);
    };
    local.cliDict["--version"] = (
        local.cliDict["--version"]
        || local.cliDict._version
    );
    local.cliDict["-v"] = local.cliDict["-v"] || local.cliDict._version;
    // default to --help command if no arguments are given
    if (process.argv.length <= 2) {
        local.cliDict._help();
        return;
    }
    if (local.cliDict[process.argv[2]]) {
        local.cliDict[process.argv[2]]();
        return;
    }
    local.cliDict._default();
};

local.jsonStringifyOrdered = function (obj, replacer, space) {
/*
 * this function will JSON.stringify <obj>,
 * with object-keys sorted and circular-references removed
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Syntax
 */
    var circularSet;
    var stringify;
    var tmp;
    stringify = function (obj) {
    /*
     * this function will recursively JSON.stringify obj,
     * with object-keys sorted and circular-references removed
     */
        // if obj is not an object or function, then JSON.stringify as normal
        if (!(
            obj
            && typeof obj === "object"
            && typeof obj.toJSON !== "function"
        )) {
            return JSON.stringify(obj);
        }
        // ignore circular-reference
        if (circularSet.has(obj)) {
            return;
        }
        circularSet.add(obj);
        // if obj is an array, then recurse its items
        if (Array.isArray(obj)) {
            tmp = "[" + obj.map(function (obj) {
                // recurse
                tmp = stringify(obj);
                return (
                    typeof tmp === "string"
                    ? tmp
                    : "null"
                );
            }).join(",") + "]";
            circularSet.delete(obj);
            return tmp;
        }
        // if obj is not an array,
        // then recurse its items with object-keys sorted
        tmp = "{" + Object.keys(obj)
        // sort object-keys
        .sort()
        .map(function (key) {
            // recurse
            tmp = stringify(obj[key]);
            if (typeof tmp === "string") {
                return JSON.stringify(key) + ":" + tmp;
            }
        })
        .filter(function (obj) {
            return typeof obj === "string";
        })
        .join(",") + "}";
        circularSet.delete(obj);
        return tmp;
    };
    circularSet = new Set();
    return JSON.stringify((
        (typeof obj === "object" && obj)
        // recurse
        ? JSON.parse(stringify(obj))
        : obj
    ), replacer, space);
};
}());



/* istanbul ignore next */
// run shared js-env code - function
(function () {
/*
file CSSLint/csslint.js
2016-12-06T08:50:07Z - shGithubDateCommitted https://github.com/CSSLint/csslint/commits/v1.0.5
https://github.com/CSSLint/csslint/blob/v1.0.5/dist/csslint.js
utility2-uglifyjs https://raw.githubusercontent.com/CSSLint/csslint/v1.0.5/dist/csslint.js > /tmp/aa.js
*/
/* jslint ignore:start */
var CSSLint=function(){function s(e,t,n,r){"use strict";this.messages=[],this.stats=
[],this.lines=e,this.ruleset=t,this.allow=n,this.allow||(this.allow={}),this.ignore=
r,this.ignore||(this.ignore=[])}var e=e||{},t=t||{},n=function(){var e;return e=
function t(n,r,i){function s(u,a){if(!r[u]){if(!n[u]){var f=typeof e=="function"&&
e;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+
u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[u]={exports:{}};n[u][0].call(c.
exports,function(e){var t=n[u][1][e];return s(t?t:e)},c,c.exports,t,n,r,i)}return r
[u].exports}var o=typeof e=="function"&&e;for(var u=0;u<i.length;u++)s(i[u]);return s
}({1:[function(e,t,n){"use strict";var r=t.exports={__proto__:null,aliceblue:"#f0f8ff"
,antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige
:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff"
,blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse
:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk
:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b"
,darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400"
,darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00"
,darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f"
,darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise
:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray
:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite
:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite
:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green
:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c"
,indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush
:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral
:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3"
,lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a"
,lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey
:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen
:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa"
,mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen
:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise
:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",
mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace
:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500"
,orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee"
,palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f"
,pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000"
,rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",
sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver
:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090"
,snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080"
,thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3"
,white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",currentColor
:"The value of the 'color' property.",activeBorder:"Active window border.",activecaption
:"Active window caption.",appworkspace:"Background color of multiple document interface."
,background:"Desktop background.",buttonface:"The face background color for 3-D elements that appear 3-D due to one layer of surrounding border."
,buttonhighlight:"The color of the border facing the light source for 3-D elements that appear 3-D due to one layer of surrounding border."
,buttonshadow:"The color of the border away from the light source for 3-D elements that appear 3-D due to one layer of surrounding border."
,buttontext:"Text on push buttons.",captiontext:"Text in caption, size box, and scrollbar arrow box."
,graytext:"Grayed (disabled) text. This color is set to #000 if the current display driver does not support a solid gray color."
,greytext:"Greyed (disabled) text. This color is set to #000 if the current display driver does not support a solid grey color."
,highlight:"Item(s) selected in a control.",highlighttext:"Text of item(s) selected in a control."
,inactiveborder:"Inactive window border.",inactivecaption:"Inactive window caption."
,inactivecaptiontext:"Color of text in an inactive caption.",infobackground:"Background color for tooltip controls."
,infotext:"Text color for tooltip controls.",menu:"Menu background.",menutext:"Text in menus."
,scrollbar:"Scroll bar gray area.",threeddarkshadow:"The color of the darker (generally outer) of the two borders away from the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border."
,threedface:"The face background color for 3-D elements that appear 3-D due to two concentric layers of surrounding border."
,threedhighlight:"The color of the lighter (generally outer) of the two borders facing the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border."
,threedlightshadow:"The color of the darker (generally inner) of the two borders facing the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border."
,threedshadow:"The color of the lighter (generally inner) of the two borders away from the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border."
,window:"Window background.",windowframe:"Window frame.",windowtext:"Text in windows."
}},{}],2:[function(e,t,n){"use strict";function s(e,t,n){r.call(this,e,t,n,i.COMBINATOR_TYPE
),this.type="unknown",/^\s+$/.test(e)?this.type="descendant":e===">"?this.type="child"
:e==="+"?this.type="adjacent-sibling":e==="~"&&(this.type="sibling")}t.exports=s
;var r=e("../util/SyntaxUnit"),i=e("./Parser");s.prototype=new r,s.prototype.constructor=
s},{"../util/SyntaxUnit":26,"./Parser":6}],3:[function(e,t,n){"use strict";function s
(e,t){this.match=function(t){var n;return t.mark(),n=e(t),n?t.drop():t.restore()
,n},this.toString=typeof t=="function"?t:function(){return t}}t.exports=s;var r=
e("../util/StringReader"),i=e("../util/SyntaxError");s.prec={MOD:5,SEQ:4,ANDAND:3
,OROR:2,ALT:1},s.parse=function(e){var t,n,o,u,a,f,l,c,h;t=new r(e),n=function(e
){var n=t.readMatch(e);if(n===null)throw new i("Expected "+e,t.getLine(),t.getCol
());return n},o=function(){var e=[u()];while(t.readMatch(" | ")!==null)e.push(u(
));return e.length===1?e[0]:s.alt.apply(s,e)},u=function(){var e=[a()];while(t.readMatch
(" || ")!==null)e.push(a());return e.length===1?e[0]:s.oror.apply(s,e)},a=function(
){var e=[f()];while(t.readMatch(" && ")!==null)e.push(f());return e.length===1?e
[0]:s.andand.apply(s,e)},f=function(){var e=[l()];while(t.readMatch(/^ (?![&|\]])/
)!==null)e.push(l());return e.length===1?e[0]:s.seq.apply(s,e)},l=function(){var e=
c();if(t.readMatch("?")!==null)return e.question();if(t.readMatch("*")!==null)return e
.star();if(t.readMatch("+")!==null)return e.plus();if(t.readMatch("#")!==null)return e
.hash();if(t.readMatch(/^\{\s*/)!==null){var r=n(/^\d+/);n(/^\s*,\s*/);var i=n(/^\d+/
);return n(/^\s*\}/),e.braces(+r,+i)}return e},c=function(){if(t.readMatch("[ ")!==
null){var e=o();return n(" ]"),e}return s.fromType(n(/^[^ ?*+#{]+/))},h=o();if(!
t.eof())throw new i("Expected end of string",t.getLine(),t.getCol());return h},s
.cast=function(e){return e instanceof s?e:s.parse(e)},s.fromType=function(t){var n=
e("./ValidationTypes");return new s(function(e){return e.hasNext()&&n.isType(e,t
)},t)},s.seq=function(){var e=Array.prototype.slice.call(arguments).map(s.cast);
return e.length===1?e[0]:new s(function(t){var n,r=!0;for(n=0;r&&n<e.length;n++)
r=e[n].match(t);return r},function(t){var n=s.prec.SEQ,r=e.map(function(e){return e
.toString(n)}).join(" ");return t>n&&(r="[ "+r+" ]"),r})},s.alt=function(){var e=
Array.prototype.slice.call(arguments).map(s.cast);return e.length===1?e[0]:new s
(function(t){var n,r=!1;for(n=0;!r&&n<e.length;n++)r=e[n].match(t);return r},function(
t){var n=s.prec.ALT,r=e.map(function(e){return e.toString(n)}).join(" | ");return t>
n&&(r="[ "+r+" ]"),r})},s.many=function(t){var n=Array.prototype.slice.call(arguments
,1).reduce(function(t,n){if(n.expand){var r=e("./ValidationTypes");t.push.apply(
t,r.complex[n.expand].options)}else t.push(s.cast(n));return t},[]);t===!0&&(t=n
.map(function(){return!0}));var r=new s(function(e){var r=[],i=0,s=0,o=function(
e){return s===0?(i=Math.max(e,i),e===n.length):e===i},u=function(i){for(var s=0;
s<n.length;s++){if(r[s])continue;e.mark();if(n[s].match(e)){r[s]=!0;if(u(i+(t===!1||
t[s]?1:0)))return e.drop(),!0;e.restore(),r[s]=!1}else e.drop()}return o(i)};u(0
)||(s++,u(0));if(t===!1)return i>0;for(var a=0;a<n.length;a++)if(t[a]&&!r[a])return!1
;return!0},function(e){var r=t===!1?s.prec.OROR:s.prec.ANDAND,i=n.map(function(e
,n){return t!==!1&&!t[n]?e.toString(s.prec.MOD)+"?":e.toString(r)}).join(t===!1?" || "
:" && ");return e>r&&(i="[ "+i+" ]"),i});return r.options=n,r},s.andand=function(
){var e=Array.prototype.slice.call(arguments);return e.unshift(!0),s.many.apply(
s,e)},s.oror=function(){var e=Array.prototype.slice.call(arguments);return e.unshift
(!1),s.many.apply(s,e)},s.prototype={constructor:s,match:function(){throw new Error
("unimplemented")},toString:function(){throw new Error("unimplemented")},func:function(
){return this.match.bind(this)},then:function(e){return s.seq(this,e)},or:function(
e){return s.alt(this,e)},andand:function(e){return s.many(!0,this,e)},oror:function(
e){return s.many(!1,this,e)},star:function(){return this.braces(0,Infinity,"*")}
,plus:function(){return this.braces(1,Infinity,"+")},question:function(){return this
.braces(0,1,"?")},hash:function(){return this.braces(1,Infinity,"#",s.cast(","))
},braces:function(e,t,n,r){var i=this,o=r?r.then(this):this;return n||(n="{"+e+","+
t+"}"),new s(function(n){var s=!0,u;for(u=0;u<t;u++){u>0&&r?s=o.match(n):s=i.match
(n);if(!s)break}return u>=e},function(){return i.toString(s.prec.MOD)+n})}}},{"../util/StringReader"
:24,"../util/SyntaxError":25,"./ValidationTypes":21}],4:[function(e,t,n){"use strict"
;function s(e,t){r.call(this,"("+e+(t!==null?":"+t:"")+")",e.startLine,e.startCol
,i.MEDIA_FEATURE_TYPE),this.name=e,this.value=t}t.exports=s;var r=e("../util/SyntaxUnit"
),i=e("./Parser");s.prototype=new r,s.prototype.constructor=s},{"../util/SyntaxUnit"
:26,"./Parser":6}],5:[function(e,t,n){"use strict";function s(e,t,n,s,o){r.call(
this,(e?e+" ":"")+(t?t:"")+(t&&n.length>0?" and ":"")+n.join(" and "),s,o,i.MEDIA_QUERY_TYPE
),this.modifier=e,this.mediaType=t,this.features=n}t.exports=s;var r=e("../util/SyntaxUnit"
),i=e("./Parser");s.prototype=new r,s.prototype.constructor=s},{"../util/SyntaxUnit"
:26,"./Parser":6}],6:[function(e,t,n){"use strict";function y(e){r.call(this),this
.options=e||{},this._tokenStream=null}t.exports=y;var r=e("../util/EventTarget")
,i=e("../util/SyntaxError"),s=e("../util/SyntaxUnit"),o=e("./Combinator"),u=e("./MediaFeature"
),a=e("./MediaQuery"),f=e("./PropertyName"),l=e("./PropertyValue"),c=e("./PropertyValuePart"
),h=e("./Selector"),p=e("./SelectorPart"),d=e("./SelectorSubPart"),v=e("./TokenStream"
),m=e("./Tokens"),g=e("./Validation");y.DEFAULT_TYPE=0,y.COMBINATOR_TYPE=1,y.MEDIA_FEATURE_TYPE=2
,y.MEDIA_QUERY_TYPE=3,y.PROPERTY_NAME_TYPE=4,y.PROPERTY_VALUE_TYPE=5,y.PROPERTY_VALUE_PART_TYPE=6
,y.SELECTOR_TYPE=7,y.SELECTOR_PART_TYPE=8,y.SELECTOR_SUB_PART_TYPE=9,y.prototype=
function(){var e=new r,t,n={__proto__:null,constructor:y,DEFAULT_TYPE:0,COMBINATOR_TYPE
:1,MEDIA_FEATURE_TYPE:2,MEDIA_QUERY_TYPE:3,PROPERTY_NAME_TYPE:4,PROPERTY_VALUE_TYPE
:5,PROPERTY_VALUE_PART_TYPE:6,SELECTOR_TYPE:7,SELECTOR_PART_TYPE:8,SELECTOR_SUB_PART_TYPE
:9,_stylesheet:function(){var e=this._tokenStream,t,n,r;this.fire("startstylesheet"
),this._charset(),this._skipCruft();while(e.peek()===m.IMPORT_SYM)this._import()
,this._skipCruft();while(e.peek()===m.NAMESPACE_SYM)this._namespace(),this._skipCruft
();r=e.peek();while(r>m.EOF){try{switch(r){case m.MEDIA_SYM:this._media(),this._skipCruft
();break;case m.PAGE_SYM:this._page(),this._skipCruft();break;case m.FONT_FACE_SYM
:this._font_face(),this._skipCruft();break;case m.KEYFRAMES_SYM:this._keyframes(
),this._skipCruft();break;case m.VIEWPORT_SYM:this._viewport(),this._skipCruft()
;break;case m.DOCUMENT_SYM:this._document(),this._skipCruft();break;case m.SUPPORTS_SYM
:this._supports(),this._skipCruft();break;case m.UNKNOWN_SYM:e.get();if(!!this.options
.strict)throw new i("Unknown @ rule.",e.LT(0).startLine,e.LT(0).startCol);this.fire
({type:"error",error:null,message:"Unknown @ rule: "+e.LT(0).value+".",line:e.LT
(0).startLine,col:e.LT(0).startCol}),t=0;while(e.advance([m.LBRACE,m.RBRACE])===
m.LBRACE)t++;while(t)e.advance([m.RBRACE]),t--;break;case m.S:this._readWhitespace
();break;default:if(!this._ruleset())switch(r){case m.CHARSET_SYM:throw n=e.LT(1
),this._charset(!1),new i("@charset not allowed here.",n.startLine,n.startCol);case m
.IMPORT_SYM:throw n=e.LT(1),this._import(!1),new i("@import not allowed here.",n
.startLine,n.startCol);case m.NAMESPACE_SYM:throw n=e.LT(1),this._namespace(!1),new
i("@namespace not allowed here.",n.startLine,n.startCol);default:e.get(),this._unexpectedToken
(e.token())}}}catch(s){if(!(s instanceof i&&!this.options.strict))throw s;this.fire
({type:"error",error:s,message:s.message,line:s.line,col:s.col})}r=e.peek()}r!==
m.EOF&&this._unexpectedToken(e.token()),this.fire("endstylesheet")},_charset:function(
e){var t=this._tokenStream,n,r,i,s;t.match(m.CHARSET_SYM)&&(i=t.token().startLine
,s=t.token().startCol,this._readWhitespace(),t.mustMatch(m.STRING),r=t.token(),n=
r.value,this._readWhitespace(),t.mustMatch(m.SEMICOLON),e!==!1&&this.fire({type:"charset"
,charset:n,line:i,col:s}))},_import:function(e){var t=this._tokenStream,n,r,i=[]
;t.mustMatch(m.IMPORT_SYM),r=t.token(),this._readWhitespace(),t.mustMatch([m.STRING
,m.URI]),n=t.token().value.replace(/^(?:url\()?["']?([^"']+?)["']?\)?$/,"$1"),this
._readWhitespace(),i=this._media_query_list(),t.mustMatch(m.SEMICOLON),this._readWhitespace
(),e!==!1&&this.fire({type:"import",uri:n,media:i,line:r.startLine,col:r.startCol
})},_namespace:function(e){var t=this._tokenStream,n,r,i,s;t.mustMatch(m.NAMESPACE_SYM
),n=t.token().startLine,r=t.token().startCol,this._readWhitespace(),t.match(m.IDENT
)&&(i=t.token().value,this._readWhitespace()),t.mustMatch([m.STRING,m.URI]),s=t.
token().value.replace(/(?:url\()?["']([^"']+)["']\)?/,"$1"),this._readWhitespace
(),t.mustMatch(m.SEMICOLON),this._readWhitespace(),e!==!1&&this.fire({type:"namespace"
,prefix:i,uri:s,line:n,col:r})},_supports:function(e){var t=this._tokenStream,n,
r;if(t.match(m.SUPPORTS_SYM)){n=t.token().startLine,r=t.token().startCol,this._readWhitespace
(),this._supports_condition(),this._readWhitespace(),t.mustMatch(m.LBRACE),this.
_readWhitespace(),e!==!1&&this.fire({type:"startsupports",line:n,col:r});for(;;)
if(!this._ruleset())break;t.mustMatch(m.RBRACE),this._readWhitespace(),this.fire
({type:"endsupports",line:n,col:r})}},_supports_condition:function(){var e=this.
_tokenStream,t;if(e.match(m.IDENT))t=e.token().value.toLowerCase(),t==="not"?(e.
mustMatch(m.S),this._supports_condition_in_parens()):e.unget();else{this._supports_condition_in_parens
(),this._readWhitespace();while(e.peek()===m.IDENT){t=e.LT(1).value.toLowerCase(
);if(t==="and"||t==="or")e.mustMatch(m.IDENT),this._readWhitespace(),this._supports_condition_in_parens
(),this._readWhitespace()}}},_supports_condition_in_parens:function(){var e=this
._tokenStream,t;e.match(m.LPAREN)?(this._readWhitespace(),e.match(m.IDENT)?(t=e.
token().value.toLowerCase(),t==="not"?(this._readWhitespace(),this._supports_condition
(),this._readWhitespace(),e.mustMatch(m.RPAREN)):(e.unget(),this._supports_declaration_condition
(!1))):(this._supports_condition(),this._readWhitespace(),e.mustMatch(m.RPAREN))
):this._supports_declaration_condition()},_supports_declaration_condition:function(
e){var t=this._tokenStream;e!==!1&&t.mustMatch(m.LPAREN),this._readWhitespace(),
this._declaration(),t.mustMatch(m.RPAREN)},_media:function(){var e=this._tokenStream
,t,n,r;e.mustMatch(m.MEDIA_SYM),t=e.token().startLine,n=e.token().startCol,this.
_readWhitespace(),r=this._media_query_list(),e.mustMatch(m.LBRACE),this._readWhitespace
(),this.fire({type:"startmedia",media:r,line:t,col:n});for(;;)if(e.peek()===m.PAGE_SYM
)this._page();else if(e.peek()===m.FONT_FACE_SYM)this._font_face();else if(e.peek
()===m.VIEWPORT_SYM)this._viewport();else if(e.peek()===m.DOCUMENT_SYM)this._document
();else if(e.peek()===m.SUPPORTS_SYM)this._supports();else if(e.peek()===m.MEDIA_SYM
)this._media();else if(!this._ruleset())break;e.mustMatch(m.RBRACE),this._readWhitespace
(),this.fire({type:"endmedia",media:r,line:t,col:n})},_media_query_list:function(
){var e=this._tokenStream,t=[];this._readWhitespace(),(e.peek()===m.IDENT||e.peek
()===m.LPAREN)&&t.push(this._media_query());while(e.match(m.COMMA))this._readWhitespace
(),t.push(this._media_query());return t},_media_query:function(){var e=this._tokenStream
,t=null,n=null,r=null,i=[];e.match(m.IDENT)&&(n=e.token().value.toLowerCase(),n!=="only"&&
n!=="not"?(e.unget(),n=null):r=e.token()),this._readWhitespace(),e.peek()===m.IDENT?
(t=this._media_type(),r===null&&(r=e.token())):e.peek()===m.LPAREN&&(r===null&&(
r=e.LT(1)),i.push(this._media_expression()));if(t===null&&i.length===0)return null
;this._readWhitespace();while(e.match(m.IDENT))e.token().value.toLowerCase()!=="and"&&
this._unexpectedToken(e.token()),this._readWhitespace(),i.push(this._media_expression
());return new a(n,t,i,r.startLine,r.startCol)},_media_type:function(){return this
._media_feature()},_media_expression:function(){var e=this._tokenStream,t=null,n
,r=null;return e.mustMatch(m.LPAREN),t=this._media_feature(),this._readWhitespace
(),e.match(m.COLON)&&(this._readWhitespace(),n=e.LT(1),r=this._expression()),e.mustMatch
(m.RPAREN),this._readWhitespace(),new u(t,r?new s(r,n.startLine,n.startCol):null
)},_media_feature:function(){var e=this._tokenStream;return this._readWhitespace
(),e.mustMatch(m.IDENT),s.fromToken(e.token())},_page:function(){var e=this._tokenStream
,t,n,r=null,i=null;e.mustMatch(m.PAGE_SYM),t=e.token().startLine,n=e.token().startCol
,this._readWhitespace(),e.match(m.IDENT)&&(r=e.token().value,r.toLowerCase()==="auto"&&
this._unexpectedToken(e.token())),e.peek()===m.COLON&&(i=this._pseudo_page()),this
._readWhitespace(),this.fire({type:"startpage",id:r,pseudo:i,line:t,col:n}),this
._readDeclarations(!0,!0),this.fire({type:"endpage",id:r,pseudo:i,line:t,col:n})
},_margin:function(){var e=this._tokenStream,t,n,r=this._margin_sym();return r?(
t=e.token().startLine,n=e.token().startCol,this.fire({type:"startpagemargin",margin
:r,line:t,col:n}),this._readDeclarations(!0),this.fire({type:"endpagemargin",margin
:r,line:t,col:n}),!0):!1},_margin_sym:function(){var e=this._tokenStream;return e
.match([m.TOPLEFTCORNER_SYM,m.TOPLEFT_SYM,m.TOPCENTER_SYM,m.TOPRIGHT_SYM,m.TOPRIGHTCORNER_SYM
,m.BOTTOMLEFTCORNER_SYM,m.BOTTOMLEFT_SYM,m.BOTTOMCENTER_SYM,m.BOTTOMRIGHT_SYM,m.
BOTTOMRIGHTCORNER_SYM,m.LEFTTOP_SYM,m.LEFTMIDDLE_SYM,m.LEFTBOTTOM_SYM,m.RIGHTTOP_SYM
,m.RIGHTMIDDLE_SYM,m.RIGHTBOTTOM_SYM])?s.fromToken(e.token()):null},_pseudo_page
:function(){var e=this._tokenStream;return e.mustMatch(m.COLON),e.mustMatch(m.IDENT
),e.token().value},_font_face:function(){var e=this._tokenStream,t,n;e.mustMatch
(m.FONT_FACE_SYM),t=e.token().startLine,n=e.token().startCol,this._readWhitespace
(),this.fire({type:"startfontface",line:t,col:n}),this._readDeclarations(!0),this
.fire({type:"endfontface",line:t,col:n})},_viewport:function(){var e=this._tokenStream
,t,n;e.mustMatch(m.VIEWPORT_SYM),t=e.token().startLine,n=e.token().startCol,this
._readWhitespace(),this.fire({type:"startviewport",line:t,col:n}),this._readDeclarations
(!0),this.fire({type:"endviewport",line:t,col:n})},_document:function(){var e=this
._tokenStream,t,n=[],r="";e.mustMatch(m.DOCUMENT_SYM),t=e.token(),/^@\-([^\-]+)\-/
.test(t.value)&&(r=RegExp.$1),this._readWhitespace(),n.push(this._document_function
());while(e.match(m.COMMA))this._readWhitespace(),n.push(this._document_function
());e.mustMatch(m.LBRACE),this._readWhitespace(),this.fire({type:"startdocument"
,functions:n,prefix:r,line:t.startLine,col:t.startCol});var i=!0;while(i)switch(
e.peek()){case m.PAGE_SYM:this._page();break;case m.FONT_FACE_SYM:this._font_face
();break;case m.VIEWPORT_SYM:this._viewport();break;case m.MEDIA_SYM:this._media
();break;case m.KEYFRAMES_SYM:this._keyframes();break;case m.DOCUMENT_SYM:this._document
();break;default:i=Boolean(this._ruleset())}e.mustMatch(m.RBRACE),t=e.token(),this
._readWhitespace(),this.fire({type:"enddocument",functions:n,prefix:r,line:t.startLine
,col:t.startCol})},_document_function:function(){var e=this._tokenStream,t;return e
.match(m.URI)?(t=e.token().value,this._readWhitespace()):t=this._function(),t},_operator
:function(e){var t=this._tokenStream,n=null;if(t.match([m.SLASH,m.COMMA])||e&&t.
match([m.PLUS,m.STAR,m.MINUS]))n=t.token(),this._readWhitespace();return n?c.fromToken
(n):null},_combinator:function(){var e=this._tokenStream,t=null,n;return e.match
([m.PLUS,m.GREATER,m.TILDE])&&(n=e.token(),t=new o(n.value,n.startLine,n.startCol
),this._readWhitespace()),t},_unary_operator:function(){var e=this._tokenStream;
return e.match([m.MINUS,m.PLUS])?e.token().value:null},_property:function(){var e=
this._tokenStream,t=null,n=null,r,i,s,o;return e.peek()===m.STAR&&this.options.starHack&&
(e.get(),i=e.token(),n=i.value,s=i.startLine,o=i.startCol),e.match(m.IDENT)&&(i=
e.token(),r=i.value,r.charAt(0)==="_"&&this.options.underscoreHack&&(n="_",r=r.substring
(1)),t=new f(r,n,s||i.startLine,o||i.startCol),this._readWhitespace()),t},_ruleset
:function(){var e=this._tokenStream,t,n;try{n=this._selectors_group()}catch(r){if(
r instanceof i&&!this.options.strict){this.fire({type:"error",error:r,message:r.
message,line:r.line,col:r.col}),t=e.advance([m.RBRACE]);if(t!==m.RBRACE)throw r;
return!0}throw r}return n&&(this.fire({type:"startrule",selectors:n,line:n[0].line
,col:n[0].col}),this._readDeclarations(!0),this.fire({type:"endrule",selectors:n
,line:n[0].line,col:n[0].col})),n},_selectors_group:function(){var e=this._tokenStream
,t=[],n;n=this._selector();if(n!==null){t.push(n);while(e.match(m.COMMA))this._readWhitespace
(),n=this._selector(),n!==null?t.push(n):this._unexpectedToken(e.LT(1))}return t
.length?t:null},_selector:function(){var e=this._tokenStream,t=[],n=null,r=null,
i=null;n=this._simple_selector_sequence();if(n===null)return null;t.push(n);do{r=
this._combinator();if(r!==null)t.push(r),n=this._simple_selector_sequence(),n===
null?this._unexpectedToken(e.LT(1)):t.push(n);else{if(!this._readWhitespace())break;
i=new o(e.token().value,e.token().startLine,e.token().startCol),r=this._combinator
(),n=this._simple_selector_sequence(),n===null?r!==null&&this._unexpectedToken(e
.LT(1)):(r!==null?t.push(r):t.push(i),t.push(n))}}while(!0);return new h(t,t[0].
line,t[0].col)},_simple_selector_sequence:function(){var e=this._tokenStream,t=null
,n=[],r="",i=[function(){return e.match(m.HASH)?new d(e.token().value,"id",e.token
().startLine,e.token().startCol):null},this._class,this._attrib,this._pseudo,this
._negation],s=0,o=i.length,u=null,a,f;a=e.LT(1).startLine,f=e.LT(1).startCol,t=this
._type_selector(),t||(t=this._universal()),t!==null&&(r+=t);for(;;){if(e.peek()===
m.S)break;while(s<o&&u===null)u=i[s++].call(this);if(u===null){if(r==="")return null
;break}s=0,n.push(u),r+=u.toString(),u=null}return r!==""?new p(t,n,r,a,f):null}
,_type_selector:function(){var e=this._tokenStream,t=this._namespace_prefix(),n=
this._element_name();return n?(t&&(n.text=t+n.text,n.col-=t.length),n):(t&&(e.unget
(),t.length>1&&e.unget()),null)},_class:function(){var e=this._tokenStream,t;return e
.match(m.DOT)?(e.mustMatch(m.IDENT),t=e.token(),new d("."+t.value,"class",t.startLine
,t.startCol-1)):null},_element_name:function(){var e=this._tokenStream,t;return e
.match(m.IDENT)?(t=e.token(),new d(t.value,"elementName",t.startLine,t.startCol)
):null},_namespace_prefix:function(){var e=this._tokenStream,t="";if(e.LA(1)===m
.PIPE||e.LA(2)===m.PIPE)e.match([m.IDENT,m.STAR])&&(t+=e.token().value),e.mustMatch
(m.PIPE),t+="|";return t.length?t:null},_universal:function(){var e=this._tokenStream
,t="",n;return n=this._namespace_prefix(),n&&(t+=n),e.match(m.STAR)&&(t+="*"),t.
length?t:null},_attrib:function(){var e=this._tokenStream,t=null,n,r;return e.match
(m.LBRACKET)?(r=e.token(),t=r.value,t+=this._readWhitespace(),n=this._namespace_prefix
(),n&&(t+=n),e.mustMatch(m.IDENT),t+=e.token().value,t+=this._readWhitespace(),e
.match([m.PREFIXMATCH,m.SUFFIXMATCH,m.SUBSTRINGMATCH,m.EQUALS,m.INCLUDES,m.DASHMATCH
])&&(t+=e.token().value,t+=this._readWhitespace(),e.mustMatch([m.IDENT,m.STRING]
),t+=e.token().value,t+=this._readWhitespace()),e.mustMatch(m.RBRACKET),new d(t+"]"
,"attribute",r.startLine,r.startCol)):null},_pseudo:function(){var e=this._tokenStream
,t=null,n=":",r,s;if(e.match(m.COLON)){e.match(m.COLON)&&(n+=":"),e.match(m.IDENT
)?(t=e.token().value,r=e.token().startLine,s=e.token().startCol-n.length):e.peek
()===m.FUNCTION&&(r=e.LT(1).startLine,s=e.LT(1).startCol-n.length,t=this._functional_pseudo
());if(!t){var o=e.LT(1).startLine,u=e.LT(0).startCol;throw new i("Expected a `FUNCTION` or `IDENT` after colon at line "+
o+", col "+u+".",o,u)}t=new d(n+t,"pseudo",r,s)}return t},_functional_pseudo:function(
){var e=this._tokenStream,t=null;return e.match(m.FUNCTION)&&(t=e.token().value,
t+=this._readWhitespace(),t+=this._expression(),e.mustMatch(m.RPAREN),t+=")"),t}
,_expression:function(){var e=this._tokenStream,t="";while(e.match([m.PLUS,m.MINUS
,m.DIMENSION,m.NUMBER,m.STRING,m.IDENT,m.LENGTH,m.FREQ,m.ANGLE,m.TIME,m.RESOLUTION
,m.SLASH]))t+=e.token().value,t+=this._readWhitespace();return t.length?t:null},
_negation:function(){var e=this._tokenStream,t,n,r="",i,s=null;return e.match(m.
NOT)&&(r=e.token().value,t=e.token().startLine,n=e.token().startCol,r+=this._readWhitespace
(),i=this._negation_arg(),r+=i,r+=this._readWhitespace(),e.match(m.RPAREN),r+=e.
token().value,s=new d(r,"not",t,n),s.args.push(i)),s},_negation_arg:function(){var e=
this._tokenStream,t=[this._type_selector,this._universal,function(){return e.match
(m.HASH)?new d(e.token().value,"id",e.token().startLine,e.token().startCol):null
},this._class,this._attrib,this._pseudo],n=null,r=0,i=t.length,s,o,u;s=e.LT(1).startLine
,o=e.LT(1).startCol;while(r<i&&n===null)n=t[r].call(this),r++;return n===null&&this
._unexpectedToken(e.LT(1)),n.type==="elementName"?u=new p(n,[],n.toString(),s,o)
:u=new p(null,[n],n.toString(),s,o),u},_declaration:function(){var e=this._tokenStream
,t=null,n=null,r=null,i=null,s="";t=this._property();if(t!==null){e.mustMatch(m.
COLON),this._readWhitespace(),n=this._expr(),(!n||n.length===0)&&this._unexpectedToken
(e.LT(1)),r=this._prio(),s=t.toString();if(this.options.starHack&&t.hack==="*"||
this.options.underscoreHack&&t.hack==="_")s=t.text;try{this._validateProperty(s,
n)}catch(o){i=o}return this.fire({type:"property",property:t,value:n,important:r
,line:t.line,col:t.col,invalid:i}),!0}return!1},_prio:function(){var e=this._tokenStream
,t=e.match(m.IMPORTANT_SYM);return this._readWhitespace(),t},_expr:function(e){var t=
[],n=null,r=null;n=this._term(e);if(n!==null){t.push(n);do{r=this._operator(e),r&&
t.push(r),n=this._term(e);if(n===null)break;t.push(n)}while(!0)}return t.length>0?new
l(t,t[0].line,t[0].col):null},_term:function(e){var t=this._tokenStream,n=null,r=
null,i=null,s=null,o,u,a;return n=this._unary_operator(),n!==null&&(u=t.token().
startLine,a=t.token().startCol),t.peek()===m.IE_FUNCTION&&this.options.ieFilters?
(r=this._ie_function(),n===null&&(u=t.token().startLine,a=t.token().startCol)):e&&
t.match([m.LPAREN,m.LBRACE,m.LBRACKET])?(o=t.token(),i=o.endChar,r=o.value+this.
_expr(e).text,n===null&&(u=t.token().startLine,a=t.token().startCol),t.mustMatch
(m.type(i)),r+=i,this._readWhitespace()):t.match([m.NUMBER,m.PERCENTAGE,m.LENGTH
,m.ANGLE,m.TIME,m.FREQ,m.STRING,m.IDENT,m.URI,m.UNICODE_RANGE])?(r=t.token().value
,n===null&&(u=t.token().startLine,a=t.token().startCol,s=c.fromToken(t.token()))
,this._readWhitespace()):(o=this._hexcolor(),o===null?(n===null&&(u=t.LT(1).startLine
,a=t.LT(1).startCol),r===null&&(t.LA(3)===m.EQUALS&&this.options.ieFilters?r=this
._ie_function():r=this._function())):(r=o.value,n===null&&(u=o.startLine,a=o.startCol
))),s!==null?s:r!==null?new c(n!==null?n+r:r,u,a):null},_function:function(){var e=
this._tokenStream,t=null,n=null,r;if(e.match(m.FUNCTION)){t=e.token().value,this
._readWhitespace(),n=this._expr(!0),t+=n;if(this.options.ieFilters&&e.peek()===m
.EQUALS)do{this._readWhitespace()&&(t+=e.token().value),e.LA(0)===m.COMMA&&(t+=e
.token().value),e.match(m.IDENT),t+=e.token().value,e.match(m.EQUALS),t+=e.token
().value,r=e.peek();while(r!==m.COMMA&&r!==m.S&&r!==m.RPAREN)e.get(),t+=e.token(
).value,r=e.peek()}while(e.match([m.COMMA,m.S]));e.match(m.RPAREN),t+=")",this._readWhitespace
()}return t},_ie_function:function(){var e=this._tokenStream,t=null,n;if(e.match
([m.IE_FUNCTION,m.FUNCTION])){t=e.token().value;do{this._readWhitespace()&&(t+=e
.token().value),e.LA(0)===m.COMMA&&(t+=e.token().value),e.match(m.IDENT),t+=e.token
().value,e.match(m.EQUALS),t+=e.token().value,n=e.peek();while(n!==m.COMMA&&n!==
m.S&&n!==m.RPAREN)e.get(),t+=e.token().value,n=e.peek()}while(e.match([m.COMMA,m
.S]));e.match(m.RPAREN),t+=")",this._readWhitespace()}return t},_hexcolor:function(
){var e=this._tokenStream,t=null,n;if(e.match(m.HASH)){t=e.token(),n=t.value;if(!/#[a-f0-9]{3,6}/i
.test(n))throw new i("Expected a hex color but found '"+n+"' at line "+t.startLine+", col "+
t.startCol+".",t.startLine,t.startCol);this._readWhitespace()}return t},_keyframes
:function(){var e=this._tokenStream,t,n,r,i="";e.mustMatch(m.KEYFRAMES_SYM),t=e.
token(),/^@\-([^\-]+)\-/.test(t.value)&&(i=RegExp.$1),this._readWhitespace(),r=this
._keyframe_name(),this._readWhitespace(),e.mustMatch(m.LBRACE),this.fire({type:"startkeyframes"
,name:r,prefix:i,line:t.startLine,col:t.startCol}),this._readWhitespace(),n=e.peek
();while(n===m.IDENT||n===m.PERCENTAGE)this._keyframe_rule(),this._readWhitespace
(),n=e.peek();this.fire({type:"endkeyframes",name:r,prefix:i,line:t.startLine,col
:t.startCol}),this._readWhitespace(),e.mustMatch(m.RBRACE),this._readWhitespace(
)},_keyframe_name:function(){var e=this._tokenStream;return e.mustMatch([m.IDENT
,m.STRING]),s.fromToken(e.token())},_keyframe_rule:function(){var e=this._key_list
();this.fire({type:"startkeyframerule",keys:e,line:e[0].line,col:e[0].col}),this
._readDeclarations(!0),this.fire({type:"endkeyframerule",keys:e,line:e[0].line,col
:e[0].col})},_key_list:function(){var e=this._tokenStream,t=[];t.push(this._key(
)),this._readWhitespace();while(e.match(m.COMMA))this._readWhitespace(),t.push(this
._key()),this._readWhitespace();return t},_key:function(){var e=this._tokenStream
,t;if(e.match(m.PERCENTAGE))return s.fromToken(e.token());if(e.match(m.IDENT)){t=
e.token();if(/from|to/i.test(t.value))return s.fromToken(t);e.unget()}this._unexpectedToken
(e.LT(1))},_skipCruft:function(){while(this._tokenStream.match([m.S,m.CDO,m.CDC]
));},_readDeclarations:function(e,t){var n=this._tokenStream,r;this._readWhitespace
(),e&&n.mustMatch(m.LBRACE),this._readWhitespace();try{for(;;){if(!(n.match(m.SEMICOLON
)||t&&this._margin())){if(!this._declaration())break;if(!n.match(m.SEMICOLON))break}
this._readWhitespace()}n.mustMatch(m.RBRACE),this._readWhitespace()}catch(s){if(!
(s instanceof i&&!this.options.strict))throw s;this.fire({type:"error",error:s,message
:s.message,line:s.line,col:s.col}),r=n.advance([m.SEMICOLON,m.RBRACE]);if(r===m.
SEMICOLON)this._readDeclarations(!1,t);else if(r!==m.RBRACE)throw s}},_readWhitespace
:function(){var e=this._tokenStream,t="";while(e.match(m.S))t+=e.token().value;return t
},_unexpectedToken:function(e){throw new i("Unexpected token '"+e.value+"' at line "+
e.startLine+", col "+e.startCol+".",e.startLine,e.startCol)},_verifyEnd:function(
){this._tokenStream.LA(1)!==m.EOF&&this._unexpectedToken(this._tokenStream.LT(1)
)},_validateProperty:function(e,t){g.validate(e,t)},parse:function(e){this._tokenStream=new
v(e,m),this._stylesheet()},parseStyleSheet:function(e){return this.parse(e)},parseMediaQuery
:function(e){this._tokenStream=new v(e,m);var t=this._media_query();return this.
_verifyEnd(),t},parsePropertyValue:function(e){this._tokenStream=new v(e,m),this
._readWhitespace();var t=this._expr();return this._readWhitespace(),this._verifyEnd
(),t},parseRule:function(e){this._tokenStream=new v(e,m),this._readWhitespace();
var t=this._ruleset();return this._readWhitespace(),this._verifyEnd(),t},parseSelector
:function(e){this._tokenStream=new v(e,m),this._readWhitespace();var t=this._selector
();return this._readWhitespace(),this._verifyEnd(),t},parseStyleAttribute:function(
e){e+="}",this._tokenStream=new v(e,m),this._readDeclarations()}};for(t in n)Object
.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}()},{"../util/EventTarget"
:23,"../util/SyntaxError":25,"../util/SyntaxUnit":26,"./Combinator":2,"./MediaFeature"
:4,"./MediaQuery":5,"./PropertyName":8,"./PropertyValue":9,"./PropertyValuePart"
:11,"./Selector":13,"./SelectorPart":14,"./SelectorSubPart":15,"./TokenStream":17
,"./Tokens":18,"./Validation":19}],7:[function(e,t,n){"use strict";var r=t.exports=
{__proto__:null,"align-items":"flex-start | flex-end | center | baseline | stretch"
,"align-content":"flex-start | flex-end | center | space-between | space-around | stretch"
,"align-self":"auto | flex-start | flex-end | center | baseline | stretch",all:"initial | inherit | unset"
,"-webkit-align-items":"flex-start | flex-end | center | baseline | stretch","-webkit-align-content"
:"flex-start | flex-end | center | space-between | space-around | stretch","-webkit-align-self"
:"auto | flex-start | flex-end | center | baseline | stretch","alignment-adjust"
:"auto | baseline | before-edge | text-before-edge | middle | central | after-edge | text-after-edge | ideographic | alphabetic | hanging | mathematical | <percentage> | <length>"
,"alignment-baseline":"auto | baseline | use-script | before-edge | text-before-edge | after-edge | text-after-edge | central | middle | ideographic | alphabetic | hanging | mathematical"
,animation:1,"animation-delay":"<time>#","animation-direction":"<single-animation-direction>#"
,"animation-duration":"<time>#","animation-fill-mode":"[ none | forwards | backwards | both ]#"
,"animation-iteration-count":"[ <number> | infinite ]#","animation-name":"[ none | <single-animation-name> ]#"
,"animation-play-state":"[ running | paused ]#","animation-timing-function":1,"-moz-animation-delay"
:"<time>#","-moz-animation-direction":"[ normal | alternate ]#","-moz-animation-duration"
:"<time>#","-moz-animation-iteration-count":"[ <number> | infinite ]#","-moz-animation-name"
:"[ none | <single-animation-name> ]#","-moz-animation-play-state":"[ running | paused ]#"
,"-ms-animation-delay":"<time>#","-ms-animation-direction":"[ normal | alternate ]#"
,"-ms-animation-duration":"<time>#","-ms-animation-iteration-count":"[ <number> | infinite ]#"
,"-ms-animation-name":"[ none | <single-animation-name> ]#","-ms-animation-play-state"
:"[ running | paused ]#","-webkit-animation-delay":"<time>#","-webkit-animation-direction"
:"[ normal | alternate ]#","-webkit-animation-duration":"<time>#","-webkit-animation-fill-mode"
:"[ none | forwards | backwards | both ]#","-webkit-animation-iteration-count":"[ <number> | infinite ]#"
,"-webkit-animation-name":"[ none | <single-animation-name> ]#","-webkit-animation-play-state"
:"[ running | paused ]#","-o-animation-delay":"<time>#","-o-animation-direction"
:"[ normal | alternate ]#","-o-animation-duration":"<time>#","-o-animation-iteration-count"
:"[ <number> | infinite ]#","-o-animation-name":"[ none | <single-animation-name> ]#"
,"-o-animation-play-state":"[ running | paused ]#",appearance:"none | auto","-moz-appearance"
:"none | button | button-arrow-down | button-arrow-next | button-arrow-previous | button-arrow-up | button-bevel | button-focus | caret | checkbox | checkbox-container | checkbox-label | checkmenuitem | dualbutton | groupbox | listbox | listitem | menuarrow | menubar | menucheckbox | menuimage | menuitem | menuitemtext | menulist | menulist-button | menulist-text | menulist-textfield | menupopup | menuradio | menuseparator | meterbar | meterchunk | progressbar | progressbar-vertical | progresschunk | progresschunk-vertical | radio | radio-container | radio-label | radiomenuitem | range | range-thumb | resizer | resizerpanel | scale-horizontal | scalethumbend | scalethumb-horizontal | scalethumbstart | scalethumbtick | scalethumb-vertical | scale-vertical | scrollbarbutton-down | scrollbarbutton-left | scrollbarbutton-right | scrollbarbutton-up | scrollbarthumb-horizontal | scrollbarthumb-vertical | scrollbartrack-horizontal | scrollbartrack-vertical | searchfield | separator | sheet | spinner | spinner-downbutton | spinner-textfield | spinner-upbutton | splitter | statusbar | statusbarpanel | tab | tabpanel | tabpanels | tab-scroll-arrow-back | tab-scroll-arrow-forward | textfield | textfield-multiline | toolbar | toolbarbutton | toolbarbutton-dropdown | toolbargripper | toolbox | tooltip | treeheader | treeheadercell | treeheadersortarrow | treeitem | treeline | treetwisty | treetwistyopen | treeview | -moz-mac-unified-toolbar | -moz-win-borderless-glass | -moz-win-browsertabbar-toolbox | -moz-win-communicationstext | -moz-win-communications-toolbox | -moz-win-exclude-glass | -moz-win-glass | -moz-win-mediatext | -moz-win-media-toolbox | -moz-window-button-box | -moz-window-button-box-maximized | -moz-window-button-close | -moz-window-button-maximize | -moz-window-button-minimize | -moz-window-button-restore | -moz-window-frame-bottom | -moz-window-frame-left | -moz-window-frame-right | -moz-window-titlebar | -moz-window-titlebar-maximized"
,"-ms-appearance":"none | icon | window | desktop | workspace | document | tooltip | dialog | button | push-button | hyperlink | radio | radio-button | checkbox | menu-item | tab | menu | menubar | pull-down-menu | pop-up-menu | list-menu | radio-group | checkbox-group | outline-tree | range | field | combo-box | signature | password | normal"
,"-webkit-appearance":"none | button | button-bevel | caps-lock-indicator | caret | checkbox | default-button | listbox\t| listitem | media-fullscreen-button | media-mute-button | media-play-button | media-seek-back-button\t| media-seek-forward-button\t| media-slider | media-sliderthumb | menulist\t| menulist-button\t| menulist-text\t| menulist-textfield | push-button\t| radio\t| searchfield\t| searchfield-cancel-button\t| searchfield-decoration | searchfield-results-button | searchfield-results-decoration | slider-horizontal | slider-vertical | sliderthumb-horizontal | sliderthumb-vertical\t| square-button\t| textarea\t| textfield\t| scrollbarbutton-down | scrollbarbutton-left | scrollbarbutton-right | scrollbarbutton-up | scrollbargripper-horizontal | scrollbargripper-vertical | scrollbarthumb-horizontal | scrollbarthumb-vertical | scrollbartrack-horizontal | scrollbartrack-vertical"
,"-o-appearance":"none | window | desktop | workspace | document | tooltip | dialog | button | push-button | hyperlink | radio | radio-button | checkbox | menu-item | tab | menu | menubar | pull-down-menu | pop-up-menu | list-menu | radio-group | checkbox-group | outline-tree | range | field | combo-box | signature | password | normal"
,azimuth:"<azimuth>","backface-visibility":"visible | hidden",background:1,"background-attachment"
:"<attachment>#","background-clip":"<box>#","background-color":"<color>","background-image"
:"<bg-image>#","background-origin":"<box>#","background-position":"<bg-position>"
,"background-repeat":"<repeat-style>#","background-size":"<bg-size>#","baseline-shift"
:"baseline | sub | super | <percentage> | <length>",behavior:1,binding:1,bleed:"<length>"
,"bookmark-label":"<content> | <attr> | <string>","bookmark-level":"none | <integer>"
,"bookmark-state":"open | closed","bookmark-target":"none | <uri> | <attr>",border
:"<border-width> || <border-style> || <color>","border-bottom":"<border-width> || <border-style> || <color>"
,"border-bottom-color":"<color>","border-bottom-left-radius":"<x-one-radius>","border-bottom-right-radius"
:"<x-one-radius>","border-bottom-style":"<border-style>","border-bottom-width":"<border-width>"
,"border-collapse":"collapse | separate","border-color":"<color>{1,4}","border-image"
:1,"border-image-outset":"[ <length> | <number> ]{1,4}","border-image-repeat":"[ stretch | repeat | round ]{1,2}"
,"border-image-slice":"<border-image-slice>","border-image-source":"<image> | none"
,"border-image-width":"[ <length> | <percentage> | <number> | auto ]{1,4}","border-left"
:"<border-width> || <border-style> || <color>","border-left-color":"<color>","border-left-style"
:"<border-style>","border-left-width":"<border-width>","border-radius":"<border-radius>"
,"border-right":"<border-width> || <border-style> || <color>","border-right-color"
:"<color>","border-right-style":"<border-style>","border-right-width":"<border-width>"
,"border-spacing":"<length>{1,2}","border-style":"<border-style>{1,4}","border-top"
:"<border-width> || <border-style> || <color>","border-top-color":"<color>","border-top-left-radius"
:"<x-one-radius>","border-top-right-radius":"<x-one-radius>","border-top-style":"<border-style>"
,"border-top-width":"<border-width>","border-width":"<border-width>{1,4}",bottom
:"<margin-width>","-moz-box-align":"start | end | center | baseline | stretch","-moz-box-decoration-break"
:"slice | clone","-moz-box-direction":"normal | reverse","-moz-box-flex":"<number>"
,"-moz-box-flex-group":"<integer>","-moz-box-lines":"single | multiple","-moz-box-ordinal-group"
:"<integer>","-moz-box-orient":"horizontal | vertical | inline-axis | block-axis"
,"-moz-box-pack":"start | end | center | justify","-o-box-decoration-break":"slice | clone"
,"-webkit-box-align":"start | end | center | baseline | stretch","-webkit-box-decoration-break"
:"slice | clone","-webkit-box-direction":"normal | reverse","-webkit-box-flex":"<number>"
,"-webkit-box-flex-group":"<integer>","-webkit-box-lines":"single | multiple","-webkit-box-ordinal-group"
:"<integer>","-webkit-box-orient":"horizontal | vertical | inline-axis | block-axis"
,"-webkit-box-pack":"start | end | center | justify","box-decoration-break":"slice | clone"
,"box-shadow":"<box-shadow>","box-sizing":"content-box | border-box","break-after"
:"auto | always | avoid | left | right | page | column | avoid-page | avoid-column"
,"break-before":"auto | always | avoid | left | right | page | column | avoid-page | avoid-column"
,"break-inside":"auto | avoid | avoid-page | avoid-column","caption-side":"top | bottom"
,clear:"none | right | left | both",clip:"<shape> | auto","-webkit-clip-path":"<clip-source> | <clip-path> | none"
,"clip-path":"<clip-source> | <clip-path> | none","clip-rule":"nonzero | evenodd"
,color:"<color>","color-interpolation":"auto | sRGB | linearRGB","color-interpolation-filters"
:"auto | sRGB | linearRGB","color-profile":1,"color-rendering":"auto | optimizeSpeed | optimizeQuality"
,"column-count":"<integer> | auto","column-fill":"auto | balance","column-gap":"<length> | normal"
,"column-rule":"<border-width> || <border-style> || <color>","column-rule-color"
:"<color>","column-rule-style":"<border-style>","column-rule-width":"<border-width>"
,"column-span":"none | all","column-width":"<length> | auto",columns:1,content:1
,"counter-increment":1,"counter-reset":1,crop:"<shape> | auto",cue:"cue-after | cue-before"
,"cue-after":1,"cue-before":1,cursor:1,direction:"ltr | rtl",display:"inline | block | list-item | inline-block | table | inline-table | table-row-group | table-header-group | table-footer-group | table-row | table-column-group | table-column | table-cell | table-caption | grid | inline-grid | run-in | ruby | ruby-base | ruby-text | ruby-base-container | ruby-text-container | contents | none | -moz-box | -moz-inline-block | -moz-inline-box | -moz-inline-grid | -moz-inline-stack | -moz-inline-table | -moz-grid | -moz-grid-group | -moz-grid-line | -moz-groupbox | -moz-deck | -moz-popup | -moz-stack | -moz-marker | -webkit-box | -webkit-inline-box | -ms-flexbox | -ms-inline-flexbox | flex | -webkit-flex | inline-flex | -webkit-inline-flex"
,"dominant-baseline":"auto | use-script | no-change | reset-size | ideographic | alphabetic | hanging | mathematical | central | middle | text-after-edge | text-before-edge"
,"drop-initial-after-adjust":"central | middle | after-edge | text-after-edge | ideographic | alphabetic | mathematical | <percentage> | <length>"
,"drop-initial-after-align":"baseline | use-script | before-edge | text-before-edge | after-edge | text-after-edge | central | middle | ideographic | alphabetic | hanging | mathematical"
,"drop-initial-before-adjust":"before-edge | text-before-edge | central | middle | hanging | mathematical | <percentage> | <length>"
,"drop-initial-before-align":"caps-height | baseline | use-script | before-edge | text-before-edge | after-edge | text-after-edge | central | middle | ideographic | alphabetic | hanging | mathematical"
,"drop-initial-size":"auto | line | <length> | <percentage>","drop-initial-value"
:"<integer>",elevation:"<angle> | below | level | above | higher | lower","empty-cells"
:"show | hide","enable-background":1,fill:"<paint>","fill-opacity":"<opacity-value>"
,"fill-rule":"nonzero | evenodd",filter:"<filter-function-list> | none",fit:"fill | hidden | meet | slice"
,"fit-position":1,flex:"<flex>","flex-basis":"<width>","flex-direction":"row | row-reverse | column | column-reverse"
,"flex-flow":"<flex-direction> || <flex-wrap>","flex-grow":"<number>","flex-shrink"
:"<number>","flex-wrap":"nowrap | wrap | wrap-reverse","-webkit-flex":"<flex>","-webkit-flex-basis"
:"<width>","-webkit-flex-direction":"row | row-reverse | column | column-reverse"
,"-webkit-flex-flow":"<flex-direction> || <flex-wrap>","-webkit-flex-grow":"<number>"
,"-webkit-flex-shrink":"<number>","-webkit-flex-wrap":"nowrap | wrap | wrap-reverse"
,"-ms-flex":"<flex>","-ms-flex-align":"start | end | center | stretch | baseline"
,"-ms-flex-direction":"row | row-reverse | column | column-reverse","-ms-flex-order"
:"<number>","-ms-flex-pack":"start | end | center | justify","-ms-flex-wrap":"nowrap | wrap | wrap-reverse"
,"float":"left | right | none","float-offset":1,"flood-color":1,"flood-opacity":"<opacity-value>"
,font:"<font-shorthand> | caption | icon | menu | message-box | small-caption | status-bar"
,"font-family":"<font-family>","font-feature-settings":"<feature-tag-value> | normal"
,"font-kerning":"auto | normal | none","font-size":"<font-size>","font-size-adjust"
:"<number> | none","font-stretch":"<font-stretch>","font-style":"<font-style>","font-variant"
:"<font-variant> | normal | none","font-variant-alternates":"<font-variant-alternates> | normal"
,"font-variant-caps":"<font-variant-caps> | normal","font-variant-east-asian":"<font-variant-east-asian> | normal"
,"font-variant-ligatures":"<font-variant-ligatures> | normal | none","font-variant-numeric"
:"<font-variant-numeric> | normal","font-variant-position":"normal | sub | super"
,"font-weight":"<font-weight>","glyph-orientation-horizontal":"<glyph-angle>","glyph-orientation-vertical"
:"auto | <glyph-angle>",grid:1,"grid-area":1,"grid-auto-columns":1,"grid-auto-flow"
:1,"grid-auto-position":1,"grid-auto-rows":1,"grid-cell-stacking":"columns | rows | layer"
,"grid-column":1,"grid-columns":1,"grid-column-align":"start | end | center | stretch"
,"grid-column-sizing":1,"grid-column-start":1,"grid-column-end":1,"grid-column-span"
:"<integer>","grid-flow":"none | rows | columns","grid-layer":"<integer>","grid-row"
:1,"grid-rows":1,"grid-row-align":"start | end | center | stretch","grid-row-start"
:1,"grid-row-end":1,"grid-row-span":"<integer>","grid-row-sizing":1,"grid-template"
:1,"grid-template-areas":1,"grid-template-columns":1,"grid-template-rows":1,"hanging-punctuation"
:1,height:"<margin-width> | <content-sizing>","hyphenate-after":"<integer> | auto"
,"hyphenate-before":"<integer> | auto","hyphenate-character":"<string> | auto","hyphenate-lines"
:"no-limit | <integer>","hyphenate-resource":1,hyphens:"none | manual | auto",icon
:1,"image-orientation":"angle | auto","image-rendering":"auto | optimizeSpeed | optimizeQuality"
,"image-resolution":1,"ime-mode":"auto | normal | active | inactive | disabled","inline-box-align"
:"last | <integer>","justify-content":"flex-start | flex-end | center | space-between | space-around"
,"-webkit-justify-content":"flex-start | flex-end | center | space-between | space-around"
,kerning:"auto | <length>",left:"<margin-width>","letter-spacing":"<length> | normal"
,"line-height":"<line-height>","line-break":"auto | loose | normal | strict","line-stacking"
:1,"line-stacking-ruby":"exclude-ruby | include-ruby","line-stacking-shift":"consider-shifts | disregard-shifts"
,"line-stacking-strategy":"inline-line-height | block-line-height | max-height | grid-height"
,"list-style":1,"list-style-image":"<uri> | none","list-style-position":"inside | outside"
,"list-style-type":"disc | circle | square | decimal | decimal-leading-zero | lower-roman | upper-roman | lower-greek | lower-latin | upper-latin | armenian | georgian | lower-alpha | upper-alpha | none"
,margin:"<margin-width>{1,4}","margin-bottom":"<margin-width>","margin-left":"<margin-width>"
,"margin-right":"<margin-width>","margin-top":"<margin-width>",mark:1,"mark-after"
:1,"mark-before":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,marks
:1,"marquee-direction":1,"marquee-play-count":1,"marquee-speed":1,"marquee-style"
:1,mask:1,"max-height":"<length> | <percentage> | <content-sizing> | none","max-width"
:"<length> | <percentage> | <content-sizing> | none","min-height":"<length> | <percentage> | <content-sizing> | contain-floats | -moz-contain-floats | -webkit-contain-floats"
,"min-width":"<length> | <percentage> | <content-sizing> | contain-floats | -moz-contain-floats | -webkit-contain-floats"
,"move-to":1,"nav-down":1,"nav-index":1,"nav-left":1,"nav-right":1,"nav-up":1,"object-fit"
:"fill | contain | cover | none | scale-down","object-position":"<position>",opacity
:"<opacity-value>",order:"<integer>","-webkit-order":"<integer>",orphans:"<integer>"
,outline:1,"outline-color":"<color> | invert","outline-offset":1,"outline-style"
:"<border-style>","outline-width":"<border-width>",overflow:"visible | hidden | scroll | auto"
,"overflow-style":1,"overflow-wrap":"normal | break-word","overflow-x":1,"overflow-y"
:1,padding:"<padding-width>{1,4}","padding-bottom":"<padding-width>","padding-left"
:"<padding-width>","padding-right":"<padding-width>","padding-top":"<padding-width>"
,page:1,"page-break-after":"auto | always | avoid | left | right","page-break-before"
:"auto | always | avoid | left | right","page-break-inside":"auto | avoid","page-policy"
:1,pause:1,"pause-after":1,"pause-before":1,perspective:1,"perspective-origin":1
,phonemes:1,pitch:1,"pitch-range":1,"play-during":1,"pointer-events":"auto | none | visiblePainted | visibleFill | visibleStroke | visible | painted | fill | stroke | all"
,position:"static | relative | absolute | fixed","presentation-level":1,"punctuation-trim"
:1,quotes:1,"rendering-intent":1,resize:1,rest:1,"rest-after":1,"rest-before":1,
richness:1,right:"<margin-width>",rotation:1,"rotation-point":1,"ruby-align":1,"ruby-overhang"
:1,"ruby-position":1,"ruby-span":1,"shape-rendering":"auto | optimizeSpeed | crispEdges | geometricPrecision"
,size:1,speak:"normal | none | spell-out","speak-header":"once | always","speak-numeral"
:"digits | continuous","speak-punctuation":"code | none","speech-rate":1,src:1,"stop-color"
:1,"stop-opacity":"<opacity-value>",stress:1,"string-set":1,stroke:"<paint>","stroke-dasharray"
:"none | <dasharray>","stroke-dashoffset":"<percentage> | <length>","stroke-linecap"
:"butt | round | square","stroke-linejoin":"miter | round | bevel","stroke-miterlimit"
:"<miterlimit>","stroke-opacity":"<opacity-value>","stroke-width":"<percentage> | <length>"
,"table-layout":"auto | fixed","tab-size":"<integer> | <length>",target:1,"target-name"
:1,"target-new":1,"target-position":1,"text-align":"left | right | center | justify | match-parent | start | end"
,"text-align-last":1,"text-anchor":"start | middle | end","text-decoration":"<text-decoration-line> || <text-decoration-style> || <text-decoration-color>"
,"text-decoration-color":"<text-decoration-color>","text-decoration-line":"<text-decoration-line>"
,"text-decoration-style":"<text-decoration-style>","text-emphasis":1,"text-height"
:1,"text-indent":"<length> | <percentage>","text-justify":"auto | none | inter-word | inter-ideograph | inter-cluster | distribute | kashida"
,"text-outline":1,"text-overflow":1,"text-rendering":"auto | optimizeSpeed | optimizeLegibility | geometricPrecision"
,"text-shadow":1,"text-transform":"capitalize | uppercase | lowercase | none","text-wrap"
:"normal | none | avoid",top:"<margin-width>","-ms-touch-action":"auto | none | pan-x | pan-y | pan-left | pan-right | pan-up | pan-down | manipulation"
,"touch-action":"auto | none | pan-x | pan-y | pan-left | pan-right | pan-up | pan-down | manipulation"
,transform:1,"transform-origin":1,"transform-style":1,transition:1,"transition-delay"
:1,"transition-duration":1,"transition-property":1,"transition-timing-function":1
,"unicode-bidi":"normal | embed | isolate | bidi-override | isolate-override | plaintext"
,"user-modify":"read-only | read-write | write-only","user-select":"none | text | toggle | element | elements | all"
,"vertical-align":"auto | use-script | baseline | sub | super | top | text-top | central | middle | bottom | text-bottom | <percentage> | <length>"
,visibility:"visible | hidden | collapse","voice-balance":1,"voice-duration":1,"voice-family"
:1,"voice-pitch":1,"voice-pitch-range":1,"voice-rate":1,"voice-stress":1,"voice-volume"
:1,volume:1,"white-space":"normal | pre | nowrap | pre-wrap | pre-line | -pre-wrap | -o-pre-wrap | -moz-pre-wrap | -hp-pre-wrap"
,"white-space-collapse":1,widows:"<integer>",width:"<length> | <percentage> | <content-sizing> | auto"
,"will-change":"<will-change>","word-break":"normal | keep-all | break-all","word-spacing"
:"<length> | normal","word-wrap":"normal | break-word","writing-mode":"horizontal-tb | vertical-rl | vertical-lr | lr-tb | rl-tb | tb-rl | bt-rl | tb-lr | bt-lr | lr-bt | rl-bt | lr | rl | tb"
,"z-index":"<integer> | auto",zoom:"<number> | <percentage> | normal"}},{}],8:[function(
e,t,n){"use strict";function s(e,t,n,s){r.call(this,e,n,s,i.PROPERTY_NAME_TYPE),
this.hack=t}t.exports=s;var r=e("../util/SyntaxUnit"),i=e("./Parser");s.prototype=new
r,s.prototype.constructor=s,s.prototype.toString=function(){return(this.hack?this
.hack:"")+this.text}},{"../util/SyntaxUnit":26,"./Parser":6}],9:[function(e,t,n)
{"use strict";function s(e,t,n){r.call(this,e.join(" "),t,n,i.PROPERTY_VALUE_TYPE
),this.parts=e}t.exports=s;var r=e("../util/SyntaxUnit"),i=e("./Parser");s.prototype=new
r,s.prototype.constructor=s},{"../util/SyntaxUnit":26,"./Parser":6}],10:[function(
e,t,n){"use strict";function r(e){this._i=0,this._parts=e.parts,this._marks=[],this
.value=e}t.exports=r,r.prototype.count=function(){return this._parts.length},r.prototype
.isFirst=function(){return this._i===0},r.prototype.hasNext=function(){return this
._i<this._parts.length},r.prototype.mark=function(){this._marks.push(this._i)},r
.prototype.peek=function(e){return this.hasNext()?this._parts[this._i+(e||0)]:null
},r.prototype.next=function(){return this.hasNext()?this._parts[this._i++]:null}
,r.prototype.previous=function(){return this._i>0?this._parts[--this._i]:null},r
.prototype.restore=function(){this._marks.length&&(this._i=this._marks.pop())},r
.prototype.drop=function(){this._marks.pop()}},{}],11:[function(e,t,n){"use strict"
;function u(e,t,n,o){var a=o||{};r.call(this,e,t,n,s.PROPERTY_VALUE_PART_TYPE),this
.type="unknown";var f;if(/^([+\-]?[\d\.]+)([a-z]+)$/i.test(e)){this.type="dimension"
,this.value=+RegExp.$1,this.units=RegExp.$2;switch(this.units.toLowerCase()){case"em"
:case"rem":case"ex":case"px":case"cm":case"mm":case"in":case"pt":case"pc":case"ch"
:case"vh":case"vw":case"vmax":case"vmin":this.type="length";break;case"fr":this.
type="grid";break;case"deg":case"rad":case"grad":case"turn":this.type="angle";break;
case"ms":case"s":this.type="time";break;case"hz":case"khz":this.type="frequency"
;break;case"dpi":case"dpcm":this.type="resolution"}}else/^([+\-]?[\d\.]+)%$/i.test
(e)?(this.type="percentage",this.value=+RegExp.$1):/^([+\-]?\d+)$/i.test(e)?(this
.type="integer",this.value=+RegExp.$1):/^([+\-]?[\d\.]+)$/i.test(e)?(this.type="number"
,this.value=+RegExp.$1):/^#([a-f0-9]{3,6})/i.test(e)?(this.type="color",f=RegExp
.$1,f.length===3?(this.red=parseInt(f.charAt(0)+f.charAt(0),16),this.green=parseInt
(f.charAt(1)+f.charAt(1),16),this.blue=parseInt(f.charAt(2)+f.charAt(2),16)):(this
.red=parseInt(f.substring(0,2),16),this.green=parseInt(f.substring(2,4),16),this
.blue=parseInt(f.substring(4,6),16))):/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i
.test(e)?(this.type="color",this.red=+RegExp.$1,this.green=+RegExp.$2,this.blue=+
RegExp.$3):/^rgb\(\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)/i.test(e)?(this.type="color"
,this.red=+RegExp.$1*255/100,this.green=+RegExp.$2*255/100,this.blue=+RegExp.$3*255/100
):/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/i.test(e)?(this.
type="color",this.red=+RegExp.$1,this.green=+RegExp.$2,this.blue=+RegExp.$3,this
.alpha=+RegExp.$4):/^rgba\(\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*,\s*([\d\.]+)\s*\)/i
.test(e)?(this.type="color",this.red=+RegExp.$1*255/100,this.green=+RegExp.$2*255/100
,this.blue=+RegExp.$3*255/100,this.alpha=+RegExp.$4):/^hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)/i
.test(e)?(this.type="color",this.hue=+RegExp.$1,this.saturation=+RegExp.$2/100,this
.lightness=+RegExp.$3/100):/^hsla\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*,\s*([\d\.]+)\s*\)/i
.test(e)?(this.type="color",this.hue=+RegExp.$1,this.saturation=+RegExp.$2/100,this
.lightness=+RegExp.$3/100,this.alpha=+RegExp.$4):/^url\(("([^\\"]|\\.)*")\)/i.test
(e)?(this.type="uri",this.uri=u.parseString(RegExp.$1)):/^([^\(]+)\(/i.test(e)?(
this.type="function",this.name=RegExp.$1,this.value=e):/^"([^\n\r\f\\"]|\\\r\n|\\[^\r0-9a-f]|\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?)*"/i
.test(e)?(this.type="string",this.value=u.parseString(e)):/^'([^\n\r\f\\']|\\\r\n|\\[^\r0-9a-f]|\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?)*'/i
.test(e)?(this.type="string",this.value=u.parseString(e)):i[e.toLowerCase()]?(this
.type="color",f=i[e.toLowerCase()].substring(1),this.red=parseInt(f.substring(0,2
),16),this.green=parseInt(f.substring(2,4),16),this.blue=parseInt(f.substring(4,6
),16)):/^[,\/]$/.test(e)?(this.type="operator",this.value=e):/^-?[a-z_\u00A0-\uFFFF][a-z0-9\-_\u00A0-\uFFFF]*$/i
.test(e)&&(this.type="identifier",this.value=e);this.wasIdent=Boolean(a.ident)}t
.exports=u;var r=e("../util/SyntaxUnit"),i=e("./Colors"),s=e("./Parser"),o=e("./Tokens"
);u.prototype=new r,u.prototype.constructor=u,u.parseString=function(e){e=e.slice
(1,-1);var t=function(e,t){if(/^(\n|\r\n|\r|\f)$/.test(t))return"";var n=/^[0-9a-f]{1,6}/i
.exec(t);if(n){var r=parseInt(n[0],16);return String.fromCodePoint?String.fromCodePoint
(r):String.fromCharCode(r)}return t};return e.replace(/\\(\r\n|[^\r0-9a-f]|[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?)/ig
,t)},u.serializeString=function(e){var t=function(e,t){if(t==='"')return"\\"+t;var n=
String.codePointAt?String.codePointAt(0):String.charCodeAt(0);return"\\"+n.toString
(16)+" "};return'"'+e.replace(/["\r\n\f]/g,t)+'"'},u.fromToken=function(e){var t=new
u(e.value,e.startLine,e.startCol,{ident:e.type===o.IDENT});return t}},{"../util/SyntaxUnit"
:26,"./Colors":1,"./Parser":6,"./Tokens":18}],12:[function(e,t,n){"use strict";var r=
t.exports={__proto__:null,":first-letter":1,":first-line":1,":before":1,":after"
:1};r.ELEMENT=1,r.CLASS=2,r.isElement=function(e){return e.indexOf("::")===0||r[
e.toLowerCase()]===r.ELEMENT}},{}],13:[function(e,t,n){"use strict";function o(e
,t,n){r.call(this,e.join(" "),t,n,i.SELECTOR_TYPE),this.parts=e,this.specificity=
s.calculate(this)}t.exports=o;var r=e("../util/SyntaxUnit"),i=e("./Parser"),s=e("./Specificity"
);o.prototype=new r,o.prototype.constructor=o},{"../util/SyntaxUnit":26,"./Parser"
:6,"./Specificity":16}],14:[function(e,t,n){"use strict";function s(e,t,n,s,o){r
.call(this,n,s,o,i.SELECTOR_PART_TYPE),this.elementName=e,this.modifiers=t}t.exports=
s;var r=e("../util/SyntaxUnit"),i=e("./Parser");s.prototype=new r,s.prototype.constructor=
s},{"../util/SyntaxUnit":26,"./Parser":6}],15:[function(e,t,n){"use strict";function s
(e,t,n,s){r.call(this,e,n,s,i.SELECTOR_SUB_PART_TYPE),this.type=t,this.args=[]}t
.exports=s;var r=e("../util/SyntaxUnit"),i=e("./Parser");s.prototype=new r,s.prototype
.constructor=s},{"../util/SyntaxUnit":26,"./Parser":6}],16:[function(e,t,n){"use strict"
;function s(e,t,n,r){this.a=e,this.b=t,this.c=n,this.d=r}t.exports=s;var r=e("./Pseudos"
),i=e("./SelectorPart");s.prototype={constructor:s,compare:function(e){var t=["a"
,"b","c","d"],n,r;for(n=0,r=t.length;n<r;n++){if(this[t[n]]<e[t[n]])return-1;if(
this[t[n]]>e[t[n]])return 1}return 0},valueOf:function(){return this.a*1e3+this.
b*100+this.c*10+this.d},toString:function(){return this.a+","+this.b+","+this.c+","+
this.d}},s.calculate=function(e){function l(e){var t,n,i,s,o=e.elementName?e.elementName
.text:"",h;o&&o.charAt(o.length-1)!=="*"&&f++;for(t=0,i=e.modifiers.length;t<i;t++
){h=e.modifiers[t];switch(h.type){case"class":case"attribute":a++;break;case"id"
:u++;break;case"pseudo":r.isElement(h.text)?f++:a++;break;case"not":for(n=0,s=h.
args.length;n<s;n++)l(h.args[n])}}}var t,n,o,u=0,a=0,f=0;for(t=0,n=e.parts.length
;t<n;t++)o=e.parts[t],o instanceof i&&l(o);return new s(0,u,a,f)}},{"./Pseudos":12
,"./SelectorPart":14}],17:[function(e,t,n){"use strict";function l(e){return e!==
null&&o.test(e)}function c(e){return e!==null&&/\d/.test(e)}function h(e){return e!==
null&&f.test(e)}function p(e){return e!==null&&a.test(e)}function d(e){return e!==
null&&/[a-z_\u00A0-\uFFFF\\]/i.test(e)}function v(e){return e!==null&&(d(e)||/[0-9\-\\]/
.test(e))}function m(e){return e!==null&&(d(e)||/\-\\/.test(e))}function g(e,t){
for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function y
(e){r.call(this,e,s)}t.exports=y;var r=e("../util/TokenStreamBase"),i=e("./PropertyValuePart"
),s=e("./Tokens"),o=/^[0-9a-fA-F]$/,u=/^[\u00A0-\uFFFF]$/,a=/\n|\r\n|\r|\f/,f=/\u0009|\u000a|\u000c|\u000d|\u0020/
;y.prototype=g(new r,{_getToken:function(){var e,t=this._reader,n=null,r=t.getLine
(),i=t.getCol();e=t.read();while(e){switch(e){case"/":t.peek()==="*"?n=this.commentToken
(e,r,i):n=this.charToken(e,r,i);break;case"|":case"~":case"^":case"$":case"*":t.
peek()==="="?n=this.comparisonToken(e,r,i):n=this.charToken(e,r,i);break;case'"'
:case"'":n=this.stringToken(e,r,i);break;case"#":v(t.peek())?n=this.hashToken(e,
r,i):n=this.charToken(e,r,i);break;case".":c(t.peek())?n=this.numberToken(e,r,i)
:n=this.charToken(e,r,i);break;case"-":t.peek()==="-"?n=this.htmlCommentEndToken
(e,r,i):d(t.peek())?n=this.identOrFunctionToken(e,r,i):n=this.charToken(e,r,i);break;
case"!":n=this.importantToken(e,r,i);break;case"@":n=this.atRuleToken(e,r,i);break;
case":":n=this.notToken(e,r,i);break;case"<":n=this.htmlCommentStartToken(e,r,i)
;break;case"\\":/[^\r\n\f]/.test(t.peek())?n=this.identOrFunctionToken(this.readEscape
(e,!0),r,i):n=this.charToken(e,r,i);break;case"U":case"u":if(t.peek()==="+"){n=this
.unicodeRangeToken(e,r,i);break};default:c(e)?n=this.numberToken(e,r,i):h(e)?n=this
.whitespaceToken(e,r,i):m(e)?n=this.identOrFunctionToken(e,r,i):n=this.charToken
(e,r,i)}break}return!n&&e===null&&(n=this.createToken(s.EOF,null,r,i)),n},createToken
:function(e,t,n,r,i){var s=this._reader;return i=i||{},{value:t,type:e,channel:i
.channel,endChar:i.endChar,hide:i.hide||!1,startLine:n,startCol:r,endLine:s.getLine
(),endCol:s.getCol()}},atRuleToken:function(e,t,n){var r=e,i=this._reader,o=s.CHAR
,u;i.mark(),u=this.readName(),r=e+u,o=s.type(r.toLowerCase());if(o===s.CHAR||o===
s.UNKNOWN)r.length>1?o=s.UNKNOWN_SYM:(o=s.CHAR,r=e,i.reset());return this.createToken
(o,r,t,n)},charToken:function(e,t,n){var r=s.type(e),i={};return r===-1?r=s.CHAR
:i.endChar=s[r].endChar,this.createToken(r,e,t,n,i)},commentToken:function(e,t,n
){var r=this.readComment(e);return this.createToken(s.COMMENT,r,t,n)},comparisonToken
:function(e,t,n){var r=this._reader,i=e+r.read(),o=s.type(i)||s.CHAR;return this
.createToken(o,i,t,n)},hashToken:function(e,t,n){var r=this.readName(e);return this
.createToken(s.HASH,r,t,n)},htmlCommentStartToken:function(e,t,n){var r=this._reader
,i=e;return r.mark(),i+=r.readCount(3),i==="<!--"?this.createToken(s.CDO,i,t,n):
(r.reset(),this.charToken(e,t,n))},htmlCommentEndToken:function(e,t,n){var r=this
._reader,i=e;return r.mark(),i+=r.readCount(2),i==="-->"?this.createToken(s.CDC,
i,t,n):(r.reset(),this.charToken(e,t,n))},identOrFunctionToken:function(e,t,n){var r=
this._reader,i=this.readName(e),o=s.IDENT,u=["url(","url-prefix(","domain("],a;return r
.peek()==="("?(i+=r.read(),u.indexOf(i.toLowerCase())>-1?(r.mark(),a=this.readURI
(i),a===null?(r.reset(),o=s.FUNCTION):(o=s.URI,i=a)):o=s.FUNCTION):r.peek()===":"&&
i.toLowerCase()==="progid"&&(i+=r.readTo("("),o=s.IE_FUNCTION),this.createToken(
o,i,t,n)},importantToken:function(e,t,n){var r=this._reader,i=e,o=s.CHAR,u,a;r.mark
(),a=r.read();while(a){if(a==="/"){if(r.peek()!=="*")break;u=this.readComment(a)
;if(u==="")break}else{if(!h(a)){if(/i/i.test(a)){u=r.readCount(8),/mportant/i.test
(u)&&(i+=a+u,o=s.IMPORTANT_SYM);break}break}i+=a+this.readWhitespace()}a=r.read(
)}return o===s.CHAR?(r.reset(),this.charToken(e,t,n)):this.createToken(o,i,t,n)}
,notToken:function(e,t,n){var r=this._reader,i=e;return r.mark(),i+=r.readCount(4
),i.toLowerCase()===":not("?this.createToken(s.NOT,i,t,n):(r.reset(),this.charToken
(e,t,n))},numberToken:function(e,t,n){var r=this._reader,i=this.readNumber(e),o,
u=s.NUMBER,a=r.peek();return m(a)?(o=this.readName(r.read()),i+=o,/^em$|^ex$|^px$|^gd$|^rem$|^vw$|^vh$|^vmax$|^vmin$|^ch$|^cm$|^mm$|^in$|^pt$|^pc$/i
.test(o)?u=s.LENGTH:/^deg|^rad$|^grad$|^turn$/i.test(o)?u=s.ANGLE:/^ms$|^s$/i.test
(o)?u=s.TIME:/^hz$|^khz$/i.test(o)?u=s.FREQ:/^dpi$|^dpcm$/i.test(o)?u=s.RESOLUTION
:u=s.DIMENSION):a==="%"&&(i+=r.read(),u=s.PERCENTAGE),this.createToken(u,i,t,n)}
,stringToken:function(e,t,n){var r=e,i=e,o=this._reader,u=s.STRING,a=o.read(),f;
while(a){i+=a;if(a==="\\"){a=o.read();if(a===null)break;if(/[^\r\n\f0-9a-f]/i.test
(a))i+=a;else{for(f=0;l(a)&&f<6;f++)i+=a,a=o.read();a==="\r"&&o.peek()==="\n"&&(
i+=a,a=o.read());if(!h(a))continue;i+=a}}else{if(a===r)break;if(p(o.peek())){u=s
.INVALID;break}}a=o.read()}return a===null&&(u=s.INVALID),this.createToken(u,i,t
,n)},unicodeRangeToken:function(e,t,n){var r=this._reader,i=e,o,u=s.CHAR;return r
.peek()==="+"&&(r.mark(),i+=r.read(),i+=this.readUnicodeRangePart(!0),i.length===2?
r.reset():(u=s.UNICODE_RANGE,i.indexOf("?")===-1&&r.peek()==="-"&&(r.mark(),o=r.
read(),o+=this.readUnicodeRangePart(!1),o.length===1?r.reset():i+=o))),this.createToken
(u,i,t,n)},whitespaceToken:function(e,t,n){var r=e+this.readWhitespace();return this
.createToken(s.S,r,t,n)},readUnicodeRangePart:function(e){var t=this._reader,n=""
,r=t.peek();while(l(r)&&n.length<6)t.read(),n+=r,r=t.peek();if(e)while(r==="?"&&
n.length<6)t.read(),n+=r,r=t.peek();return n},readWhitespace:function(){var e=this
._reader,t="",n=e.peek();while(h(n))e.read(),t+=n,n=e.peek();return t},readNumber
:function(e){var t=this._reader,n=e,r=e===".",i=t.peek();while(i){if(c(i))n+=t.read
();else{if(i!==".")break;if(r)break;r=!0,n+=t.read()}i=t.peek()}return n},readString
:function(){var e=this.stringToken(this._reader.read(),0,0);return e.type===s.INVALID?
null:e.value},readURI:function(e){var t=this._reader,n=e,r="",s=t.peek();while(s&&
h(s))t.read(),s=t.peek();s==="'"||s==='"'?(r=this.readString(),r!==null&&(r=i.parseString
(r))):r=this.readUnquotedURL(),s=t.peek();while(s&&h(s))t.read(),s=t.peek();return r===
null||s!==")"?n=null:n+=i.serializeString(r)+t.read(),n},readUnquotedURL:function(
e){var t=this._reader,n=e||"",r;for(r=t.peek();r;r=t.peek())if(u.test(r)||/^[\-!#$%&*-\[\]-~]$/
.test(r))n+=r,t.read();else{if(r!=="\\")break;if(!/^[^\r\n\f]$/.test(t.peek(2)))
break;n+=this.readEscape(t.read(),!0)}return n},readName:function(e){var t=this.
_reader,n=e||"",r;for(r=t.peek();r;r=t.peek())if(r==="\\"){if(!/^[^\r\n\f]$/.test
(t.peek(2)))break;n+=this.readEscape(t.read(),!0)}else{if(!v(r))break;n+=t.read(
)}return n},readEscape:function(e,t){var n=this._reader,r=e||"",i=0,s=n.peek();if(
l(s))do r+=n.read(),s=n.peek();while(s&&l(s)&&++i<6);if(r.length===1){if(!/^[^\r\n\f0-9a-f]$/
.test(s))throw new Error("Bad escape sequence.");n.read();if(t)return s}else s==="\r"?
(n.read(),n.peek()==="\n"&&(s+=n.read())):/^[ \t\n\f]$/.test(s)?n.read():s="";if(
t){var o=parseInt(r.slice(e.length),16);return String.fromCodePoint?String.fromCodePoint
(o):String.fromCharCode(o)}return r+s},readComment:function(e){var t=this._reader
,n=e||"",r=t.read();if(r==="*"){while(r){n+=r;if(n.length>2&&r==="*"&&t.peek()==="/"
){n+=t.read();break}r=t.read()}return n}return""}})},{"../util/TokenStreamBase":27
,"./PropertyValuePart":11,"./Tokens":18}],18:[function(e,t,n){"use strict";var r=
t.exports=[{name:"CDO"},{name:"CDC"},{name:"S",whitespace:!0},{name:"COMMENT",comment
:!0,hide:!0,channel:"comment"},{name:"INCLUDES",text:"~="},{name:"DASHMATCH",text
:"|="},{name:"PREFIXMATCH",text:"^="},{name:"SUFFIXMATCH",text:"$="},{name:"SUBSTRINGMATCH"
,text:"*="},{name:"STRING"},{name:"IDENT"},{name:"HASH"},{name:"IMPORT_SYM",text
:"@import"},{name:"PAGE_SYM",text:"@page"},{name:"MEDIA_SYM",text:"@media"},{name
:"FONT_FACE_SYM",text:"@font-face"},{name:"CHARSET_SYM",text:"@charset"},{name:"NAMESPACE_SYM"
,text:"@namespace"},{name:"SUPPORTS_SYM",text:"@supports"},{name:"VIEWPORT_SYM",
text:["@viewport","@-ms-viewport","@-o-viewport"]},{name:"DOCUMENT_SYM",text:["@document"
,"@-moz-document"]},{name:"UNKNOWN_SYM"},{name:"KEYFRAMES_SYM",text:["@keyframes"
,"@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"]},{name:"IMPORTANT_SYM"}
,{name:"LENGTH"},{name:"ANGLE"},{name:"TIME"},{name:"FREQ"},{name:"DIMENSION"},{
name:"PERCENTAGE"},{name:"NUMBER"},{name:"URI"},{name:"FUNCTION"},{name:"UNICODE_RANGE"
},{name:"INVALID"},{name:"PLUS",text:"+"},{name:"GREATER",text:">"},{name:"COMMA"
,text:","},{name:"TILDE",text:"~"},{name:"NOT"},{name:"TOPLEFTCORNER_SYM",text:"@top-left-corner"
},{name:"TOPLEFT_SYM",text:"@top-left"},{name:"TOPCENTER_SYM",text:"@top-center"
},{name:"TOPRIGHT_SYM",text:"@top-right"},{name:"TOPRIGHTCORNER_SYM",text:"@top-right-corner"
},{name:"BOTTOMLEFTCORNER_SYM",text:"@bottom-left-corner"},{name:"BOTTOMLEFT_SYM"
,text:"@bottom-left"},{name:"BOTTOMCENTER_SYM",text:"@bottom-center"},{name:"BOTTOMRIGHT_SYM"
,text:"@bottom-right"},{name:"BOTTOMRIGHTCORNER_SYM",text:"@bottom-right-corner"
},{name:"LEFTTOP_SYM",text:"@left-top"},{name:"LEFTMIDDLE_SYM",text:"@left-middle"
},{name:"LEFTBOTTOM_SYM",text:"@left-bottom"},{name:"RIGHTTOP_SYM",text:"@right-top"
},{name:"RIGHTMIDDLE_SYM",text:"@right-middle"},{name:"RIGHTBOTTOM_SYM",text:"@right-bottom"
},{name:"RESOLUTION",state:"media"},{name:"IE_FUNCTION"},{name:"CHAR"},{name:"PIPE"
,text:"|"},{name:"SLASH",text:"/"},{name:"MINUS",text:"-"},{name:"STAR",text:"*"
},{name:"LBRACE",endChar:"}",text:"{"},{name:"RBRACE",text:"}"},{name:"LBRACKET"
,endChar:"]",text:"["},{name:"RBRACKET",text:"]"},{name:"EQUALS",text:"="},{name
:"COLON",text:":"},{name:"SEMICOLON",text:";"},{name:"LPAREN",endChar:")",text:"("
},{name:"RPAREN",text:")"},{name:"DOT",text:"."}];(function(){var e=[],t=Object.
create(null);r.UNKNOWN=-1,r.unshift({name:"EOF"});for(var n=0,i=r.length;n<i;n++
){e.push(r[n].name),r[r[n].name]=n;if(r[n].text)if(r[n].text instanceof Array)for(
var s=0;s<r[n].text.length;s++)t[r[n].text[s]]=n;else t[r[n].text]=n}r.name=function(
t){return e[t]},r.type=function(e){return t[e]||-1}})()},{}],19:[function(e,t,n)
{"use strict";var r=e("./Matcher"),i=e("./Properties"),s=e("./ValidationTypes"),
o=e("./ValidationError"),u=e("./PropertyValueIterator"),a=t.exports={validate:function(
e,t){var n=e.toString().toLowerCase(),r=new u(t),a=i[n],f;if(!a){if(n.indexOf("-"
)!==0)throw new o("Unknown property '"+e+"'.",e.line,e.col)}else if(typeof a!="number"
){if(s.isAny(r,"inherit | initial | unset")){if(r.hasNext())throw f=r.next(),new
o("Expected end of value but found '"+f+"'.",f.line,f.col);return}this.singleProperty
(a,r)}},singleProperty:function(e,t){var n=!1,i=t.value,u;n=r.parse(e).match(t);
if(!n)throw t.hasNext()&&!t.isFirst()?(u=t.peek(),new o("Expected end of value but found '"+
u+"'.",u.line,u.col)):new o("Expected ("+s.describe(e)+") but found '"+i+"'.",i.
line,i.col);if(t.hasNext())throw u=t.next(),new o("Expected end of value but found '"+
u+"'.",u.line,u.col)}}},{"./Matcher":3,"./Properties":7,"./PropertyValueIterator"
:10,"./ValidationError":20,"./ValidationTypes":21}],20:[function(e,t,n){"use strict"
;function r(e,t,n){this.col=n,this.line=t,this.message=e}t.exports=r,r.prototype=new
Error},{}],21:[function(e,t,n){"use strict";function s(e,t){Object.keys(t).forEach
(function(n){e[n]=t[n]})}var r=t.exports,i=e("./Matcher");s(r,{isLiteral:function(
e,t){var n=e.text.toString().toLowerCase(),r=t.split(" | "),i,s,o=!1;for(i=0,s=r
.length;i<s&&!o;i++)r[i].charAt(0)==="<"?o=this.simple[r[i]](e):r[i].slice(-2)==="()"?
o=e.type==="function"&&e.name===r[i].slice(0,-2):n===r[i].toLowerCase()&&(o=!0);
return o},isSimple:function(e){return Boolean(this.simple[e])},isComplex:function(
e){return Boolean(this.complex[e])},describe:function(e){return this.complex[e]instanceof
i?this.complex[e].toString(0):e},isAny:function(e,t){var n=t.split(" | "),r,i,s=!1
;for(r=0,i=n.length;r<i&&!s&&e.hasNext();r++)s=this.isType(e,n[r]);return s},isAnyOfGroup
:function(e,t){var n=t.split(" || "),r,i,s=!1;for(r=0,i=n.length;r<i&&!s;r++)s=this
.isType(e,n[r]);return s?n[r-1]:!1},isType:function(e,t){var n=e.peek(),r=!1;return t
.charAt(0)!=="<"?(r=this.isLiteral(n,t),r&&e.next()):this.simple[t]?(r=this.simple
[t](n),r&&e.next()):this.complex[t]instanceof i?r=this.complex[t].match(e):r=this
.complex[t](e),r},simple:{__proto__:null,"<absolute-size>":"xx-small | x-small | small | medium | large | x-large | xx-large"
,"<animateable-feature>":"scroll-position | contents | <animateable-feature-name>"
,"<animateable-feature-name>":function(e){return this["<ident>"](e)&&!/^(unset|initial|inherit|will-change|auto|scroll-position|contents)$/i
.test(e)},"<angle>":function(e){return e.type==="angle"},"<attachment>":"scroll | fixed | local"
,"<attr>":"attr()","<basic-shape>":"inset() | circle() | ellipse() | polygon()","<bg-image>"
:"<image> | <gradient> | none","<border-style>":"none | hidden | dotted | dashed | solid | double | groove | ridge | inset | outset"
,"<border-width>":"<length> | thin | medium | thick","<box>":"padding-box | border-box | content-box"
,"<clip-source>":"<uri>","<color>":function(e){return e.type==="color"||String(e
)==="transparent"||String(e)==="currentColor"},"<color-svg>":function(e){return e
.type==="color"},"<content>":"content()","<content-sizing>":"fill-available | -moz-available | -webkit-fill-available | max-content | -moz-max-content | -webkit-max-content | min-content | -moz-min-content | -webkit-min-content | fit-content | -moz-fit-content | -webkit-fit-content"
,"<feature-tag-value>":function(e){return e.type==="function"&&/^[A-Z0-9]{4}$/i.
test(e)},"<filter-function>":"blur() | brightness() | contrast() | custom() | drop-shadow() | grayscale() | hue-rotate() | invert() | opacity() | saturate() | sepia()"
,"<flex-basis>":"<width>","<flex-direction>":"row | row-reverse | column | column-reverse"
,"<flex-grow>":"<number>","<flex-shrink>":"<number>","<flex-wrap>":"nowrap | wrap | wrap-reverse"
,"<font-size>":"<absolute-size> | <relative-size> | <length> | <percentage>","<font-stretch>"
:"normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded"
,"<font-style>":"normal | italic | oblique","<font-variant-caps>":"small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps"
,"<font-variant-css21>":"normal | small-caps","<font-weight>":"normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900"
,"<generic-family>":"serif | sans-serif | cursive | fantasy | monospace","<geometry-box>"
:"<shape-box> | fill-box | stroke-box | view-box","<glyph-angle>":function(e){return e
.type==="angle"&&e.units==="deg"},"<gradient>":function(e){return e.type==="function"&&/^(?:\-(?:ms|moz|o|webkit)\-)?(?:repeating\-)?(?:radial\-|linear\-)?gradient/i
.test(e)},"<icccolor>":"cielab() | cielch() | cielchab() | icc-color() | icc-named-color()"
,"<ident>":function(e){return e.type==="identifier"||e.wasIdent},"<ident-not-generic-family>"
:function(e){return this["<ident>"](e)&&!this["<generic-family>"](e)},"<image>":"<uri>"
,"<integer>":function(e){return e.type==="integer"},"<length>":function(e){return e
.type==="function"&&/^(?:\-(?:ms|moz|o|webkit)\-)?calc/i.test(e)?!0:e.type==="length"||
e.type==="number"||e.type==="integer"||String(e)==="0"},"<line>":function(e){return e
.type==="integer"},"<line-height>":"<number> | <length> | <percentage> | normal"
,"<margin-width>":"<length> | <percentage> | auto","<miterlimit>":function(e){return this
["<number>"](e)&&e.value>=1},"<nonnegative-length-or-percentage>":function(e){return(
this["<length>"](e)||this["<percentage>"](e))&&(String(e)==="0"||e.type==="function"||
e.value>=0)},"<nonnegative-number-or-percentage>":function(e){return(this["<number>"
](e)||this["<percentage>"](e))&&(String(e)==="0"||e.type==="function"||e.value>=0
)},"<number>":function(e){return e.type==="number"||this["<integer>"](e)},"<opacity-value>"
:function(e){return this["<number>"](e)&&e.value>=0&&e.value<=1},"<padding-width>"
:"<nonnegative-length-or-percentage>","<percentage>":function(e){return e.type==="percentage"||
String(e)==="0"},"<relative-size>":"smaller | larger","<shape>":"rect() | inset-rect()"
,"<shape-box>":"<box> | margin-box","<single-animation-direction>":"normal | reverse | alternate | alternate-reverse"
,"<single-animation-name>":function(e){return this["<ident>"](e)&&/^-?[a-z_][-a-z0-9_]+$/i
.test(e)&&!/^(none|unset|initial|inherit)$/i.test(e)},"<string>":function(e){return e
.type==="string"},"<time>":function(e){return e.type==="time"},"<uri>":function(
e){return e.type==="uri"},"<width>":"<margin-width>"},complex:{__proto__:null,"<azimuth>"
:"<angle> | [ [ left-side | far-left | left | center-left | center | center-right | right | far-right | right-side ] || behind ] | leftwards | rightwards"
,"<bg-position>":"<position>#","<bg-size>":"[ <length> | <percentage> | auto ]{1,2} | cover | contain"
,"<border-image-slice>":i.many([!0],i.cast("<nonnegative-number-or-percentage>")
,i.cast("<nonnegative-number-or-percentage>"),i.cast("<nonnegative-number-or-percentage>"
),i.cast("<nonnegative-number-or-percentage>"),"fill"),"<border-radius>":"<nonnegative-length-or-percentage>{1,4} [ / <nonnegative-length-or-percentage>{1,4} ]?"
,"<box-shadow>":"none | <shadow>#","<clip-path>":"<basic-shape> || <geometry-box>"
,"<dasharray>":i.cast("<nonnegative-length-or-percentage>").braces(1,Infinity,"#"
,i.cast(",").question()),"<family-name>":"<string> | <ident-not-generic-family> <ident>*"
,"<filter-function-list>":"[ <filter-function> | <uri> ]+","<flex>":"none | [ <flex-grow> <flex-shrink>? || <flex-basis> ]"
,"<font-family>":"[ <generic-family> | <family-name> ]#","<font-shorthand>":"[ <font-style> || <font-variant-css21> || <font-weight> || <font-stretch> ]? <font-size> [ / <line-height> ]? <font-family>"
,"<font-variant-alternates>":"stylistic() || historical-forms || styleset() || character-variant() || swash() || ornaments() || annotation()"
,"<font-variant-ligatures>":"[ common-ligatures | no-common-ligatures ] || [ discretionary-ligatures | no-discretionary-ligatures ] || [ historical-ligatures | no-historical-ligatures ] || [ contextual | no-contextual ]"
,"<font-variant-numeric>":"[ lining-nums | oldstyle-nums ] || [ proportional-nums | tabular-nums ] || [ diagonal-fractions | stacked-fractions ] || ordinal || slashed-zero"
,"<font-variant-east-asian>":"[ jis78 | jis83 | jis90 | jis04 | simplified | traditional ] || [ full-width | proportional-width ] || ruby"
,"<paint>":"<paint-basic> | <uri> <paint-basic>?","<paint-basic>":"none | currentColor | <color-svg> <icccolor>?"
,"<position>":"[ center | [ left | right ] [ <percentage> | <length> ]? ] && [ center | [ top | bottom ] [ <percentage> | <length> ]? ] | [ left | center | right | <percentage> | <length> ] [ top | center | bottom | <percentage> | <length> ] | [ left | center | right | top | bottom | <percentage> | <length> ]"
,"<repeat-style>":"repeat-x | repeat-y | [ repeat | space | round | no-repeat ]{1,2}"
,"<shadow>":i.many([!0],i.cast("<length>").braces(2,4),"inset","<color>"),"<text-decoration-color>"
:"<color>","<text-decoration-line>":"none | [ underline || overline || line-through || blink ]"
,"<text-decoration-style>":"solid | double | dotted | dashed | wavy","<will-change>"
:"auto | <animateable-feature>#","<x-one-radius>":"[ <length> | <percentage> ]{1,2}"
}}),Object.keys(r.simple).forEach(function(e){var t=r.simple[e];typeof t=="string"&&
(r.simple[e]=function(e){return r.isLiteral(e,t)})}),Object.keys(r.complex).forEach
(function(e){var t=r.complex[e];typeof t=="string"&&(r.complex[e]=i.parse(t))}),
r.complex["<font-variant>"]=i.oror({expand:"<font-variant-ligatures>"},{expand:"<font-variant-alternates>"
},"<font-variant-caps>",{expand:"<font-variant-numeric>"},{expand:"<font-variant-east-asian>"
})},{"./Matcher":3}],22:[function(e,t,n){"use strict";t.exports={Colors:e("./Colors"
),Combinator:e("./Combinator"),Parser:e("./Parser"),PropertyName:e("./PropertyName"
),PropertyValue:e("./PropertyValue"),PropertyValuePart:e("./PropertyValuePart"),
Matcher:e("./Matcher"),MediaFeature:e("./MediaFeature"),MediaQuery:e("./MediaQuery"
),Selector:e("./Selector"),SelectorPart:e("./SelectorPart"),SelectorSubPart:e("./SelectorSubPart"
),Specificity:e("./Specificity"),TokenStream:e("./TokenStream"),Tokens:e("./Tokens"
),ValidationError:e("./ValidationError")}},{"./Colors":1,"./Combinator":2,"./Matcher"
:3,"./MediaFeature":4,"./MediaQuery":5,"./Parser":6,"./PropertyName":8,"./PropertyValue"
:9,"./PropertyValuePart":11,"./Selector":13,"./SelectorPart":14,"./SelectorSubPart"
:15,"./Specificity":16,"./TokenStream":17,"./Tokens":18,"./ValidationError":20}]
,23:[function(e,t,n){"use strict";function r(){this._listeners=Object.create(null
)}t.exports=r,r.prototype={constructor:r,addListener:function(e,t){this._listeners
[e]||(this._listeners[e]=[]),this._listeners[e].push(t)},fire:function(e){typeof
e=="string"&&(e={type:e}),typeof e.target!="undefined"&&(e.target=this);if(typeof
e.type=="undefined")throw new Error("Event object missing 'type' property.");if(
this._listeners[e.type]){var t=this._listeners[e.type].concat();for(var n=0,r=t.
length;n<r;n++)t[n].call(this,e)}},removeListener:function(e,t){if(this._listeners
[e]){var n=this._listeners[e];for(var r=0,i=n.length;r<i;r++)if(n[r]===t){n.splice
(r,1);break}}}}},{}],24:[function(e,t,n){"use strict";function r(e){this._input=
e.replace(/(\r\n?|\n)/g,"\n"),this._line=1,this._col=1,this._cursor=0}t.exports=
r,r.prototype={constructor:r,getCol:function(){return this._col},getLine:function(
){return this._line},eof:function(){return this._cursor===this._input.length},peek
:function(e){var t=null;return e=typeof e=="undefined"?1:e,this._cursor<this._input
.length&&(t=this._input.charAt(this._cursor+e-1)),t},read:function(){var e=null;
return this._cursor<this._input.length&&(this._input.charAt(this._cursor)==="\n"?
(this._line++,this._col=1):this._col++,e=this._input.charAt(this._cursor++)),e},
mark:function(){this._bookmark={cursor:this._cursor,line:this._line,col:this._col
}},reset:function(){this._bookmark&&(this._cursor=this._bookmark.cursor,this._line=
this._bookmark.line,this._col=this._bookmark.col,delete this._bookmark)},readTo:
function(e){var t="",n;while(t.length<e.length||t.lastIndexOf(e)!==t.length-e.length
){n=this.read();if(!n)throw new Error('Expected "'+e+'" at line '+this._line+", col "+
this._col+".");t+=n}return t},readWhile:function(e){var t="",n=this.peek();while(
n!==null&&e(n))t+=this.read(),n=this.peek();return t},readMatch:function(e){var t=
this._input.substring(this._cursor),n=null;return typeof e=="string"?t.slice(0,e
.length)===e&&(n=this.readCount(e.length)):e instanceof RegExp&&e.test(t)&&(n=this
.readCount(RegExp.lastMatch.length)),n},readCount:function(e){var t="";while(e--
)t+=this.read();return t}}},{}],25:[function(e,t,n){"use strict";function r(e,t,
n){Error.call(this),this.name=this.constructor.name,this.col=n,this.line=t,this.
message=e}t.exports=r,r.prototype=Object.create(Error.prototype),r.prototype.constructor=
r},{}],26:[function(e,t,n){"use strict";function r(e,t,n,r){this.col=n,this.line=
t,this.text=e,this.type=r}t.exports=r,r.fromToken=function(e){return new r(e.value
,e.startLine,e.startCol)},r.prototype={constructor:r,valueOf:function(){return this
.toString()},toString:function(){return this.text}}},{}],27:[function(e,t,n){"use strict"
;function s(e,t){this._reader=new r(e?e.toString():""),this._token=null,this._tokenData=
t,this._lt=[],this._ltIndex=0,this._ltIndexCache=[]}t.exports=s;var r=e("./StringReader"
),i=e("./SyntaxError");s.createTokenData=function(e){var t=[],n=Object.create(null
),r=e.concat([]),i=0,s=r.length+1;r.UNKNOWN=-1,r.unshift({name:"EOF"});for(;i<s;
i++)t.push(r[i].name),r[r[i].name]=i,r[i].text&&(n[r[i].text]=i);return r.name=function(
e){return t[e]},r.type=function(e){return n[e]},r},s.prototype={constructor:s,match
:function(e,t){e instanceof Array||(e=[e]);var n=this.get(t),r=0,i=e.length;while(
r<i)if(n===e[r++])return!0;return this.unget(),!1},mustMatch:function(e){var t;e instanceof
Array||(e=[e]);if(!this.match.apply(this,arguments))throw t=this.LT(1),new i("Expected "+
this._tokenData[e[0]].name+" at line "+t.startLine+", col "+t.startCol+".",t.startLine
,t.startCol)},advance:function(e,t){while(this.LA(0)!==0&&!this.match(e,t))this.
get();return this.LA(0)},get:function(e){var t=this._tokenData,n=0,r,i;if(this._lt
.length&&this._ltIndex>=0&&this._ltIndex<this._lt.length){n++,this._token=this._lt
[this._ltIndex++],i=t[this._token.type];while(i.channel!==undefined&&e!==i.channel&&
this._ltIndex<this._lt.length)this._token=this._lt[this._ltIndex++],i=t[this._token
.type],n++;if((i.channel===undefined||e===i.channel)&&this._ltIndex<=this._lt.length
)return this._ltIndexCache.push(n),this._token.type}return r=this._getToken(),r.
type>-1&&!t[r.type].hide&&(r.channel=t[r.type].channel,this._token=r,this._lt.push
(r),this._ltIndexCache.push(this._lt.length-this._ltIndex+n),this._lt.length>5&&
this._lt.shift(),this._ltIndexCache.length>5&&this._ltIndexCache.shift(),this._ltIndex=
this._lt.length),i=t[r.type],i&&(i.hide||i.channel!==undefined&&e!==i.channel)?this
.get(e):r.type},LA:function(e){var t=e,n;if(e>0){if(e>5)throw new Error("Too much lookahead."
);while(t)n=this.get(),t--;while(t<e)this.unget(),t++}else if(e<0){if(!this._lt[
this._ltIndex+e])throw new Error("Too much lookbehind.");n=this._lt[this._ltIndex+
e].type}else n=this._token.type;return n},LT:function(e){return this.LA(e),this.
_lt[this._ltIndex+e-1]},peek:function(){return this.LA(1)},token:function(){return this
._token},tokenName:function(e){return e<0||e>this._tokenData.length?"UNKNOWN_TOKEN"
:this._tokenData[e].name},tokenType:function(e){return this._tokenData[e]||-1},unget
:function(){if(!this._ltIndexCache.length)throw new Error("Too much lookahead.")
;this._ltIndex-=this._ltIndexCache.pop(),this._token=this._lt[this._ltIndex-1]}}
},{"./StringReader":24,"./SyntaxError":25}],28:[function(e,t,n){"use strict";t.exports=
{StringReader:e("./StringReader"),SyntaxError:e("./SyntaxError"),SyntaxUnit:e("./SyntaxUnit"
),EventTarget:e("./EventTarget"),TokenStreamBase:e("./TokenStreamBase")}},{"./EventTarget"
:23,"./StringReader":24,"./SyntaxError":25,"./SyntaxUnit":26,"./TokenStreamBase"
:27}],parserlib:[function(e,t,n){"use strict";t.exports={css:e("./css"),util:e("./util"
)}},{"./css":22,"./util":28}]},{},[]),e("parserlib")}(),r=function(){"use strict"
;function i(t,s,o,u,a){function p(t,o){if(t===null)return null;if(o===0)return t
;var d,v;if(typeof t!="object")return t;if(t instanceof e)d=new e;else if(t instanceof
n)d=new n;else if(t instanceof r)d=new r(function(e,n){t.then(function(t){e(p(t,
o-1))},function(e){n(p(e,o-1))})});else if(i.__isArray(t))d=[];else if(i.__isRegExp
(t))d=new RegExp(t.source,f(t)),t.lastIndex&&(d.lastIndex=t.lastIndex);else if(i
.__isDate(t))d=new Date(t.getTime());else{if(h&&Buffer.isBuffer(t))return d=new
Buffer(t.length),t.copy(d),d;t instanceof Error?d=Object.create(t):typeof u=="undefined"?
(v=Object.getPrototypeOf(t),d=Object.create(v)):(d=Object.create(u),v=u)}if(s){var m=
l.indexOf(t);if(m!=-1)return c[m];l.push(t),c.push(d)}if(t instanceof e){var g=t
.keys();for(;;){var y=g.next();if(y.done)break;var b=p(y.value,o-1),w=p(t.get(y.
value),o-1);d.set(b,w)}}if(t instanceof n){var E=t.keys();for(;;){var y=E.next()
;if(y.done)break;var S=p(y.value,o-1);d.add(S)}}for(var x in t){var T;v&&(T=Object
.getOwnPropertyDescriptor(v,x));if(T&&T.set==null)continue;d[x]=p(t[x],o-1)}if(Object
.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(t);for(var x=0;x<N.length
;x++){var C=N[x],k=Object.getOwnPropertyDescriptor(t,C);if(k&&!k.enumerable&&!a)
continue;d[C]=p(t[C],o-1),k.enumerable||Object.defineProperty(d,C,{enumerable:!1
})}}if(a){var L=Object.getOwnPropertyNames(t);for(var x=0;x<L.length;x++){var A=
L[x],k=Object.getOwnPropertyDescriptor(t,A);if(k&&k.enumerable)continue;d[A]=p(t
[A],o-1),Object.defineProperty(d,A,{enumerable:!1})}}return d}typeof s=="object"&&
(o=s.depth,u=s.prototype,a=s.includeNonEnumerable,s=s.circular);var l=[],c=[],h=typeof
Buffer!="undefined";return typeof s=="undefined"&&(s=!0),typeof o=="undefined"&&
(o=Infinity),p(t,o)}function s(e){return Object.prototype.toString.call(e)}function o
(e){return typeof e=="object"&&s(e)==="[object Date]"}function u(e){return typeof
e=="object"&&s(e)==="[object Array]"}function a(e){return typeof e=="object"&&s(
e)==="[object RegExp]"}function f(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&
(t+="i"),e.multiline&&(t+="m"),t}var e;try{e=Map}catch(t){e=function(){}}var n;try{
n=Set}catch(t){n=function(){}}var r;try{r=Promise}catch(t){r=function(){}}return i
.clonePrototype=function(t){if(t===null)return null;var n=function(){};return n.
prototype=t,new n},i.__objToStr=s,i.__isDate=o,i.__isArray=u,i.__isRegExp=a,i.__getRegExpFlags=
f,i}();typeof e=="object"&&e.exports&&(e.exports=r);var i=function(){"use strict"
;function a(e,t){var n,r=e&&e.match(o),i=r&&r[1];return i&&(n={"true":2,"":1,"false"
:0,2:2,1:1,0:0},i.toLowerCase().split(",").forEach(function(e){var r=e.split(":"
),i=r[0]||"",s=r[1]||"";t[i.trim()]=n[s.trim()]})),t}var e=[],t=[],o=/\/\*\s*csslint([^\*]*)\*\//
,u=new n.util.EventTarget;return u.version="1.0.4",u.addRule=function(t){e.push(
t),e[t.id]=t},u.clearRules=function(){e=[]},u.getRules=function(){return[].concat
(e).sort(function(e,t){return e.id>t.id?1:0})},u.getRuleset=function(){var t={},
n=0,r=e.length;while(n<r)t[e[n++].id]=1;return t},u.addFormatter=function(e){t[e
.id]=e},u.getFormatter=function(e){return t[e]},u.format=function(e,t,n,r){var i=
this.getFormatter(n),s=null;return i&&(s=i.startFormat(),s+=i.formatResults(e,t,
r||{}),s+=i.endFormat()),s},u.hasFormat=function(e){return t.hasOwnProperty(e)},
u.verify=function(t,u){var f=0,l,c,h={},p=[],d,v=new n.css.Parser({starHack:!0,ieFilters
:!0,underscoreHack:!0,strict:!1});c=t.replace(/\n\r?/g,"$split$").split("$split$"
),i.Util.forEach(c,function(e,t){var n=e&&e.match(/\/\*[ \t]*csslint[ \t]+allow:[ \t]*([^\*]*)\*\//i
),r=n&&n[1],i={};r&&(r.toLowerCase().split(",").forEach(function(e){i[e.trim()]=!0
}),Object.keys(i).length>0&&(h[t+1]=i))});var m=null,g=null;i.Util.forEach(c,function(
e,t){m===null&&e.match(/\/\*[ \t]*csslint[ \t]+ignore:start[ \t]*\*\//i)&&(m=t),
e.match(/\/\*[ \t]*csslint[ \t]+ignore:end[ \t]*\*\//i)&&(g=t),m!==null&&g!==null&&
(p.push([m,g]),m=g=null)}),m!==null&&p.push([m,c.length]),u||(u=this.getRuleset(
)),o.test(t)&&(u=r(u),u=a(t,u)),l=new s(c,u,h,p),u.errors=2;for(f in u)u.hasOwnProperty
(f)&&u[f]&&e[f]&&e[f].init(v,l);try{v.parse(t)}catch(y){l.error("Fatal error, cannot continue: "+
y.message,y.line,y.col,{})}return d={messages:l.messages,stats:l.stats,ruleset:l
.ruleset,allow:l.allow,ignore:l.ignore},d.messages.sort(function(e,t){return e.rollup&&!
t.rollup?1:!e.rollup&&t.rollup?-1:e.line-t.line}),d},u}();return s.prototype={constructor
:s,error:function(e,t,n,r){"use strict";this.messages.push({type:"error",line:t,
col:n,message:e,evidence:this.lines[t-1],rule:r||{}})},warn:function(e,t,n,r){"use strict"
;this.report(e,t,n,r)},report:function(e,t,n,r){"use strict";if(this.allow.hasOwnProperty
(t)&&this.allow[t].hasOwnProperty(r.id))return;var s=!1;i.Util.forEach(this.ignore
,function(e){e[0]<=t&&t<=e[1]&&(s=!0)});if(s)return;this.messages.push({type:this
.ruleset[r.id]===2?"error":"warning",line:t,col:n,message:e,evidence:this.lines[
t-1],rule:r})},info:function(e,t,n,r){"use strict";this.messages.push({type:"info"
,line:t,col:n,message:e,evidence:this.lines[t-1],rule:r})},rollupError:function(
e,t){"use strict";this.messages.push({type:"error",rollup:!0,message:e,rule:t})}
,rollupWarn:function(e,t){"use strict";this.messages.push({type:"warning",rollup
:!0,message:e,rule:t})},stat:function(e,t){"use strict";this.stats[e]=t}},i._Reporter=
s,i.Util={mix:function(e,t){"use strict";var n;for(n in t)t.hasOwnProperty(n)&&(
e[n]=t[n]);return n},indexOf:function(e,t){"use strict";if(e.indexOf)return e.indexOf
(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(
e,t){"use strict";if(e.forEach)return e.forEach(t);for(var n=0,r=e.length;n<r;n++
)t(e[n],n,e)}},i.addRule({id:"adjoining-classes",name:"Disallow adjoining classes"
,desc:"Don't use adjoining classes.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-adjoining-classes"
,browsers:"IE6",init:function(e,t){"use strict";var n=this;e.addListener("startrule"
,function(r){var i=r.selectors,s,o,u,a,f,l,c;for(f=0;f<i.length;f++){s=i[f];for(
l=0;l<s.parts.length;l++){o=s.parts[l];if(o.type===e.SELECTOR_PART_TYPE){a=0;for(
c=0;c<o.modifiers.length;c++)u=o.modifiers[c],u.type==="class"&&a++,a>1&&t.report
("Adjoining classes: "+i[f].text,o.line,o.col,n)}}}})}}),i.addRule({id:"box-model"
,name:"Beware of broken box size",desc:"Don't use width or height when using padding or border."
,url:"https://github.com/CSSLint/csslint/wiki/Beware-of-box-model-size",browsers
:"All",init:function(e,t){"use strict";function u(){s={},o=!1}function a(){var e
,u;if(!o){if(s.height)for(e in i)i.hasOwnProperty(e)&&s[e]&&(u=s[e].value,(e!=="padding"||
u.parts.length!==2||u.parts[0].value!==0)&&t.report("Using height with "+e+" can sometimes make elements larger than you expect."
,s[e].line,s[e].col,n));if(s.width)for(e in r)r.hasOwnProperty(e)&&s[e]&&(u=s[e]
.value,(e!=="padding"||u.parts.length!==2||u.parts[1].value!==0)&&t.report("Using width with "+
e+" can sometimes make elements larger than you expect.",s[e].line,s[e].col,n))}
}var n=this,r={border:1,"border-left":1,"border-right":1,padding:1,"padding-left"
:1,"padding-right":1},i={border:1,"border-bottom":1,"border-top":1,padding:1,"padding-bottom"
:1,"padding-top":1},s,o=!1;e.addListener("startrule",u),e.addListener("startfontface"
,u),e.addListener("startpage",u),e.addListener("startpagemargin",u),e.addListener
("startkeyframerule",u),e.addListener("startviewport",u),e.addListener("property"
,function(e){var t=e.property.text.toLowerCase();i[t]||r[t]?!/^0\S*$/.test(e.value
)&&(t!=="border"||e.value.toString()!=="none")&&(s[t]={line:e.property.line,col:
e.property.col,value:e.value}):/^(width|height)/i.test(t)&&/^(length|percentage)/
.test(e.value.parts[0].type)?s[t]=1:t==="box-sizing"&&(o=!0)}),e.addListener("endrule"
,a),e.addListener("endfontface",a),e.addListener("endpage",a),e.addListener("endpagemargin"
,a),e.addListener("endkeyframerule",a),e.addListener("endviewport",a)}}),i.addRule
({id:"box-sizing",name:"Disallow use of box-sizing",desc:"The box-sizing properties isn't supported in IE6 and IE7."
,url:"https://github.com/CSSLint/csslint/wiki/Disallow-box-sizing",browsers:"IE6, IE7"
,tags:["Compatibility"],init:function(e,t){"use strict";var n=this;e.addListener
("property",function(e){var r=e.property.text.toLowerCase();r==="box-sizing"&&t.
report("The box-sizing property isn't supported in IE6 and IE7.",e.line,e.col,n)
})}}),i.addRule({id:"bulletproof-font-face",name:"Use the bulletproof @font-face syntax"
,desc:"Use the bulletproof @font-face syntax to avoid 404's in old IE (http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)."
,url:"https://github.com/CSSLint/csslint/wiki/Bulletproof-font-face",browsers:"All"
,init:function(e,t){"use strict";var n=this,r=!1,i=!0,s=!1,o,u;e.addListener("startfontface"
,function(){r=!0}),e.addListener("property",function(e){if(!r)return;var t=e.property
.toString().toLowerCase(),n=e.value.toString();o=e.line,u=e.col;if(t==="src"){var a=/^\s?url\(['"].+\.eot\?.*['"]\)\s*format\(['"]embedded-opentype['"]\).*$/i
;!n.match(a)&&i?(s=!0,i=!1):n.match(a)&&!i&&(s=!1)}}),e.addListener("endfontface"
,function(){r=!1,s&&t.report("@font-face declaration doesn't follow the fontspring bulletproof syntax."
,o,u,n)})}}),i.addRule({id:"compatible-vendor-prefixes",name:"Require compatible vendor prefixes"
,desc:"Include all compatible vendor prefixes to reach a wider range of users.",
url:"https://github.com/CSSLint/csslint/wiki/Require-compatible-vendor-prefixes"
,browsers:"All",init:function(e,t){"use strict";var n=this,r,s,o,u,a,f,l,c=!1,h=
Array.prototype.push,p=[];r={animation:"webkit","animation-delay":"webkit","animation-direction"
:"webkit","animation-duration":"webkit","animation-fill-mode":"webkit","animation-iteration-count"
:"webkit","animation-name":"webkit","animation-play-state":"webkit","animation-timing-function"
:"webkit",appearance:"webkit moz","border-end":"webkit moz","border-end-color":"webkit moz"
,"border-end-style":"webkit moz","border-end-width":"webkit moz","border-image":"webkit moz o"
,"border-radius":"webkit","border-start":"webkit moz","border-start-color":"webkit moz"
,"border-start-style":"webkit moz","border-start-width":"webkit moz","box-align"
:"webkit moz ms","box-direction":"webkit moz ms","box-flex":"webkit moz ms","box-lines"
:"webkit ms","box-ordinal-group":"webkit moz ms","box-orient":"webkit moz ms","box-pack"
:"webkit moz ms","box-sizing":"","box-shadow":"","column-count":"webkit moz ms","column-gap"
:"webkit moz ms","column-rule":"webkit moz ms","column-rule-color":"webkit moz ms"
,"column-rule-style":"webkit moz ms","column-rule-width":"webkit moz ms","column-width"
:"webkit moz ms",hyphens:"epub moz","line-break":"webkit ms","margin-end":"webkit moz"
,"margin-start":"webkit moz","marquee-speed":"webkit wap","marquee-style":"webkit wap"
,"padding-end":"webkit moz","padding-start":"webkit moz","tab-size":"moz o","text-size-adjust"
:"webkit ms",transform:"webkit ms","transform-origin":"webkit ms",transition:"","transition-delay"
:"","transition-duration":"","transition-property":"","transition-timing-function"
:"","user-modify":"webkit moz","user-select":"webkit moz ms","word-break":"epub ms"
,"writing-mode":"epub ms"};for(o in r)if(r.hasOwnProperty(o)){u=[],a=r[o].split(" "
);for(f=0,l=a.length;f<l;f++)u.push("-"+a[f]+"-"+o);r[o]=u,h.apply(p,u)}e.addListener
("startrule",function(){s=[]}),e.addListener("startkeyframes",function(e){c=e.prefix||!0
}),e.addListener("endkeyframes",function(){c=!1}),e.addListener("property",function(
e){var t=e.property;i.Util.indexOf(p,t.text)>-1&&(!c||typeof c!="string"||t.text
.indexOf("-"+c+"-")!==0)&&s.push(t)}),e.addListener("endrule",function(){if(!s.length
)return;var e={},o,u,a,f,l,c,h,p,d,v;for(o=0,u=s.length;o<u;o++){a=s[o];for(f in
r)r.hasOwnProperty(f)&&(l=r[f],i.Util.indexOf(l,a.text)>-1&&(e[f]||(e[f]={full:l
.slice(0),actual:[],actualNodes:[]}),i.Util.indexOf(e[f].actual,a.text)===-1&&(e
[f].actual.push(a.text),e[f].actualNodes.push(a))))}for(f in e)if(e.hasOwnProperty
(f)){c=e[f],h=c.full,p=c.actual;if(h.length>p.length)for(o=0,u=h.length;o<u;o++)
d=h[o],i.Util.indexOf(p,d)===-1&&(v=p.length===1?p[0]:p.length===2?p.join(" and "
):p.join(", "),t.report("The property "+d+" is compatible with "+v+" and should be included as well."
,c.actualNodes[0].line,c.actualNodes[0].col,n))}})}}),i.addRule({id:"display-property-grouping"
,name:"Require properties appropriate for display",desc:"Certain properties shouldn't be used with certain display property values."
,url:"https://github.com/CSSLint/csslint/wiki/Require-properties-appropriate-for-display"
,browsers:"All",init:function(e,t){"use strict";function s(e,s,o){i[e]&&(typeof
r[e]!="string"||i[e].value.toLowerCase()!==r[e])&&t.report(o||e+" can't be used with display: "+
s+".",i[e].line,i[e].col,n)}function o(){i={}}function u(){var e=i.display?i.display
.value:null;if(e)switch(e){case"inline":s("height",e),s("width",e),s("margin",e)
,s("margin-top",e),s("margin-bottom",e),s("float",e,"display:inline has no effect on floated elements (but may be used to fix the IE6 double-margin bug)."
);break;case"block":s("vertical-align",e);break;case"inline-block":s("float",e);
break;default:e.indexOf("table-")===0&&(s("margin",e),s("margin-left",e),s("margin-right"
,e),s("margin-top",e),s("margin-bottom",e),s("float",e))}}var n=this,r={display:1
,"float":"none",height:1,width:1,margin:1,"margin-left":1,"margin-right":1,"margin-bottom"
:1,"margin-top":1,padding:1,"padding-left":1,"padding-right":1,"padding-bottom":1
,"padding-top":1,"vertical-align":1},i;e.addListener("startrule",o),e.addListener
("startfontface",o),e.addListener("startkeyframerule",o),e.addListener("startpagemargin"
,o),e.addListener("startpage",o),e.addListener("startviewport",o),e.addListener("property"
,function(e){var t=e.property.text.toLowerCase();r[t]&&(i[t]={value:e.value.text
,line:e.property.line,col:e.property.col})}),e.addListener("endrule",u),e.addListener
("endfontface",u),e.addListener("endkeyframerule",u),e.addListener("endpagemargin"
,u),e.addListener("endpage",u),e.addListener("endviewport",u)}}),i.addRule({id:"duplicate-background-images"
,name:"Disallow duplicate background images",desc:"Every background-image should be unique. Use a common class for e.g. sprites."
,url:"https://github.com/CSSLint/csslint/wiki/Disallow-duplicate-background-images"
,browsers:"All",init:function(e,t){"use strict";var n=this,r={};e.addListener("property"
,function(e){var i=e.property.text,s=e.value,o,u;if(i.match(/background/i))for(o=0
,u=s.parts.length;o<u;o++)s.parts[o].type==="uri"&&(typeof r[s.parts[o].uri]=="undefined"?
r[s.parts[o].uri]=e:t.report("Background image '"+s.parts[o].uri+"' was used multiple times, first declared at line "+
r[s.parts[o].uri].line+", col "+r[s.parts[o].uri].col+".",e.line,e.col,n))})}}),
i.addRule({id:"duplicate-properties",name:"Disallow duplicate properties",desc:"Duplicate properties must appear one after the other."
,url:"https://github.com/CSSLint/csslint/wiki/Disallow-duplicate-properties",browsers
:"All",init:function(e,t){"use strict";function s(){r={}}var n=this,r,i;e.addListener
("startrule",s),e.addListener("startfontface",s),e.addListener("startpage",s),e.
addListener("startpagemargin",s),e.addListener("startkeyframerule",s),e.addListener
("startviewport",s),e.addListener("property",function(e){var s=e.property,o=s.text
.toLowerCase();r[o]&&(i!==o||r[o]===e.value.text)&&t.report("Duplicate property '"+
e.property+"' found.",e.line,e.col,n),r[o]=e.value.text,i=o})}}),i.addRule({id:"empty-rules"
,name:"Disallow empty rules",desc:"Rules without any properties specified should be removed."
,url:"https://github.com/CSSLint/csslint/wiki/Disallow-empty-rules",browsers:"All"
,init:function(e,t){"use strict";var n=this,r=0;e.addListener("startrule",function(
){r=0}),e.addListener("property",function(){r++}),e.addListener("endrule",function(
e){var i=e.selectors;r===0&&t.report("Rule is empty.",i[0].line,i[0].col,n)})}})
,i.addRule({id:"errors",name:"Parsing Errors",desc:"This rule looks for recoverable syntax errors."
,browsers:"All",init:function(e,t){"use strict";var n=this;e.addListener("error"
,function(e){t.error(e.message,e.line,e.col,n)})}}),i.addRule({id:"fallback-colors"
,name:"Require fallback colors",desc:"For older browsers that don't support RGBA, HSL, or HSLA, provide a fallback color."
,url:"https://github.com/CSSLint/csslint/wiki/Require-fallback-colors",browsers:"IE6,IE7,IE8"
,init:function(e,t){"use strict";function s(){r=null}var n=this,r,i={color:1,background
:1,"border-color":1,"border-top-color":1,"border-right-color":1,"border-bottom-color"
:1,"border-left-color":1,border:1,"border-top":1,"border-right":1,"border-bottom"
:1,"border-left":1,"background-color":1};e.addListener("startrule",s),e.addListener
("startfontface",s),e.addListener("startpage",s),e.addListener("startpagemargin"
,s),e.addListener("startkeyframerule",s),e.addListener("startviewport",s),e.addListener
("property",function(e){var s=e.property,o=s.text.toLowerCase(),u=e.value.parts,
a=0,f="",l=u.length;if(i[o])while(a<l)u[a].type==="color"&&("alpha"in u[a]||"hue"in
u[a]?(/([^\)]+)\(/.test(u[a])&&(f=RegExp.$1.toUpperCase()),(!r||r.property.text.
toLowerCase()!==o||r.colorType!=="compat")&&t.report("Fallback "+o+" (hex or RGB) should precede "+
f+" "+o+".",e.line,e.col,n)):e.colorType="compat"),a++;r=e})}}),i.addRule({id:"floats"
,name:"Disallow too many floats",desc:"This rule tests if the float property is used too many times"
,url:"https://github.com/CSSLint/csslint/wiki/Disallow-too-many-floats",browsers
:"All",init:function(e,t){"use strict";var n=this,r=0;e.addListener("property",function(
e){e.property.text.toLowerCase()==="float"&&e.value.text.toLowerCase()!=="none"&&
r++}),e.addListener("endstylesheet",function(){t.stat("floats",r),r>=10&&t.rollupWarn
("Too many floats ("+r+"), you're probably using them for layout. Consider using a grid system instead."
,n)})}}),i.addRule({id:"font-faces",name:"Don't use too many web fonts",desc:"Too many different web fonts in the same stylesheet."
,url:"https://github.com/CSSLint/csslint/wiki/Don%27t-use-too-many-web-fonts",browsers
:"All",init:function(e,t){"use strict";var n=this,r=0;e.addListener("startfontface"
,function(){r++}),e.addListener("endstylesheet",function(){r>5&&t.rollupWarn("Too many @font-face declarations ("+
r+").",n)})}}),i.addRule({id:"font-sizes",name:"Disallow too many font sizes",desc
:"Checks the number of font-size declarations.",url:"https://github.com/CSSLint/csslint/wiki/Don%27t-use-too-many-font-size-declarations"
,browsers:"All",init:function(e,t){"use strict";var n=this,r=0;e.addListener("property"
,function(e){e.property.toString()==="font-size"&&r++}),e.addListener("endstylesheet"
,function(){t.stat("font-sizes",r),r>=10&&t.rollupWarn("Too many font-size declarations ("+
r+"), abstraction needed.",n)})}}),i.addRule({id:"gradients",name:"Require all gradient definitions"
,desc:"When using a vendor-prefixed gradient, make sure to use them all.",url:"https://github.com/CSSLint/csslint/wiki/Require-all-gradient-definitions"
,browsers:"All",init:function(e,t){"use strict";var n=this,r;e.addListener("startrule"
,function(){r={moz:0,webkit:0,oldWebkit:0,o:0}}),e.addListener("property",function(
e){/\-(moz|o|webkit)(?:\-(?:linear|radial))\-gradient/i.test(e.value)?r[RegExp.$1
]=1:/\-webkit\-gradient/i.test(e.value)&&(r.oldWebkit=1)}),e.addListener("endrule"
,function(e){var i=[];r.moz||i.push("Firefox 3.6+"),r.webkit||i.push("Webkit (Safari 5+, Chrome)"
),r.oldWebkit||i.push("Old Webkit (Safari 4+, Chrome)"),r.o||i.push("Opera 11.1+"
),i.length&&i.length<4&&t.report("Missing vendor-prefixed CSS gradients for "+i.
join(", ")+".",e.selectors[0].line,e.selectors[0].col,n)})}}),i.addRule({id:"ids"
,name:"Disallow IDs in selectors",desc:"Selectors should not contain IDs.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-IDs-in-selectors"
,browsers:"All",init:function(e,t){"use strict";var n=this;e.addListener("startrule"
,function(r){var i=r.selectors,s,o,u,a,f,l,c;for(f=0;f<i.length;f++){s=i[f],a=0;
for(l=0;l<s.parts.length;l++){o=s.parts[l];if(o.type===e.SELECTOR_PART_TYPE)for(
c=0;c<o.modifiers.length;c++)u=o.modifiers[c],u.type==="id"&&a++}a===1?t.report("Don't use IDs in selectors."
,s.line,s.col,n):a>1&&t.report(a+" IDs in the selector, really?",s.line,s.col,n)
}})}}),i.addRule({id:"import-ie-limit",name:"@import limit on IE6-IE9",desc:"IE6-9 supports up to 31 @import per stylesheet"
,browsers:"IE6, IE7, IE8, IE9",init:function(e,t){"use strict";function s(){i=0}
var n=this,r=31,i=0;e.addListener("startpage",s),e.addListener("import",function(
){i++}),e.addListener("endstylesheet",function(){i>r&&t.rollupError("Too many @import rules ("+
i+"). IE6-9 supports up to 31 import per stylesheet.",n)})}}),i.addRule({id:"import"
,name:"Disallow @import",desc:"Don't use @import, use <link> instead.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-%40import"
,browsers:"All",init:function(e,t){"use strict";var n=this;e.addListener("import"
,function(e){t.report("@import prevents parallel downloads, use <link> instead."
,e.line,e.col,n)})}}),i.addRule({id:"important",name:"Disallow !important",desc:"Be careful when using !important declaration"
,url:"https://github.com/CSSLint/csslint/wiki/Disallow-%21important",browsers:"All"
,init:function(e,t){"use strict";var n=this,r=0;e.addListener("property",function(
e){e.important===!0&&(r++,t.report("Use of !important",e.line,e.col,n))}),e.addListener
("endstylesheet",function(){t.stat("important",r),r>=10&&t.rollupWarn("Too many !important declarations ("+
r+"), try to use less than 10 to avoid specificity issues.",n)})}}),i.addRule({id
:"known-properties",name:"Require use of known properties",desc:"Properties should be known (listed in CSS3 specification) or be a vendor-prefixed property."
,url:"https://github.com/CSSLint/csslint/wiki/Require-use-of-known-properties",browsers
:"All",init:function(e,t){"use strict";var n=this;e.addListener("property",function(
e){e.invalid&&t.report(e.invalid.message,e.line,e.col,n)})}}),i.addRule({id:"order-alphabetical"
,name:"Alphabetical order",desc:"Assure properties are in alphabetical order",browsers
:"All",init:function(e,t){"use strict";var n=this,r,i=function(){r=[]},s=function(
e){var i=r.join(","),s=r.sort().join(",");i!==s&&t.report("Rule doesn't have all its properties in alphabetical order."
,e.line,e.col,n)};e.addListener("startrule",i),e.addListener("startfontface",i),
e.addListener("startpage",i),e.addListener("startpagemargin",i),e.addListener("startkeyframerule"
,i),e.addListener("startviewport",i),e.addListener("property",function(e){var t=
e.property.text,n=t.toLowerCase().replace(/^-.*?-/,"");r.push(n)}),e.addListener
("endrule",s),e.addListener("endfontface",s),e.addListener("endpage",s),e.addListener
("endpagemargin",s),e.addListener("endkeyframerule",s),e.addListener("endviewport"
,s)}}),i.addRule({id:"outline-none",name:"Disallow outline: none",desc:"Use of outline: none or outline: 0 should be limited to :focus rules."
,url:"https://github.com/CSSLint/csslint/wiki/Disallow-outline%3Anone",browsers:"All"
,tags:["Accessibility"],init:function(e,t){"use strict";function i(e){e.selectors?
r={line:e.line,col:e.col,selectors:e.selectors,propCount:0,outline:!1}:r=null}function s
(){r&&r.outline&&(r.selectors.toString().toLowerCase().indexOf(":focus")===-1?t.
report("Outlines should only be modified using :focus.",r.line,r.col,n):r.propCount===1&&
t.report("Outlines shouldn't be hidden unless other visual changes are made.",r.
line,r.col,n))}var n=this,r;e.addListener("startrule",i),e.addListener("startfontface"
,i),e.addListener("startpage",i),e.addListener("startpagemargin",i),e.addListener
("startkeyframerule",i),e.addListener("startviewport",i),e.addListener("property"
,function(e){var t=e.property.text.toLowerCase(),n=e.value;r&&(r.propCount++,t==="outline"&&
(n.toString()==="none"||n.toString()==="0")&&(r.outline=!0))}),e.addListener("endrule"
,s),e.addListener("endfontface",s),e.addListener("endpage",s),e.addListener("endpagemargin"
,s),e.addListener("endkeyframerule",s),e.addListener("endviewport",s)}}),i.addRule
({id:"overqualified-elements",name:"Disallow overqualified elements",desc:"Don't use classes or IDs with elements (a.foo or a#foo)."
,url:"https://github.com/CSSLint/csslint/wiki/Disallow-overqualified-elements",browsers
:"All",init:function(e,t){"use strict";var n=this,r={};e.addListener("startrule"
,function(i){var s=i.selectors,o,u,a,f,l,c;for(f=0;f<s.length;f++){o=s[f];for(l=0
;l<o.parts.length;l++){u=o.parts[l];if(u.type===e.SELECTOR_PART_TYPE)for(c=0;c<u
.modifiers.length;c++)a=u.modifiers[c],u.elementName&&a.type==="id"?t.report("Element ("+
u+") is overqualified, just use "+a+" without element name.",u.line,u.col,n):a.type==="class"&&
(r[a]||(r[a]=[]),r[a].push({modifier:a,part:u}))}}}),e.addListener("endstylesheet"
,function(){var e;for(e in r)r.hasOwnProperty(e)&&r[e].length===1&&r[e][0].part.
elementName&&t.report("Element ("+r[e][0].part+") is overqualified, just use "+r
[e][0].modifier+" without element name.",r[e][0].part.line,r[e][0].part.col,n)})
}}),i.addRule({id:"qualified-headings",name:"Disallow qualified headings",desc:"Headings should not be qualified (namespaced)."
,url:"https://github.com/CSSLint/csslint/wiki/Disallow-qualified-headings",browsers
:"All",init:function(e,t){"use strict";var n=this;e.addListener("startrule",function(
r){var i=r.selectors,s,o,u,a;for(u=0;u<i.length;u++){s=i[u];for(a=0;a<s.parts.length
;a++)o=s.parts[a],o.type===e.SELECTOR_PART_TYPE&&o.elementName&&/h[1-6]/.test(o.
elementName.toString())&&a>0&&t.report("Heading ("+o.elementName+") should not be qualified."
,o.line,o.col,n)}})}}),i.addRule({id:"regex-selectors",name:"Disallow selectors that look like regexs"
,desc:"Selectors that look like regular expressions are slow and should be avoided."
,url:"https://github.com/CSSLint/csslint/wiki/Disallow-selectors-that-look-like-regular-expressions"
,browsers:"All",init:function(e,t){"use strict";var n=this;e.addListener("startrule"
,function(r){var i=r.selectors,s,o,u,a,f,l;for(a=0;a<i.length;a++){s=i[a];for(f=0
;f<s.parts.length;f++){o=s.parts[f];if(o.type===e.SELECTOR_PART_TYPE)for(l=0;l<o
.modifiers.length;l++)u=o.modifiers[l],u.type==="attribute"&&/([~\|\^\$\*]=)/.test
(u)&&t.report("Attribute selectors with "+RegExp.$1+" are slow!",u.line,u.col,n)
}}})}}),i.addRule({id:"rules-count",name:"Rules Count",desc:"Track how many rules there are."
,browsers:"All",init:function(e,t){"use strict";var n=0;e.addListener("startrule"
,function(){n++}),e.addListener("endstylesheet",function(){t.stat("rule-count",n
)})}}),i.addRule({id:"selector-max-approaching",name:"Warn when approaching the 4095 selector limit for IE"
,desc:"Will warn when selector count is >= 3800 selectors.",browsers:"IE",init:function(
e,t){"use strict";var n=this,r=0;e.addListener("startrule",function(e){r+=e.selectors
.length}),e.addListener("endstylesheet",function(){r>=3800&&t.report("You have "+
r+" selectors. Internet Explorer supports a maximum of 4095 selectors per stylesheet. Consider refactoring."
,0,0,n)})}}),i.addRule({id:"selector-max",name:"Error when past the 4095 selector limit for IE"
,desc:"Will error when selector count is > 4095.",browsers:"IE",init:function(e,
t){"use strict";var n=this,r=0;e.addListener("startrule",function(e){r+=e.selectors
.length}),e.addListener("endstylesheet",function(){r>4095&&t.report("You have "+
r+" selectors. Internet Explorer supports a maximum of 4095 selectors per stylesheet. Consider refactoring."
,0,0,n)})}}),i.addRule({id:"selector-newline",name:"Disallow new-line characters in selectors"
,desc:"New-line characters in selectors are usually a forgotten comma and not a descendant combinator."
,browsers:"All",init:function(e,t){"use strict";function r(e){var r,i,s,o,u,a,f,
l,c,h,p,d=e.selectors;for(r=0,i=d.length;r<i;r++){s=d[r];for(o=0,a=s.parts.length
;o<a;o++)for(u=o+1;u<a;u++)f=s.parts[o],l=s.parts[u],c=f.type,h=f.line,p=l.line,
c==="descendant"&&p>h&&t.report("newline character found in selector (forgot a comma?)"
,h,d[r].parts[0].col,n)}}var n=this;e.addListener("startrule",r)}}),i.addRule({id
:"shorthand",name:"Require shorthand properties",desc:"Use shorthand properties where possible."
,url:"https://github.com/CSSLint/csslint/wiki/Require-shorthand-properties",browsers
:"All",init:function(e,t){"use strict";function f(){u={}}function l(e){var r,i,s
,o;for(r in a)if(a.hasOwnProperty(r)){o=0;for(i=0,s=a[r].length;i<s;i++)o+=u[a[r
][i]]?1:0;o===a[r].length&&t.report("The properties "+a[r].join(", ")+" can be replaced by "+
r+".",e.line,e.col,n)}}var n=this,r,i,s,o={},u,a={margin:["margin-top","margin-bottom"
,"margin-left","margin-right"],padding:["padding-top","padding-bottom","padding-left"
,"padding-right"]};for(r in a)if(a.hasOwnProperty(r))for(i=0,s=a[r].length;i<s;i++
)o[a[r][i]]=r;e.addListener("startrule",f),e.addListener("startfontface",f),e.addListener
("property",function(e){var t=e.property.toString().toLowerCase();o[t]&&(u[t]=1)
}),e.addListener("endrule",l),e.addListener("endfontface",l)}}),i.addRule({id:"star-property-hack"
,name:"Disallow properties with a star prefix",desc:"Checks for the star property hack (targets IE6/7)"
,url:"https://github.com/CSSLint/csslint/wiki/Disallow-star-hack",browsers:"All"
,init:function(e,t){"use strict";var n=this;e.addListener("property",function(e)
{var r=e.property;r.hack==="*"&&t.report("Property with star prefix found.",e.property
.line,e.property.col,n)})}}),i.addRule({id:"text-indent",name:"Disallow negative text-indent"
,desc:"Checks for text indent less than -99px",url:"https://github.com/CSSLint/csslint/wiki/Disallow-negative-text-indent"
,browsers:"All",init:function(e,t){"use strict";function s(){r=!1,i="inherit"}function o
(){r&&i!=="ltr"&&t.report("Negative text-indent doesn't work well with RTL. If you use text-indent for image replacement explicitly set direction for that item to ltr."
,r.line,r.col,n)}var n=this,r,i;e.addListener("startrule",s),e.addListener("startfontface"
,s),e.addListener("property",function(e){var t=e.property.toString().toLowerCase
(),n=e.value;t==="text-indent"&&n.parts[0].value<-99?r=e.property:t==="direction"&&
n.toString()==="ltr"&&(i="ltr")}),e.addListener("endrule",o),e.addListener("endfontface"
,o)}}),i.addRule({id:"underscore-property-hack",name:"Disallow properties with an underscore prefix"
,desc:"Checks for the underscore property hack (targets IE6)",url:"https://github.com/CSSLint/csslint/wiki/Disallow-underscore-hack"
,browsers:"All",init:function(e,t){"use strict";var n=this;e.addListener("property"
,function(e){var r=e.property;r.hack==="_"&&t.report("Property with underscore prefix found."
,e.property.line,e.property.col,n)})}}),i.addRule({id:"unique-headings",name:"Headings should only be defined once"
,desc:"Headings should be defined only once.",url:"https://github.com/CSSLint/csslint/wiki/Headings-should-only-be-defined-once"
,browsers:"All",init:function(e,t){"use strict";var n=this,r={h1:0,h2:0,h3:0,h4:0
,h5:0,h6:0};e.addListener("startrule",function(e){var i=e.selectors,s,o,u,a,f;for(
a=0;a<i.length;a++){s=i[a],o=s.parts[s.parts.length-1];if(o.elementName&&/(h[1-6])/i
.test(o.elementName.toString())){for(f=0;f<o.modifiers.length;f++)if(o.modifiers
[f].type==="pseudo"){u=!0;break}u||(r[RegExp.$1]++,r[RegExp.$1]>1&&t.report("Heading ("+
o.elementName+") has already been defined.",o.line,o.col,n))}}}),e.addListener("endstylesheet"
,function(){var e,i=[];for(e in r)r.hasOwnProperty(e)&&r[e]>1&&i.push(r[e]+" "+e+"s"
);i.length&&t.rollupWarn("You have "+i.join(", ")+" defined in this stylesheet."
,n)})}}),i.addRule({id:"universal-selector",name:"Disallow universal selector",desc
:"The universal selector (*) is known to be slow.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-universal-selector"
,browsers:"All",init:function(e,t){"use strict";var n=this;e.addListener("startrule"
,function(e){var r=e.selectors,i,s,o;for(o=0;o<r.length;o++)i=r[o],s=i.parts[i.parts
.length-1],s.elementName==="*"&&t.report(n.desc,s.line,s.col,n)})}}),i.addRule({
id:"unqualified-attributes",name:"Disallow unqualified attribute selectors",desc
:"Unqualified attribute selectors are known to be slow.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-unqualified-attribute-selectors"
,browsers:"All",init:function(e,t){"use strict";var n=this;e.addListener("startrule"
,function(r){var i=r.selectors,s=!1,o,u,a,f,l;for(f=0;f<i.length;f++){o=i[f],u=o
.parts[o.parts.length-1];if(u.type===e.SELECTOR_PART_TYPE){for(l=0;l<u.modifiers
.length;l++){a=u.modifiers[l];if(a.type==="class"||a.type==="id"){s=!0;break}}if(!
s)for(l=0;l<u.modifiers.length;l++)a=u.modifiers[l],a.type==="attribute"&&(!u.elementName||
u.elementName==="*")&&t.report(n.desc,u.line,u.col,n)}}})}}),i.addRule({id:"vendor-prefix"
,name:"Require standard property with vendor prefix",desc:"When using a vendor-prefixed property, make sure to include the standard one."
,url:"https://github.com/CSSLint/csslint/wiki/Require-standard-property-with-vendor-prefix"
,browsers:"All",init:function(e,t){"use strict";function o(){r={},i=1}function u
(){var e,i,o,u,a,f=[];for(e in r)s[e]&&f.push({actual:e,needed:s[e]});for(i=0,o=
f.length;i<o;i++)u=f[i].needed,a=f[i].actual,r[u]?r[u][0].pos<r[a][0].pos&&t.report
("Standard property '"+u+"' should come after vendor-prefixed property '"+a+"'."
,r[a][0].name.line,r[a][0].name.col,n):t.report("Missing standard property '"+u+"' to go along with '"+
a+"'.",r[a][0].name.line,r[a][0].name.col,n)}var n=this,r,i,s={"-webkit-border-radius"
:"border-radius","-webkit-border-top-left-radius":"border-top-left-radius","-webkit-border-top-right-radius"
:"border-top-right-radius","-webkit-border-bottom-left-radius":"border-bottom-left-radius"
,"-webkit-border-bottom-right-radius":"border-bottom-right-radius","-o-border-radius"
:"border-radius","-o-border-top-left-radius":"border-top-left-radius","-o-border-top-right-radius"
:"border-top-right-radius","-o-border-bottom-left-radius":"border-bottom-left-radius"
,"-o-border-bottom-right-radius":"border-bottom-right-radius","-moz-border-radius"
:"border-radius","-moz-border-radius-topleft":"border-top-left-radius","-moz-border-radius-topright"
:"border-top-right-radius","-moz-border-radius-bottomleft":"border-bottom-left-radius"
,"-moz-border-radius-bottomright":"border-bottom-right-radius","-moz-column-count"
:"column-count","-webkit-column-count":"column-count","-moz-column-gap":"column-gap"
,"-webkit-column-gap":"column-gap","-moz-column-rule":"column-rule","-webkit-column-rule"
:"column-rule","-moz-column-rule-style":"column-rule-style","-webkit-column-rule-style"
:"column-rule-style","-moz-column-rule-color":"column-rule-color","-webkit-column-rule-color"
:"column-rule-color","-moz-column-rule-width":"column-rule-width","-webkit-column-rule-width"
:"column-rule-width","-moz-column-width":"column-width","-webkit-column-width":"column-width"
,"-webkit-column-span":"column-span","-webkit-columns":"columns","-moz-box-shadow"
:"box-shadow","-webkit-box-shadow":"box-shadow","-moz-transform":"transform","-webkit-transform"
:"transform","-o-transform":"transform","-ms-transform":"transform","-moz-transform-origin"
:"transform-origin","-webkit-transform-origin":"transform-origin","-o-transform-origin"
:"transform-origin","-ms-transform-origin":"transform-origin","-moz-box-sizing":"box-sizing"
,"-webkit-box-sizing":"box-sizing"};e.addListener("startrule",o),e.addListener("startfontface"
,o),e.addListener("startpage",o),e.addListener("startpagemargin",o),e.addListener
("startkeyframerule",o),e.addListener("startviewport",o),e.addListener("property"
,function(e){var t=e.property.text.toLowerCase();r[t]||(r[t]=[]),r[t].push({name
:e.property,value:e.value,pos:i++})}),e.addListener("endrule",u),e.addListener("endfontface"
,u),e.addListener("endpage",u),e.addListener("endpagemargin",u),e.addListener("endkeyframerule"
,u),e.addListener("endviewport",u)}}),i.addRule({id:"zero-units",name:"Disallow units for 0 values"
,desc:"You don't need to specify units when a value is 0.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-units-for-zero-values"
,browsers:"All",init:function(e,t){"use strict";var n=this;e.addListener("property"
,function(e){var r=e.value.parts,i=0,s=r.length;while(i<s)(r[i].units||r[i].type==="percentage"
)&&r[i].value===0&&r[i].type!=="time"&&t.report("Values of 0 shouldn't have units specified."
,r[i].line,r[i].col,n),i++})}}),function(){"use strict";var e=function(e){return!
e||e.constructor!==String?"":e.replace(/["&><]/g,function(e){switch(e){case'"':return"&quot;"
;case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;"}})};i.addFormatter
({id:"checkstyle-xml",name:"Checkstyle XML format",startFormat:function(){return'<?xml version="1.0" encoding="utf-8"?><checkstyle>'
},endFormat:function(){return"</checkstyle>"},readError:function(t,n){return'<file name="'+
e(t)+'"><error line="0" column="0" severty="error" message="'+e(n)+'"></error></file>'
},formatResults:function(t,n){var r=t.messages,s=[],o=function(e){return!!e&&"name"in
e?"net.csslint."+e.name.replace(/\s/g,""):""};return r.length>0&&(s.push('<file name="'+
n+'">'),i.Util.forEach(r,function(t){t.rollup||s.push('<error line="'+t.line+'" column="'+
t.col+'" severity="'+t.type+'"'+' message="'+e(t.message)+'" source="'+o(t.rule)+'"/>'
)}),s.push("</file>")),s.join("")}})}(),i.addFormatter({id:"compact",name:"Compact, 'porcelain' format"
,startFormat:function(){"use strict";return""},endFormat:function(){"use strict"
;return""},formatResults:function(e,t,n){"use strict";var r=e.messages,s="";n=n||
{};var o=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return r.length===0?
n.quiet?"":t+": Lint Free!":(i.Util.forEach(r,function(e){e.rollup?s+=t+": "+o(e
.type)+" - "+e.message+" ("+e.rule.id+")\n":s+=t+": line "+e.line+", col "+e.col+", "+
o(e.type)+" - "+e.message+" ("+e.rule.id+")\n"}),s)}}),i.addFormatter({id:"csslint-xml"
,name:"CSSLint XML format",startFormat:function(){"use strict";return'<?xml version="1.0" encoding="utf-8"?><csslint>'
},endFormat:function(){"use strict";return"</csslint>"},formatResults:function(e
,t){"use strict";var n=e.messages,r=[],s=function(e){return!e||e.constructor!==String?""
:e.replace(/"/g,"'").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"
)};return n.length>0&&(r.push('<file name="'+t+'">'),i.Util.forEach(n,function(e
){e.rollup?r.push('<issue severity="'+e.type+'" reason="'+s(e.message)+'" evidence="'+
s(e.evidence)+'"/>'):r.push('<issue line="'+e.line+'" char="'+e.col+'" severity="'+
e.type+'"'+' reason="'+s(e.message)+'" evidence="'+s(e.evidence)+'"/>')}),r.push
("</file>")),r.join("")}}),i.addFormatter({id:"json",name:"JSON",startFormat:function(
){"use strict";return this.json=[],""},endFormat:function(){"use strict";var e=""
;return this.json.length>0&&(this.json.length===1?e=JSON.stringify(this.json[0])
:e=JSON.stringify(this.json)),e},formatResults:function(e,t,n){"use strict";return(
e.messages.length>0||!n.quiet)&&this.json.push({filename:t,messages:e.messages,stats
:e.stats}),""}}),i.addFormatter({id:"junit-xml",name:"JUNIT XML format",startFormat
:function(){"use strict";return'<?xml version="1.0" encoding="utf-8"?><testsuites>'
},endFormat:function(){"use strict";return"</testsuites>"},formatResults:function(
e,t){"use strict";var n=e.messages,r=[],i={error:0,failure:0},s=function(e){return!!
e&&"name"in e?"net.csslint."+e.name.replace(/\s/g,""):""},o=function(e){return!e||
e.constructor!==String?"":e.replace(/"/g,"'").replace(/</g,"&lt;").replace(/>/g,"&gt;"
)};return n.length>0&&(n.forEach(function(e){var t=e.type==="warning"?"error":e.
type;e.rollup||(r.push('<testcase time="0" name="'+s(e.rule)+'">'),r.push("<"+t+' message="'+
o(e.message)+'"><![CDATA['+e.line+":"+e.col+":"+o(e.evidence)+"]]></"+t+">"),r.push
("</testcase>"),i[t]+=1)}),r.unshift('<testsuite time="0" tests="'+n.length+'" skipped="0" errors="'+
i.error+'" failures="'+i.failure+'" package="net.csslint" name="'+t+'">'),r.push
("</testsuite>")),r.join("")}}),i.addFormatter({id:"lint-xml",name:"Lint XML format"
,startFormat:function(){"use strict";return'<?xml version="1.0" encoding="utf-8"?><lint>'
},endFormat:function(){"use strict";return"</lint>"},formatResults:function(e,t)
{"use strict";var n=e.messages,r=[],s=function(e){return!e||e.constructor!==String?""
:e.replace(/"/g,"'").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"
)};return n.length>0&&(r.push('<file name="'+t+'">'),i.Util.forEach(n,function(e
){if(e.rollup)r.push('<issue severity="'+e.type+'" reason="'+s(e.message)+'" evidence="'+
s(e.evidence)+'"/>');else{var t="";e.rule&&e.rule.id&&(t='rule="'+s(e.rule.id)+'" '
),r.push("<issue "+t+'line="'+e.line+'" char="'+e.col+'" severity="'+e.type+'"'+' reason="'+
s(e.message)+'" evidence="'+s(e.evidence)+'"/>')}}),r.push("</file>")),r.join(""
)}}),i.addFormatter({id:"text",name:"Plain Text",startFormat:function(){"use strict"
;return""},endFormat:function(){"use strict";return""},formatResults:function(e,
t,n){"use strict";var r=e.messages,s="";n=n||{};if(r.length===0)return n.quiet?""
:"\n\ncsslint: No errors in "+t+".";s="\n\ncsslint: There ",r.length===1?s+="is 1 problem"
:s+="are "+r.length+" problems",s+=" in "+t+".";var o=t.lastIndexOf("/"),u=t;return o===-1&&
(o=t.lastIndexOf("\\")),o>-1&&(u=t.substring(o+1)),i.Util.forEach(r,function(e,t
){s=s+"\n\n"+u,e.rollup?(s+="\n"+(t+1)+": "+e.type,s+="\n"+e.message):(s+="\n"+(
t+1)+": "+e.type+" at line "+e.line+", col "+e.col,s+="\n"+e.message,s+="\n"+e.evidence
)}),s}}),i}()
local.CSSLint = CSSLint;
/* jslint ignore:end */



// jslint-hack - var
var jslint_extra;
var jslint_result;
var line_ignore;
var lines_extra;
/*
file JSLint/jslint.js
2018-11-14T03:04:33Z - shGithubDateCommitted https://github.com/douglascrockford/JSLint/commits/de413767154641f490d6e96185e525255cca5f7e
https://github.com/douglascrockford/JSLint/blob/de413767154641f490d6e96185e525255cca5f7e/jslint.js
node -e '
"use strict";
process.argv[1].replace((
    /\\u002f/gm
), "\u002f").replace((
    /^(-[\S\s]*?\n)(\+[\S\s]*?\n)\n/gm
), function (ignore, match1, match2) {
    process.argv[2] = process.argv[2].replace(
        match1.replace((
            /^-/gm
        ), ""),
        match2.replace((
            /^\+/gm
        ), "")
    );
});
process.argv[2] = process.argv[2].replace((
    /(\n\u0020*?)throw\u0020/g
), "$1// jslint-hack - early_stop = true$1early_stop = true;$&").replace((
    /(\n\u0020*?)if\u0020\(right.from\u0020\S+/g
), "$1// jslint-hack - expected_at$1if (right.from !==").replace((
    /\bconst\u0020|\blet\u0020/g
), "var ");
console.log(process.argv[2]);
' '
-// jslint.js
+\u002f* jslint utility2:true *\u002f
+var next_line_extra = null;
+var warn_at_extra = null;
+// jslint.js

-\u002f*property
+// jslint-hack - property
+\u002f*\property

-    warnings.push(warning);
+    // jslint-hack - warn_at_extra
+    warn_at_extra(warning, warnings);

-            d
+            // jslint-hack - the_token
+            d || the_token

-        if (source_line !== undefined) {
+        if (source_line !== undefined) {
+            // jslint-hack - next_line_extra
+            source_line = next_line_extra(source_line, line);

-        if (!source_line) {
-            source_line = next_line();
-            from = 0;
-            return (
-                source_line === undefined
-                ? (
-                    mega_mode
-                    ? stop_at("unclosed_mega", mega_line, mega_from)
-                    : make("(end)")
-                )
-                : lex()
-            );
-        }
+        // jslint-hack - un-recurse
+        while (!source_line) {
+            source_line = next_line();
+            from = 0;
+            if (source_line === undefined) {
+                return (
+                    mega_mode
+                    ? stop_at("unclosed_mega", mega_line, mega_from)
+                    : make("(end)")
+                );
+            }
+        }

-        if (snippet === "//") {
+        if (snippet === "//") {
+            // jslint-hack - too_long
+            if (option.utility2 && (
+                /^!!|^\u0020https:\/\//m
+            ).test(source_line)) {
+                regexp_seen = true;
+            }

-                array.push(source_line);
+                array.push(source_line);
+                // jslint-hack - too_long
+                if (option.utility2 && (
+                    /^\S|^\u0020{2}|\u0020https:\/\/|\u0020this\u0020.*?\u0020package\u0020will\u0020/m
+                ).test(source_line)) {
+                    regexp_seen = true;
+                }

-        warn("unexpected_a", right);
+        // jslint-hack - unexpected_a
+        warn("unexpected_a", right, null, null, left, right);

-                warn(
-                    (
-                        (
-                            thing.id === "(string)"
-                            && thing.value === "use strict"
-                        )
-                        ? "unexpected_a"
-                        : "unexpected_expression_a"
-                    ),
-                    thing
-                );
+                warn((
+                    // jslint-hack - ternary-condition
+                    (
+                        thing.id === "(string)"
+                        && thing.value === "use strict"
+                    )
+                    ? "unexpected_a"
+                    : "unexpected_expression_a"
+                ), thing);

-                        margin += 4;
+                        // jslint-hack - conditional-margin
+                        if (
+                            !option.utility2
+                            || lines[right.line].startsWith(" ")
+                        ) {
+                            margin += 4;
+                        }

-                    } else if (right.id === "." || right.id === "?.") {
-                        no_space_only();
+                    } else if (right.id === "." || right.id === "?.") {
+                        // jslint-hack - method-chain
+                        // https://github.com/douglascrockford/JSLint/commit/752c82d860ac14d35d492dc5c6ad0a0ed8227e76#diff-01d3d81a6eb6d82af3c377b55dc4fa28L4692
+                        if (left.line === right.line) {
+                            no_space();
+                        } else {
+                            at_margin(0);
+                        }

-        early_stop = true;
+        // jslint-hack - early_stop = false
+        early_stop = false;

-            if (warnings.length === 0) {
+            // jslint-hack - !early_stop
+            if (!early_stop) {

-    } catch (e) {
+    } catch (e) {
+        // jslint-hack - e.early_stop = true
+        e.early_stop = true;

' \
"$(curl https://raw.githubusercontent.com/douglascrockford/JSLint/de413767154641f490d6e96185e525255cca5f7e/jslint.js)" > /tmp/aa.js; utility2-jslint autofix /tmp/aa.js
*/
/* jslint utility2:true */
var next_line_extra = null;
var warn_at_extra = null;
// jslint.js
// 2018-11-13
// Copyright (c) 2015 Douglas Crockford  (www.JSLint.com)

// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:

// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.

// The Software shall be used for Good, not Evil.

// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.

// jslint(source, option_object, global_array) is a function that takes 3
// arguments. The second two arguments are optional.

//      source          A text to analyze, a string or an array of strings.
//      option_object   An object whose keys correspond to option names.
//      global_array    An array of strings containing global variables that
//                      the file is allowed readonly access.

// jslint returns an object containing its results. The object contains a lot
// of valuable information. It can be used to generate reports. The object
// contains:

//      directives: an array of directive comment tokens.
//      edition: the version of JSLint that did the analysis.
//      exports: the names exported from the module.
//      froms: an array of strings representing each of the imports.
//      functions: an array of objects that represent all of the functions
//              declared in the file.
//      global: an object representing the global object. Its .context property
//              is an object containing a property for each global variable.
//      id: "(JSLint)"
//      json: true if the file is a JSON text.
//      lines: an array of strings, the source.
//      module: true if an import or export statement was used.
//      ok: true if no warnings were generated. This is what you want.
//      option: the option argument.
//      property: a property object.
//      stop: true if JSLint was unable to finish. You don't want this.
//      tokens: an array of objects representing the tokens in the file.
//      tree: the token objects arranged in a tree.
//      warnings: an array of warning objects. A warning object can contain:
//          name: "JSLintError"
//          column: A column number in the file.
//          line: A line number in the file.
//          code: A warning code string.
//          message: The warning message string.
//          a: Exhibit A.
//          b: Exhibit B.
//          c: Exhibit C.
//          d: Exhibit D.

// jslint works in several phases. In any of these phases, errors might be
// found. Sometimes JSLint is able to recover from an error and continue
// parsing. In some cases, it cannot and will stop early. If that should happen,
// repair your code and try again.

// Phases:

//      1. If the source is a single string, split it into an array of strings.
//      2. Turn the source into an array of tokens.
//      3. Furcate the tokens into a parse tree.
//      4. Walk the tree, traversing all of the nodes of the tree. It is a
//          recursive traversal. Each node may be processed on the way down
//          (preaction) and on the way up (postaction).
//      5. Check the whitespace between the tokens.

// jslint can also examine JSON text. It decides that a file is JSON text if
// the first token is "[" or "{". Processing of JSON text is much simpler than
// the processing of JavaScript programs. Only the first three phases are
// required.

// WARNING: JSLint will hurt your feelings.

// jslint-hack - property
/*\property
    a, and, arity, assign, b, bad_assignment_a, bad_directive_a, bad_get,
    bad_module_name_a, bad_option_a, bad_property_a, bad_set, bitwise, block,
    body, browser, c, calls, catch, charCodeAt, closer, closure, code, column,
    complex, concat, constant, context, convert, couch, create, d, dead,
    default, devel, directive, directives, disrupt, dot, duplicate_a, edition,
    ellipsis, else, empty_block, escape_mega, eval, every, expected_a,
    expected_a_at_b_c, expected_a_b, expected_a_b_from_c_d, expected_a_before_b,
    expected_a_next_at_b, expected_digits_after_a, expected_four_digits,
    expected_identifier_a, expected_line_break_a_b, expected_regexp_factor_a,
    expected_space_a_b, expected_statements_a, expected_string_a,
    expected_type_string_a, exports, expression, extra, finally, flag, for,
    forEach, free, freeze, freeze_exports, from, froms, fud, fudge,
    function_in_loop, functions, g, getset, global, i, id, identifier, import,
    inc, indexOf, infix_in, init, initial, isArray, isNaN, join, json, keys,
    label, label_a, lbp, led, length, level, line, lines, live, long, loop, m,
    margin, match, message, misplaced_a, misplaced_directive_a, missing_browser,
    missing_m, module, multivar, naked_block, name, names, nested_comment, new,
    node, not_label_a, nr, nud, number_isNaN, ok, open, opening, option,
    out_of_scope_a, parameters, parent, pop, property, push, quote,
    redefinition_a_b, replace, required_a_optional_b, reserved_a, role, search,
    shebang, signature, single, slice, some, sort, split, startsWith, statement,
    stop, strict, subscript_a, switch, test, this, thru, toString, todo_comment,
    tokens, too_long, too_many_digits, tree, try, type, u, unclosed_comment,
    unclosed_mega, unclosed_string, undeclared_a, unexpected_a,
    unexpected_a_after_b, unexpected_a_before_b, unexpected_at_top_level_a,
    unexpected_char_a, unexpected_comment, unexpected_directive_a,
    unexpected_expression_a, unexpected_label_a, unexpected_parens,
    unexpected_space_a_b, unexpected_statement_a, unexpected_trailing_space,
    unexpected_typeof_a, uninitialized_a, unreachable_a,
    unregistered_property_a, unsafe, unused_a, use_double, use_open, use_spaces,
    use_strict, used, value, var_loop, var_switch, variable, warning, warnings,
    weird_condition_a, weird_expression_a, weird_loop, weird_relation_a, white,
    wrap_condition, wrap_immediate, wrap_parameter, wrap_regexp, wrap_unary,
    wrapped, writable, y
*/

function empty() {

// The empty function produces a new empty object that inherits nothing. This is
// much better than '{}' because confusions around accidental method names like
// 'constructor' are completely avoided.

    return Object.create(null);
}

function populate(array, object = empty(), value = true) {

// Augment an object by taking property names from an array of strings.

    array.forEach(function (name) {
        object[name] = value;
    });
    return object;
}

var allowed_option = {

// These are the options that are recognized in the option object or that may
// appear in a /*jslint*/ directive. Most options will have a boolean value,
// usually true. Some options will also predefine some number of global
// variables.

    bitwise: true,
    browser: [
        "caches", "clearInterval", "clearTimeout", "document", "DOMException",
        "Element", "Event", "event", "FileReader", "FormData", "history",
        "localStorage", "location", "MutationObserver", "name", "navigator",
        "screen", "sessionStorage", "setInterval", "setTimeout", "Storage",
        "TextDecoder", "TextEncoder", "URL", "window", "Worker",
        "XMLHttpRequest"
    ],
    couch: [
        "emit", "getRow", "isArray", "log", "provides", "registerType",
        "require", "send", "start", "sum", "toJSON"
    ],
    convert: true,
    devel: [
        "alert", "confirm", "console", "prompt"
    ],
    eval: true,
    for: true,
    fudge: true,
    getset: true,
    long: true,
    multivar: true,
    node: [
        "Buffer", "clearImmediate", "clearInterval", "clearTimeout",
        "console", "exports", "module", "process", "require",
        "setImmediate", "setInterval", "setTimeout", "TextDecoder",
        "TextEncoder", "URL", "URLSearchParams", "__dirname", "__filename"
    ],
    single: true,
    this: true,
    white: true
};

var anticondition = populate([
    "?", "~", "&", "|", "^", "<<", ">>", ">>>", "+", "-", "*", "/", "%",
    "typeof", "(number)", "(string)"
]);

// These are the bitwise operators.

var bitwiseop = populate([
    "~", "^", "^=", "&", "&=", "|", "|=", "<<", "<<=", ">>", ">>=",
    ">>>", ">>>="
]);

var escapeable = populate([
    "\\", "/", "`", "b", "f", "n", "r", "t"
]);

var opener = {

// The open and close pairs.

    "(": ")", // paren
    "[": "]", // bracket
    "{": "}", // brace
    "${": "}" // mega
};

// The relational operators.

var relationop = populate([
    "!=", "!==", "==", "===", "<", "<=", ">", ">="
]);

// This is the set of infix operators that require a space on each side.

var spaceop = populate([
    "!=", "!==", "%", "%=", "&", "&=", "&&", "*", "*=", "+=", "-=", "/",
    "/=", "<", "<=", "<<", "<<=", "=", "==", "===", "=>", ">", ">=",
    ">>", ">>=", ">>>", ">>>=", "^", "^=", "|", "|=", "||"
]);

var standard = [

// These are the globals that are provided by the language standard.

    "Array", "ArrayBuffer", "Boolean", "DataView", "Date", "decodeURI",
    "decodeURIComponent", "encodeURI", "encodeURIComponent", "Error",
    "EvalError", "Float32Array", "Float64Array", "Generator",
    "GeneratorFunction", "Int8Array", "Int16Array", "Int32Array", "Intl",
    "JSON", "Map", "Math", "Number", "Object", "parseInt", "parseFloat",
    "Promise", "Proxy", "RangeError", "ReferenceError", "Reflect", "RegExp",
    "Set", "String", "Symbol", "SyntaxError", "System", "TypeError",
    "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array",
    "URIError", "WeakMap", "WeakSet"
];

var bundle = {

// The bundle contains the raw text messages that are generated by jslint. It
// seems that they are all error messages and warnings. There are no "Atta
// boy!" or "You are so awesome!" messages. There is no positive reinforcement
// or encouragement. This relentless negativity can undermine self-esteem and
// wound the inner child. But if you accept it as sound advice rather than as
// personal criticism, it can make your programs better.

    and: "The '&&' subexpression should be wrapped in parens.",
    bad_assignment_a: "Bad assignment to '{a}'.",
    bad_directive_a: "Bad directive '{a}'.",
    bad_get: "A get function takes no parameters.",
    bad_module_name_a: "Bad module name '{a}'.",
    bad_option_a: "Bad option '{a}'.",
    bad_property_a: "Bad property name '{a}'.",
    bad_set: "A set function takes one parameter.",
    duplicate_a: "Duplicate '{a}'.",
    empty_block: "Empty block.",
    escape_mega: "Unexpected escapement in mega literal.",
    expected_a: "Expected '{a}'.",
    expected_a_at_b_c: "Expected '{a}' at column {b}, not column {c}.",
    expected_a_b: "Expected '{a}' and instead saw '{b}'.",
    expected_a_b_from_c_d: (
        "Expected '{a}' to match '{b}' from line {c} and instead saw '{d}'."
    ),
    expected_a_before_b: "Expected '{a}' before '{b}'.",
    expected_a_next_at_b: "Expected '{a}' at column {b} on the next line.",
    expected_digits_after_a: "Expected digits after '{a}'.",
    expected_four_digits: "Expected four digits after '\\u'.",
    expected_identifier_a: "Expected an identifier and instead saw '{a}'.",
    expected_line_break_a_b: "Expected a line break between '{a}' and '{b}'.",
    expected_regexp_factor_a: "Expected a regexp factor and instead saw '{a}'.",
    expected_space_a_b: "Expected one space between '{a}' and '{b}'.",
    expected_statements_a: "Expected statements before '{a}'.",
    expected_string_a: "Expected a string and instead saw '{a}'.",
    expected_type_string_a: "Expected a type string and instead saw '{a}'.",
    freeze_exports: (
        "Expected 'Object.freeze('. All export values should be frozen."
    ),
    function_in_loop: "Don't make functions within a loop.",
    infix_in: (
        "Unexpected 'in'. Compare with undefined, "
        + "or use the hasOwnProperty method instead."
    ),
    label_a: "'{a}' is a statement label.",
    misplaced_a: "Place '{a}' at the outermost level.",
    misplaced_directive_a: (
        "Place the '/*{a}*/' directive before the first statement."
    ),
    missing_browser: "/*global*/ requires the Assume a browser option.",
    missing_m: "Expected 'm' flag on a multiline regular expression.",
    naked_block: "Naked block.",
    nested_comment: "Nested comment.",
    not_label_a: "'{a}' is not a label.",
    number_isNaN: "Use Number.isNaN function to compare with NaN.",
    out_of_scope_a: "'{a}' is out of scope.",
    redefinition_a_b: "Redefinition of '{a}' from line {b}.",
    required_a_optional_b: (
        "Required parameter '{a}' after optional parameter '{b}'."
    ),
    reserved_a: "Reserved name '{a}'.",
    subscript_a: "['{a}'] is better written in dot notation.",
    todo_comment: "Unexpected TODO comment.",
    too_long: "Line is longer than 80 characters.",
    too_many_digits: "Too many digits.",
    unclosed_comment: "Unclosed comment.",
    unclosed_mega: "Unclosed mega literal.",
    unclosed_string: "Unclosed string.",
    undeclared_a: "Undeclared '{a}'.",
    unexpected_a: "Unexpected '{a}'.",
    unexpected_a_after_b: "Unexpected '{a}' after '{b}'.",
    unexpected_a_before_b: "Unexpected '{a}' before '{b}'.",
    unexpected_at_top_level_a: "Expected '{a}' to be in a function.",
    unexpected_char_a: "Unexpected character '{a}'.",
    unexpected_comment: "Unexpected comment.",
    unexpected_directive_a: "When using modules, don't use directive '/*{a}'.",
    unexpected_expression_a: (
        "Unexpected expression '{a}' in statement position."
    ),
    unexpected_label_a: "Unexpected label '{a}'.",
    unexpected_parens: "Don't wrap function literals in parens.",
    unexpected_space_a_b: "Unexpected space between '{a}' and '{b}'.",
    unexpected_statement_a: (
        "Unexpected statement '{a}' in expression position."
    ),
    unexpected_trailing_space: "Unexpected trailing space.",
    unexpected_typeof_a: (
        "Unexpected 'typeof'. Use '===' to compare directly with {a}."
    ),
    uninitialized_a: "Uninitialized '{a}'.",
    unreachable_a: "Unreachable '{a}'.",
    unregistered_property_a: "Unregistered property name '{a}'.",
    unsafe: "Unsafe character '{a}'.",
    unused_a: "Unused '{a}'.",
    use_double: "Use double quotes, not single quotes.",
    use_open: (
        "Wrap a ternary expression in parens, "
        + "with a line break after the left paren."
    ),
    use_spaces: "Use spaces, not tabs.",
    use_strict: "This function needs a \"use strict\" pragma.",
    var_loop: "Don't declare variables in a loop.",
    var_switch: "Don't declare variables in a switch.",
    weird_condition_a: "Weird condition '{a}'.",
    weird_expression_a: "Weird expression '{a}'.",
    weird_loop: "Weird loop.",
    weird_relation_a: "Weird relation '{a}'.",
    wrap_condition: "Wrap the condition in parens.",
    wrap_immediate: (
        "Wrap an immediate function invocation in parentheses to assist "
        + "the reader in understanding that the expression is the result "
        + "of a function, and not the function itself."
    ),
    wrap_parameter: "Wrap the parameter in parens.",
    wrap_regexp: "Wrap this regexp in parens to avoid confusion.",
    wrap_unary: "Wrap the unary expression in parens."
};

// Regular expression literals:

// supplant {variables}
var rx_supplant = (
    /\{([^{}]*)\}/g
);
// carriage return, carriage return linefeed, or linefeed
var rx_crlf = (
    /\n|\r\n?/
);
// unsafe characters that are silently deleted by one or more browsers
var rx_unsafe = (
    /[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/
);
// identifier
var rx_identifier = (
    /^([a-zA-Z_$][a-zA-Z0-9_$]*)$/
);
var rx_module = (
    /^[a-zA-Z0-9_$:.@\-\/]+$/
);
var rx_bad_property = (
    /^_|\$|Sync\$|_$/
);
// star slash
var rx_star_slash = (
    /\*\//
);
// slash star
var rx_slash_star = (
    /\/\*/
);
// slash star or ending slash
var rx_slash_star_or_slash = (
    /\/\*|\/$/
);
// uncompleted work comment
var rx_todo = (
    /\b(?:todo|TO\s?DO|HACK)\b/
);
// tab
var rx_tab = (
    /\t/g
);
// directive
var rx_directive = (
    /^(jslint|property|global)\s+(.*)$/
);
var rx_directive_part = (
    /^([a-zA-Z$_][a-zA-Z0-9$_]*)(?::\s*(true|false))?,?\s*(.*)$/
);
// token (sorry it is so long)
var rx_token = (
    /^((\s+)|([a-zA-Z_$][a-zA-Z0-9_$]*)|[(){}\[\],:;'"~`]|\?\.?|=(?:==?|>)?|\.+|[*\/][*\/=]?|\+[=+]?|-[=\-]?|[\^%]=?|&[&=]?|\|[|=]?|>{1,3}=?|<<?=?|!(?:!|==?)?|(0|[1-9][0-9]*))(.*)$/
);
var rx_digits = (
    /^([0-9]+)(.*)$/
);
var rx_hexs = (
    /^([0-9a-fA-F]+)(.*)$/
);
var rx_octals = (
    /^([0-7]+)(.*)$/
);
var rx_bits = (
    /^([01]+)(.*)$/
);
// mega
var rx_mega = (
    /[`\\]|\$\{/
);
// JSON number
var rx_JSON_number = (
    /^-?\d+(?:\.\d*)?(?:e[\-+]?\d+)?$/i
);
// initial cap
var rx_cap = (
    /^[A-Z]/
);

function is_letter(string) {
    return (
        (string >= "a" && string <= "z\uffff")
        || (string >= "A" && string <= "Z\uffff")
    );
}

function supplant(string, object) {
    return string.replace(rx_supplant, function (found, filling) {
        var replacement = object[filling];
        return (
            replacement !== undefined
            ? replacement
            : found
        );
    });
}

var anon; // The guessed name for anonymous functions.
var block_stack; // The stack of blocks.
var blockage; // The current block.
var declared_globals; // The object containing the global declarations.
var directive_mode; // true if directives are still allowed.
var directives; // The directive comments.
var early_stop; // true if JSLint cannot finish.
var exports; // The exported names and values.
var froms; // The array collecting all import-from strings.
var fudge; // true if the natural numbers start with 1.
var functionage; // The current function.
var functions; // The array containing all of the functions.
var global; // The global object; the outermost context.
var json_mode; // true if parsing JSON.
var lines; // The array containing source lines.
var mega_mode; // true if currently parsing a megastring literal.
var module_mode; // true if import or export was used.
var next_token; // The next token to be examined in the parse.
var option; // The options parameter.
var property; // The object containing the tallied property names.
var shebang; // true if a #! was seen on the first line.
var stack; // The stack of functions.
var syntax; // The object containing the parser.
var tenure; // The predefined property registry.
var token; // The current token being examined in the parse.
var token_nr; // The number of the next token.
var tokens; // The array of tokens.
var tree; // The abstract parse tree.
var var_mode; // "var" if using var; "let" if using let.
var warnings; // The array collecting all generated warnings.

// Error reportage functions:

function artifact(the_token) {

// Return a string representing an artifact.

    if (the_token === undefined) {
        the_token = next_token;
    }
    return (
        (the_token.id === "(string)" || the_token.id === "(number)")
        ? String(the_token.value)
        : the_token.id
    );
}

function artifact_line(the_token) {

// Return the fudged line number of an artifact.

    if (the_token === undefined) {
        the_token = next_token;
    }
    return the_token.line + fudge;
}

function artifact_column(the_token) {

// Return the fudged column number of an artifact.

    if (the_token === undefined) {
        the_token = next_token;
    }
    return the_token.from + fudge;
}

function warn_at(code, line, column, a, b, c, d) {

// Report an error at some line and column of the program. The warning object
// resembles an exception.

    var warning = { // ~~
        name: "JSLintError",
        column: column,
        line: line,
        code: code
    };
    if (a !== undefined) {
        warning.a = a;
    }
    if (b !== undefined) {
        warning.b = b;
    }
    if (c !== undefined) {
        warning.c = c;
    }
    if (d !== undefined) {
        warning.d = d;
    }
    warning.message = supplant(bundle[code] || code, warning);
    // jslint-hack - warn_at_extra
    warn_at_extra(warning, warnings);
    return warning;
}

function stop_at(code, line, column, a, b, c, d) {

// Same as warn_at, except that it stops the analysis.

    // jslint-hack - early_stop = true
    early_stop = true;
    throw warn_at(code, line, column, a, b, c, d);
}

function warn(code, the_token, a, b, c, d) {

// Same as warn_at, except the warning will be associated with a specific token.
// If there is already a warning on this token, suppress the new one. It is
// likely that the first warning will be the most meaningful.

    if (the_token === undefined) {
        the_token = next_token;
    }
    if (the_token.warning === undefined) {
        the_token.warning = warn_at(
            code,
            the_token.line,
            the_token.from,
            a || artifact(the_token),
            b,
            c,
            // jslint-hack - the_token
            d || the_token
        );
        return the_token.warning;
    }
}

function stop(code, the_token, a, b, c, d) {

// Similar to warn and stop_at. If the token already had a warning, that
// warning will be replaced with this new one. It is likely that the stopping
// warning will be the more meaningful.

    if (the_token === undefined) {
        the_token = next_token;
    }
    delete the_token.warning;
    // jslint-hack - early_stop = true
    early_stop = true;
    throw warn(code, the_token, a, b, c, d);
}

// Tokenize:

function tokenize(source) {

// tokenize takes a source and produces from it an array of token objects.
// JavaScript is notoriously difficult to tokenize because of the horrible
// interactions between automatic semicolon insertion, regular expression
// literals, and now megastring literals. JSLint benefits from eliminating
// automatic semicolon insertion and nested megastring literals, which allows
// full tokenization to precede parsing.

// If the source is not an array, then it is split into lines at the
// carriage return/linefeed.

    lines = (
        Array.isArray(source)
        ? source
        : source.split(rx_crlf)
    );
    tokens = [];

    var char; // a popular character
    var column = 0; // the column number of the next character
    var first; // the first token
    var from; // the starting column number of the token
    var line = -1; // the line number of the next character
    var nr = 0; // the next token number
    var previous = global; // the previous token including comments
    var prior = global; // the previous token excluding comments
    var mega_from; // the starting column of megastring
    var mega_line; // the starting line of megastring
    var regexp_seen; // regular expression literal seen on this line
    var snippet; // a piece of string
    var source_line = ""; // the remaining line source string
    var whole_line = ""; // the whole line source string

    if (lines[0].startsWith("#!")) {
        line = 0;
        shebang = true;
    }

    function next_line() {

// Put the next line of source in source_line. If the line contains tabs,
// replace them with spaces and give a warning. Also warn if the line contains
// unsafe characters or is too damn long.

        var at;
        if (
            !option.long
            && whole_line.length > 80
            // jslint-hack - 100
            && whole_line.length > (
                option.utility2
                ? 100
                : 80
            )
            && !json_mode
            && first
            && !regexp_seen
        ) {
            warn_at("too_long", line, 80);
        }
        column = 0;
        line += 1;
        regexp_seen = false;
        source_line = lines[line];
        whole_line = source_line || "";
        if (source_line !== undefined) {
            // jslint-hack - next_line_extra
            source_line = next_line_extra(source_line, line);
            at = source_line.search(rx_tab);
            if (at >= 0) {
                if (!option.white) {
                    warn_at("use_spaces", line, at + 1);
                }
                source_line = source_line.replace(rx_tab, " ");
            }
            at = source_line.search(rx_unsafe);
            if (at >= 0) {
                warn_at(
                    "unsafe",
                    line,
                    column + at,
                    "U+" + source_line.charCodeAt(at).toString(16)
                );
            }
            if (!option.white && source_line.slice(-1) === " ") {
                warn_at(
                    "unexpected_trailing_space",
                    line,
                    source_line.length - 1
                );
            }
        }
        return source_line;
    }

// Most tokens, including the identifiers, operators, and punctuators, can be
// found with a regular expression. Regular expressions cannot correctly match
// regular expression literals, so we will match those the hard way. String
// literals and number literals can be matched by regular expressions, but they
// don't provide good warnings. The functions snip, next_char, prev_char,
// some_digits, and escape help in the parsing of literals.

    function snip() {

// Remove the last character from snippet.

        snippet = snippet.slice(0, -1);
    }

    function next_char(match) {

// Get the next character from the source line. Remove it from the source_line,
// and append it to the snippet. Optionally check that the previous character
// matched an expected value.

        if (match !== undefined && char !== match) {
            return stop_at((
                char === ""
                ? "expected_a"
                : "expected_a_b"
            ), line, column - 1, match, char);
        }
        if (source_line) {
            char = source_line[0];
            source_line = source_line.slice(1);
            snippet += char;
        } else {
            char = "";
            snippet += " ";
        }
        column += 1;
        return char;
    }

    function back_char() {

// Back up one character by moving a character from the end of the snippet to
// the front of the source_line.

        if (snippet) {
            char = snippet.slice(-1);
            source_line = char + source_line;
            column -= 1;
            snip();
        } else {
            char = "";
        }
        return char;
    }

    function some_digits(rx, quiet) {
        var result = source_line.match(rx);
        if (result) {
            char = result[1];
            column += char.length;
            source_line = result[2];
            snippet += char;
        } else {
            char = "";
            if (!quiet) {
                warn_at(
                    "expected_digits_after_a",
                    line,
                    column,
                    snippet
                );
            }
        }
        return char.length;
    }

    function escape(extra) {
        next_char("\\");
        if (escapeable[char] === true) {
            return next_char();
        }
        if (char === "") {
            return stop_at("unclosed_string", line, column);
        }
        if (char === "u") {
            if (next_char("u") === "{") {
                if (json_mode) {
                    warn_at("unexpected_a", line, column - 1, char);
                }
                if (some_digits(rx_hexs) > 5) {
                    warn_at("too_many_digits", line, column - 1);
                }
                if (next_char() !== "}") {
                    stop_at("expected_a_before_b", line, column, "}", char);
                }
                return next_char();
            }
            back_char();
            if (some_digits(rx_hexs, true) < 4) {
                warn_at("expected_four_digits", line, column - 1);
            }
            return;
        }
        if (extra && extra.indexOf(char) >= 0) {
            return next_char();
        }
        warn_at("unexpected_a_before_b", line, column - 2, "\\", char);
    }

    function make(id, value, identifier) {

// Make the token object and append it to the tokens list.

        var the_token = {
            from: from,
            id: id,
            identifier: Boolean(identifier),
            line: line,
            nr: nr,
            thru: column
        };
        tokens[nr] = the_token;
        nr += 1;

// Directives must appear before the first statement.

        if (id !== "(comment)" && id !== ";") {
            directive_mode = false;
        }

// If the token is to have a value, give it one.

        if (value !== undefined) {
            the_token.value = value;
        }

// If this token is an identifier that touches a preceding number, or
// a "/", comment, or regular expression literal that touches a preceding
// comment or regular expression literal, then give a missing space warning.
// This warning is not suppressed by option.white.

        if (
            previous.line === line
            && previous.thru === from
            && (id === "(comment)" || id === "(regexp)" || id === "/")
            && (previous.id === "(comment)" || previous.id === "(regexp)")
        ) {
            warn(
                "expected_space_a_b",
                the_token,
                artifact(previous),
                artifact(the_token)
            );
        }
        if (previous.id === "." && id === "(number)") {
            warn("expected_a_before_b", previous, "0", ".");
        }
        if (prior.id === "." && the_token.identifier) {
            the_token.dot = true;
        }

// The previous token is used to detect adjacency problems.

        previous = the_token;

// The prior token is a previous token that was not a comment. The prior token
// is used to disambiguate "/", which can mean division or regular expression
// literal.

        if (previous.id !== "(comment)") {
            prior = previous;
        }
        return the_token;
    }

    function parse_directive(the_comment, body) {

// JSLint recognizes three directives that can be encoded in comments. This
// function processes one item, and calls itself recursively to process the
// next one.

        var result = body.match(rx_directive_part);
        if (result) {
            var allowed;
            var name = result[1];
            var value = result[2];
            if (the_comment.directive === "jslint") {
                allowed = allowed_option[name];
                if (
                    typeof allowed === "boolean"
                    || typeof allowed === "object"
                ) {
                    if (
                        value === ""
                        || value === "true"
                        || value === undefined
                    ) {
                        option[name] = true;
                        if (Array.isArray(allowed)) {
                            populate(allowed, declared_globals, false);
                        }
                    } else if (value === "false") {
                        option[name] = false;
                    } else {
                        warn("bad_option_a", the_comment, name + ":" + value);
                    }
                } else {
                    warn("bad_option_a", the_comment, name);
                }
            } else if (the_comment.directive === "property") {
                if (tenure === undefined) {
                    tenure = empty();
                }
                tenure[name] = true;
            } else if (the_comment.directive === "global") {
                if (value) {
                    warn("bad_option_a", the_comment, name + ":" + value);
                }
                declared_globals[name] = false;
                module_mode = the_comment;
            }
            return parse_directive(the_comment, result[3]);
        }
        if (body) {
            return stop("bad_directive_a", the_comment, body);
        }
    }

    function comment(snippet) {

// Make a comment object. Comments are not allowed in JSON text. Comments can
// include directives and notices of incompletion.

        var the_comment = make("(comment)", snippet);
        if (Array.isArray(snippet)) {
            snippet = snippet.join(" ");
        }
        if (!option.devel && rx_todo.test(snippet)) {
            warn("todo_comment", the_comment);
        }
        var result = snippet.match(rx_directive);
        if (result) {
            if (!directive_mode) {
                warn_at("misplaced_directive_a", line, from, result[1]);
            } else {
                the_comment.directive = result[1];
                parse_directive(the_comment, result[2]);
            }
            directives.push(the_comment);
        }
        return the_comment;
    }

    function regexp() {

// Parse a regular expression literal.

        var multi_mode = false;
        var result;
        var value;
        regexp_seen = true;

        function quantifier() {

// Match an optional quantifier.

            if (char === "?" || char === "*" || char === "+") {
                next_char();
            } else if (char === "{") {
                if (some_digits(rx_digits, true) === 0) {
                    warn_at("expected_a", line, column, "0");
                }
                if (next_char() === ",") {
                    some_digits(rx_digits, true);
                    next_char();
                }
                next_char("}");
            } else {
                return;
            }
            if (char === "?") {
                next_char("?");
            }
        }

        function subklass() {

// Match a character in a character class.

            if (char === "\\") {
                escape("BbDdSsWw-[]^");
                return true;
            }
            if (
                char === ""
                || char === "["
                || char === "]"
                || char === "/"
                || char === "^"
                || char === "-"
            ) {
                return false;
            }
            if (char === " ") {
                warn_at("expected_a_b", line, column, "\\u0020", " ");
            } else if (char === "`" && mega_mode) {
                warn_at("unexpected_a", line, column, "`");
            }
            next_char();
            return true;
        }

        function ranges() {

// Match a range of subclasses.

            if (subklass()) {
                if (char === "-") {
                    next_char("-");
                    if (!subklass()) {
                        return stop_at(
                            "unexpected_a",
                            line,
                            column - 1,
                            "-"
                        );
                    }
                }
                return ranges();
            }
        }

        function klass() {

// Match a class.

            next_char("[");
            if (char === "^") {
                next_char("^");
            }
            (function classy() {
                ranges();
                if (char !== "]" && char !== "") {
                    warn_at(
                        "expected_a_before_b",
                        line,
                        column,
                        "\\",
                        char
                    );
                    next_char();
                    return classy();
                }
            }());
            next_char("]");
        }

        function choice() {

            function group() {

// Match a group that starts with left paren.

                next_char("(");
                if (char === "?") {
                    next_char("?");
                    if (char === "=" || char === "!") {
                        next_char();
                    } else {
                        next_char(":");
                    }
                } else if (char === ":") {
                    warn_at("expected_a_before_b", line, column, "?", ":");
                }
                choice();
                next_char(")");
            }

            function factor() {
                if (
                    char === ""
                    || char === "/"
                    || char === "]"
                    || char === ")"
                ) {
                    return false;
                }
                if (char === "(") {
                    group();
                    return true;
                }
                if (char === "[") {
                    klass();
                    return true;
                }
                if (char === "\\") {
                    escape("BbDdSsWw^${}[]():=!.-|*+?");
                    return true;
                }
                if (
                    char === "?"
                    || char === "+"
                    || char === "*"
                    || char === "}"
                    || char === "{"
                ) {
                    warn_at(
                        "expected_a_before_b",
                        line,
                        column - 1,
                        "\\",
                        char
                    );
                } else if (char === "`") {
                    if (mega_mode) {
                        warn_at("unexpected_a", line, column - 1, "`");
                    }
                } else if (char === " ") {
                    warn_at(
                        "expected_a_b",
                        line,
                        column - 1,
                        "\\s",
                        " "
                    );
                } else if (char === "$") {
                    if (source_line[0] !== "/") {
                        multi_mode = true;
                    }
                } else if (char === "^") {
                    if (snippet !== "^") {
                        multi_mode = true;
                    }
                }
                next_char();
                return true;
            }

            function sequence(follow) {
                if (factor()) {
                    quantifier();
                    return sequence(true);
                }
                if (!follow) {
                    warn_at("expected_regexp_factor_a", line, column, char);
                }
            }

// Match a choice (a sequence that can be followed by | and another choice).

            sequence();
            if (char === "|") {
                next_char("|");
                return choice();
            }
        }

// Scan the regexp literal. Give a warning if the first character is = because
// /= looks like a division assignment operator.

        snippet = "";
        next_char();
        if (char === "=") {
            warn_at("expected_a_before_b", line, column, "\\", "=");
        }
        choice();

// Make sure there is a closing slash.

        snip();
        value = snippet;
        next_char("/");

// Process dangling flag letters.

        var allowed = {
            g: true,
            i: true,
            m: true,
            u: true,
            y: true
        };
        var flag = empty();
        (function make_flag() {
            if (is_letter(char)) {
                if (allowed[char] !== true) {
                    warn_at("unexpected_a", line, column, char);
                }
                allowed[char] = false;
                flag[char] = true;
                next_char();
                return make_flag();
            }
        }());
        back_char();
        if (char === "/" || char === "*") {
            return stop_at("unexpected_a", line, from, char);
        }
        result = make("(regexp)", char);
        result.flag = flag;
        result.value = value;
        if (multi_mode && !flag.m) {
            warn_at("missing_m", line, column);
        }
        return result;
    }

    function string(quote) {

// Make a string token.

        var the_token;
        snippet = "";
        next_char();

        return (function next() {
            if (char === quote) {
                snip();
                the_token = make("(string)", snippet);
                the_token.quote = quote;
                return the_token;
            }
            if (char === "") {
                return stop_at("unclosed_string", line, column);
            }
            if (char === "\\") {
                escape(quote);
            } else if (char === "`") {
                if (mega_mode) {
                    warn_at("unexpected_a", line, column, "`");
                }
                next_char("`");
            } else {
                next_char();
            }
            return next();
        }());
    }

    function frack() {
        if (char === ".") {
            some_digits(rx_digits);
            next_char();
        }
        if (char === "E" || char === "e") {
            next_char();
            if (char !== "+" && char !== "-") {
                back_char();
            }
            some_digits(rx_digits);
            next_char();
        }
    }

    function number() {
        if (snippet === "0") {
            next_char();
            if (char === ".") {
                frack();
            } else if (char === "b") {
                some_digits(rx_bits);
                next_char();
            } else if (char === "o") {
                some_digits(rx_octals);
                next_char();
            } else if (char === "x") {
                some_digits(rx_hexs);
                next_char();
            }
        } else {
            next_char();
            frack();
        }

// If the next character after a number is a digit or letter, then something
// unexpected is going on.

        if (
            (char >= "0" && char <= "9")
            || (char >= "a" && char <= "z")
            || (char >= "A" && char <= "Z")
        ) {
            return stop_at(
                "unexpected_a_after_b",
                line,
                column - 1,
                snippet.slice(-1),
                snippet.slice(0, -1)
            );
        }
        back_char();
        return make("(number)", snippet);
    }

    function lex() {
        var array;
        var i = 0;
        var j = 0;
        var last;
        var result;
        var the_token;
        // jslint-hack - un-recurse
        while (!source_line) {
            source_line = next_line();
            from = 0;
            if (source_line === undefined) {
                return (
                    mega_mode
                    ? stop_at("unclosed_mega", mega_line, mega_from)
                    : make("(end)")
                );
            }
        }
        from = column;
        result = source_line.match(rx_token);

// result[1] token
// result[2] whitespace
// result[3] identifier
// result[4] number
// result[5] rest

        if (!result) {
            return stop_at(
                "unexpected_char_a",
                line,
                column,
                source_line[0]
            );
        }

        snippet = result[1];
        column += snippet.length;
        source_line = result[5];

// Whitespace was matched. Call lex again to get more.

        if (result[2]) {
            return lex();
        }

// The token is an identifier.

        if (result[3]) {
            return make(snippet, undefined, true);
        }

// The token is a number.

        if (result[4]) {
            return number(snippet);
        }

// The token is a string.

        if (snippet === "\"") {
            return string(snippet);
        }
        if (snippet === "'") {
            if (!option.single) {
                warn_at("use_double", line, column);
            }
            return string(snippet);
        }

// The token is a megastring. We don't allow any kind of mega nesting.

        if (snippet === "`") {
            if (mega_mode) {
                return stop_at("expected_a_b", line, column, "}", "`");
            }
            snippet = "";
            mega_from = from;
            mega_line = line;
            mega_mode = true;

// Parsing a mega literal is tricky. First make a ` token.

            make("`");
            from += 1;

// Then loop, building up a string, possibly from many lines, until seeing
// the end of file, a closing `, or a ${ indicting an expression within the
// string.

            (function part() {
                var at = source_line.search(rx_mega);

// If neither ` nor ${ is seen, then the whole line joins the snippet.

                if (at < 0) {
                    snippet += source_line + "\n";
                    return (
                        next_line() === undefined
                        ? stop_at("unclosed_mega", mega_line, mega_from)
                        : part()
                    );
                }

// if either ` or ${ was found, then the preceding joins the snippet to become
// a string token.

                snippet += source_line.slice(0, at);
                column += at;
                source_line = source_line.slice(at);
                if (source_line[0] === "\\") {
                    stop_at("escape_mega", line, at);
                }
                make("(string)", snippet).quote = "`";
                snippet = "";

// If ${, then make tokens that will become part of an expression until
// a } token is made.

                if (source_line[0] === "$") {
                    column += 2;
                    make("${");
                    source_line = source_line.slice(2);
                    (function expr() {
                        var id = lex().id;
                        if (id === "{") {
                            return stop_at(
                                "expected_a_b",
                                line,
                                column,
                                "}",
                                "{"
                            );
                        }
                        if (id !== "}") {
                            return expr();
                        }
                    }());
                    return part();
                }
            }());
            source_line = source_line.slice(1);
            column += 1;
            mega_mode = false;
            return make("`");
        }

// The token is a // comment.

        if (snippet === "//") {
            // jslint-hack - too_long
            if (option.utility2 && (
                /^!!|^\u0020https:\/\//m
            ).test(source_line)) {
                regexp_seen = true;
            }
            snippet = source_line;
            source_line = "";
            the_token = comment(snippet);
            if (mega_mode) {
                warn("unexpected_comment", the_token, "`");
            }
            return the_token;
        }

// The token is a /* comment.

        if (snippet === "/*") {
            array = [];
            if (source_line[0] === "/") {
                warn_at("unexpected_a", line, column + i, "/");
            }
            (function next() {
                if (source_line > "") {
                    i = source_line.search(rx_star_slash);
                    if (i >= 0) {
                        return;
                    }
                    j = source_line.search(rx_slash_star);
                    if (j >= 0) {
                        warn_at("nested_comment", line, column + j);
                    }
                }
                array.push(source_line);
                // jslint-hack - too_long
                if (option.utility2 && (
                    /^\S|^\u0020{2}|\u0020https:\/\/|\u0020this\u0020.*?\u0020package\u0020will\u0020/m
                ).test(source_line)) {
                    regexp_seen = true;
                }
                source_line = next_line();
                if (source_line === undefined) {
                    return stop_at("unclosed_comment", line, column);
                }
                return next();
            }());
            snippet = source_line.slice(0, i);
            j = snippet.search(rx_slash_star_or_slash);
            if (j >= 0) {
                warn_at("nested_comment", line, column + j);
            }
            array.push(snippet);
            column += i + 2;
            source_line = source_line.slice(i + 2);
            return comment(array);
        }

// The token is a slash.

        if (snippet === "/") {

// The / can be a division operator or the beginning of a regular expression
// literal. It is not possible to know which without doing a complete parse.
// We want to complete the tokenization before we begin to parse, so we will
// estimate. This estimator can fail in some cases. For example, it cannot
// know if "}" is ending a block or ending an object literal, so it can
// behave incorrectly in that case; it is not meaningful to divide an
// object, so it is likely that we can get away with it. We avoided the worst
// cases by eliminating automatic semicolon insertion.

            if (prior.identifier) {
                if (!prior.dot) {
                    if (prior.id === "return") {
                        return regexp();
                    }
                    if (
                        prior.id === "(begin)"
                        || prior.id === "case"
                        || prior.id === "delete"
                        || prior.id === "in"
                        || prior.id === "instanceof"
                        || prior.id === "new"
                        || prior.id === "typeof"
                        || prior.id === "void"
                        || prior.id === "yield"
                    ) {
                        the_token = regexp();
                        return stop("unexpected_a", the_token);
                    }
                }
            } else {
                last = prior.id[prior.id.length - 1];
                if ("(,=:?[".indexOf(last) >= 0) {
                    return regexp();
                }
                if ("!&|{};~+-*%/^<>".indexOf(last) >= 0) {
                    the_token = regexp();
                    warn("wrap_regexp", the_token);
                    return the_token;
                }
            }
            if (source_line[0] === "/") {
                column += 1;
                source_line = source_line.slice(1);
                snippet = "/=";
                warn_at("unexpected_a", line, column, "/=");
            }
        }
        return make(snippet);
    }

    first = lex();
    json_mode = first.id === "{" || first.id === "[";

// This is the only loop in JSLint. It will turn into a recursive call to lex
// when ES6 has been finished and widely deployed and adopted.

    while (true) {
        if (lex().id === "(end)") {
            break;
        }
    }
}

// Parsing:

// Parsing weaves the tokens into an abstract syntax tree. During that process,
// a token may be given any of these properties:

//      arity       string
//      label       identifier
//      name        identifier
//      expression  expressions
//      block       statements
//      else        statements (else, default, catch)

// Specialized tokens may have additional properties.

function survey(name) {
    var id = name.id;

// Tally the property name. If it is a string, only tally strings that conform
// to the identifier rules.

    if (id === "(string)") {
        id = name.value;
        if (!rx_identifier.test(id)) {
            return id;
        }
    } else if (id === "`") {
        if (name.value.length === 1) {
            id = name.value[0].value;
            if (!rx_identifier.test(id)) {
                return id;
            }
        }
    } else if (!name.identifier) {
        return stop("expected_identifier_a", name);
    }

// If we have seen this name before, increment its count.

    if (typeof property[id] === "number") {
        property[id] += 1;

// If this is the first time seeing this property name, and if there is a
// tenure list, then it must be on the list. Otherwise, it must conform to
// the rules for good property names.
    } else {
        if (tenure !== undefined) {
            if (tenure[id] !== true) {
                warn("unregistered_property_a", name);
            }
        } else {
            if (name.identifier && rx_bad_property.test(id)) {
                warn("bad_property_a", name);
            }
        }
        property[id] = 1;
    }
    return id;
}

function dispense() {

// Deliver the next token, skipping the comments.

    var cadet = tokens[token_nr];
    token_nr += 1;
    if (cadet.id === "(comment)") {
        if (json_mode) {
            warn("unexpected_a", cadet);
        }
        return dispense();
    } else {
        return cadet;
    }
}

function lookahead() {

// Look ahead one token without advancing.

    var old_token_nr = token_nr;
    var cadet = dispense(true);
    token_nr = old_token_nr;
    return cadet;
}

function advance(id, match) {

// Produce the next token.

// Attempt to give helpful names to anonymous functions.

    if (token.identifier && token.id !== "function") {
        anon = token.id;
    } else if (token.id === "(string)" && rx_identifier.test(token.value)) {
        anon = token.value;
    }

// Attempt to match next_token with an expected id.

    if (id !== undefined && next_token.id !== id) {
        return (
            match === undefined
            ? stop("expected_a_b", next_token, id, artifact())
            : stop(
                "expected_a_b_from_c_d",
                next_token,
                id,
                artifact(match),
                artifact_line(match),
                artifact(next_token)
            )
        );
    }

// Promote the tokens, skipping comments.

    token = next_token;
    next_token = dispense();
    if (next_token.id === "(end)") {
        token_nr -= 1;
    }
}

// Parsing of JSON is simple:

function json_value() {
    var negative;
    if (next_token.id === "{") {
        return (function json_object() {
            var brace = next_token;
            var object = empty();
            var properties = [];
            brace.expression = properties;
            advance("{");
            if (next_token.id !== "}") {
                (function next() {
                    var name;
                    var value;
                    if (next_token.quote !== "\"") {
                        warn(
                            "unexpected_a",
                            next_token,
                            next_token.quote
                        );
                    }
                    name = next_token;
                    advance("(string)");
                    if (object[token.value] !== undefined) {
                        warn("duplicate_a", token);
                    } else if (token.value === "__proto__") {
                        warn("bad_property_a", token);
                    } else {
                        object[token.value] = token;
                    }
                    advance(":");
                    value = json_value();
                    value.label = name;
                    properties.push(value);
                    if (next_token.id === ",") {
                        advance(",");
                        return next();
                    }
                }());
            }
            advance("}", brace);
            return brace;
        }());
    }
    if (next_token.id === "[") {
        return (function json_array() {
            var bracket = next_token;
            var elements = [];
            bracket.expression = elements;
            advance("[");
            if (next_token.id !== "]") {
                (function next() {
                    elements.push(json_value());
                    if (next_token.id === ",") {
                        advance(",");
                        return next();
                    }
                }());
            }
            advance("]", bracket);
            return bracket;
        }());
    }
    if (
        next_token.id === "true"
        || next_token.id === "false"
        || next_token.id === "null"
    ) {
        advance();
        return token;
    }
    if (next_token.id === "(number)") {
        if (!rx_JSON_number.test(next_token.value)) {
            warn("unexpected_a");
        }
        advance();
        return token;
    }
    if (next_token.id === "(string)") {
        if (next_token.quote !== "\"") {
            warn("unexpected_a", next_token, next_token.quote);
        }
        advance();
        return token;
    }
    if (next_token.id === "-") {
        negative = next_token;
        negative.arity = "unary";
        advance("-");
        advance("(number)");
        negative.expression = token;
        return negative;
    }
    stop("unexpected_a");
}

// Now we parse JavaScript.

function enroll(name, role, readonly) {

// Enroll a name into the current function context. The role can be exception,
// function, label, parameter, or variable. We look for variable redefinition
// because it causes confusion.

    var id = name.id;

// Reserved words may not be enrolled.

    if (syntax[id] !== undefined && id !== "ignore") {
        warn("reserved_a", name);
    } else {

// Has the name been enrolled in this context?

        var earlier = functionage.context[id];
        if (earlier) {
            warn(
                "redefinition_a_b",
                name,
                name.id,
                earlier.line + fudge
            );

// Has the name been enrolled in an outer context?
        } else {
            stack.forEach(function (value) {
                var item = value.context[id];
                if (item !== undefined) {
                    earlier = item;
                }
            });
            if (earlier) {
                if (id === "ignore") {
                    if (earlier.role === "variable") {
                        warn("unexpected_a", name);
                    }
                } else {
                    if ((
                        role !== "exception"
                        || earlier.role !== "exception"
                    ) && role !== "parameter" && role !== "function") {
                        warn(
                            "redefinition_a_b",
                            name,
                            name.id,
                            earlier.line + fudge
                        );
                    }
                }
            }

// Enroll it.

            functionage.context[id] = name;
            name.dead = true;
            name.parent = functionage;
            name.init = false;
            name.role = role;
            name.used = 0;
            name.writable = !readonly;
        }
    }
}

function expression(rbp, initial) {

// This is the heart of the Pratt parser. I retained Pratt's nomenclature.
// They are elements of the parsing method called Top Down Operator Precedence.

// nud     Null denotation
// led     Left denotation
// lbp     Left binding power
// rbp     Right binding power

// It processes a nud (variable, constant, prefix operator). It will then
// process leds (infix operators) until the bind powers cause it to stop. It
// returns the expression's parse tree.

    var left;
    var the_symbol;

// Statements will have already advanced, so advance now only if the token is
// not the first of a statement,

    if (!initial) {
        advance();
    }
    the_symbol = syntax[token.id];
    if (the_symbol !== undefined && the_symbol.nud !== undefined) {
        left = the_symbol.nud();
    } else if (token.identifier) {
        left = token;
        left.arity = "variable";
    } else {
        return stop("unexpected_a", token);
    }
    (function right() {
        the_symbol = syntax[next_token.id];
        if (
            the_symbol !== undefined
            && the_symbol.led !== undefined
            && rbp < the_symbol.lbp
        ) {
            advance();
            left = the_symbol.led(left);
            return right();
        }
    }());
    return left;
}

function condition() {

// Parse the condition part of a do, if, while.

    var the_paren = next_token;
    var the_value;
    the_paren.free = true;
    advance("(");
    the_value = expression(0);
    advance(")");
    if (the_value.wrapped === true) {
        warn("unexpected_a", the_paren);
    }
    if (anticondition[the_value.id] === true) {
        warn("unexpected_a", the_value);
    }
    return the_value;
}

function is_weird(thing) {
    return (
        thing.id === "(regexp)"
        || thing.id === "{"
        || thing.id === "=>"
        || thing.id === "function"
        || (thing.id === "[" && thing.arity === "unary")
    );
}

function are_similar(a, b) {
    if (a === b) {
        return true;
    }
    if (Array.isArray(a)) {
        return (
            Array.isArray(b)
            && a.length === b.length
            && a.every(function (value, index) {
                return are_similar(value, b[index]);
            })
        );
    }
    if (Array.isArray(b)) {
        return false;
    }
    if (a.id === "(number)" && b.id === "(number)") {
        return a.value === b.value;
    }
    var a_string;
    var b_string;
    if (a.id === "(string)") {
        a_string = a.value;
    } else if (a.id === "`" && a.constant) {
        a_string = a.value[0];
    }
    if (b.id === "(string)") {
        b_string = b.value;
    } else if (b.id === "`" && b.constant) {
        b_string = b.value[0];
    }
    if (typeof a_string === "string") {
        return a_string === b_string;
    }
    if (is_weird(a) || is_weird(b)) {
        return false;
    }
    if (a.arity === b.arity && a.id === b.id) {
        if (a.id === ".") {
            return (
                are_similar(a.expression, b.expression)
                && are_similar(a.name, b.name)
            );
        }
        if (a.arity === "unary") {
            return are_similar(a.expression, b.expression);
        }
        if (a.arity === "binary") {
            return (
                a.id !== "("
                && are_similar(a.expression[0], b.expression[0])
                && are_similar(a.expression[1], b.expression[1])
            );
        }
        if (a.arity === "ternary") {
            return (
                are_similar(a.expression[0], b.expression[0])
                && are_similar(a.expression[1], b.expression[1])
                && are_similar(a.expression[2], b.expression[2])
            );
        }
        if (a.arity === "function" && a.arity === "regexp") {
            return false;
        }
        return true;
    }
    return false;
}

function semicolon() {

// Try to match a semicolon.

    if (next_token.id === ";") {
        advance(";");
    } else {
        warn_at(
            "expected_a_b",
            token.line,
            token.thru,
            ";",
            artifact(next_token)
        );
    }
    anon = "anonymous";
}

function statement() {

// Parse a statement. Any statement may have a label, but only four statements
// have use for one. A statement can be one of the standard statements, or
// an assignment expression, or an invocation expression.

    var first;
    var the_label;
    var the_statement;
    var the_symbol;
    advance();
    if (token.identifier && next_token.id === ":") {
        the_label = token;
        if (the_label.id === "ignore") {
            warn("unexpected_a", the_label);
        }
        advance(":");
        if (
            next_token.id === "do"
            || next_token.id === "for"
            || next_token.id === "switch"
            || next_token.id === "while"
        ) {
            enroll(the_label, "label", true);
            the_label.init = true;
            the_label.dead = false;
            the_statement = statement();
            the_statement.label = the_label;
            the_statement.statement = true;
            return the_statement;
        }
        advance();
        warn("unexpected_label_a", the_label);
    }

// Parse the statement.

    first = token;
    first.statement = true;
    the_symbol = syntax[first.id];
    if (the_symbol !== undefined && the_symbol.fud !== undefined) {
        the_symbol.disrupt = false;
        the_symbol.statement = true;
        the_statement = the_symbol.fud();
    } else {

// It is an expression statement.

        the_statement = expression(0, true);
        if (the_statement.wrapped && the_statement.id !== "(") {
            warn("unexpected_a", first);
        }
        semicolon();
    }
    if (the_label !== undefined) {
        the_label.dead = true;
    }
    return the_statement;
}

function statements() {

// Parse a list of statements. Give a warning if an unreachable statement
// follows a disruptive statement.

    var array = [];
    (function next(disrupt) {
        if (
            next_token.id !== "}"
            && next_token.id !== "case"
            && next_token.id !== "default"
            && next_token.id !== "else"
            && next_token.id !== "(end)"
        ) {
            var a_statement = statement();
            array.push(a_statement);
            if (disrupt) {
                warn("unreachable_a", a_statement);
            }
            return next(a_statement.disrupt);
        }
    }(false));
    return array;
}

function not_top_level(thing) {

// Some features should not be at the outermost level.

    if (functionage === global) {
        warn("unexpected_at_top_level_a", thing);
    }
}

function top_level_only(the_thing) {

// Some features must be at the most outermost level.

    if (blockage !== global) {
        warn("misplaced_a", the_thing);
    }
}

function block(special) {

// Parse a block, a sequence of statements wrapped in braces.
//  special "body"      The block is a function body.
//          "ignore"    No warning on an empty block.
//          "naked"     No advance.
//          undefined   An ordinary block.

    var stmts;
    var the_block;
    if (special !== "naked") {
        advance("{");
    }
    the_block = token;
    the_block.arity = "statement";
    the_block.body = special === "body";

// All top level function bodies should include the "use strict" pragma unless
// the whole file is strict or the file is a module or the function parameters
// use es6 syntax.

    if (
        special === "body"
        && stack.length === 1
        && next_token.value === "use strict"
    ) {
        the_block.strict = next_token;
        next_token.statement = true;
        advance("(string)");
        advance(";");
    }
    stmts = statements();
    the_block.block = stmts;
    if (stmts.length === 0) {
        if (!option.devel && special !== "ignore") {
            warn("empty_block", the_block);
        }
        the_block.disrupt = false;
    } else {
        the_block.disrupt = stmts[stmts.length - 1].disrupt;
    }
    advance("}");
    return the_block;
}

function mutation_check(the_thing) {

// The only expressions that may be assigned to are
//      e.b
//      e[b]
//      v
//      [destructure]
//      {destructure}

    if (
        the_thing.arity !== "variable"
        && the_thing.id !== "."
        && the_thing.id !== "["
        && the_thing.id !== "{"
    ) {
        warn("bad_assignment_a", the_thing);
        return false;
    }
    return true;
}

function left_check(left, right) {

// Warn if the left is not one of these:
//      e.b
//      e[b]
//      e()
//      ?:
//      identifier

    var id = left.id;
    if (
        !left.identifier
        && (
            left.arity !== "ternary"
            || (
                !left_check(left.expression[1])
                && !left_check(left.expression[2])
            )
        )
        && (
            left.arity !== "binary"
            || (id !== "." && id !== "(" && id !== "[")
        )
    ) {
        // jslint-hack - unexpected_a
        warn("unexpected_a", right, null, null, left, right);
        return false;
    }
    return true;
}

// These functions are used to specify the grammar of our language:

function symbol(id, bp) {

// Make a symbol if it does not already exist in the language's syntax.

    var the_symbol = syntax[id];
    if (the_symbol === undefined) {
        the_symbol = empty();
        the_symbol.id = id;
        the_symbol.lbp = bp || 0;
        syntax[id] = the_symbol;
    }
    return the_symbol;
}

function assignment(id) {

// Make an assignment operator. The one true assignment is different because
// its left side, when it is a variable, is not treated as an expression.
// That case is special because that is when a variable gets initialized. The
// other assignment operators can modify, but they cannot initialize.

    var the_symbol = symbol(id, 20);
    the_symbol.led = function (left) {
        var the_token = token;
        var right;
        the_token.arity = "assignment";
        right = expression(20 - 1);
        if (id === "=" && left.arity === "variable") {
            the_token.names = left;
            the_token.expression = right;
        } else {
            the_token.expression = [left, right];
        }
        if (
            right.arity === "assignment"
            || right.arity === "pre"
            || right.arity === "post"
        ) {
            warn("unexpected_a", right);
        }
        mutation_check(left);
        return the_token;
    };
    return the_symbol;
}

function constant(id, type, value) {

// Make a constant symbol.

    var the_symbol = symbol(id);
    the_symbol.constant = true;
    the_symbol.nud = (
        typeof value === "function"
        ? value
        : function () {
            token.constant = true;
            if (value !== undefined) {
                token.value = value;
            }
            return token;
        }
    );
    the_symbol.type = type;
    the_symbol.value = value;
    return the_symbol;
}

function infix(id, bp, f) {

// Make an infix operator.

    var the_symbol = symbol(id, bp);
    the_symbol.led = function (left) {
        var the_token = token;
        the_token.arity = "binary";
        if (f !== undefined) {
            return f(left);
        }
        the_token.expression = [left, expression(bp)];
        return the_token;
    };
    return the_symbol;
}

function infixr(id, bp) {

// Make a right associative infix operator.

    var the_symbol = symbol(id, bp);
    the_symbol.led = function (left) {
        var the_token = token;
        the_token.arity = "binary";
        the_token.expression = [left, expression(bp - 1)];
        return the_token;
    };
    return the_symbol;
}

function post(id) {

// Make one of the post operators.

    var the_symbol = symbol(id, 150);
    the_symbol.led = function (left) {
        token.expression = left;
        token.arity = "post";
        mutation_check(token.expression);
        return token;
    };
    return the_symbol;
}

function pre(id) {

// Make one of the pre operators.

    var the_symbol = symbol(id);
    the_symbol.nud = function () {
        var the_token = token;
        the_token.arity = "pre";
        the_token.expression = expression(150);
        mutation_check(the_token.expression);
        return the_token;
    };
    return the_symbol;
}

function prefix(id, f) {

// Make a prefix operator.

    var the_symbol = symbol(id);
    the_symbol.nud = function () {
        var the_token = token;
        the_token.arity = "unary";
        if (typeof f === "function") {
            return f();
        }
        the_token.expression = expression(150);
        return the_token;
    };
    return the_symbol;
}

function stmt(id, f) {

// Make a statement.

    var the_symbol = symbol(id);
    the_symbol.fud = function () {
        token.arity = "statement";
        return f();
    };
    return the_symbol;
}

function ternary(id1, id2) {

// Make a ternary operator.

    var the_symbol = symbol(id1, 30);
    the_symbol.led = function (left) {
        var the_token = token;
        var second = expression(20);
        advance(id2);
        token.arity = "ternary";
        the_token.arity = "ternary";
        the_token.expression = [left, second, expression(10)];
        if (next_token.id !== ")") {
            warn("use_open", the_token);
        }
        return the_token;
    };
    return the_symbol;
}

// Begin defining the language.

syntax = empty();

symbol("}");
symbol(")");
symbol("]");
symbol(",");
symbol(";");
symbol(":");
symbol("*/");
symbol("await");
symbol("case");
symbol("catch");
symbol("class");
symbol("default");
symbol("else");
symbol("enum");
symbol("finally");
symbol("implements");
symbol("interface");
symbol("package");
symbol("private");
symbol("protected");
symbol("public");
symbol("static");
symbol("super");
symbol("void");
symbol("yield");

constant("(number)", "number");
constant("(regexp)", "regexp");
constant("(string)", "string");
constant("arguments", "object", function () {
    warn("unexpected_a", token);
    return token;
});
constant("eval", "function", function () {
    if (!option.eval) {
        warn("unexpected_a", token);
    } else if (next_token.id !== "(") {
        warn("expected_a_before_b", next_token, "(", artifact());
    }
    return token;
});
constant("false", "boolean", false);
constant("Function", "function", function () {
    if (!option.eval) {
        warn("unexpected_a", token);
    } else if (next_token.id !== "(") {
        warn("expected_a_before_b", next_token, "(", artifact());
    }
    return token;
});
constant("ignore", "undefined", function () {
    warn("unexpected_a", token);
    return token;
});
constant("Infinity", "number", Infinity);
constant("isFinite", "function", function () {
    warn("expected_a_b", token, "Number.isFinite", "isFinite");
    return token;
});
constant("isNaN", "function", function () {
    warn("number_isNaN", token);
    return token;
});
constant("NaN", "number", NaN);
constant("null", "null", null);
constant("this", "object", function () {
    if (!option.this) {
        warn("unexpected_a", token);
    }
    return token;
});
constant("true", "boolean", true);
constant("undefined", "undefined");

assignment("=");
assignment("+=");
assignment("-=");
assignment("*=");
assignment("/=");
assignment("%=");
assignment("&=");
assignment("|=");
assignment("^=");
assignment("<<=");
assignment(">>=");
assignment(">>>=");

infix("||", 40);
infix("&&", 50);
infix("|", 70);
infix("^", 80);
infix("&", 90);
infix("==", 100);
infix("===", 100);
infix("!=", 100);
infix("!==", 100);
infix("<", 110);
infix(">", 110);
infix("<=", 110);
infix(">=", 110);
infix("in", 110);
infix("instanceof", 110);
infix("<<", 120);
infix(">>", 120);
infix(">>>", 120);
infix("+", 130);
infix("-", 130);
infix("*", 140);
infix("/", 140);
infix("%", 140);
infixr("**", 150);
infix("(", 160, function (left) {
    var the_paren = token;
    var the_argument;
    if (left.id !== "function") {
        left_check(left, the_paren);
    }
    if (functionage.arity === "statement" && left.identifier) {
        functionage.name.calls[left.id] = left;
    }
    the_paren.expression = [left];
    if (next_token.id !== ")") {
        (function next() {
            var ellipsis;
            if (next_token.id === "...") {
                ellipsis = true;
                advance("...");
            }
            the_argument = expression(10);
            if (ellipsis) {
                the_argument.ellipsis = true;
            }
            the_paren.expression.push(the_argument);
            if (next_token.id === ",") {
                advance(",");
                return next();
            }
        }());
    }
    advance(")", the_paren);
    if (the_paren.expression.length === 2) {
        the_paren.free = true;
        if (the_argument.wrapped === true) {
            warn("unexpected_a", the_paren);
        }
        if (the_argument.id === "(") {
            the_argument.wrapped = true;
        }
    } else {
        the_paren.free = false;
    }
    return the_paren;
});
infix(".", 170, function (left) {
    var the_token = token;
    var name = next_token;
    if ((
        left.id !== "(string)"
        || (name.id !== "indexOf" && name.id !== "repeat")
    ) && (
        left.id !== "["
        || (
            name.id !== "concat"
            && name.id !== "forEach"
            && name.id !== "join"
            && name.id !== "map"
        )
    ) && (left.id !== "+" || name.id !== "slice") && (
        left.id !== "(regexp)"
        || (name.id !== "exec" && name.id !== "test")
    )) {
        left_check(left, the_token);
    }
    if (!name.identifier) {
        stop("expected_identifier_a");
    }
    advance();
    survey(name);

// The property name is not an expression.

    the_token.name = name;
    the_token.expression = left;
    return the_token;
});
infix("?.", 170, function (left) {
    var the_token = token;
    var name = next_token;
    if ((
        left.id !== "(string)"
        || (name.id !== "indexOf" && name.id !== "repeat")
    ) && (
        left.id !== "["
        || (
            name.id !== "concat"
            && name.id !== "forEach"
            && name.id !== "join"
            && name.id !== "map"
        )
    ) && (left.id !== "+" || name.id !== "slice") && (
        left.id !== "(regexp)"
        || (name.id !== "exec" && name.id !== "test")
    )) {
        left_check(left, the_token);
    }
    if (!name.identifier) {
        stop("expected_identifier_a");
    }
    advance();
    survey(name);

// The property name is not an expression.

    the_token.name = name;
    the_token.expression = left;
    return the_token;
});
infix("[", 170, function (left) {
    var the_token = token;
    var the_subscript = expression(0);
    if (the_subscript.id === "(string)" || the_subscript.id === "`") {
        var name = survey(the_subscript);
        if (rx_identifier.test(name)) {
            warn("subscript_a", the_subscript, name);
        }
    }
    left_check(left, the_token);
    the_token.expression = [left, the_subscript];
    advance("]");
    return the_token;
});
infix("=>", 170, function (left) {
    return stop("wrap_parameter", left);
});

function do_tick() {
    var the_tick = token;
    the_tick.value = [];
    the_tick.expression = [];
    if (next_token.id !== "`") {
        (function part() {
            advance("(string)");
            the_tick.value.push(token);
            if (next_token.id === "${") {
                advance("${");
                the_tick.expression.push(expression(0));
                advance("}");
                return part();
            }
        }());
    }
    advance("`");
    return the_tick;
}

infix("`", 160, function (left) {
    var the_tick = do_tick();
    left_check(left, the_tick);
    the_tick.expression = [left].concat(the_tick.expression);
    return the_tick;
});

post("++");
post("--");
pre("++");
pre("--");

prefix("+");
prefix("-");
prefix("~");
prefix("!");
prefix("!!");
prefix("[", function () {
    var the_token = token;
    the_token.expression = [];
    if (next_token.id !== "]") {
        (function next() {
            var element;
            var ellipsis = false;
            if (next_token.id === "...") {
                ellipsis = true;
                advance("...");
            }
            element = expression(10);
            if (ellipsis) {
                element.ellipsis = true;
            }
            the_token.expression.push(element);
            if (next_token.id === ",") {
                advance(",");
                return next();
            }
        }());
    }
    advance("]");
    return the_token;
});
prefix("/=", function () {
    stop("expected_a_b", token, "/\\=", "/=");
});
prefix("=>", function () {
    return stop("expected_a_before_b", token, "()", "=>");
});
prefix("new", function () {
    var the_new = token;
    var right = expression(160);
    if (next_token.id !== "(") {
        warn("expected_a_before_b", next_token, "()", artifact(next_token));
    }
    the_new.expression = right;
    return the_new;
});
prefix("typeof");
prefix("void", function () {
    var the_void = token;
    warn("unexpected_a", the_void);
    the_void.expression = expression(0);
    return the_void;
});

function parameter_list() {
    var complex = false;
    var list = [];
    var optional;
    var signature = ["("];
    if (next_token.id !== ")" && next_token.id !== "(end)") {
        (function parameter() {
            var ellipsis = false;
            var param;
            if (next_token.id === "{") {
                complex = true;
                if (optional !== undefined) {
                    warn(
                        "required_a_optional_b",
                        next_token,
                        next_token.id,
                        optional.id
                    );
                }
                param = next_token;
                param.names = [];
                advance("{");
                signature.push("{");
                (function subparameter() {
                    var subparam = next_token;
                    if (!subparam.identifier) {
                        return stop("expected_identifier_a");
                    }
                    survey(subparam);
                    advance();
                    signature.push(subparam.id);
                    if (next_token.id === ":") {
                        advance(":");
                        advance();
                        token.label = subparam;
                        subparam = token;
                        if (!subparam.identifier) {
                            return stop("expected_identifier_a");
                        }
                    }
                    param.names.push(subparam);
                    if (next_token.id === ",") {
                        advance(",");
                        signature.push(", ");
                        return subparameter();
                    }
                }());
                list.push(param);
                advance("}");
                signature.push("}");
                if (next_token.id === ",") {
                    advance(",");
                    signature.push(", ");
                    return parameter();
                }
            } else if (next_token.id === "[") {
                complex = true;
                if (optional !== undefined) {
                    warn(
                        "required_a_optional_b",
                        next_token,
                        next_token.id,
                        optional.id
                    );
                }
                param = next_token;
                param.names = [];
                advance("[");
                signature.push("[]");
                (function subparameter() {
                    var subparam = next_token;
                    if (!subparam.identifier) {
                        return stop("expected_identifier_a");
                    }
                    advance();
                    param.names.push(subparam);
                    if (next_token.id === ",") {
                        advance(",");
                        return subparameter();
                    }
                }());
                list.push(param);
                advance("]");
                if (next_token.id === ",") {
                    advance(",");
                    signature.push(", ");
                    return parameter();
                }
            } else {
                if (next_token.id === "...") {
                    complex = true;
                    ellipsis = true;
                    signature.push("...");
                    advance("...");
                    if (optional !== undefined) {
                        warn(
                            "required_a_optional_b",
                            next_token,
                            next_token.id,
                            optional.id
                        );
                    }
                }
                if (!next_token.identifier) {
                    return stop("expected_identifier_a");
                }
                param = next_token;
                list.push(param);
                advance();
                signature.push(param.id);
                if (ellipsis) {
                    param.ellipsis = true;
                } else {
                    if (next_token.id === "=") {
                        complex = true;
                        optional = param;
                        advance("=");
                        param.expression = expression(0);
                    } else {
                        if (optional !== undefined) {
                            warn(
                                "required_a_optional_b",
                                param,
                                param.id,
                                optional.id
                            );
                        }
                    }
                    if (next_token.id === ",") {
                        advance(",");
                        signature.push(", ");
                        return parameter();
                    }
                }
            }
        }());
    }
    advance(")");
    signature.push(")");
    return [list, signature.join(""), complex];
}

function do_function(the_function) {
    var name;
    if (the_function === undefined) {
        the_function = token;

// A function statement must have a name that will be in the parent's scope.

        if (the_function.arity === "statement") {
            if (!next_token.identifier) {
                return stop("expected_identifier_a", next_token);
            }
            name = next_token;
            enroll(name, "variable", true);
            the_function.name = name;
            name.init = true;
            name.calls = empty();
            advance();
        } else if (name === undefined) {

// A function expression may have an optional name.

            if (next_token.identifier) {
                name = next_token;
                the_function.name = name;
                advance();
            } else {
                the_function.name = anon;
            }
        }
    } else {
        name = the_function.name;
    }
    the_function.level = functionage.level + 1;
    if (mega_mode) {
        warn("unexpected_a", the_function);
    }

// Don't make functions in loops. It is inefficient, and it can lead to scoping
// errors.

    if (functionage.loop > 0) {
        warn("function_in_loop", the_function);
    }

// Give the function properties for storing its names and for observing the
// depth of loops and switches.

    the_function.context = empty();
    the_function.finally = 0;
    the_function.loop = 0;
    the_function.switch = 0;
    the_function.try = 0;

// Push the current function context and establish a new one.

    stack.push(functionage);
    functions.push(the_function);
    functionage = the_function;
    if (the_function.arity !== "statement" && typeof name === "object") {
        enroll(name, "function", true);
        name.dead = false;
        name.init = true;
        name.used = 1;
    }

// Parse the parameter list.

    advance("(");
    token.free = false;
    token.arity = "function";
    var pl = parameter_list();
    functionage.parameters = pl[0];
    functionage.signature = pl[1];
    functionage.complex = pl[2];
    functionage.parameters.forEach(function enroll_parameter(name) {
        if (name.identifier) {
            enroll(name, "parameter", false);
        } else {
            name.names.forEach(enroll_parameter);
        }
    });

// The function's body is a block.

    the_function.block = block("body");
    if (
        the_function.arity === "statement"
        && next_token.line === token.line
    ) {
        return stop("unexpected_a", next_token);
    }
    if (
        next_token.id === "."
        || next_token.id === "?."
        || next_token.id === "["
    ) {
        warn("unexpected_a");
    }

// Restore the previous context.

    functionage = stack.pop();
    return the_function;
}

prefix("function", do_function);

function fart(pl) {
    advance("=>");
    var the_fart = token;
    the_fart.arity = "binary";
    the_fart.name = "=>";
    the_fart.level = functionage.level + 1;
    functions.push(the_fart);
    if (functionage.loop > 0) {
        warn("function_in_loop", the_fart);
    }

// Give the function properties storing its names and for observing the depth
// of loops and switches.

    the_fart.context = empty();
    the_fart.finally = 0;
    the_fart.loop = 0;
    the_fart.switch = 0;
    the_fart.try = 0;

// Push the current function context and establish a new one.

    stack.push(functionage);
    functionage = the_fart;
    the_fart.parameters = pl[0];
    the_fart.signature = pl[1];
    the_fart.complex = true;
    the_fart.parameters.forEach(function (name) {
        enroll(name, "parameter", true);
    });
    if (next_token.id === "{") {
        warn("expected_a_b", the_fart, "function", "=>");
        the_fart.block = block("body");
    } else {
        the_fart.expression = expression(0);
    }
    functionage = stack.pop();
    return the_fart;
}

prefix("(", function () {
    var the_paren = token;
    var the_value;
    var cadet = lookahead().id;

// We can distinguish between a parameter list for => and a wrapped expression
// with one token of lookahead.

    if (
        next_token.id === ")"
        || next_token.id === "..."
        || (next_token.identifier && (cadet === "," || cadet === "="))
    ) {
        the_paren.free = false;
        return fart(parameter_list());
    }
    the_paren.free = true;
    the_value = expression(0);
    if (the_value.wrapped === true) {
        warn("unexpected_a", the_paren);
    }
    the_value.wrapped = true;
    advance(")", the_paren);
    if (next_token.id === "=>") {
        if (the_value.arity !== "variable") {
            if (the_value.id === "{" || the_value.id === "[") {
                warn("expected_a_before_b", the_paren, "function", "(");
                return stop("expected_a_b", next_token, "{", "=>");
            }
            return stop("expected_identifier_a", the_value);
        }
        the_paren.expression = [the_value];
        return fart([the_paren.expression, "(" + the_value.id + ")"]);
    }
    return the_value;
});
prefix("`", do_tick);
prefix("{", function () {
    var the_brace = token;
    var seen = empty();
    the_brace.expression = [];
    if (next_token.id !== "}") {
        (function member() {
            var extra;
            var full;
            var id;
            var name = next_token;
            var value;
            advance();
            if (
                (name.id === "get" || name.id === "set")
                && next_token.identifier
            ) {
                if (!option.getset) {
                    warn("unexpected_a", name);
                }
                extra = name.id;
                full = extra + " " + next_token.id;
                name = next_token;
                advance();
                id = survey(name);
                if (seen[full] === true || seen[id] === true) {
                    warn("duplicate_a", name);
                }
                seen[id] = false;
                seen[full] = true;
            } else {
                id = survey(name);
                if (typeof seen[id] === "boolean") {
                    warn("duplicate_a", name);
                }
                seen[id] = true;
            }
            if (name.identifier) {
                if (next_token.id === "}" || next_token.id === ",") {
                    if (typeof extra === "string") {
                        advance("(");
                    }
                    value = expression(Infinity, true);
                } else if (next_token.id === "(") {
                    value = do_function({
                        arity: "unary",
                        from: name.from,
                        id: "function",
                        line: name.line,
                        name: (
                            typeof extra === "string"
                            ? extra
                            : id
                        ),
                        thru: name.from
                    });
                } else {
                    if (typeof extra === "string") {
                        advance("(");
                    }
                    advance(":");
                    value = expression(0);
                }
                value.label = name;
                if (typeof extra === "string") {
                    value.extra = extra;
                }
                the_brace.expression.push(value);
            } else {
                advance(":");
                value = expression(0);
                value.label = name;
                the_brace.expression.push(value);
            }
            if (next_token.id === ",") {
                advance(",");
                return member();
            }
        }());
    }
    advance("}");
    return the_brace;
});

stmt(";", function () {
    warn("unexpected_a", token);
    return token;
});
stmt("{", function () {
    warn("naked_block", token);
    return block("naked");
});
stmt("break", function () {
    var the_break = token;
    var the_label;
    if (
        (functionage.loop < 1 && functionage.switch < 1)
        || functionage.finally > 0
    ) {
        warn("unexpected_a", the_break);
    }
    the_break.disrupt = true;
    if (next_token.identifier && token.line === next_token.line) {
        the_label = functionage.context[next_token.id];
        if (
            the_label === undefined
            || the_label.role !== "label"
            || the_label.dead
        ) {
            warn(
                (the_label !== undefined && the_label.dead)
                ? "out_of_scope_a"
                : "not_label_a"
            );
        } else {
            the_label.used += 1;
        }
        the_break.label = next_token;
        advance();
    }
    advance(";");
    return the_break;
});

function do_var() {
    var the_statement = token;
    var is_const = the_statement.id === "const";
    the_statement.names = [];

// A program may use var or let, but not both.

    if (!is_const) {
        if (var_mode === undefined) {
            var_mode = the_statement.id;
        } else if (the_statement.id !== var_mode) {
            warn(
                "expected_a_b",
                the_statement,
                var_mode,
                the_statement.id
            );
        }
    }

// We don't expect to see variables created in switch statements.

    if (functionage.switch > 0) {
        warn("var_switch", the_statement);
    }
    if (functionage.loop > 0 && the_statement.id === "var") {
        warn("var_loop", the_statement);
    }
    (function next() {
        if (next_token.id === "{" && the_statement.id !== "var") {
            var the_brace = next_token;
            the_brace.names = [];
            advance("{");
            (function pair() {
                if (!next_token.identifier) {
                    return stop("expected_identifier_a", next_token);
                }
                var name = next_token;
                survey(name);
                advance();
                if (next_token.id === ":") {
                    advance(":");
                    if (!next_token.identifier) {
                        return stop("expected_identifier_a", next_token);
                    }
                    next_token.label = name;
                    the_brace.names.push(next_token);
                    enroll(next_token, "variable", is_const);
                    advance();
                } else {
                    the_brace.names.push(name);
                    enroll(name, "variable", is_const);
                }
                if (next_token.id === ",") {
                    advance(",");
                    return pair();
                }
            }());
            advance("}");
            advance("=");
            the_brace.expression = expression(0);
            the_statement.names.push(the_brace);
        } else if (next_token.id === "[" && the_statement.id !== "var") {
            var the_bracket = next_token;
            the_bracket.names = [];
            advance("[");
            (function element() {
                var ellipsis;
                if (next_token.id === "...") {
                    ellipsis = true;
                    advance("...");
                }
                if (!next_token.identifier) {
                    return stop("expected_identifier_a", next_token);
                }
                var name = next_token;
                advance();
                the_bracket.names.push(name);
                enroll(name, "variable", the_statement.id === "const");
                if (ellipsis) {
                    name.ellipsis = true;
                } else if (next_token.id === ",") {
                    advance(",");
                    return element();
                }
            }());
            advance("]");
            advance("=");
            the_bracket.expression = expression(0);
            the_statement.names.push(the_bracket);
        } else if (next_token.identifier) {
            var name = next_token;
            advance();
            if (name.id === "ignore") {
                warn("unexpected_a", name);
            }
            enroll(name, "variable", is_const);
            if (next_token.id === "=" || is_const) {
                advance("=");
                name.init = true;
                name.expression = expression(0);
            }
            the_statement.names.push(name);
        } else {
            return stop("expected_identifier_a", next_token);
        }
        if (next_token.id === ",") {
            if (!option.multivar) {
                warn("expected_a_b", next_token, ";", ",");
            }
            advance(",");
            return next();
        }
    }());
    the_statement.open = (
        the_statement.names.length > 1
        && the_statement.line !== the_statement.names[1].line
    );
    semicolon();
    return the_statement;
}

stmt("const", do_var);
stmt("continue", function () {
    var the_continue = token;
    if (functionage.loop < 1 || functionage.finally > 0) {
        warn("unexpected_a", the_continue);
    }
    not_top_level(the_continue);
    the_continue.disrupt = true;
    warn("unexpected_a", the_continue);
    advance(";");
    return the_continue;
});
stmt("debugger", function () {
    var the_debug = token;
    if (!option.devel) {
        warn("unexpected_a", the_debug);
    }
    semicolon();
    return the_debug;
});
stmt("delete", function () {
    var the_token = token;
    var the_value = expression(0);
    if (
        (the_value.id !== "." && the_value.id !== "[")
        || the_value.arity !== "binary"
    ) {
        stop("expected_a_b", the_value, ".", artifact(the_value));
    }
    the_token.expression = the_value;
    semicolon();
    return the_token;
});
stmt("do", function () {
    var the_do = token;
    not_top_level(the_do);
    functionage.loop += 1;
    the_do.block = block();
    advance("while");
    the_do.expression = condition();
    semicolon();
    if (the_do.block.disrupt === true) {
        warn("weird_loop", the_do);
    }
    functionage.loop -= 1;
    return the_do;
});
stmt("export", function () {
    var the_export = token;
    var the_id;
    var the_name;
    var the_thing;

    function export_id() {
        if (!next_token.identifier) {
            stop("expected_identifier_a");
        }
        the_id = next_token.id;
        the_name = global.context[the_id];
        if (the_name === undefined) {
            warn("unexpected_a");
        } else {
            the_name.used += 1;
            if (exports[the_id] !== undefined) {
                warn("duplicate_a");
            }
            exports[the_id] = the_name;
        }
        advance();
        the_export.expression.push(the_thing);
    }

    the_export.expression = [];
    if (next_token.id === "default") {
        if (exports.default !== undefined) {
            warn("duplicate_a");
        }
        advance("default");
        the_thing = expression(0);
        if (
            the_thing.id !== "("
            || the_thing.expression[0].id !== "."
            || the_thing.expression[0].expression.id !== "Object"
            || the_thing.expression[0].name.id !== "freeze"
        ) {
            warn("freeze_exports", the_thing);
        }
        if (next_token.id === ";") {
            semicolon();
        }
        exports.default = the_thing;
        the_export.expression.push(the_thing);
    } else {
        if (next_token.id === "function") {
            warn("freeze_exports");
            the_thing = statement();
            the_name = the_thing.name;
            the_id = the_name.id;
            the_name.used += 1;
            if (exports[the_id] !== undefined) {
                warn("duplicate_a", the_name);
            }
            exports[the_id] = the_thing;
            the_export.expression.push(the_thing);
            the_thing.statement = false;
            the_thing.arity = "unary";
        } else if (
            next_token.id === "var"
            || next_token.id === "let"
            || next_token.id === "const"
        ) {
            warn("unexpected_a", next_token);
            statement();
        } else if (next_token.id === "{") {
            advance("{");
            (function loop() {
                export_id();
                if (next_token.id === ",") {
                    advance(",");
                    return loop();
                }
            }());
            advance("}");
            semicolon();
        } else {
            stop("unexpected_a");
        }
    }
    module_mode = true;
    return the_export;
});
stmt("for", function () {
    var first;
    var the_for = token;
    if (!option.for) {
        warn("unexpected_a", the_for);
    }
    not_top_level(the_for);
    functionage.loop += 1;
    advance("(");
    token.free = true;
    if (next_token.id === ";") {
        return stop("expected_a_b", the_for, "while (", "for (;");
    }
    if (
        next_token.id === "var"
        || next_token.id === "let"
        || next_token.id === "const"
    ) {
        return stop("unexpected_a");
    }
    first = expression(0);
    if (first.id === "in") {
        if (first.expression[0].arity !== "variable") {
            warn("bad_assignment_a", first.expression[0]);
        }
        the_for.name = first.expression[0];
        the_for.expression = first.expression[1];
        warn("expected_a_b", the_for, "Object.keys", "for in");
    } else {
        the_for.initial = first;
        advance(";");
        the_for.expression = expression(0);
        advance(";");
        the_for.inc = expression(0);
        if (the_for.inc.id === "++") {
            warn("expected_a_b", the_for.inc, "+= 1", "++");
        }
    }
    advance(")");
    the_for.block = block();
    if (the_for.block.disrupt === true) {
        warn("weird_loop", the_for);
    }
    functionage.loop -= 1;
    return the_for;
});
stmt("function", do_function);
stmt("if", function () {
    var the_else;
    var the_if = token;
    the_if.expression = condition();
    the_if.block = block();
    if (next_token.id === "else") {
        advance("else");
        the_else = token;
        the_if.else = (
            next_token.id === "if"
            ? statement()
            : block()
        );
        if (the_if.block.disrupt === true) {
            if (the_if.else.disrupt === true) {
                the_if.disrupt = true;
            } else {
                warn("unexpected_a", the_else);
            }
        }
    }
    return the_if;
});
stmt("import", function () {
    var the_import = token;
    var name;
    if (typeof module_mode === "object") {
        warn("unexpected_directive_a", module_mode, module_mode.directive);
    }
    module_mode = true;
    if (next_token.identifier) {
        name = next_token;
        advance();
        if (name.id === "ignore") {
            warn("unexpected_a", name);
        }
        enroll(name, "variable", true);
        the_import.name = name;
    } else {
        var names = [];
        advance("{");
        if (next_token.id !== "}") {
            while (true) {
                if (!next_token.identifier) {
                    stop("expected_identifier_a");
                }
                name = next_token;
                advance();
                if (name.id === "ignore") {
                    warn("unexpected_a", name);
                }
                enroll(name, "variable", true);
                names.push(name);
                if (next_token.id !== ",") {
                    break;
                }
                advance(",");
            }
        }
        advance("}");
        the_import.name = names;
    }
    advance("from");
    advance("(string)");
    the_import.import = token;
    if (!rx_module.test(token.value)) {
        warn("bad_module_name_a", token);
    }
    froms.push(token.value);
    semicolon();
    return the_import;
});
stmt("let", do_var);
stmt("return", function () {
    var the_return = token;
    not_top_level(the_return);
    if (functionage.finally > 0) {
        warn("unexpected_a", the_return);
    }
    the_return.disrupt = true;
    if (next_token.id !== ";" && the_return.line === next_token.line) {
        the_return.expression = expression(10);
    }
    advance(";");
    return the_return;
});
stmt("switch", function () {
    var dups = [];
    var last;
    var stmts;
    var the_cases = [];
    var the_disrupt = true;
    var the_switch = token;
    not_top_level(the_switch);
    if (functionage.finally > 0) {
        warn("unexpected_a", the_switch);
    }
    functionage.switch += 1;
    advance("(");
    token.free = true;
    the_switch.expression = expression(0);
    the_switch.block = the_cases;
    advance(")");
    advance("{");
    (function major() {
        var the_case = next_token;
        the_case.arity = "statement";
        the_case.expression = [];
        (function minor() {
            advance("case");
            token.switch = true;
            var exp = expression(0);
            if (dups.some(function (thing) {
                return are_similar(thing, exp);
            })) {
                warn("unexpected_a", exp);
            }
            dups.push(exp);
            the_case.expression.push(exp);
            advance(":");
            if (next_token.id === "case") {
                return minor();
            }
        }());
        stmts = statements();
        if (stmts.length < 1) {
            warn("expected_statements_a");
            return;
        }
        the_case.block = stmts;
        the_cases.push(the_case);
        last = stmts[stmts.length - 1];
        if (last.disrupt) {
            if (last.id === "break" && last.label === undefined) {
                the_disrupt = false;
            }
        } else {
            warn(
                "expected_a_before_b",
                next_token,
                "break;",
                artifact(next_token)
            );
        }
        if (next_token.id === "case") {
            return major();
        }
    }());
    dups = undefined;
    if (next_token.id === "default") {
        var the_default = next_token;
        advance("default");
        token.switch = true;
        advance(":");
        the_switch.else = statements();
        if (the_switch.else.length < 1) {
            warn("unexpected_a", the_default);
            the_disrupt = false;
        } else {
            var the_last = the_switch.else[the_switch.else.length - 1];
            if (the_last.id === "break" && the_last.label === undefined) {
                warn("unexpected_a", the_last);
                the_last.disrupt = false;
            }
            the_disrupt = the_disrupt && the_last.disrupt;
        }
    } else {
        the_disrupt = false;
    }
    advance("}", the_switch);
    functionage.switch -= 1;
    the_switch.disrupt = the_disrupt;
    return the_switch;
});
stmt("throw", function () {
    var the_throw = token;
    the_throw.disrupt = true;
    the_throw.expression = expression(10);
    semicolon();
    if (functionage.try > 0) {
        warn("unexpected_a", the_throw);
    }
    return the_throw;
});
stmt("try", function () {
    var the_catch;
    var the_disrupt;
    var the_try = token;
    if (functionage.try > 0) {
        warn("unexpected_a", the_try);
    }
    functionage.try += 1;
    the_try.block = block();
    the_disrupt = the_try.block.disrupt;
    if (next_token.id === "catch") {
        var ignored = "ignore";
        the_catch = next_token;
        the_try.catch = the_catch;
        advance("catch");
        if (next_token.id === "(") {
            advance("(");
            if (!next_token.identifier) {
                return stop("expected_identifier_a", next_token);
            }
            if (next_token.id !== "ignore") {
                ignored = undefined;
                the_catch.name = next_token;
                enroll(next_token, "exception", true);
            }
            advance();
            advance(")");
        }
        the_catch.block = block(ignored);
        if (the_catch.block.disrupt !== true) {
            the_disrupt = false;
        }
    } else {
        warn(
            "expected_a_before_b",
            next_token,
            "catch",
            artifact(next_token)
        );
    }
    if (next_token.id === "finally") {
        functionage.finally += 1;
        advance("finally");
        the_try.else = block();
        the_disrupt = the_try.else.disrupt;
        functionage.finally -= 1;
    }
    the_try.disrupt = the_disrupt;
    functionage.try -= 1;
    return the_try;
});
stmt("var", do_var);
stmt("while", function () {
    var the_while = token;
    not_top_level(the_while);
    functionage.loop += 1;
    the_while.expression = condition();
    the_while.block = block();
    if (the_while.block.disrupt === true) {
        warn("weird_loop", the_while);
    }
    functionage.loop -= 1;
    return the_while;
});
stmt("with", function () {
    stop("unexpected_a", token);
});

ternary("?", ":");

// Ambulation of the parse tree.

function action(when) {

// Produce a function that will register task functions that will be called as
// the tree is traversed.

    return function (arity, id, task) {
        var a_set = when[arity];
        var i_set;

// The id parameter is optional. If excluded, the task will be applied to all
// ids.

        if (typeof id !== "string") {
            task = id;
            id = "(all)";
        }

// If this arity has no registrations yet, then create a set object to hold
// them.

        if (a_set === undefined) {
            a_set = empty();
            when[arity] = a_set;
        }

// If this id has no registrations yet, then create a set array to hold them.

        i_set = a_set[id];
        if (i_set === undefined) {
            i_set = [];
            a_set[id] = i_set;
        }

// Register the task with the arity and the id.

        i_set.push(task);
    };
}

function amble(when) {

// Produce a function that will act on the tasks registered by an action
// function while walking the tree.

    return function (the_token) {

// Given a task set that was built by an action function, run all of the
// relevant tasks on the token.

        var a_set = when[the_token.arity];
        var i_set;

// If there are tasks associated with the token's arity...

        if (a_set !== undefined) {

// If there are tasks associated with the token's id...

            i_set = a_set[the_token.id];
            if (i_set !== undefined) {
                i_set.forEach(function (task) {
                    return task(the_token);
                });
            }

// If there are tasks for all ids.

            i_set = a_set["(all)"];
            if (i_set !== undefined) {
                i_set.forEach(function (task) {
                    return task(the_token);
                });
            }
        }
    };
}

var posts = empty();
var pres = empty();
var preaction = action(pres);
var postaction = action(posts);
var preamble = amble(pres);
var postamble = amble(posts);

function walk_expression(thing) {
    if (thing) {
        if (Array.isArray(thing)) {
            thing.forEach(walk_expression);
        } else {
            preamble(thing);
            walk_expression(thing.expression);
            if (thing.id === "function") {
                walk_statement(thing.block);
            }
            if (thing.arity === "pre" || thing.arity === "post") {
                warn("unexpected_a", thing);
            } else if (
                thing.arity === "statement"
                || thing.arity === "assignment"
            ) {
                warn("unexpected_statement_a", thing);
            }
            postamble(thing);
        }
    }
}

function walk_statement(thing) {
    if (thing) {
        if (Array.isArray(thing)) {
            thing.forEach(walk_statement);
        } else {
            preamble(thing);
            walk_expression(thing.expression);
            if (thing.arity === "binary") {
                if (thing.id !== "(") {
                    warn("unexpected_expression_a", thing);
                }
            } else if (
                thing.arity !== "statement"
                && thing.arity !== "assignment"
            ) {
                warn((
                    // jslint-hack - ternary-condition
                    (
                        thing.id === "(string)"
                        && thing.value === "use strict"
                    )
                    ? "unexpected_a"
                    : "unexpected_expression_a"
                ), thing);
            }
            walk_statement(thing.block);
            walk_statement(thing.else);
            postamble(thing);
        }
    }
}

function lookup(thing) {
    if (thing.arity === "variable") {

// Look up the variable in the current context.

        var the_variable = functionage.context[thing.id];

// If it isn't local, search all the other contexts. If there are name
// collisions, take the most recent.

        if (the_variable === undefined) {
            stack.forEach(function (outer) {
                var a_variable = outer.context[thing.id];
                if (
                    a_variable !== undefined
                    && a_variable.role !== "label"
                ) {
                    the_variable = a_variable;
                }
            });

// If it isn't in any of those either, perhaps it is a predefined global.
// If so, add it to the global context.

            if (the_variable === undefined) {
                if (declared_globals[thing.id] === undefined) {
                    warn("undeclared_a", thing);
                    return;
                }
                the_variable = {
                    dead: false,
                    parent: global,
                    id: thing.id,
                    init: true,
                    role: "variable",
                    used: 0,
                    writable: false
                };
                global.context[thing.id] = the_variable;
            }
            the_variable.closure = true;
            functionage.context[thing.id] = the_variable;
        } else if (the_variable.role === "label") {
            warn("label_a", thing);
        }
        if (
            the_variable.dead
            && (
                the_variable.calls === undefined
                || the_variable.calls[functionage.name.id] === undefined
            )
        ) {
            warn("out_of_scope_a", thing);
        }
        return the_variable;
    }
}

function subactivate(name) {
    name.init = true;
    name.dead = false;
    blockage.live.push(name);
}

function preaction_function(thing) {
    if (thing.arity === "statement" && blockage.body !== true) {
        warn("unexpected_a", thing);
    }
    if (thing.level === 1) {
        if (
            module_mode === true
            || global.strict !== undefined
            || thing.complex
        ) {
            if (thing.id !== "=>" && thing.block.strict !== undefined) {
                warn("unexpected_a", thing.block.strict);
            }
        } else {
            if (thing.block.strict === undefined) {
                warn("use_strict", thing);
            }
        }
    }
    stack.push(functionage);
    block_stack.push(blockage);
    functionage = thing;
    blockage = thing;
    thing.live = [];
    if (typeof thing.name === "object") {
        thing.name.dead = false;
        thing.name.init = true;
    }
    if (thing.extra === "get") {
        if (thing.parameters.length !== 0) {
            warn("bad_get", thing);
        }
    } else if (thing.extra === "set") {
        if (thing.parameters.length !== 1) {
            warn("bad_set", thing);
        }
    }
    thing.parameters.forEach(function (name) {
        walk_expression(name.expression);
        if (name.id === "{" || name.id === "[") {
            name.names.forEach(subactivate);
        } else {
            name.dead = false;
            name.init = true;
        }
    });
}

function bitwise_check(thing) {
    if (!option.bitwise && bitwiseop[thing.id] === true) {
        warn("unexpected_a", thing);
    }
    if (
        thing.id !== "("
        && thing.id !== "&&"
        && thing.id !== "||"
        && thing.id !== "="
        && Array.isArray(thing.expression)
        && thing.expression.length === 2
        && (
            relationop[thing.expression[0].id] === true
            || relationop[thing.expression[1].id] === true
        )
    ) {
        warn("unexpected_a", thing);
    }
}

function pop_block() {
    blockage.live.forEach(function (name) {
        name.dead = true;
    });
    delete blockage.live;
    blockage = block_stack.pop();
}

function activate(name) {
    name.dead = false;
    if (name.expression !== undefined) {
        walk_expression(name.expression);
        if (name.id === "{" || name.id === "[") {
            name.names.forEach(subactivate);
        } else {
            name.init = true;
        }
    }
    blockage.live.push(name);
}

function action_var(thing) {
    thing.names.forEach(activate);
}

preaction("assignment", bitwise_check);
preaction("binary", bitwise_check);
preaction("binary", function (thing) {
    if (relationop[thing.id] === true) {
        var left = thing.expression[0];
        var right = thing.expression[1];
        if (left.id === "NaN" || right.id === "NaN") {
            warn("number_isNaN", thing);
        } else if (left.id === "typeof") {
            if (right.id !== "(string)") {
                if (right.id !== "typeof") {
                    warn("expected_string_a", right);
                }
            } else {
                var value = right.value;
                if (value === "null" || value === "undefined") {
                    warn("unexpected_typeof_a", right, value);
                } else if (
                    value !== "boolean"
                    && value !== "function"
                    && value !== "number"
                    && value !== "object"
                    && value !== "string"
                    && value !== "symbol"
                ) {
                    warn("expected_type_string_a", right, value);
                }
            }
        }
    }
});
preaction("binary", "==", function (thing) {
    warn("expected_a_b", thing, "===", "==");
});
preaction("binary", "!=", function (thing) {
    warn("expected_a_b", thing, "!==", "!=");
});
preaction("binary", "=>", preaction_function);
preaction("binary", "||", function (thing) {
    thing.expression.forEach(function (thang) {
        if (thang.id === "&&" && !thang.wrapped) {
            warn("and", thang);
        }
    });
});
preaction("binary", "(", function (thing) {
    var left = thing.expression[0];
    if (
        left.identifier
        && functionage.context[left.id] === undefined
        && typeof functionage.name === "object"
    ) {
        var parent = functionage.name.parent;
        if (parent) {
            var left_variable = parent.context[left.id];
            if (
                left_variable !== undefined
                && left_variable.dead
                && left_variable.parent === parent
                && left_variable.calls !== undefined
                && left_variable.calls[functionage.name.id] !== undefined
            ) {
                left_variable.dead = false;
            }
        }
    }
});
preaction("binary", "in", function (thing) {
    warn("infix_in", thing);
});
preaction("binary", "instanceof", function (thing) {
    warn("unexpected_a", thing);
});
preaction("binary", ".", function (thing) {
    if (thing.expression.new) {
        thing.new = true;
    }
});
preaction("statement", "{", function (thing) {
    block_stack.push(blockage);
    blockage = thing;
    thing.live = [];
});
preaction("statement", "for", function (thing) {
    if (thing.name !== undefined) {
        var the_variable = lookup(thing.name);
        if (the_variable !== undefined) {
            the_variable.init = true;
            if (!the_variable.writable) {
                warn("bad_assignment_a", thing.name);
            }
        }
    }
    walk_statement(thing.initial);
});
preaction("statement", "function", preaction_function);
preaction("unary", "~", bitwise_check);
preaction("unary", "function", preaction_function);
preaction("variable", function (thing) {
    var the_variable = lookup(thing);
    if (the_variable !== undefined) {
        thing.variable = the_variable;
        the_variable.used += 1;
    }
});

function init_variable(name) {
    var the_variable = lookup(name);
    if (the_variable !== undefined) {
        if (the_variable.writable) {
            the_variable.init = true;
            return;
        }
    }
    warn("bad_assignment_a", name);
}

postaction("assignment", "+=", function (thing) {
    var right = thing.expression[1];
    if (right.constant) {
        if (
            right.value === ""
            || (right.id === "(number)" && right.value === "0")
            || right.id === "(boolean)"
            || right.id === "null"
            || right.id === "undefined"
            || Number.isNaN(right.value)
        ) {
            warn("unexpected_a", right);
        }
    }
});
postaction("assignment", function (thing) {

// Assignment using = sets the init property of a variable. No other assignment
// operator can do this. A = token keeps that variable (or array of variables
// in case of destructuring) in its name property.

    var lvalue = thing.expression[0];
    if (thing.id === "=") {
        if (thing.names !== undefined) {
            if (Array.isArray(thing.names)) {
                thing.names.forEach(init_variable);
            } else {
                init_variable(thing.names);
            }
        } else {
            if (lvalue.id === "[" || lvalue.id === "{") {
                lvalue.expression.forEach(function (thing) {
                    if (thing.variable) {
                        thing.variable.init = true;
                    }
                });
            } else if (
                lvalue.id === "."
                && thing.expression[1].id === "undefined"
            ) {
                warn(
                    "expected_a_b",
                    lvalue.expression,
                    "delete",
                    "undefined"
                );
            }
        }
    } else {
        if (lvalue.arity === "variable") {
            if (!lvalue.variable || lvalue.variable.writable !== true) {
                warn("bad_assignment_a", lvalue);
            }
        }
        var right = syntax[thing.expression[1].id];
        if (
            right !== undefined
            && (
                right.id === "function"
                || right.id === "=>"
                || (
                    right.constant
                    && right.id !== "(number)"
                    && (right.id !== "(string)" || thing.id !== "+=")
                )
            )
        ) {
            warn("unexpected_a", thing.expression[1]);
        }
    }
});

function postaction_function(thing) {
    delete functionage.finally;
    delete functionage.loop;
    delete functionage.switch;
    delete functionage.try;
    functionage = stack.pop();
    if (thing.wrapped) {
        warn("unexpected_parens", thing);
    }
    return pop_block();
}

postaction("binary", function (thing) {
    var right;
    if (relationop[thing.id]) {
        if (
            is_weird(thing.expression[0])
            || is_weird(thing.expression[1])
            || are_similar(thing.expression[0], thing.expression[1])
            || (
                thing.expression[0].constant === true
                && thing.expression[1].constant === true
            )
        ) {
            warn("weird_relation_a", thing);
        }
    }
    if (thing.id === "+") {
        if (!option.convert) {
            if (thing.expression[0].value === "") {
                warn("expected_a_b", thing, "String(...)", "\"\" +");
            } else if (thing.expression[1].value === "") {
                warn("expected_a_b", thing, "String(...)", "+ \"\"");
            }
        }
    } else if (thing.id === "[") {
        if (thing.expression[0].id === "window") {
            warn("weird_expression_a", thing, "window[...]");
        }
        if (thing.expression[0].id === "self") {
            warn("weird_expression_a", thing, "self[...]");
        }
    } else if (thing.id === "." || thing.id === "?.") {
        if (thing.expression.id === "RegExp") {
            warn("weird_expression_a", thing);
        }
    } else if (thing.id !== "=>" && thing.id !== "(") {
        right = thing.expression[1];
        if (
            (thing.id === "+" || thing.id === "-")
            && right.id === thing.id
            && right.arity === "unary"
            && !right.wrapped
        ) {
            warn("wrap_unary", right);
        }
        if (
            thing.expression[0].constant === true
            && right.constant === true
        ) {
            thing.constant = true;
        }
    }
});
postaction("binary", "&&", function (thing) {
    if (
        is_weird(thing.expression[0])
        || are_similar(thing.expression[0], thing.expression[1])
        || thing.expression[0].constant === true
        || thing.expression[1].constant === true
    ) {
        warn("weird_condition_a", thing);
    }
});
postaction("binary", "||", function (thing) {
    if (
        is_weird(thing.expression[0])
        || are_similar(thing.expression[0], thing.expression[1])
        || thing.expression[0].constant === true
    ) {
        warn("weird_condition_a", thing);
    }
});
postaction("binary", "=>", postaction_function);
postaction("binary", "(", function (thing) {
    var left = thing.expression[0];
    var arg;
    var the_new;
    if (left.id === "new") {
        the_new = left;
        left = left.expression;
    }
    if (left.id === "function") {
        if (!thing.wrapped) {
            warn("wrap_immediate", thing);
        }
    } else if (left.identifier) {
        if (the_new !== undefined) {
            if (
                left.id[0] > "Z"
                || left.id === "Boolean"
                || left.id === "Number"
                || left.id === "String"
                || left.id === "Symbol"
            ) {
                warn("unexpected_a", the_new);
            } else if (left.id === "Function") {
                if (!option.eval) {
                    warn("unexpected_a", left, "new Function");
                }
            } else if (left.id === "Array") {
                arg = thing.expression;
                if (arg.length !== 2 || arg[1].id === "(string)") {
                    warn("expected_a_b", left, "[]", "new Array");
                }
            } else if (left.id === "Object") {
                warn(
                    "expected_a_b",
                    left,
                    "Object.create(null)",
                    "new Object"
                );
            }
        } else {
            if (
                left.id[0] >= "A"
                && left.id[0] <= "Z"
                && left.id !== "Boolean"
                && left.id !== "Number"
                && left.id !== "String"
                && left.id !== "Symbol"
            ) {
                warn(
                    "expected_a_before_b",
                    left,
                    "new",
                    artifact(left)
                );
            }
        }
    } else if (left.id === ".") {
        var cack = the_new !== undefined;
        if (left.expression.id === "Date" && left.name.id === "UTC") {
            cack = !cack;
        }
        if (rx_cap.test(left.name.id) !== cack) {
            if (the_new !== undefined) {
                warn("unexpected_a", the_new);
            } else {
                warn(
                    "expected_a_before_b",
                    left.expression,
                    "new",
                    left.name.id
                );
            }
        }
        if (left.name.id === "getTime") {
            var paren = left.expression;
            if (paren.id === "(") {
                var array = paren.expression;
                if (array.length === 1) {
                    var new_date = array[0];
                    if (
                        new_date.id === "new"
                        && new_date.expression.id === "Date"
                    ) {
                        warn(
                            "expected_a_b",
                            new_date,
                            "Date.now()",
                            "new Date().getTime()"
                        );
                    }
                }
            }
        }
    }
});
postaction("binary", "[", function (thing) {
    if (thing.expression[0].id === "RegExp") {
        warn("weird_expression_a", thing);
    }
    if (is_weird(thing.expression[1])) {
        warn("weird_expression_a", thing.expression[1]);
    }
});
postaction("statement", "{", pop_block);
postaction("statement", "const", action_var);
postaction("statement", "export", top_level_only);
postaction("statement", "for", function (thing) {
    walk_statement(thing.inc);
});
postaction("statement", "function", postaction_function);
postaction("statement", "import", function (the_thing) {
    var name = the_thing.name;
    if (Array.isArray(name)) {
        name.forEach(function (name) {
            name.dead = false;
            name.init = true;
            blockage.live.push(name);
        });
    } else {
        name.dead = false;
        name.init = true;
        blockage.live.push(name);
    }
    return top_level_only(the_thing);
});
postaction("statement", "let", action_var);
postaction("statement", "try", function (thing) {
    if (thing.catch !== undefined) {
        var the_name = thing.catch.name;
        if (the_name !== undefined) {
            var the_variable = functionage.context[the_name.id];
            the_variable.dead = false;
            the_variable.init = true;
        }
        walk_statement(thing.catch.block);
    }
});
postaction("statement", "var", action_var);
postaction("ternary", function (thing) {
    if (
        is_weird(thing.expression[0])
        || thing.expression[0].constant === true
        || are_similar(thing.expression[1], thing.expression[2])
    ) {
        warn("unexpected_a", thing);
    } else if (are_similar(thing.expression[0], thing.expression[1])) {
        warn("expected_a_b", thing, "||", "?");
    } else if (are_similar(thing.expression[0], thing.expression[2])) {
        warn("expected_a_b", thing, "&&", "?");
    } else if (
        thing.expression[1].id === "true"
        && thing.expression[2].id === "false"
    ) {
        warn("expected_a_b", thing, "!!", "?");
    } else if (
        thing.expression[1].id === "false"
        && thing.expression[2].id === "true"
    ) {
        warn("expected_a_b", thing, "!", "?");
    } else if (
        thing.expression[0].wrapped !== true
        && (
            thing.expression[0].id === "||"
            || thing.expression[0].id === "&&"
        )
    ) {
        warn("wrap_condition", thing.expression[0]);
    }
});
postaction("unary", function (thing) {
    if (thing.id === "`") {
        if (thing.expression.every(function (thing) {
            return thing.constant;
        })) {
            thing.constant = true;
        }
    } else if (thing.id === "!") {
        if (thing.expression.constant === true) {
            warn("unexpected_a", thing);
        }
    } else if (thing.id === "!!") {
        if (!option.convert) {
            warn("expected_a_b", thing, "Boolean(...)", "!!");
        }
    } else if (
        thing.id !== "["
        && thing.id !== "{"
        && thing.id !== "function"
        && thing.id !== "new"
    ) {
        if (thing.expression.constant === true) {
            thing.constant = true;
        }
    }
});
postaction("unary", "function", postaction_function);
postaction("unary", "+", function (thing) {
    if (!option.convert) {
        warn("expected_a_b", thing, "Number(...)", "+");
    }
    var right = thing.expression;
    if (right.id === "(" && right.expression[0].id === "new") {
        warn("unexpected_a_before_b", thing, "+", "new");
    } else if (
        right.constant
        || right.id === "{"
        || (right.id === "[" && right.arity !== "binary")
    ) {
        warn("unexpected_a", thing, "+");
    }
});

function delve(the_function) {
    Object.keys(the_function.context).forEach(function (id) {
        if (id !== "ignore") {
            var name = the_function.context[id];
            if (name.parent === the_function) {
                if (
                    name.used === 0
                    && (
                        name.role !== "function"
                        || name.parent.arity !== "unary"
                    )
                ) {
                    warn("unused_a", name);
                } else if (!name.init) {
                    warn("uninitialized_a", name);
                }
            }
        }
    });
}

function uninitialized_and_unused() {

// Delve into the functions looking for variables that were not initialized
// or used. If the file imports or exports, then its global object is also
// delved.

    if (module_mode === true || option.node) {
        delve(global);
    }
    functions.forEach(delve);
}

// Go through the token list, looking at usage of whitespace.

function whitage() {
    var closer = "(end)";
    var free = false;
    var left = global;
    var margin = 0;
    var nr_comments_skipped = 0;
    var open = true;
    var opening = true;
    var right;

    function pop() {
        var previous = stack.pop();
        closer = previous.closer;
        free = previous.free;
        margin = previous.margin;
        open = previous.open;
        opening = previous.opening;
    }

    function push() {
        stack.push({
            closer,
            free,
            margin,
            open,
            opening
        });
    }

    function expected_at(at) {
        warn(
            "expected_a_at_b_c",
            right,
            artifact(right),
            fudge + at,
            artifact_column(right)
        );
    }

    function at_margin(fit) {
        var at = margin + fit;
        // jslint-hack - expected_at
        if (right.from !== at) {
            return expected_at(at);
        }
    }

    function no_space_only() {
        if (
            left.id !== "(global)"
            && left.nr + 1 === right.nr
            && (
                left.line !== right.line
                || left.thru !== right.from
            )
        ) {
            warn(
                "unexpected_space_a_b",
                right,
                artifact(left),
                artifact(right)
            );
        }
    }

    function no_space() {
        if (left.line === right.line) {
            if (left.thru !== right.from && nr_comments_skipped === 0) {
                warn(
                    "unexpected_space_a_b",
                    right,
                    artifact(left),
                    artifact(right)
                );
            }
        } else {
            if (open) {
                var at = (
                    free
                    ? margin
                    : margin + 8
                );
                // jslint-hack - expected_at
                if (right.from !== at) {
                    expected_at(at);
                }
            } else {
                // jslint-hack - expected_at
                if (right.from !== margin + 8) {
                    expected_at(margin + 8);
                }
            }
        }
    }

    function one_space_only() {
        if (left.line !== right.line || left.thru + 1 !== right.from) {
            warn(
                "expected_space_a_b",
                right,
                artifact(left),
                artifact(right)
            );
        }
    }

    function one_space() {
        if (left.line === right.line || !open) {
            if (left.thru + 1 !== right.from && nr_comments_skipped === 0) {
                warn(
                    "expected_space_a_b",
                    right,
                    artifact(left),
                    artifact(right)
                );
            }
        } else {
            // jslint-hack - expected_at
            if (right.from !== margin) {
                expected_at(margin);
            }
        }
    }

    stack = [];
    tokens.forEach(function (the_token) {
        right = the_token;
        if (right.id === "(comment)" || right.id === "(end)") {
            nr_comments_skipped += 1;
        } else {

// If left is an opener and right is not the closer, then push the previous
// state. If the token following the opener is on the next line, then this is
// an open form. If the tokens are on the same line, then it is a closed form.
// Open form is more readable, with each item (statement, argument, parameter,
// etc) starting on its own line. Closed form is more compact. Statement blocks
// are always in open form.

            var new_closer = opener[left.id];
            if (typeof new_closer === "string") {
                if (new_closer !== right.id) {
                    opening = left.line !== right.line;
                    push();
                    closer = new_closer;
                    if (opening) {
                        free = closer === ")" && left.free;
                        open = true;
                        // jslint-hack - conditional-margin
                        if (
                            !option.utility2
                            || lines[right.line].startsWith(" ")
                        ) {
                            margin += 4;
                        }
                        if (right.role === "label") {
                            // jslint-hack - expected_at
                            if (right.from !== 0) {
                                expected_at(0);
                            }
                        } else if (right.switch) {
                            at_margin(-4);
                        } else {
                            at_margin(0);
                        }
                    } else {
                        if (right.statement || right.role === "label") {
                            warn(
                                "expected_line_break_a_b",
                                right,
                                artifact(left),
                                artifact(right)
                            );
                        }
                        free = false;
                        open = false;
                        no_space_only();
                    }
                } else {

// If left and right are opener and closer, then the placement of right depends
// on the openness. Illegal pairs (like '{]') have already been detected.

                    if (left.line === right.line) {
                        no_space();
                    } else {
                        at_margin(0);
                    }
                }
            } else {
                if (right.statement === true) {
                    if (left.id === "else") {
                        one_space_only();
                    } else {
                        at_margin(0);
                        open = false;
                    }

// If right is a closer, then pop the previous state.
                } else if (right.id === closer) {
                    pop();
                    if (opening && right.id !== ";") {
                        at_margin(0);
                    } else {
                        no_space_only();
                    }
                } else {

// Left is not an opener, and right is not a closer.
// The nature of left and right will determine the space between them.

// If left is ',' or ';' or right is a statement then if open,
// right must go at the margin, or if closed, a space between.

                    if (right.switch) {
                        at_margin(-4);
                    } else if (right.role === "label") {
                        // jslint-hack - expected_at
                        if (right.from !== 0) {
                            expected_at(0);
                        }
                    } else if (left.id === ",") {
                        if (!open || (
                            (free || closer === "]")
                            && left.line === right.line
                        )) {
                            one_space();
                        } else {
                            at_margin(0);
                        }

// If right is a ternary operator, line it up on the margin.
                    } else if (right.arity === "ternary") {
                        if (open) {
                            at_margin(0);
                        } else {
                            warn("use_open", right);
                        }
                    } else if (
                        right.arity === "binary"
                        && right.id === "("
                        && free
                    ) {
                        no_space();
                    } else if (
                        left.id === "."
                        || left.id === "?."
                        || left.id === "..."
                        || right.id === ","
                        || right.id === ";"
                        || right.id === ":"
                        || (
                            right.arity === "binary"
                            && (right.id === "(" || right.id === "[")
                        )
                        || (
                            right.arity === "function"
                            && left.id !== "function"
                        )
                    ) {
                        no_space_only();
                    } else if (right.id === "." || right.id === "?.") {
                        // jslint-hack - method-chain
                        // https://github.com/douglascrockford/JSLint/commit/752c82d860ac14d35d492dc5c6ad0a0ed8227e76#diff-01d3d81a6eb6d82af3c377b55dc4fa28L4692
                        if (left.line === right.line) {
                            no_space();
                        } else {
                            at_margin(0);
                        }
                    } else if (left.id === ";") {
                        if (open) {
                            at_margin(0);
                        } else {
                            one_space();
                        }
                    } else if (
                        left.arity === "ternary"
                        || left.id === "case"
                        || left.id === "catch"
                        || left.id === "else"
                        || left.id === "finally"
                        || left.id === "while"
                        || right.id === "catch"
                        || right.id === "else"
                        || right.id === "finally"
                        || (right.id === "while" && !right.statement)
                        || (left.id === ")" && right.id === "{")
                    ) {
                        one_space_only();
                    } else if (
                        left.id === "var"
                        || left.id === "const"
                        || left.id === "let"
                    ) {
                        push();
                        closer = ";";
                        free = false;
                        open = left.open;
                        if (open) {
                            margin = margin + 4;
                            at_margin(0);
                        } else {
                            one_space_only();
                        }
                    } else if (

// There is a space between left and right.

                        spaceop[left.id] === true
                        || spaceop[right.id] === true
                        || (
                            left.arity === "binary"
                            && (left.id === "+" || left.id === "-")
                        )
                        || (
                            right.arity === "binary"
                            && (right.id === "+" || right.id === "-")
                        )
                        || left.id === "function"
                        || left.id === ":"
                        || ((
                            left.identifier
                            || left.id === "(string)"
                            || left.id === "(number)"
                        ) && (
                            right.identifier
                            || right.id === "(string)"
                            || right.id === "(number)"
                        ))
                        || (left.arity === "statement" && right.id !== ";")
                    ) {
                        one_space();
                    } else if (left.arity === "unary" && left.id !== "`") {
                        no_space_only();
                    }
                }
            }
            nr_comments_skipped = 0;
            delete left.calls;
            delete left.dead;
            delete left.free;
            delete left.init;
            delete left.open;
            delete left.used;
            left = right;
        }
    });
}

// The jslint function itself.

// jslint-hack - jslint0
var jslint0 = Object.freeze(function (
    source = "",
    option_object = empty(),
    global_array = []
) {
    try {
        warnings = [];
        option = Object.assign(empty(), option_object);
        anon = "anonymous";
        block_stack = [];
        declared_globals = empty();
        directive_mode = true;
        directives = [];
        // jslint-hack - early_stop = false
        early_stop = false;
        exports = empty();
        froms = [];
        fudge = (
            option.fudge
            ? 1
            : 0
        );
        functions = [];
        global = {
            id: "(global)",
            body: true,
            context: empty(),
            from: 0,
            level: 0,
            line: 0,
            live: [],
            loop: 0,
            switch: 0,
            thru: 0
        };
        blockage = global;
        functionage = global;
        json_mode = false;
        mega_mode = false;
        module_mode = false;
        next_token = global;
        property = empty();
        shebang = false;
        stack = [];
        tenure = undefined;
        token = global;
        token_nr = 0;
        var_mode = undefined;
        populate(standard, declared_globals, false);
        populate(global_array, declared_globals, false);
        Object.keys(option).forEach(function (name) {
            if (option[name] === true) {
                var allowed = allowed_option[name];
                if (Array.isArray(allowed)) {
                    populate(allowed, declared_globals, false);
                }
            }
        });
        tokenize(source);
        advance();
        if (json_mode) {
            tree = json_value();
            advance("(end)");
        } else {

// Because browsers encourage combining of script files, the first token might
// be a semicolon to defend against a missing semicolon in the preceding file.

            if (option.browser) {
                if (next_token.id === ";") {
                    advance(";");
                }
            } else {

// If we are not in a browser, then the file form of strict pragma may be used.

                if (
                    next_token.value === "use strict"
                ) {
                    global.strict = next_token;
                    advance("(string)");
                    advance(";");
                }
            }
            tree = statements();
            advance("(end)");
            functionage = global;
            walk_statement(tree);
            if (module_mode && global.strict !== undefined) {
                warn("unexpected_a", global.strict);
            }
            // jslint-hack - !early_stop
            if (!early_stop) {
                uninitialized_and_unused();
                if (!option.white) {
                    whitage();
                }
            }
        }
        if (!option.browser) {
            directives.forEach(function (comment) {
                if (comment.directive === "global") {
                    warn("missing_browser", comment);
                }
            });
        }
        early_stop = false;
    } catch (e) {
        // jslint-hack - e.early_stop = true
        e.early_stop = true;
        if (e.name !== "JSLintError") {
            warnings.push(e);
        }
    }
    return {
        directives,
        edition: "2018-11-13",
        exports,
        froms,
        functions,
        global,
        id: "(JSLint)",
        json: json_mode,
        lines,
        module: module_mode === true,
        ok: warnings.length === 0 && !early_stop,
        option,
        property,
        shebang: (
            shebang
            ? lines[0]
            : undefined
        ),
        stop: early_stop,
        tokens,
        tree,
        warnings: warnings.sort(function (a, b) {
            return a.line - b.line || a.column - b.column;
        })
    };
});
/*
file none
*/
// jslint-hack - extra
jslint_extra = function (source, option, global_array) {
/*
 * this function will run with extra-features inside jslint-function jslint()
 */
    // init
    line_ignore = null;
    lines = (
        // ternary-condition
        Array.isArray(source)
        ? source
        : source.split(rx_crlf)
    );
    lines_extra = lines.map(function () {
        return {};
    });
    // jslint
    jslint_result = jslint0(lines, option, global_array);
    // autofix
    source = lines_extra
    .map(function (element, ii) {
        return element.source_autofix || lines[ii];
    })
    .join("\n")
    // expected_space_a_b: "Expected one space between '{a}' and '{b}'.",
    // unexpected_space_a_b: "Unexpected space between '{a}' and '{b}'.",
    .replace((
        /\s+?\u0000/g
    ), "\u0000")
    .replace((
        /(\n\u0020+)(.*?)\n\u0020*?(\/\/.*?)\u0000/g
    ), "$1$3$1$2\u0000")
    .replace((
        /\u0000expected_space_a_b\u0000/g
    ), " ")
    .replace((
        /\u0000unexpected_space_a_b\u0000/g
    ), "");
    jslint_result.lines_extra = lines_extra;
    jslint_result.source_autofix = source;
    return jslint_result;
};
local.jslint_extra = jslint_extra;
next_line_extra = function (source_line, line) {
/*
 * this function will run with extra-features inside jslint-function next_line()
 */
    var line_extra;
    var tmp;
    line_extra = {};
    line_extra.line = line;
    line_extra.source = source_line;
    lines_extra[line] = line_extra;
    tmp = (
        source_line.match(
            /^\/\*\u0020jslint\u0020(ignore:start|ignore:end|utility2:true)\u0020\*\/$/m
        )
        || source_line.slice(-50).match(
            /\u0020\/\/\u0020jslint\u0020(ignore:line)$/m
        )
    );
    switch (tmp && tmp[1]) {
    case "ignore:end":
        line_ignore = null;
        break;
    case "ignore:line":
        line_ignore = "line";
        break;
    case "ignore:start":
        line_ignore = true;
        break;
    case "utility2:true":
        option.bitwise = true;
        option.browser = true;
        option.node = true;
        option.this = true;
        option.utility2 = true;
        [
            allowed_option.browser,
            allowed_option.node,
            ["globalThis"]
        ].forEach(function (list) {
            list.forEach(function (key) {
                declared_globals[key] = false;
            });
        });
        break;
    }
    line_extra.ignore = line_ignore;
    switch (line_ignore) {
    case "line":
        line_ignore = null;
        break;
    case true:
        source_line = "";
        break;
    }
    return source_line;
};
warn_at_extra = function (warning, warnings) {
/*
 * this function will run with extra-features inside jslint-function warn_at()
 */
    var tmp;
    Object.assign(warning, lines_extra[warning.line]);
    // left, right
    ["c", "d"].forEach(function (key) {
        if (warning[key] === undefined || typeof warning[key] === "object") {
            warning[key] = Object.assign({}, warning[key]);
            Object.keys(warning[key]).forEach(function (key2) {
                if (typeof warning[key][key2] === "object") {
                    warning[key][key2] = null;
                }
            });
        }
    });
    // early_stop
    if (early_stop) {
        if (option.utility2) {
            warning.stack = warning.stack || new Error().stack;
        }
        warnings.push(warning);
        return;
    }
    // ignore
    if (warning.ignore) {
        delete warning.d.warning;
        return;
    }
    switch (option.utility2 && warning.code) {
    // bad_property_a: "Bad property name '{a}'.",
    case "bad_property_a":
        delete warning.d.warning;
        return;
    // unexpected_a: "Unexpected '{a}'.",
    case "unexpected_a":
        switch (
            JSON.stringify(warning.c.wrapped || warning.c.id)
            + " " + warning.d.id
        ) {
        case "true .":
            delete warning.d.warning;
            return;
        }
        break;
    }
    // autofix
    warning.a = warning.a || warning.source.trim();
    switch (option.autofix && warning.code) {
    // expected_a_at_b_c: "Expected '{a}' at column {b}, not column {c}.",
    case "expected_a_at_b_c":
        tmp = warning.b - warning.c;
        // autofix indent - increment
        if (tmp >= 0) {
            lines_extra[warning.line].source_autofix = (
                " ".repeat(tmp) + warning.source
            );
            break;
        }
        tmp = -tmp;
        // autofix indent - decrement
        if ((
            /^\u0020*?$/m
        ).test(warning.source.slice(0, warning.column))) {
            lines_extra[warning.line].source_autofix = (
                warning.source.slice(tmp)
            );
            break;
        }
        // autofix indent - newline
        lines_extra[warning.line].source_autofix = (
            warning.source.slice(0, warning.column) + "\n"
            + " ".repeat(warning.b) + warning.source.slice(warning.column)
        );
        break;
    // expected_identifier_a: "Expected an identifier and instead saw '{a}'.",
    case "expected_identifier_a":
        if (!(
            // newline
            (
                /^\d+$/m
            ).test(warning.a)
            && warning.source[warning.column + warning.a.length] === ":"
        )) {
            break;
        }
        lines_extra[warning.line].source_autofix = (
            warning.source.slice(0, warning.column) + "\"" + warning.a + "\""
            + warning.source.slice(warning.column + warning.a.length)
        );
        break;
    // expected_space_a_b: "Expected one space between '{a}' and '{b}'.",
    // unexpected_space_a_b: "Unexpected space between '{a}' and '{b}'.",
    case "expected_space_a_b":
    case "unexpected_space_a_b":
        lines_extra[warning.line].source_autofix = (
            warning.source.slice(0, warning.column) + "\u0000" + warning.code
            + "\u0000" + warning.source.slice(warning.column)
        );
        break;
    // use_spaces: "Use spaces, not tabs.",
    case "use_spaces":
        lines_extra[warning.line].source_autofix = (
            warning.source.replace((
                /^(\u0020*?)\t/
            ), "$1   ")
        );
        break;
    }
    if (warnings.length && warnings[warnings.length - 1].line < warning.line) {
        warnings.push(warning);
        return;
    }
    // debug
    if (option.utility2) {
        warning.option = Object.assign({}, option);
        Object.keys(warning.option).forEach(function (key) {
            if (
                typeof warning.option[key] === "object"
                || (warning.option[key] || "").length >= 100
            ) {
                delete warning.option[key];
            }
        });
        warning.source_autofix = (
            lines_extra[warning.line]
            && lines_extra[warning.line].source_autofix
        );
        warning.stack = warning.stack || new Error().stack;
    }
    warnings.unshift(warning);
};
}());



// run shared js-env code - function
(function () {
local.jslintAndPrint = function (code, file, option) {
/*
 * this function will jslint / csslint <code> and print any errors to stderr
 */
    var tmp;
    if (!(option && option.modeNext)) {
        local.jslintResult = {
            modeNext: 0
        };
    }
    code = code || "";
    file = file || "undefined";
    option = Object.assign(local.jslintResult, option || {}, {
        code: code,
        file: file
    });
    option.modeNext += 1;
    switch (option.modeNext) {
    // jslint - init
    case 1:
        // cleanup
        option.errorList = [];
        option.errorText = "";
        // fileType0
        switch (option.fileType0) {
        case ".\\n\\":
            code = code.replace((
                /\\n\\$|\\(.)/gm
            ), function (match0) {
                return (
                    match0 === "\\n\\"
                    ? ""
                    : match0[1]
                );
            });
            break;
        case ".sh":
            code = code.replace((
                /'"'"'/g
            ), "'");
            break;
        }
        // init
        option = Object.assign(option, {
            ".css": (
                /^\/\*csslint\b|(^\/\*\u0020jslint\u0020utility2:true\u0020\*\/$)/m
            ),
            ".html": (
                /^\/\*csslint\b|(^\/\*\u0020jslint\u0020utility2:true\u0020\*\/$)/m
            ),
            ".js": (
                /^\/\*jslint\b|(^\/\*\u0020jslint\u0020utility2:true\u0020\*\/$)/m
            ),
            ".json": (
                /^(.)/
            ),
            ".md": (
                /(^\/\*\u0020jslint\u0020utility2:true\u0020\*\/$)/m
            ),
            ".sh": (
                /(^#\u0020jslint\u0020utility2:true$)/m
            ),
            code0: code,
            fileType: (
                /\.\w+?$|$/m
            ).exec(file)[0]
        });
        if (option.fileType === ".js" && (
            /^\s*?[\[{]/
        ).test(code)) {
            option.fileType = ".json";
        }
        try {
            option.conditionalPassed = option[option.fileType].exec(code);
        } catch (ignore) {}
        option.utility2 = (
            option.conditionalPassed
            && option.conditionalPassed[1]
        ) || option.autofix;
        if (
            option.conditional
            && (!option.conditionalPassed || option.coverage)
        ) {
            break;
        }
        option.modeNext = 10;
        break;
    // jslint - autofix
    case 11:
        code = local.jslintAutofix(code, file, option);
        local.jslintResult = option;
        break;
    // jslint - jslint
    case 12:
        // lineOffset
        code = "\n".repeat(option.lineOffset | 0) + code;
        switch (option.fileType) {
        case ".css":
            // csslint
            Object.assign(option, local.CSSLint.verify(code));
            // init errorList
            option.errorList = option.messages.map(function (error) {
                error.column = error.col;
                error.message = (
                    error.type + " - " + error.rule.id + " - " + error.message
                    + "\n    " + error.rule.desc
                );
                return error;
            });
            break;
        case ".html":
        case ".md":
        case ".sh":
            break;
        default:
            // jslint
            Object.assign(option, local.jslint_extra(code, (
                // ternary-condition
                option.fileType === ".json"
                ? {}
                : option
            )));
            option.fileType = (
                option.json
                ? ".json"
                : ".js"
            );
            code = option.source_autofix || code;
            // prioritize fatal error
            option.warnings.forEach(function (error, ii) {
                if (error.early_stop) {
                    error.message = (
                        "[JSLint was unable to finish] - "
                        + error.message
                    );
                    option.warnings.unshift(error);
                    option.warnings.splice(ii, 1);
                }
            });
            // init errorList
            option.errorList = option.warnings.filter(function (error) {
                // bug-workaround - v8 tail-call issue
                // https://bugs.chromium.org/p/v8/issues/detail?id=8234
                if (option.json && (error && error.name === "RangeError")) {
                    option.stop = false;
                    return;
                }
                return error && error.message;
            }).map(function (error) {
                error.column = error.column + 1;
                error.evidence = error.source;
                error.line = error.line + 1;
                return error;
            });
        }
        break;
    // jslint - utility2
    case 13:
        local.jslintUtility2(code, file, option);
        break;
    // jslint - print
    default:
        // fileType0
        if (option.fileType0) {
            code = code.trim();
        } else {
            code = code.trimRight() + "\n";
        }
        switch (option.fileType0) {
        case ".\\n\\":
            code = code
            .replace((
                /\\/g
            ), "\\\\")
            .replace((
                /$/gm
            ), "\\n\\")
            .replace((
                /'/g
            ), "\\'") + "\n";
            break;
        case ".sh":
            code = code.replace((
                /'/g
            ), "'\"'\"'");
            break;
        }
        // autofix - save
        if (
            !local.isBrowser
            && option.autofix
            && !option.fileType0
            && !option.stop
            && code !== option.code0
            && local.fs.existsSync(file)
        ) {
            local.fs.writeFileSync(file, code);
            local.fs.writeFileSync(file + ".autofix.old", option.code0);
            local.child_process.spawnSync(
                "diff",
                ["-u", file + ".autofix.old", file],
                {
                    stdio: ["ignore", 1, "ignore"]
                }
            );
            local.fs.unlinkSync(file + ".autofix.old");
            console.error(
                "\u001b[1mjslint-autofix - modified and saved file " + file
                + "\u001b[22m"
            );
        }
        // print colorized error-messages to stderr
        // https://github.com/kaizhu256/JSLint/blob/cli/cli.js#L99
        option.errorList
        .filter(function (warning) {
            return warning && warning.message;
        })
        // print only first 10 warnings
        .slice(0, 10)
        .forEach(function (error, ii) {
            option.errorText = (
                option.errorText
                || " \u001b[1mjslint " + file + "\u001b[22m\n"
            );
            option.errorText += (
                ("  " + String(ii + 1)).slice(-3)
                + " \u001b[31m" + error.message + "\u001b[39m"
                + " \u001b[90m\/\/ line " + error.line + ", column "
                + error.column
                + "\u001b[39m\n"
                + ("    " + String(error.evidence).trim()).slice(0, 80) + "\n"
            );
            if (!ii && error.stack && error.a !== "debug\u0049nline") {
                tmp = error.stack;
                error.stack = null;
                option.errorText += (
                    JSON.stringify(error, null, 4) + "\n" + tmp.trim() + "\n"
                );
            }
        });
        option.errorText = option.errorText.trim();
        if (option.errorText) {
            // debug jslintResult
            local._debugJslintResult = local.jslintResult;
            // print error to stderr
            console.error(option.errorText);
        }
        return code;
    }
    // recurse
    return local.jslintAndPrint(code, file, option);
};

local.jslintAutofix = function (code, file, option) {
/*
 * this function will jslint-autofix <code>
 */
    var code0;
    var code2;
    var dataList;
    var ii;
    var rgx1;
    var rgx2;
    var tmp;
    // jslintAutofix - all
    if (option.autofix) {
        // autofix - local-function
        if (typeof(
            globalThis.utility2
            && globalThis.utility2.jslintAutofixLocalFunction
        ) === "function") {
            code = globalThis.utility2.jslintAutofixLocalFunction(code, file);
        }
        // autofix - trailing-whitespace
        code = code.replace((
            /\u0020+$/gm
        ), "");
        // autofix - whitespace
        code = code
        // autofix - whitespace - "\s*)]}"
        .replace((
            /\n+?(\n\u0020*?[)\]}])/g
        ), "$1")
        // autofix - whitespace - "\n{2}"
        .replace((
            /([^\n])\n{3}([^\n])/g
        ), "$1\n\n$2")
        // autofix - whitespace - "\n{4}"
        .replace((
            /\n{5,}/g
        ), "\n\n\n\n");
        // autofix - recurse <script>...</script>, <style>...</style>
        code = code.replace((
            /(^\/\*\u0020jslint\u0020utility2:true\u0020\*\/\\n\\\n(?:^.*?\\n\\\n)*?)(^(?:\/\/\u0020)?<\/(?:script|style)>\\n\\\n)/gm
        ), function (ignore, match1, match2, ii) {
            return local.jslintAndPrint(
                match1,
                file + (
                    match2.indexOf("style") >= 0
                    ? ".<style>.css"
                    : ".<script>.js"
                ),
                Object.assign({}, option, {
                    fileType0: ".\\n\\",
                    lineOffset: (option.lineOffset | 0) + code.slice(0, ii)
                    .replace((
                        /.+/g
                    ), "").length,
                    modeNext: 0
                })
            ) + match2;
        });
    }
    switch (option.autofix && option.fileType) {
    // jslintAutofix - .css
    case ".css":
        break;
    // jslintAutofix - .html
    case ".html":
        // autofix - recurse <script>...</script>, <style>...</style>
        code = code.replace((
            /(^\/\*\u0020jslint\u0020utility2:true\u0020\*\/\n(?:^.*?\n)*?)(^(?:\/\/\u0020)?<\/(?:script|style)>\n)/gm
        ), function (ignore, match1, match2, ii) {
            return local.jslintAndPrint(
                match1,
                file + (
                    match2.indexOf("style") >= 0
                    ? ".<style>.css"
                    : ".<script>.js"
                ),
                local.objectAssignDefault({
                    fileType0: option.fileType,
                    lineOffset: (option.lineOffset | 0) + code.slice(0, ii)
                    .replace((
                        /.+/g
                    ), "").length,
                    modeNext: 0
                }, option)
            ) + match2;
        });
        break;
    // jslintAutofix - .js
    case ".js":
        // autofix - ascii
        code = code.replace((
            /[^\n\r\t\u0020-\u007e]/g
        ), function (match0) {
            return "\\u" + (
                "0000"
                + match0.charCodeAt(0).toString(16)
            ).slice(-4);
        });
        // demux - code -> code2, dataList
        code2 = "";
        dataList = [];
        ii = 0;
        rgx1 = (
            /\\.|^\/\*\u0020jslint\u0020ignore:start\u0020\*\/$|^\/\*\u0020jslint\u0020ignore:end\u0020\*\/$|\/\*|\*\/|\/\/!!|\/\/|["'\/`]|$/gm
        );
        // parse rgx
        // https://github.com/douglascrockford/JSLint/blob/557afd32bcaa35480d31a86f02d3a8c06a4e5b5c/jslint.js#L1383
        rgx2 = (
            /(?:[^.]\b(?:case|delete|in|instanceof|new|return|typeof|void|yield)|[!%&\u0028*+,\-:;<=>?\[\^{|}~])[\s\u0028]*?\/[^*\/]/g
        );
        tmp = "";
        // shebang
        code.replace((
            /^#!.*/
        ), function (match0) {
            code2 += "#!";
            dataList.push({
                data: match0,
                type: "#_"
            });
            rgx1.lastIndex = match0.length;
            ii = rgx1.lastIndex;
        });
        while (rgx1.lastIndex < code.length) {
            tmp = rgx1.exec(code);
            if (!tmp) {
                break;
            }
            tmp.input = null;
            switch (tmp[0]) {
            case "":
                rgx1.lastIndex += 1;
                break;
            case "\"":
            case "'":
            case "/*":
            case "/* jslint ignore:start */":
            case "//!!":
            case "//":
            case "`":
                // case "/_/"
                rgx2.lastIndex = ii;
                if (rgx2.test(code) && rgx2.lastIndex - 2 <= tmp.index) {
                    rgx1.lastIndex = rgx2.lastIndex - 1;
                    tmp[0] = "/";
                }
                code2 += code.slice(ii, rgx1.lastIndex);
                ii = rgx1.lastIndex;
                while (rgx1.lastIndex < code.length) {
                    tmp[1] = rgx1.exec(code)[0];
                    switch (tmp[0] + "_" + tmp[1]) {
                    case "\"_\"":
                    case "'_'":
                    case "/* jslint ignore:start */_/* jslint ignore:end */":
                    case "/*_*/":
                    case "//!!_":
                    case "//_":
                    case "/_*/":
                    case "/_/":
                    case "`_`":
                        code2 += "_" + tmp[1];
                        dataList.push({
                            data: tmp[0] + code.slice(ii, rgx1.lastIndex),
                            type: (tmp[0] + "_" + tmp[1]).replace("/_*/", "/_/")
                        });
                        ii = 0;
                        break;
                    case "/_":
                        code2 += code.slice(ii, rgx1.lastIndex);
                        ii = 0;
                        break;
                    }
                    if (!ii) {
                        break;
                    }
                    if (!tmp[1]) {
                        rgx1.lastIndex += 1;
                    }
                }
                ii = rgx1.lastIndex;
                break;
            }
        }
        code2 += code.slice(ii);
        code2 = code2.replace((
            /\/_\*\//g
        ), "/_/");
        code2 = code2.replace((
            /\/\*\u0020jslint\u0020ignore:start\u0020\*\/_\/\*\u0020jslint\u0020ignore:end\u0020\*\//g
        ), "/* jslint ignore */");
        option.codeDemux = code2;
        // autofix - comment - left-align
        tmp = null;
        code2 = code2.split("\n").reverse().map(function (line) {
            if ((
                /^\u0020+?\/\/_/
            ).test(line)) {
                return (
                    tmp
                    ? tmp[0].slice(0, -1) + line.trimLeft()
                    : line
                );
            }
            tmp = (
                /^\u0020*?\S/
            ).exec(line);
            return line;
        }).reverse().join("\n");
        // autofix - prefix-operator
        // https://stackoverflow.com/questions/12122293/list-of-all-binary-operators-in-javascript
        code2 = code2
        .replace((
            /(\S)\u0020+?(!=|!==|%|&|&&|-|:|<|<<|<=|==|===|>|>=|>>|>>>|\*|\+|\/|\?|\^|\||\|\|)((?:\s*?\/\*_\*\/|\s*?\/\/_)*)\s*?\n/g
        ), "$1$3\n$2");
        // autofix - braket
        code2 = code2
        // autofix - braket - rgx
        .replace((
            /\/_\/[\w\s]*(\S)/g
        ), function (match0, match1) {
            return (
                match1 === ")"
                ? match0
                : match0.replace((
                    /\/_\/\w*/
                ), "($&)")
            );
        })
        .replace((
            /\((\/_\/\w*)\)/g
        ), "(\n$1\n)")
        // autofix - braket - open-form
        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Assignment
        .replace((
            /\u0020(%=|&=|-=|<<=|=|>>=|>>>=|\*=|\*\*=|\+=|\/=|\^=|\|=)\n/g
        ), " $1  \n")
        .replace((
            /\u0020(%=|&=|-=|<<=|=|>>=|>>>=|\*=|\*\*=|\+=|\/=|\^=|\|=|return)\u0020([^\n;]*?[^\n(;\[{]\n[\S\s]*?);/g
        ), function (match0, match1, match2) {
            if (!(
                /^\u0020\n|\u0020{4}(?:!=|!==|%|&|&&|-|:|<|<<|<=|==|===|>|>=|>>|>>>|\*|\+|\/|\?|\^|\||\|\|)\u0020/
            ).test(match2) || (
                /\bfunction\u0020\(/
            ).test(match2)) {
                return match0;
            }
            return " " + match1 + " (\n    " + match2.trim() + "\n);";
        })
        .replace((
            /(\(\n)(\S)/g
        ), "$1    $2")
        // autofix - braket - "\s{0}bra"
        .replace((
            /\n+\s*?([(\[{])\n/g
        ), "\u0000$1\n")
        // autofix - braket - "//...\nbra"
        .replace((
            /\/\*_\*\/\u0000|\/\/_\u0000/g
        ), "$&\n")
        .replace((
            /\u0000/g
        ), "")
        // autofix - braket - "{\n    ..."
        .replace((
            /^(\u0020*)(.*?(?:\{|\.querySelector\w*?\())(\S)/gm
        ), "$1$2\n$1    $3")
        // autofix - braket - "{}"
        .replace((
            /[(\[{]\s+[)\]}]/g
        ), "{}");
        // autofix - trailing-whitespace
        code = code.replace((
            /\u0020+$/gm
        ), "");
        // autofix - whitespace
        // autofix - whitespace - "^ {8,}"
        tmp = "";
        code2 = code2.replace((
            /^\u0020+/gm
        ), function (match0) {
            if (match0.length > tmp.length + 4) {
                match0 = tmp;
            }
            tmp = match0;
            return match0;
        });
        code2 = ("\n" + code2 + "\n")
        // autofix - whitespace - "//...\n"
        .replace((
            /\/\/_([^\n])/g
        ), "//_\n$1")
        // autofix - whitespace - "\n\n\n\n(function () {...}());"
        .replace((
            /\n+((?:\/\*_\*\/\n|\/\/_\n)*?\(function\u0020.*?)\n+/g
        ), "\n\n\n\n$1\n")
        // autofix - whitespace - "...}());\n\n\n\n"
        .replace((
            /\n+(\}\(.*\)\);)\n+/g
        ), "\n$1\n\n\n\n")
        // autofix - whitespace - "\S {1}"
        .replace((
            /(\S\u0020)\u0020+/g
        ), "$1")
        // autofix - whitespace - "^/* jslint ignore */$"
        .replace((
            /^\u0020+(\/\*\u0020jslint\u0020ignore\u0020\*\/)$/gm
        ), "$1")
        .trim();
        dataList.forEach(function (data) {
            switch (data.type) {
            case "'_'":
                // autofix - single-quote -> double-quote
                if (data.data[0] === "'") {
                    data.data = (
                        "\"" + data.data.slice(1, -1)
                        .replace((
                            /\\.|"/g
                        ), function (match0) {
                            return (
                                match0[1] === ""
                                ? "\\\""
                                : match0[1] === "'"
                                ? "'"
                                : match0
                            );
                        }) + "\""
                    );
                }
                break;
            case "/*_*/":
                // autofix - comment - "/*" -> "/\*"
                data.data = "/*" + data.data.slice(2).replace((
                    /\/\*/g
                ), "/\\*");
                break;
            case "/_/":
                // autofix - rgx - " " -> "\\u0020"
                data.data = data.data.replace((
                    /\u0020/g
                ), "\\u0020");
                // autofix - rgx - "-]" -> "\-]"
                data.data = data.data.replace((
                    /\\.|-\]/g
                ), function (match0) {
                    return (
                        match0[0] === "-"
                        ? "\\" + match0
                        : match0
                    );
                });
                break;
            }
            if (
                data.type
                !== "/* jslint ignore:start */_/* jslint ignore:end */"
            ) {
                // autofix - ascii
                data.data = data.data.replace((
                    /\r/g
                ), "\\r").replace((
                    /\t/g
                ), "\\t");
            }
        });
        // mux - code2, dataList -> code2
        code2 = code2
        // shebang
        .replace((
            /^#!/
        ), function () {
            return dataList.shift().data;
        })
        .replace((
            /"_"|'_'|\/\*\u0020jslint\u0020ignore\u0020\*\/|\/\*_\*\/|\/\/!!_|\/\/_|\/_\/|`_`/g
        ), function (match0) {
            // delay regexp
            if (match0 === "/_/") {
                dataList.push(dataList.shift());
                return "/\u0000/";
            }
            return dataList.shift().data;
        });
        // autofix - jslint
        ii = 0;
        while (true) {
            ii += 1;
            code0 = code2;
            Object.assign(option, local.jslint_extra(code2, option));
            code2 = option.source_autofix;
            if (ii >= 10 || option.stop || code0 === code2) {
                break;
            }
        }
        // mux - code2, dataList.</_/> -> code2
        code2 = code2
        .replace((
            /\/\u0000\//g
        ), function () {
            return dataList.shift().data;
        });
        code = code2;
        // autofix - sort const, let, var
        code = code.replace((
            /(?:^\u0020*?(?:const|let|var)\u0020[\w$]*?;.*?\n)+/gm
        ), function (match0) {
            return match0.split("\n").slice(0, -1).sort().join("\n") + "\n";
        });
        break;
    // jslintAutofix - .json
    case ".json":
        try {
            code = local.jsonStringifyOrdered(JSON.parse(code), null, 4);
        } catch (ignore) {}
        break;
    // jslintAutofix - .md
    case ".md":
        // autofix - recurse ```javascript...```
        code = code.replace((
            /(```javascript\n)([\S\s]*?)(\n```)/g
        ), function (ignore, match1, match2, match3, ii) {
            return match1 + local.jslintAndPrint(
                match2,
                file + ".<```javascript>.js",
                Object.assign({}, option, {
                    fileType0: option.fileType,
                    lineOffset: code.slice(0, ii).replace((
                        /.+/g
                    ), "").length + 1,
                    modeNext: 0
                })
            ) + match3;
        });
        break;
    // jslintAutofix - .sh
    case ".sh":
        // autofix - recurse node -e '...'
        code = code.replace((
            /(\bUTILITY2_MACRO_JS='\n|\bnode\u0020-e\u0020(?:"\$UTILITY2_MACRO_JS")?'\n)([\S\s]*?)(\n')/g
        ), function (ignore, match1, match2, match3, ii) {
            return match1 + local.jslintAndPrint(
                match2,
                file + ".<node -e>.js",
                Object.assign({}, option, {
                    fileType0: option.fileType,
                    lineOffset: code.slice(0, ii).replace((
                        /.+/g
                    ), "").length + 1,
                    modeNext: 0
                })
            ) + match3;
        });
        break;
    }
    return code;
};

local.jslintGetColumnLine = function (code, ii) {
/*
 * this function will transform <code> and <ii> -> {column, line, evidence}
 */
    var column;
    var evidence;
    var line;
    evidence = code.slice(0, ii).split("\n");
    line = evidence.length - 1;
    column = evidence[line].length;
    evidence = evidence[line] + code.slice(ii, ii + 100).split("\n")[0];
    return {
        column: column,
        evidence: evidence,
        line: line
    };
};

local.jslintUtility2 = function (code, ignore, option) {
/*
 * this function will jslint <code> with utiity2-specific rules
 */
    var code2;
    var error;
    var indent;
    var previous;
    // jslintUtility2 - all
    if (option.utility2) {
        code2 = code;
        code2.replace((
            /^\/\*\u0020jslint\u0020ignore:start\u0020\*\/$[\S\s]+?^\/\*\u0020jslint\u0020ignore:end\u0020\*\/$|^\u0020+?(?:\*|\/\/!!)|^\u0020+|[\r\t]/gm
        ), function (match0, ii) {
            switch (match0.slice(-1)) {
            case " ":
                if (match0.length % 4 === 0) {
                    return;
                }
                error = {
                    message: "non 4-space indent"
                };
                break;
            case "\r":
                error = {
                    message: "unexpected \\r"
                };
                break;
            case "\t":
                error = {
                    message: "unexpected \\t"
                };
                break;
            default:
                return;
            }
            Object.assign(error, local.jslintGetColumnLine(code2, ii));
            option.errorList.push({
                column: error.column + 1,
                evidence: JSON.stringify(error.evidence),
                line: error.line + 1,
                message: error.message
            });
        });
    }
    switch (option.utility2 && option.fileType) {
    // jslintUtility2 - .css
    case ".css":
        // ignore comment
        code2 = code2.replace((
            /^\/\*\u0020csslint\u0020ignore:start\u0020\*\/$[\S\s]+?^\/\*\u0020csslint\u0020ignore:end\u0020\*\/$|^\u0020*?\/\*[\S\s]*?\*\/\u0020*?$/gm
        ), function (match0) {
            if (match0 === "/* validateLineSortedReset */") {
                return match0;
            }
            // preserve lineno
            return match0.replace((
                /^.+?$/gm
            ), "");
        });
        code2.replace((
            /\S\u0020{2}|\u0020,|^\S.*?[,;{}]./gm
        ), function (match0, ii) {
            switch (match0.slice(-2)) {
            case "  ":
                error = {
                    colOffset: 2,
                    message: "unexpected multi-whitespace"
                };
                break;
            case " ,":
                error = {
                    colOffset: 1,
                    message: "unexpected whitespace before comma"
                };
                break;
            default:
                error = {
                    colOffset: match0.length,
                    message: "unexpected multiline-statement"
                };
            }
            Object.assign(error, local.jslintGetColumnLine(code2, ii));
            option.errorList.push({
                column: error.column + error.colOffset,
                evidence: JSON.stringify(error.evidence),
                line: error.line + 1,
                message: error.message
            });
        });
        // validate line-sorted - css-selector
        previous = "";
        code2 = code2.replace((
            /^.|[#.>]|[,}]$|\u0020\{$|\b\w/gm
        ), function (match0) {
            switch (match0) {
            case " ":
                return match0;
            case " {":
                return "\u0001" + match0;
            case "#":
                return "\u0002" + match0;
            case ",":
                return "\u0000" + match0;
            case ".":
                return "\u0001" + match0;
            case ">":
                return "\u0003" + match0;
            case "}":
                return "";
            default:
                return "\u0000" + match0;
            }
        });
        code2.replace((
            /^.\/\*\u0020.validateLineSortedReset\u0020\*\/$|^(?:\S.*?\n)+/gm
        ), function (match0, ii) {
            error = null;
            switch (match0[1]) {
            case "/":
                previous = "";
                break;
            default:
                match0 = match0.trim();
                if (!(previous < match0)) {
                    error = {
                        message:
                        "lines not sorted\n" + previous + "\n" + match0
                    };
                } else if (
                    match0.split("\n").sort().join("\n") !== match0
                ) {
                    error = {
                        message: "lines not sorted\n" + match0
                    };
                }
                previous = match0;
            }
            if (error) {
                Object.assign(error, local.jslintGetColumnLine(code2, ii));
                option.errorList.push({
                    column: error.column + 1,
                    evidence: error.evidence,
                    line: error.line + 1,
                    message: error.message.replace((
                        /[\u0000-\u0007]/g
                    ), "")
                });
            }
        });
        break;
    // jslintUtility2 - .html
    case ".html":
        break;
    // jslintUtility2 - .js
    case ".js":
        // validate line-sorted - switch-statement
        previous = "";
        code2.replace((
            /^(\u0020+?)(\/\*\u0020validateLineSortedReset\u0020\*\/|switch\u0020.+?\u0020\{|\}|case\u0020.+?:(?:\n\u0020+?case\u0020.+?:)*|default:)$/gm
        ), function (ignore, match1, match2, ii) {
            error = null;
            switch (match2.slice(-1)) {
            case "/":
                if (match1 === indent) {
                    previous = "";
                }
                break;
            case "{":
                indent = indent || match1;
                break;
            case "}":
                if (match1 === indent) {
                    indent = "";
                    previous = "";
                }
                break;
            default:
                if (match1 !== indent) {
                    break;
                }
                match2 = match2.replace((
                    /\d+?\b/g
                ), function (match0) {
                    return ("0000" + match0).slice(-4);
                });
                if (!(previous < match2)) {
                    error = {
                        message: (
                            "lines not sorted\n" + previous + "\n" + match2
                        )
                    };
                }
                previous = match2;
            }
            if (error) {
                Object.assign(error, local.jslintGetColumnLine(code2, ii));
                option.errorList.push({
                    column: error.column + 1,
                    evidence: error.evidence,
                    line: error.line + 1,
                    message: error.message
                });
            }
        });
        break;
    // jslintUtility2 - .json
    case ".json":
        break;
    // jslintUtility2 - .md
    case ".md":
        break;
    // jslintUtility2 - .sh
    case ".sh":
        previous = "";
        code2.replace((
            /(^sh\w+?\u0020\(\)\u0020\{)|^sh\w+?\u0020*?\(\)\u0020*?\{/gm
        ), function (ignore, match1, ii) {
            error = null;
            if (!match1) {
                error = {
                    message: "invalid whitespace"
                };
            } else {
                if (!(previous < match1)) {
                    error = {
                        message: (
                            "lines not sorted\n" + previous + "\n" + match1
                        )
                    };
                }
                previous = match1;
            }
            if (error) {
                Object.assign(error, local.jslintGetColumnLine(code2, ii));
                option.errorList.push({
                    column: error.column + 1,
                    evidence: error.evidence,
                    line: error.line + 1,
                    message: error.message
                });
            }
        });
        // validate line-sorted - case-esac-statement
        previous = "";
        code2.replace((
            /^(\u0020+?)(case\u0020.+?\u0020in|esac|[^\u0020()]+?\))$/gm
        ), function (ignore, match1, match2, ii) {
            error = null;
            match2 = match2.replace("*", "~*");
            switch (match2.slice(0, 5)) {
            case "case ":
                indent = indent || match1;
                break;
            case "esac":
                if (match1 === indent) {
                    indent = "";
                    previous = "";
                }
                break;
            default:
                if (match1 !== indent) {
                    break;
                }
                if (!(previous < match2)) {
                    error = {
                        message: (
                            "lines not sorted\n" + previous + "\n" + match2
                        )
                    };
                }
                previous = match2;
            }
            if (error) {
                Object.assign(error, local.jslintGetColumnLine(code2, ii));
                option.errorList.push({
                    column: error.column + 1,
                    evidence: error.evidence,
                    line: error.line + 1,
                    message: error.message
                });
            }
        });
        break;
    }
};

//!! local.jslintUtility20 = function (code) {
//!! /*
 //!! * this function will jslint <code> with utiity2-specific rules
 //!! */
    //!! var current;
    //!! var lineno;
    //!! var previous;
    //!! var rgx;
    //!! var tmp;
    //!! lineno = 0;
    //!! rgx = (
        //!! /^\u0020*?\/\*\u0020validateLineSortedReset\u0020\*\/$|^\u0020{4}\/\/\u0020run\u0020.*?\bjs\\?-env\u0020code\b|^\/\/\u0020rollup-file\u0020/m
    //!! );
    //!! previous = "";
    //!! code.replace((
        //!! /^.*?$/gm
    //!! ), function (line) {
        //!! current = line.trim();
        //!! lineno += 1;
        //!! // validate <domElement>.classList sorted
        //!! tmp = (
            //!! /\bclass=\\?"([^"]+?)\\?"/gm
        //!! ).exec(current);
        //!! tmp = JSON.stringify((tmp && tmp[1].replace((
            //!! /^\u0020/
        //!! ), "zSpace").match(
            //!! /\u0020{2}|\u0020$|\w\S*?\{\{[^}]*?\}\}|\w\S*|\{\{[^}]*?\}\}/gm
        //!! )) || []);
        //!! if (JSON.stringify(JSON.parse(tmp).sort()) !== tmp) {
            //!! local.jslintResult.errorList.push({
                //!! column: 0,
                //!! evidence: line
                //!! line: lineno,
                //!! message: "<domElement>.classList not sorted - " + tmp,
            //!! });
        //!! }
        //!! // validate line-sorted
        //!! if (rgx.test(line)) {
            //!! previous = "";
            //!! return;
        //!! }
        //!! if (
            //!! !(
                //!! /^(?:\u0020{4}|\u0020{8})local\.\S*?\u0020=(?:\u0020|$)/m
            //!! ).test(line) || (
                //!! /^local\.(?:local|tmp)\b|\\n\\$/
            //!! ).test(current)
        //!! ) {
            //!! return;
        //!! }
        //!! // validate previous < current
        //!! if (!(previous < current || (
            //!! /\u0020=$/
        //!! ).test(previous))) {
            //!! local.jslintResult.errorList.push({
                //!! column: 0,
                //!! evidence: line
                //!! line: lineno,
                //!! message: "lines not sorted\n" + previous + "\n" + current,
            //!! });
        //!! }
        //!! previous = current;
    //!! });
//!! };

// run shared js-env code - init-after
local.jslintResult = {};
}());



/* istanbul ignore next */
// run node js-env code - init-after
(function () {
if (local.isBrowser) {
    return;
}



local.cliDict = {};

local.cliDict._default = function () {
/*
 * <file1> <file2> ...
 * will jslint <file1> <file2> ... and print errors to stderr
 */
    // jslint files
    process.argv.slice(2).forEach(function (file) {
        if (file[0] === "-") {
            return;
        }
        local.jslintAndPrint(
            local.fs.readFileSync(local.path.resolve(file), "utf8"),
            file
        );
    });
    // if error occurred, then exit with non-zero code
    process.exit(Boolean(local.jslintResult.errorList.length));
};

local.cliDict.autofix = function () {
/*
 * <file1> <file2> ...
 * will try to inplace autofix <file1> <file2> ...
 */
    // jslint files
    process.argv.slice(3).forEach(function (file) {
        if (file[0] === "-") {
            return;
        }
        local.jslintAndPrint(
            local.fs.readFileSync(local.path.resolve(file), "utf8"),
            file,
            {
                autofix: true
            }
        );
    });
    // if error occurred, then exit with non-zero code
    process.exit(Boolean(local.jslintResult.errorList.length));
};

// run cli
if (module === require.main && !globalThis.utility2_rollup) {
    local.cliRun();
}
}());



}());
/* script-end /assets.utility2.lib.jslint.js */



/* script-begin /assets.utility2.lib.marked.js */
// usr/bin/env node



/* istanbul instrument in package marked */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



/* istanbul ignore next */
// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    // || globalThis.utility2_rollup_old
    // || require("./assets.utility2.rollup.js")
    || globalThis.globalLocal
);
// init exports
if (local.isBrowser) {
    globalThis.utility2_marked = local;
} else {
    module.exports = local;
    module.exports.__dirname = __dirname;
}
// init lib main
local.marked = local;



/* validateLineSortedReset */
return;
}());



/* jslint ignore:start */
(function () { var exports, module; exports = module = {};
// rollup-file marked.js
// 2017-01-19T23:03:37Z
// https://github.com/markedjs/marked/blob/v0.3.7/lib/marked.js
// utility2-uglifyjs https://raw.githubusercontent.com/chjj/marked/v0.3.7/lib/marked.js > /tmp/out.js
(function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||c.
defaults,this.rules=e.normal,this.options.gfm&&(this.options.tables?this.rules=e
.tables:this.rules=e.gfm)}function r(e,t){this.options=t||c.defaults,this.links=
e,this.rules=n.normal,this.renderer=this.options.renderer||new i,this.renderer.options=
this.options;if(!this.links)throw new Error("Tokens array requires a `links` property."
);this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this
.options.pedantic&&(this.rules=n.pedantic)}function i(e){this.options=e||{}}function s
(e){this.tokens=[],this.token=null,this.options=e||c.defaults,this.options.renderer=
this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=
this.options}function o(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace
(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}
function u(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(
e,t){return t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?
String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring
(1)):""})}function a(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=
i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),n):new RegExp(e,t)
}}function f(){}function l(e){var t=1,n,r;for(;t<arguments.length;t++){n=arguments
[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function c
(e,n,r){if(r||typeof n=="function"){r||(r=n,n=null),n=l({},c.defaults,n||{});var i=
n.highlight,u,a,f=0;try{u=t.lex(e,n)}catch(h){return r(h)}a=u.length;var p=function(
e){if(e)return n.highlight=i,r(e);var t;try{t=s.parse(u,n)}catch(o){e=o}return n
.highlight=i,e?r(e):r(null,t)};if(!i||i.length<3)return p();delete n.highlight;if(!
a)return p();for(;f<u.length;f++)(function(e){return e.type!=="code"?--a||p():i(
e.text,e.lang,function(t,n){if(t)return p(t);if(n==null||n===e.text)return--a||p
();e.text=n,e.escaped=!0,--a||p()})})(u[f]);return}try{return n&&(n=l({},c.defaults
,n)),s.parse(t.lex(e,n),n)}catch(h){h.message+="\nPlease report this to https://github.com/chjj/marked."
;if((n||c.defaults).silent)return"<p>An error occured:</p><pre>"+o(h.message+"",!0
)+"</pre>";throw h}}var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:f,hr:/^( *[-*_]){3,} *(?:\n+|$)/
,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:f,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/
,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/
,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/
,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:f
,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text
:/^[^\n]+/};e.bullet=/(?:[*+-]|\d+\.)/,e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/
,e.item=a(e.item,"gm")(/bull/g,e.bullet)(),e.list=a(e.list)(/bull/g,e.bullet)("hr"
,"\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+e.def.source+")")(),e.
blockquote=a(e.blockquote)("def",e.def)(),e._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b"
,e.html=a(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing"
,/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)(),e.paragraph=a(e.paragraph
)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote
)("tag","<"+e._tag)("def",e.def)(),e.normal=l({},e),e.gfm=l({},e.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/
,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),e.gfm.paragraph=
a(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|"+e.list.source
.replace("\\1","\\3")+"|")(),e.tables=l({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/
,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=e,t
.lex=function(e,n){var r=new t(n);return r.lex(e)},t.prototype.lex=function(e){return e=
e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g
,"\n"),this.token(e,!0)},t.prototype.token=function(t,n,r){var t=t.replace(/^ +$/gm
,""),i,s,o,u,a,f,l,c,h;while(t){if(o=this.rules.newline.exec(t))t=t.substring(o[0
].length),o[0].length>1&&this.tokens.push({type:"space"});if(o=this.rules.code.exec
(t)){t=t.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type
:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});continue}if(o=this.rules
.fences.exec(t)){t=t.substring(o[0].length),this.tokens.push({type:"code",lang:o
[2],text:o[3]||""});continue}if(o=this.rules.heading.exec(t)){t=t.substring(o[0]
.length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});continue}
if(n&&(o=this.rules.nptable.exec(t))){t=t.substring(o[0].length),f={type:"table"
,header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g
,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")};for(c=0;c<f.align
.length;c++)/^ *-+: *$/.test(f.align[c])?f.align[c]="right":/^ *:-+: *$/.test(f.
align[c])?f.align[c]="center":/^ *:-+ *$/.test(f.align[c])?f.align[c]="left":f.align
[c]=null;for(c=0;c<f.cells.length;c++)f.cells[c]=f.cells[c].split(/ *\| */);this
.tokens.push(f);continue}if(o=this.rules.lheading.exec(t)){t=t.substring(o[0].length
),this.tokens.push({type:"heading",depth:o[2]==="="?1:2,text:o[1]});continue}if(
o=this.rules.hr.exec(t)){t=t.substring(o[0].length),this.tokens.push({type:"hr"}
);continue}if(o=this.rules.blockquote.exec(t)){t=t.substring(o[0].length),this.tokens
.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,n,!0
),this.tokens.push({type:"blockquote_end"});continue}if(o=this.rules.list.exec(t
)){t=t.substring(o[0].length),u=o[2],this.tokens.push({type:"list_start",ordered
:u.length>1}),o=o[0].match(this.rules.item),i=!1,h=o.length,c=0;for(;c<h;c++)f=o
[c],l=f.length,f=f.replace(/^ *([*+-]|\d+\.) +/,""),~f.indexOf("\n ")&&(l-=f.length
,f=this.options.pedantic?f.replace(/^ {1,4}/gm,""):f.replace(new RegExp("^ {1,"+
l+"}","gm"),"")),this.options.smartLists&&c!==h-1&&(a=e.bullet.exec(o[c+1])[0],u!==
a&&!(u.length>1&&a.length>1)&&(t=o.slice(c+1).join("\n")+t,c=h-1)),s=i||/\n\n(?!\s*$)/
.test(f),c!==h-1&&(i=f.charAt(f.length-1)==="\n",s||(s=i)),this.tokens.push({type
:s?"loose_item_start":"list_item_start"}),this.token(f,!1,r),this.tokens.push({type
:"list_item_end"});this.tokens.push({type:"list_end"});continue}if(o=this.rules.
html.exec(t)){t=t.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph"
:"html",pre:!this.options.sanitizer&&(o[1]==="pre"||o[1]==="script"||o[1]==="style"
),text:o[0]});continue}if(!r&&n&&(o=this.rules.def.exec(t))){t=t.substring(o[0].
length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};continue}if(
n&&(o=this.rules.table.exec(t))){t=t.substring(o[0].length),f={type:"table",header
:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g
,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(c=0
;c<f.align.length;c++)/^ *-+: *$/.test(f.align[c])?f.align[c]="right":/^ *:-+: *$/
.test(f.align[c])?f.align[c]="center":/^ *:-+ *$/.test(f.align[c])?f.align[c]="left"
:f.align[c]=null;for(c=0;c<f.cells.length;c++)f.cells[c]=f.cells[c].replace(/^ *\| *| *\| *$/g
,"").split(/ *\| */);this.tokens.push(f);continue}if(n&&(o=this.rules.paragraph.
exec(t))){t=t.substring(o[0].length),this.tokens.push({type:"paragraph",text:o[1
].charAt(o[1].length-1)==="\n"?o[1].slice(0,-1):o[1]});continue}if(o=this.rules.
text.exec(t)){t=t.substring(o[0].length),this.tokens.push({type:"text",text:o[0]
});continue}if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}return this
.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/
,url:f,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/
,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/
,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/
,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:f,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/
};n._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/
,n.link=a(n.link)("inside",n._inside)("href",n._href)(),n.reflink=a(n.reflink)("inside"
,n._inside)(),n.normal=l({},n),n.pedantic=l({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/
,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=l({},n.normal
,{escape:a(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del
:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(n.text)("]|","~]|")("|","|https?://|")()}),n.breaks=
l({},n.gfm,{br:a(n.br)("{2,}","*")(),text:a(n.gfm.text)("{2,}","*")()}),r.rules=
n,r.output=function(e,t,n){var i=new r(t,n);return i.output(e)},r.prototype.output=
function(e){var t="",n,r,i,s;while(e){if(s=this.rules.escape.exec(e)){e=e.substring
(s[0].length),t+=s[1];continue}if(s=this.rules.autolink.exec(e)){e=e.substring(s
[0].length),s[2]==="@"?(r=s[1].charAt(6)===":"?this.mangle(s[1].substring(7)):this
.mangle(s[1]),i=this.mangle("mailto:")+r):(r=o(s[1]),i=r),t+=this.renderer.link(
i,null,r);continue}if(!this.inLink&&(s=this.rules.url.exec(e))){e=e.substring(s[0
].length),r=o(s[1]),i=r,t+=this.renderer.link(i,null,r);continue}if(s=this.rules
.tag.exec(e)){!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i
.test(s[0])&&(this.inLink=!1),e=e.substring(s[0].length),t+=this.options.sanitize?
this.options.sanitizer?this.options.sanitizer(s[0]):o(s[0]):s[0];continue}if(s=this
.rules.link.exec(e)){e=e.substring(s[0].length),this.inLink=!0,t+=this.outputLink
(s,{href:s[2],title:s[3]}),this.inLink=!1;continue}if((s=this.rules.reflink.exec
(e))||(s=this.rules.nolink.exec(e))){e=e.substring(s[0].length),n=(s[2]||s[1]).replace
(/\s+/g," "),n=this.links[n.toLowerCase()];if(!n||!n.href){t+=s[0].charAt(0),e=s
[0].substring(1)+e;continue}this.inLink=!0,t+=this.outputLink(s,n),this.inLink=!1
;continue}if(s=this.rules.strong.exec(e)){e=e.substring(s[0].length),t+=this.renderer
.strong(this.output(s[2]||s[1]));continue}if(s=this.rules.em.exec(e)){e=e.substring
(s[0].length),t+=this.renderer.em(this.output(s[2]||s[1]));continue}if(s=this.rules
.code.exec(e)){e=e.substring(s[0].length),t+=this.renderer.codespan(o(s[2],!0));
continue}if(s=this.rules.br.exec(e)){e=e.substring(s[0].length),t+=this.renderer
.br();continue}if(s=this.rules.del.exec(e)){e=e.substring(s[0].length),t+=this.renderer
.del(this.output(s[1]));continue}if(s=this.rules.text.exec(e)){e=e.substring(s[0
].length),t+=this.renderer.text(o(this.smartypants(s[0])));continue}if(e)throw new
Error("Infinite loop on byte: "+e.charCodeAt(0))}return t},r.prototype.outputLink=
function(e,t){var n=o(t.href),r=t.title?o(t.title):null;return e[0].charAt(0)!=="!"?
this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,o(e[1]))},r.prototype
.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"\u2014"
).replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g
,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d"
).replace(/\.{3}/g,"\u2026"):e},r.prototype.mangle=function(e){if(!this.options.
mangle)return e;var t="",n=e.length,r=0,i;for(;r<n;r++)i=e.charCodeAt(r),Math.random
()>.5&&(i="x"+i.toString(16)),t+="&#"+i+";";return t},i.prototype.code=function(
e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);r!=null&&r!==
e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+o(t,!0)+'">'+
(n?e:o(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:o(e,!0))+"\n</code></pre>"}
,i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},
i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,n){return"<h"+
t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+
e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"
},i.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"
},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=
function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return"<table>\n<thead>\n"+
e+"</thead>\n"+"<tbody>\n"+t+"</tbody>\n"+"</table>\n"},i.prototype.tablerow=function(
e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var n=t.header?"th"
:"td",r=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return r+e+"</"+
n+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype
.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+
e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"}
,i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(
e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(u(e)).replace(/[^\w:]/g
,"").toLowerCase()}catch(i){return""}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:"
)===0||r.indexOf("data:")===0)return""}var s='<a href="'+e+'"';return t&&(s+=' title="'+
t+'"'),s+=">"+n+"</a>",s},i.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+
n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r},i.prototype
.text=function(e){return e},s.parse=function(e,t,n){var r=new s(t,n);return r.parse
(e)},s.prototype.parse=function(e){this.inline=new r(e.links,this.options,this.renderer
),this.tokens=e.reverse();var t="";while(this.next())t+=this.tok();return t},s.prototype
.next=function(){return this.token=this.tokens.pop()},s.prototype.peek=function(
){return this.tokens[this.tokens.length-1]||0},s.prototype.parseText=function(){
var e=this.token.text;while(this.peek().type==="text")e+="\n"+this.next().text;return this
.inline.output(e)},s.prototype.tok=function(){switch(this.token.type){case"space"
:return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.
heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code"
:return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table"
:var e="",t="",n,r,i,s,o;i="";for(n=0;n<this.token.header.length;n++)s={header:!0
,align:this.token.align[n]},i+=this.renderer.tablecell(this.inline.output(this.token
.header[n]),{header:!0,align:this.token.align[n]});e+=this.renderer.tablerow(i);
for(n=0;n<this.token.cells.length;n++){r=this.token.cells[n],i="";for(o=0;o<r.length
;o++)i+=this.renderer.tablecell(this.inline.output(r[o]),{header:!1,align:this.token
.align[o]});t+=this.renderer.tablerow(i)}return this.renderer.table(e,t);case"blockquote_start"
:var t="";while(this.next().type!=="blockquote_end")t+=this.tok();return this.renderer
.blockquote(t);case"list_start":var t="",u=this.token.ordered;while(this.next().
type!=="list_end")t+=this.tok();return this.renderer.list(t,u);case"list_item_start"
:var t="";while(this.next().type!=="list_item_end")t+=this.token.type==="text"?this
.parseText():this.tok();return this.renderer.listitem(t);case"loose_item_start":
var t="";while(this.next().type!=="list_item_end")t+=this.tok();return this.renderer
.listitem(t);case"html":var a=!this.token.pre&&!this.options.pedantic?this.inline
.output(this.token.text):this.token.text;return this.renderer.html(a);case"paragraph"
:return this.renderer.paragraph(this.inline.output(this.token.text));case"text":
return this.renderer.paragraph(this.parseText())}},f.exec=f,c.options=c.setOptions=
function(e){return l(c.defaults,e),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic
:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,
langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},c.Parser=
s,c.parser=s.parse,c.Renderer=i,c.Lexer=t,c.lexer=t.lex,c.InlineLexer=r,c.inlineLexer=
r.output,c.parse=c,typeof module!="undefined"&&typeof exports=="object"?module.exports=
c:typeof define=="function"&&define.amd?define(function(){return c}):this.marked=
c}).call(function(){return this||(typeof window!="undefined"?window:global)}())
local.marked = module.exports; }());
/* jslint ignore:end */
// init exports
if (local.isBrowser) {
    globalThis.utility2_marked = local.marked;
} else {
    module.exports = local.marked;
}
}());
/* script-end /assets.utility2.lib.marked.js */



/* script-begin /assets.utility2.lib.sjcl.js */
// usr/bin/env node



/* istanbul instrument in package sjcl */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



/* istanbul ignore next */
// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    // || globalThis.utility2_rollup_old
    // || require("./assets.utility2.rollup.js")
    || globalThis.globalLocal
);
// init exports
if (local.isBrowser) {
    globalThis.utility2_sjcl = local;
} else {
    module.exports = local;
    module.exports.__dirname = __dirname;
}
// init lib main
local.sjcl = local;



/* validateLineSortedReset */
// rollup-file sjcl.js
// 2016-09-10T10:34:50Z
// https://github.com/bitwiseshiftleft/sjcl/blob/1.0.6/sjcl.js
// utility2-uglifyjs https://raw.githubusercontent.com/bitwiseshiftleft/sjcl/1.0.6/sjcl.js
/* jslint ignore:start */
(function () { var module;
"use strict";function t(e,t,n){if(4!==t.length)throw new sjcl.exception.invalid("invalid aes block size"
);var r=e.b[n],i=t[0]^r[0],s=t[n?3:1]^r[1],o=t[2]^r[2];t=t[n?1:3]^r[3];var u,a,f
,l=r.length/4-2,c,h=4,p=[0,0,0,0];u=e.s[n],e=u[0];var d=u[1],v=u[2],m=u[3],g=u[4
];for(c=0;c<l;c++)u=e[i>>>24]^d[s>>16&255]^v[o>>8&255]^m[t&255]^r[h],a=e[s>>>24]^
d[o>>16&255]^v[t>>8&255]^m[i&255]^r[h+1],f=e[o>>>24]^d[t>>16&255]^v[i>>8&255]^m[
s&255]^r[h+2],t=e[t>>>24]^d[i>>16&255]^v[s>>8&255]^m[o&255]^r[h+3],h+=4,i=u,s=a,
o=f;for(c=0;4>c;c++)p[n?3&-c:c]=g[i>>>24]<<24^g[s>>16&255]<<16^g[o>>8&255]<<8^g[
t&255]^r[h++],u=i,i=s,s=o,o=t,t=u;return p}function u(e,t){var n,r,i,s=e.F,o=e.b
,u=s[0],a=s[1],f=s[2],l=s[3],c=s[4],h=s[5],p=s[6],d=s[7];for(n=0;64>n;n++)16>n?r=
t[n]:(r=t[n+1&15],i=t[n+14&15],r=t[n&15]=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(i>>>17^
i>>>19^i>>>10^i<<15^i<<13)+t[n&15]+t[n+9&15]|0),r=r+d+(c>>>6^c>>>11^c>>>25^c<<26^
c<<21^c<<7)+(p^c&(h^p))+o[n],d=p,p=h,h=c,c=l+r|0,l=f,f=a,a=u,u=r+(a&f^l&(a^f))+(
a>>>2^a>>>13^a>>>22^a<<30^a<<19^a<<10)|0;s[0]=s[0]+u|0,s[1]=s[1]+a|0,s[2]=s[2]+f|0
,s[3]=s[3]+l|0,s[4]=s[4]+c|0,s[5]=s[5]+h|0,s[6]=s[6]+p|0,s[7]=s[7]+d|0}function A
(e,t){var n,r=sjcl.random.K[e],i=[];for(n in r)r.hasOwnProperty(n)&&i.push(r[n])
;for(n=0;n<i.length;n++)i[n](t)}function C(e,t){"undefined"!=typeof window&&window
.performance&&"function"==typeof window.performance.now?e.addEntropy(window.performance
.now(),t,"loadtime"):e.addEntropy((new Date).valueOf(),t,"loadtime")}function y(
e){e.b=z(e).concat(z(e)),e.L=new sjcl.cipher.aes(e.b)}function z(e){for(var t=0;4>
t&&(e.h[t]=e.h[t]+1|0,!e.h[t]);t++);return e.L.encrypt(e.h)}function B(e,t){return function(
){t.apply(e,arguments)}}var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:
{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+
this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+
this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+
this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+
this.message},this.message=e}}};sjcl.cipher.aes=function(e){this.s[0][0][0]||this
.O();var t,n,r,i,s=this.s[0][4],o=this.s[1];t=e.length;var u=1;if(4!==t&&6!==t&&8!==
t)throw new sjcl.exception.invalid("invalid aes key size");this.b=[r=e.slice(0),
i=[]];for(e=t;e<4*t+28;e++){n=r[e-1];if(0===e%t||8===t&&4===e%t)n=s[n>>>24]<<24^
s[n>>16&255]<<16^s[n>>8&255]<<8^s[n&255],0===e%t&&(n=n<<8^n>>>24^u<<24,u=u<<1^283*
(u>>7));r[e]=r[e-t]^n}for(t=0;e;t++,e--)n=r[t&3?e:e-4],i[t]=4>=e||4>t?n:o[0][s[n>>>24
]]^o[1][s[n>>16&255]]^o[2][s[n>>8&255]]^o[3][s[n&255]]},sjcl.cipher.aes.prototype=
{encrypt:function(e){return t(this,e,0)},decrypt:function(e){return t(this,e,1)}
,s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var e=this.s[0],t=this.s[1],
n=e[4],r=t[4],i,s,o,u=[],a=[],f,l,c,h;for(i=0;256>i;i++)a[(u[i]=i<<1^283*(i>>7))^
i]=i;for(s=o=0;!n[s];s^=f||1,o=a[o]||1)for(c=o^o<<1^o<<2^o<<3^o<<4,c=c>>8^c&255^99
,n[s]=c,r[c]=s,l=u[i=u[f=u[s]]],h=16843009*l^65537*i^257*f^16843008*s,l=257*u[c]^16843008*
c,i=0;4>i;i++)e[i][s]=l=l<<24^l>>>8,t[i][c]=h=h<<24^h>>>8;for(i=0;5>i;i++)e[i]=e
[i].slice(0),t[i]=t[i].slice(0)}},sjcl.bitArray={bitSlice:function(e,t,n){return e=
sjcl.bitArray.$(e.slice(t/32),32-(t&31)).slice(1),void 0===n?e:sjcl.bitArray.clamp
(e,n-t)},extract:function(e,t,n){var r=Math.floor(-t-n&31);return((t+n-1^t)&-32?
e[t/32|0]<<32-r^e[t/32+1|0]>>>r:e[t/32|0]>>>r)&(1<<n)-1},concat:function(e,t){if(0===
e.length||0===t.length)return e.concat(t);var n=e[e.length-1],r=sjcl.bitArray.getPartial
(n);return 32===r?e.concat(t):sjcl.bitArray.$(t,r,n|0,e.slice(0,e.length-1))},bitLength
:function(e){var t=e.length;return 0===t?0:32*(t-1)+sjcl.bitArray.getPartial(e[t-1
])},clamp:function(e,t){if(32*e.length<t)return e;e=e.slice(0,Math.ceil(t/32));var n=
e.length;return t&=31,0<n&&t&&(e[n-1]=sjcl.bitArray.partial(t,e[n-1]&2147483648>>
t-1,1)),e},partial:function(e,t,n){return 32===e?t:(n?t|0:t<<32-e)+1099511627776*
e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(
e,t){if(sjcl.bitArray.bitLength(e)!==sjcl.bitArray.bitLength(t))return!1;var n=0
,r;for(r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},$:function(e,t,n,r){var i;i=0
;for(void 0===r&&(r=[]);32<=t;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(
i=0;i<e.length;i++)r.push(n|e[i]>>>t),n=e[i]<<32-t;return i=e.length?e[e.length-1
]:0,e=sjcl.bitArray.getPartial(i),r.push(sjcl.bitArray.partial(t+e&31,32<t+e?n:r
.pop(),1)),r},i:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM
:function(e){var t,n;for(t=0;t<e.length;++t)n=e[t],e[t]=n>>>24|n>>>8&65280|(n&65280
)<<8|n<<24;return e}},sjcl.codec.utf8String={fromBits:function(e){var t="",n=sjcl
.bitArray.bitLength(e),r,i;for(r=0;r<n/8;r++)0===(r&3)&&(i=e[r/4]),t+=String.fromCharCode
(i>>>24),i<<=8;return decodeURIComponent(escape(t))},toBits:function(e){e=unescape
(encodeURIComponent(e));var t=[],n,r=0;for(n=0;n<e.length;n++)r=r<<8|e.charCodeAt
(n),3===(n&3)&&(t.push(r),r=0);return n&3&&t.push(sjcl.bitArray.partial(8*(n&3),
r)),t}},sjcl.codec.hex={fromBits:function(e){var t="",n;for(n=0;n<e.length;n++)t+=
((e[n]|0)+0xf00000000000).toString(16).substr(4);return t.substr(0,sjcl.bitArray
.bitLength(e)/4)},toBits:function(e){var t,n=[],r;e=e.replace(/\s|0x/g,""),r=e.length
,e+="00000000";for(t=0;t<e.length;t+=8)n.push(parseInt(e.substr(t,8),16)^0);return sjcl
.bitArray.clamp(n,4*r)}},sjcl.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"
,X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(
e,t,n){var r=sjcl.codec.base32.BASE,i=sjcl.codec.base32.REMAINING,s="",o=0,u=sjcl
.codec.base32.B,a=0,f=sjcl.bitArray.bitLength(e);n&&(u=sjcl.codec.base32.X);for(
n=0;s.length*r<f;)s+=u.charAt((a^e[n]>>>o)>>>i),o<r?(a=e[n]<<r-o,o+=i,n++):(a<<=
r,o-=r);for(;s.length&7&&!t;)s+="=";return s},toBits:function(e,t){e=e.replace(/\s|=/g
,"").toUpperCase();var n=sjcl.codec.base32.BITS,r=sjcl.codec.base32.BASE,i=sjcl.
codec.base32.REMAINING,s=[],o,u=0,a=sjcl.codec.base32.B,f=0,l,c="base32";t&&(a=sjcl
.codec.base32.X,c="base32hex");for(o=0;o<e.length;o++){l=a.indexOf(e.charAt(o));
if(0>l){if(!t)try{return sjcl.codec.base32hex.toBits(e)}catch(h){}throw new sjcl
.exception.invalid("this isn't "+c+"!")}u>i?(u-=i,s.push(f^l>>>u),f=l<<n-u):(u+=
r,f^=l<<n-u)}return u&56&&s.push(sjcl.bitArray.partial(u&56,f,1)),s}},sjcl.codec
.base32hex={fromBits:function(e,t){return sjcl.codec.base32.fromBits(e,t,1)},toBits
:function(e){return sjcl.codec.base32.toBits(e,1)}},sjcl.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
,fromBits:function(e,t,n){var r="",i=0,s=sjcl.codec.base64.B,o=0,u=sjcl.bitArray
.bitLength(e);n&&(s=s.substr(0,62)+"-_");for(n=0;6*r.length<u;)r+=s.charAt((o^e[
n]>>>i)>>>26),6>i?(o=e[n]<<6-i,i+=26,n++):(o<<=6,i-=6);for(;r.length&3&&!t;)r+="="
;return r},toBits:function(e,t){e=e.replace(/\s|=/g,"");var n=[],r,i=0,s=sjcl.codec
.base64.B,o=0,u;t&&(s=s.substr(0,62)+"-_");for(r=0;r<e.length;r++){u=s.indexOf(e
.charAt(r));if(0>u)throw new sjcl.exception.invalid("this isn't base64!");26<i?(
i-=26,n.push(o^u>>>i),o=u<<32-i):(i+=6,o^=u<<32-i)}return i&56&&n.push(sjcl.bitArray
.partial(i&56,o,1)),n}},sjcl.codec.base64url={fromBits:function(e){return sjcl.codec
.base64.fromBits(e,1,1)},toBits:function(e){return sjcl.codec.base64.toBits(e,1)
}},sjcl.hash.sha256=function(e){this.b[0]||this.O(),e?(this.F=e.F.slice(0),this.
A=e.A.slice(0),this.l=e.l):this.reset()},sjcl.hash.sha256.hash=function(e){return(new
sjcl.hash.sha256).update(e).finalize()},sjcl.hash.sha256.prototype={blockSize:512
,reset:function(){return this.F=this.Y.slice(0),this.A=[],this.l=0,this},update:
function(e){"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e));var t,n=this
.A=sjcl.bitArray.concat(this.A,e);t=this.l,e=this.l=t+sjcl.bitArray.bitLength(e)
;if(9007199254740991<e)throw new sjcl.exception.invalid("Cannot hash more than 2^53 - 1 bits"
);if("undefined"!=typeof Uint32Array){var r=new Uint32Array(n),i=0;for(t=512+t-(512+
t&511);t<=e;t+=512)u(this,r.subarray(16*i,16*(i+1))),i+=1;n.splice(0,16*i)}else for(
t=512+t-(512+t&511);t<=e;t+=512)u(this,n.splice(0,16));return this},finalize:function(
){var e,t=this.A,n=this.F,t=sjcl.bitArray.concat(t,[sjcl.bitArray.partial(1,1)])
;for(e=t.length+2;e&15;e++)t.push(0);t.push(Math.floor(this.l/4294967296));for(t
.push(this.l|0);t.length;)u(this,t.splice(0,16));return this.reset(),n},Y:[],b:[
],O:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}for(var t=0,n=2
,r,i;64>t;n++){i=!0;for(r=2;r*r<=n;r++)if(0===n%r){i=!1;break}i&&(8>t&&(this.Y[t
]=e(Math.pow(n,.5))),this.b[t]=e(Math.pow(n,1/3)),t++)}}},sjcl.mode.ccm={name:"ccm"
,G:[],listenProgress:function(e){sjcl.mode.ccm.G.push(e)},unListenProgress:function(
e){e=sjcl.mode.ccm.G.indexOf(e),-1<e&&sjcl.mode.ccm.G.splice(e,1)},fa:function(e
){var t=sjcl.mode.ccm.G.slice(),n;for(n=0;n<t.length;n+=1)t[n](e)},encrypt:function(
e,t,n,r,i){var s,o=t.slice(0),u=sjcl.bitArray,a=u.bitLength(n)/8,f=u.bitLength(o
)/8;i=i||64,r=r||[];if(7>a)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes"
);for(s=2;4>s&&f>>>8*s;s++);return s<15-a&&(s=15-a),n=u.clamp(n,8*(15-s)),t=sjcl
.mode.ccm.V(e,t,n,r,i,s),o=sjcl.mode.ccm.C(e,o,n,t,i,s),u.concat(o.data,o.tag)},
decrypt:function(e,t,n,r,i){i=i||64,r=r||[];var s=sjcl.bitArray,o=s.bitLength(n)/8
,u=s.bitLength(t),a=s.clamp(t,u-i),f=s.bitSlice(t,u-i),u=(u-i)/8;if(7>o)throw new
sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(t=2;4>t&&u>>>8*t;
t++);t<15-o&&(t=15-o),n=s.clamp(n,8*(15-t)),a=sjcl.mode.ccm.C(e,a,n,f,i,t),e=sjcl
.mode.ccm.V(e,a.data,n,r,i,t);if(!s.equal(a.tag,e))throw new sjcl.exception.corrupt
("ccm: tag doesn't match");return a.data},na:function(e,t,n,r,i,s){var o=[],u=sjcl
.bitArray,a=u.i;r=[u.partial(8,(t.length?64:0)|r-2<<2|s-1)],r=u.concat(r,n),r[3]|=
i,r=e.encrypt(r);if(t.length)for(n=u.bitLength(t)/8,65279>=n?o=[u.partial(16,n)]
:4294967295>=n&&(o=u.concat([u.partial(16,65534)],[n])),o=u.concat(o,t),t=0;t<o.
length;t+=4)r=e.encrypt(a(r,o.slice(t,t+4).concat([0,0,0])));return r},V:function(
e,t,n,r,i,s){var o=sjcl.bitArray,u=o.i;i/=8;if(i%2||4>i||16<i)throw new sjcl.exception
.invalid("ccm: invalid tag length");if(4294967295<r.length||4294967295<t.length)
throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");n=sjcl.mode
.ccm.na(e,r,n,i,o.bitLength(t)/8,s);for(r=0;r<t.length;r+=4)n=e.encrypt(u(n,t.slice
(r,r+4).concat([0,0,0])));return o.clamp(n,8*i)},C:function(e,t,n,r,i,s){var o,u=
sjcl.bitArray;o=u.i;var a=t.length,f=u.bitLength(t),l=a/50,c=l;n=u.concat([u.partial
(8,s-1)],n).concat([0,0,0]).slice(0,4),r=u.bitSlice(o(r,e.encrypt(n)),0,i);if(!a
)return{tag:r,data:[]};for(o=0;o<a;o+=4)o>l&&(sjcl.mode.ccm.fa(o/a),l+=c),n[3]++
,i=e.encrypt(n),t[o]^=i[0],t[o+1]^=i[1],t[o+2]^=i[2],t[o+3]^=i[3];return{tag:r,data
:u.clamp(t,f)}}},sjcl.mode.ocb2={name:"ocb2",encrypt:function(e,t,n,r,i,s){if(128!==
sjcl.bitArray.bitLength(n))throw new sjcl.exception.invalid("ocb iv must be 128 bits"
);var o,u=sjcl.mode.ocb2.S,a=sjcl.bitArray,f=a.i,l=[0,0,0,0];n=u(e.encrypt(n));var c
,h=[];r=r||[],i=i||64;for(o=0;o+4<t.length;o+=4)c=t.slice(o,o+4),l=f(l,c),h=h.concat
(f(n,e.encrypt(f(n,c)))),n=u(n);return c=t.slice(o),t=a.bitLength(c),o=e.encrypt
(f(n,[0,0,0,t])),c=a.clamp(f(c.concat([0,0,0]),o),t),l=f(l,f(c.concat([0,0,0]),o
)),l=e.encrypt(f(l,f(n,u(n)))),r.length&&(l=f(l,s?r:sjcl.mode.ocb2.pmac(e,r))),h
.concat(a.concat(c,a.clamp(l,i)))},decrypt:function(e,t,n,r,i,s){if(128!==sjcl.bitArray
.bitLength(n))throw new sjcl.exception.invalid("ocb iv must be 128 bits");i=i||64
;var o=sjcl.mode.ocb2.S,u=sjcl.bitArray,a=u.i,f=[0,0,0,0],l=o(e.encrypt(n)),c,h,
p=sjcl.bitArray.bitLength(t)-i,d=[];r=r||[];for(n=0;n+4<p/32;n+=4)c=a(l,e.decrypt
(a(l,t.slice(n,n+4)))),f=a(f,c),d=d.concat(c),l=o(l);h=p-32*n,c=e.encrypt(a(l,[0
,0,0,h])),c=a(c,u.clamp(t.slice(n),h).concat([0,0,0])),f=a(f,c),f=e.encrypt(a(f,
a(l,o(l)))),r.length&&(f=a(f,s?r:sjcl.mode.ocb2.pmac(e,r)));if(!u.equal(u.clamp(
f,i),u.bitSlice(t,p)))throw new sjcl.exception.corrupt("ocb: tag doesn't match")
;return d.concat(u.clamp(c,h))},pmac:function(e,t){var n,r=sjcl.mode.ocb2.S,i=sjcl
.bitArray,s=i.i,o=[0,0,0,0],u=e.encrypt([0,0,0,0]),u=s(u,r(r(u)));for(n=0;n+4<t.
length;n+=4)u=r(u),o=s(o,e.encrypt(s(u,t.slice(n,n+4))));return n=t.slice(n),128>
i.bitLength(n)&&(u=s(u,r(u)),n=i.concat(n,[-2147483648,0,0,0])),o=s(o,n),e.encrypt
(s(r(s(u,r(u))),o))},S:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2
]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},sjcl.mode.gcm={name:"gcm",encrypt:function(
e,t,n,r,i){var s=t.slice(0);return t=sjcl.bitArray,r=r||[],e=sjcl.mode.gcm.C(!0,
e,s,r,n,i||128),t.concat(e.data,e.tag)},decrypt:function(e,t,n,r,i){var s=t.slice
(0),o=sjcl.bitArray,u=o.bitLength(s);i=i||128,r=r||[],i<=u?(t=o.bitSlice(s,u-i),
s=o.bitSlice(s,0,u-i)):(t=s,s=[]),e=sjcl.mode.gcm.C(!1,e,s,r,n,i);if(!o.equal(e.
tag,t))throw new sjcl.exception.corrupt("gcm: tag doesn't match");return e.data}
,ka:function(e,t){var n,r,i,s,o,u=sjcl.bitArray.i;i=[0,0,0,0],s=t.slice(0);for(n=0
;128>n;n++){(r=0!==(e[Math.floor(n/32)]&1<<31-n%32))&&(i=u(i,s)),o=0!==(s[3]&1);
for(r=3;0<r;r--)s[r]=s[r]>>>1|(s[r-1]&1)<<31;s[0]>>>=1,o&&(s[0]^=-520093696)}return i
},j:function(e,t,n){var r,i=n.length;t=t.slice(0);for(r=0;r<i;r+=4)t[0]^=4294967295&
n[r],t[1]^=4294967295&n[r+1],t[2]^=4294967295&n[r+2],t[3]^=4294967295&n[r+3],t=sjcl
.mode.gcm.ka(t,e);return t},C:function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d=sjcl.bitArray
;c=n.length,h=d.bitLength(n),p=d.bitLength(r),u=d.bitLength(i),o=t.encrypt([0,0,0
,0]),96===u?(i=i.slice(0),i=d.concat(i,[1])):(i=sjcl.mode.gcm.j(o,[0,0,0,0],i),i=
sjcl.mode.gcm.j(o,i,[0,0,Math.floor(u/4294967296),u&4294967295])),u=sjcl.mode.gcm
.j(o,[0,0,0,0],r),l=i.slice(0),r=u.slice(0),e||(r=sjcl.mode.gcm.j(o,u,n));for(f=0
;f<c;f+=4)l[3]++,a=t.encrypt(l),n[f]^=a[0],n[f+1]^=a[1],n[f+2]^=a[2],n[f+3]^=a[3
];return n=d.clamp(n,h),e&&(r=sjcl.mode.gcm.j(o,u,n)),e=[Math.floor(p/4294967296
),p&4294967295,Math.floor(h/4294967296),h&4294967295],r=sjcl.mode.gcm.j(o,r,e),a=
t.encrypt(i),r[0]^=a[0],r[1]^=a[1],r[2]^=a[2],r[3]^=a[3],{tag:d.bitSlice(r,0,s),
data:n}}},sjcl.misc.hmac=function(e,t){this.W=t=t||sjcl.hash.sha256;var n=[[],[]
],r,i=t.prototype.blockSize/32;this.w=[new t,new t],e.length>i&&(e=t.hash(e));for(
r=0;r<i;r++)n[0][r]=e[r]^909522486,n[1][r]=e[r]^1549556828;this.w[0].update(n[0]
),this.w[1].update(n[1]),this.R=new t(this.w[0])},sjcl.misc.hmac.prototype.encrypt=
sjcl.misc.hmac.prototype.mac=function(e){if(this.aa)throw new sjcl.exception.invalid
("encrypt on already updated hmac called!");return this.update(e),this.digest(e)
},sjcl.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]),this.aa=!1
},sjcl.misc.hmac.prototype.update=function(e){this.aa=!0,this.R.update(e)},sjcl.
misc.hmac.prototype.digest=function(){var e=this.R.finalize(),e=(new this.W(this
.w[1])).update(e).finalize();return this.reset(),e},sjcl.misc.pbkdf2=function(e,
t,n,r,i){n=n||1e4;if(0>r||0>n)throw new sjcl.exception.invalid("invalid params to pbkdf2"
);"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e)),"string"==typeof t&&(t=
sjcl.codec.utf8String.toBits(t)),i=i||sjcl.misc.hmac,e=new i(e);var s,o,u,a,f=[]
,l=sjcl.bitArray;for(a=1;32*f.length<(r||1);a++){i=s=e.encrypt(l.concat(t,[a]));
for(o=1;o<n;o++)for(s=e.encrypt(s),u=0;u<s.length;u++)i[u]^=s[u];f=f.concat(i)}return r&&
(f=l.clamp(f,r)),f},sjcl.prng=function(e){this.c=[new sjcl.hash.sha256],this.m=[0
],this.P=0,this.H={},this.N=0,this.U={},this.Z=this.f=this.o=this.ha=0,this.b=[0
,0,0,0,0,0,0,0],this.h=[0,0,0,0],this.L=void 0,this.M=e,this.D=!1,this.K={progress
:{},seeded:{}},this.u=this.ga=0,this.I=1,this.J=2,this.ca=65536,this.T=[0,48,64,96
,128,192,256,384,512,768,1024],this.da=3e4,this.ba=80},sjcl.prng.prototype={randomWords
:function(e,t){var n=[],r;r=this.isReady(t);var i;if(r===this.u)throw new sjcl.exception
.notReady("generator isn't seeded");if(r&this.J){r=!(r&this.I),i=[];var s=0,o;this
.Z=i[0]=(new Date).valueOf()+this.da;for(o=0;16>o;o++)i.push(4294967296*Math.random
()|0);for(o=0;o<this.c.length&&(i=i.concat(this.c[o].finalize()),s+=this.m[o],this
.m[o]=0,r||!(this.P&1<<o));o++);this.P>=1<<this.c.length&&(this.c.push(new sjcl.
hash.sha256),this.m.push(0)),this.f-=s,s>this.o&&(this.o=s),this.P++,this.b=sjcl
.hash.sha256.hash(this.b.concat(i)),this.L=new sjcl.cipher.aes(this.b);for(r=0;4>
r&&(this.h[r]=this.h[r]+1|0,!this.h[r]);r++);}for(r=0;r<e;r+=4)0===(r+1)%this.ca&&
y(this),i=z(this),n.push(i[0],i[1],i[2],i[3]);return y(this),n.slice(0,e)},setDefaultParanoia
:function(e,t){if(0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==
t)throw new sjcl.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing"
);this.M=e},addEntropy:function(e,t,n){n=n||"user";var r,i,s=(new Date).valueOf(
),o=this.H[n],u=this.isReady(),a=0;r=this.U[n],void 0===r&&(r=this.U[n]=this.ha++
),void 0===o&&(o=this.H[n]=0),this.H[n]=(this.H[n]+1)%this.c.length;switch(typeof
e){case"number":void 0===t&&(t=1),this.c[o].update([r,this.N++,1,t,s,1,e|0]);break;
case"object":n=Object.prototype.toString.call(e);if("[object Uint32Array]"===n){
i=[];for(n=0;n<e.length;n++)i.push(e[n]);e=i}else for("[object Array]"!==n&&(a=1
),n=0;n<e.length&&!a;n++)"number"!=typeof e[n]&&(a=1);if(!a){if(void 0===t)for(n=
t=0;n<e.length;n++)for(i=e[n];0<i;)t++,i>>>=1;this.c[o].update([r,this.N++,2,t,s
,e.length].concat(e))}break;case"string":void 0===t&&(t=e.length),this.c[o].update
([r,this.N++,3,t,s,e.length]),this.c[o].update(e);break;default:a=1}if(a)throw new
sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string"
);this.m[o]+=t,this.f+=t,u===this.u&&(this.isReady()!==this.u&&A("seeded",Math.max
(this.o,this.f)),A("progress",this.getProgress()))},isReady:function(e){return e=
this.T[void 0!==e?e:this.M],this.o&&this.o>=e?this.m[0]>this.ba&&(new Date).valueOf
()>this.Z?this.J|this.I:this.I:this.f>=e?this.J|this.u:this.u},getProgress:function(
e){return e=this.T[e?e:this.M],this.o>=e?1:this.f>e?1:this.f/e},startCollectors:
function(){if(!this.D){this.a={loadTimeCollector:B(this,this.ma),mouseCollector:
B(this,this.oa),keyboardCollector:B(this,this.la),accelerometerCollector:B(this,
this.ea),touchCollector:B(this,this.qa)};if(window.addEventListener)window.addEventListener
("load",this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.
mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1
),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window
.addEventListener("touchmove",this.a.touchCollector,!1);else{if(!document.attachEvent
)throw new sjcl.exception.bug("can't attach event");document.attachEvent("onload"
,this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector
),document.attachEvent("keypress",this.a.keyboardCollector)}this.D=!0}},stopCollectors
:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load"
,this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector
,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener
("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove"
,this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload"
,this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector
),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener
:function(e,t){this.K[e][this.ga++]=t},removeEventListener:function(e,t){var n,r
,i=this.K[e],s=[];for(r in i)i.hasOwnProperty(r)&&i[r]===t&&s.push(r);for(n=0;n<
s.length;n++)r=s[n],delete i[r]},la:function(){C(this,1)},oa:function(e){var t,n
;try{t=e.x||e.clientX||e.offsetX||0,n=e.y||e.clientY||e.offsetY||0}catch(r){n=t=0
}0!=t&&0!=n&&this.addEntropy([t,n],2,"mouse"),C(this,0)},qa:function(e){e=e.touches
[0]||e.changedTouches[0],this.addEntropy([e.pageX||e.clientX,e.pageY||e.clientY]
,1,"touch"),C(this,0)},ma:function(){C(this,2)},ea:function(e){e=e.accelerationIncludingGravity
.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z;if(window
.orientation){var t=window.orientation;"number"==typeof t&&this.addEntropy(t,1,"accelerometer"
)}e&&this.addEntropy(e,2,"accelerometer"),C(this,0)}},sjcl.random=new sjcl.prng(6
);e:try{var D,E,F,G;if(G="undefined"!=typeof module&&module.exports){var H;try{H=
require("crypto")}catch(a){H=null}G=E=H}if(G&&E.randomBytes)D=E.randomBytes(128)
,D=new Uint32Array((new Uint8Array(D)).buffer),sjcl.random.addEntropy(D,1024,"crypto['randomBytes']"
);else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){F=new Uint32Array
(32);if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues
(F);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break e;window.msCrypto
.getRandomValues(F)}sjcl.random.addEntropy(F,1024,"crypto['getRandomValues']")}}
catch(a){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"
),console.log(a))}sjcl.json={defaults:{v:1,iter:1e4,ks:128,ts:64,mode:"ccm",adata
:"",cipher:"aes"},ja:function(e,t,n,r){n=n||{},r=r||{};var i=sjcl.json,s=i.g({iv
:sjcl.random.randomWords(4,0)},i.defaults),o;i.g(s,n),n=s.adata,"string"==typeof
s.salt&&(s.salt=sjcl.codec.base64.toBits(s.salt)),"string"==typeof s.iv&&(s.iv=sjcl
.codec.base64.toBits(s.iv));if(!sjcl.mode[s.mode]||!sjcl.cipher[s.cipher]||"string"==typeof
e&&100>=s.iter||64!==s.ts&&96!==s.ts&&128!==s.ts||128!==s.ks&&192!==s.ks&&256!==
s.ks||2>s.iv.length||4<s.iv.length)throw new sjcl.exception.invalid("json encrypt: invalid parameters"
);return"string"==typeof e?(o=sjcl.misc.cachedPbkdf2(e,s),e=o.key.slice(0,s.ks/32
),s.salt=o.salt):sjcl.ecc&&e instanceof sjcl.ecc.elGamal.publicKey&&(o=e.kem(),s
.kemtag=o.tag,e=o.key.slice(0,s.ks/32)),"string"==typeof t&&(t=sjcl.codec.utf8String
.toBits(t)),"string"==typeof n&&(s.adata=n=sjcl.codec.utf8String.toBits(n)),o=new
sjcl.cipher[s.cipher](e),i.g(r,s),r.key=e,s.ct="ccm"===s.mode&&sjcl.arrayBuffer&&
sjcl.arrayBuffer.ccm&&t instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.encrypt(o,t,
s.iv,n,s.ts):sjcl.mode[s.mode].encrypt(o,t,s.iv,n,s.ts),s},encrypt:function(e,t,
n,r){var i=sjcl.json,s=i.ja.apply(i,arguments);return i.encode(s)},ia:function(e
,t,n,r){n=n||{},r=r||{};var i=sjcl.json;t=i.g(i.g(i.g({},i.defaults),t),n,!0);var s
,o;s=t.adata,"string"==typeof t.salt&&(t.salt=sjcl.codec.base64.toBits(t.salt)),"string"==typeof
t.iv&&(t.iv=sjcl.codec.base64.toBits(t.iv));if(!sjcl.mode[t.mode]||!sjcl.cipher[
t.cipher]||"string"==typeof e&&100>=t.iter||64!==t.ts&&96!==t.ts&&128!==t.ts||128!==
t.ks&&192!==t.ks&&256!==t.ks||!t.iv||2>t.iv.length||4<t.iv.length)throw new sjcl
.exception.invalid("json decrypt: invalid parameters");return"string"==typeof e?
(o=sjcl.misc.cachedPbkdf2(e,t),e=o.key.slice(0,t.ks/32),t.salt=o.salt):sjcl.ecc&&
e instanceof sjcl.ecc.elGamal.secretKey&&(e=e.unkem(sjcl.codec.base64.toBits(t.kemtag
)).slice(0,t.ks/32)),"string"==typeof s&&(s=sjcl.codec.utf8String.toBits(s)),o=new
sjcl.cipher[t.cipher](e),s="ccm"===t.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&
t.ct instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.decrypt(o,t.ct,t.iv,t.tag,s,t.ts
):sjcl.mode[t.mode].decrypt(o,t.ct,t.iv,s,t.ts),i.g(r,t),r.key=e,1===n.raw?s:sjcl
.codec.utf8String.fromBits(s)},decrypt:function(e,t,n,r){var i=sjcl.json;return i
.ia(e,i.decode(t),n,r)},encode:function(e){var t,n="{",r="";for(t in e)if(e.hasOwnProperty
(t)){if(!t.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name"
);n+=r+'"'+t+'":',r=",";switch(typeof e[t]){case"number":case"boolean":n+=e[t];break;
case"string":n+='"'+escape(e[t])+'"';break;case"object":n+='"'+sjcl.codec.base64
.fromBits(e[t],0)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type"
)}}return n+"}"},decode:function(e){e=e.replace(/\s/g,"");if(!e.match(/^\{.*\}$/
))throw new sjcl.exception.invalid("json decode: this isn't json!");e=e.replace(/^\{|\}$/g
,"").split(/,/);var t={},n,r;for(n=0;n<e.length;n++){if(!(r=e[n].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i
)))throw new sjcl.exception.invalid("json decode: this isn't json!");null!=r[3]?
t[r[2]]=parseInt(r[3],10):null!=r[4]?t[r[2]]=r[2].match(/^(ct|adata|salt|iv)$/)?
sjcl.codec.base64.toBits(r[4]):unescape(r[4]):null!=r[5]&&(t[r[2]]="true"===r[5]
)}return t},g:function(e,t,n){void 0===e&&(e={});if(void 0===t)return e;for(var r in
t)if(t.hasOwnProperty(r)){if(n&&void 0!==e[r]&&e[r]!==t[r])throw new sjcl.exception
.invalid("required parameter overridden");e[r]=t[r]}return e},sa:function(e,t){var n=
{},r;for(r in e)e.hasOwnProperty(r)&&e[r]!==t[r]&&(n[r]=e[r]);return n},ra:function(
e,t){var n={},r;for(r=0;r<t.length;r++)void 0!==e[t[r]]&&(n[t[r]]=e[t[r]]);return n
}},sjcl.encrypt=sjcl.json.encrypt,sjcl.decrypt=sjcl.json.decrypt,sjcl.misc.pa={}
,sjcl.misc.cachedPbkdf2=function(e,t){var n=sjcl.misc.pa,r;return t=t||{},r=t.iter||1e3
,n=n[e]=n[e]||{},r=n[r]=n[r]||{firstSalt:t.salt&&t.salt.length?t.salt.slice(0):sjcl
.random.randomWords(2,0)},n=void 0===t.salt?r.firstSalt:t.salt,r[n]=r[n]||sjcl.misc
.pbkdf2(e,n,t.iter),{key:r[n].slice(0),salt:n.slice(0)}},"undefined"!=typeof module&&
module.exports&&(module.exports=sjcl),"function"==typeof define&&define([],function(
){return sjcl})
local.sjcl = sjcl; }());



// rollup-file core/sha1.js
// 2016-06-09T23:25:22Z
// https://github.com/bitwiseshiftleft/sjcl/blob/1.0.6/core/sha1.js
// utility2-uglifyjs https://raw.githubusercontent.com/bitwiseshiftleft/sjcl/1.0.6/core/sha1.js
(function () { var sjcl; sjcl = local.sjcl;
sjcl.hash.sha1=function(e){e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice
(0),this._length=e._length):this.reset()},sjcl.hash.sha1.hash=function(e){return(new
sjcl.hash.sha1).update(e).finalize()},sjcl.hash.sha1.prototype={blockSize:512,reset
:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this
},update:function(e){typeof e=="string"&&(e=sjcl.codec.utf8String.toBits(e));var t
,n=this._buffer=sjcl.bitArray.concat(this._buffer,e),r=this._length,i=this._length=
r+sjcl.bitArray.bitLength(e);if(i>9007199254740991)throw new sjcl.exception.invalid
("Cannot hash more than 2^53 - 1 bits");if(typeof Uint32Array!="undefined"){var s=new
Uint32Array(n),o=0;for(t=this.blockSize+r-(this.blockSize+r&this.blockSize-1);t<=
i;t+=this.blockSize)this._block(s.subarray(16*o,16*(o+1))),o+=1;n.splice(0,16*o)
}else for(t=this.blockSize+r-(this.blockSize+r&this.blockSize-1);t<=i;t+=this.blockSize
)this._block(n.splice(0,16));return this},finalize:function(){var e,t=this._buffer
,n=this._h;t=sjcl.bitArray.concat(t,[sjcl.bitArray.partial(1,1)]);for(e=t.length+2
;e&15;e++)t.push(0);t.push(Math.floor(this._length/4294967296)),t.push(this._length|0
);while(t.length)this._block(t.splice(0,16));return this.reset(),n},_init:[1732584193
,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708
,3395469782],_f:function(e,t,n,r){if(e<=19)return t&n|~t&r;if(e<=39)return t^n^r
;if(e<=59)return t&n|t&r|n&r;if(e<=79)return t^n^r},_S:function(e,t){return t<<e|
t>>>32-e},_block:function(e){var t,n,r,i,s,o,u,a=this._h,f;if(typeof Uint32Array!="undefined"
){f=Array(80);for(var l=0;l<16;l++)f[l]=e[l]}else f=e;r=a[0],i=a[1],s=a[2],o=a[3
],u=a[4];for(t=0;t<=79;t++)t>=16&&(f[t]=this._S(1,f[t-3]^f[t-8]^f[t-14]^f[t-16])
),n=this._S(5,r)+this._f(t,i,s,o)+u+f[t]+this._key[Math.floor(t/20)]|0,u=o,o=s,s=
this._S(30,i),i=r,r=n;a[0]=a[0]+r|0,a[1]=a[1]+i|0,a[2]=a[2]+s|0,a[3]=a[3]+o|0,a[4
]=a[4]+u|0}}
}());



// rollup-file core/codecBytes.js
// 2016-05-31T18:26:45Z
// https://github.com/bitwiseshiftleft/sjcl/blob/1.0.6/core/codecBytes.js
// utility2-uglifyjs https://raw.githubusercontent.com/bitwiseshiftleft/sjcl/1.0.6/core/codecBytes.js
(function () { var sjcl; sjcl = local.sjcl;
sjcl.codec.bytes={fromBits:function(e){var t=[],n=sjcl.bitArray.bitLength(e),r,i
;for(r=0;r<n/8;r++)(r&3)===0&&(i=e[r/4]),t.push(i>>>24),i<<=8;return t},toBits:function(
e){var t=[],n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],(n&3)===3&&(t.push(r),r=0);
return n&3&&t.push(sjcl.bitArray.partial(8*(n&3),r)),t}}
}());



// rollup-file core/scrypt.js
// 2016-05-31T18:10:00Z
// https://github.com/bitwiseshiftleft/sjcl/blob/1.0.6/core/scrypt.js
// utility2-uglifyjs https://raw.githubusercontent.com/bitwiseshiftleft/sjcl/1.0.6/core/scrypt.js
(function () { var sjcl; sjcl = local.sjcl;
sjcl.misc.scrypt=function(e,t,n,r,i,s,o){var u=Math.pow(2,32)-1,a=sjcl.misc.scrypt
;n=n||16384,r=r||8,i=i||1;if(r*i>=Math.pow(2,30))throw sjcl.exception.invalid("The parameters r, p must satisfy r * p < 2^30"
);if(n<2||n&n-1!=0)throw sjcl.exception.invalid("The parameter N must be a power of 2."
);if(n>u/128/r)throw sjcl.exception.invalid("N too big.");if(r>u/128/i)throw sjcl
.exception.invalid("r too big.");var f=sjcl.misc.pbkdf2(e,t,1,i*128*r*8,o),l=f.length/
i;a.reverse(f);for(var c=0;c<i;c++){var h=f.slice(c*l,(c+1)*l);a.blockcopy(a.ROMix
(h,n),0,f,c*l)}return a.reverse(f),sjcl.misc.pbkdf2(e,f,1,s,o)},sjcl.misc.scrypt
.salsa20Core=function(e,t){var n=function(e,t){return e<<t|e>>>32-t},r=e.slice(0
);for(var i=t;i>0;i-=2)r[4]^=n(r[0]+r[12],7),r[8]^=n(r[4]+r[0],9),r[12]^=n(r[8]+
r[4],13),r[0]^=n(r[12]+r[8],18),r[9]^=n(r[5]+r[1],7),r[13]^=n(r[9]+r[5],9),r[1]^=
n(r[13]+r[9],13),r[5]^=n(r[1]+r[13],18),r[14]^=n(r[10]+r[6],7),r[2]^=n(r[14]+r[10
],9),r[6]^=n(r[2]+r[14],13),r[10]^=n(r[6]+r[2],18),r[3]^=n(r[15]+r[11],7),r[7]^=
n(r[3]+r[15],9),r[11]^=n(r[7]+r[3],13),r[15]^=n(r[11]+r[7],18),r[1]^=n(r[0]+r[3]
,7),r[2]^=n(r[1]+r[0],9),r[3]^=n(r[2]+r[1],13),r[0]^=n(r[3]+r[2],18),r[6]^=n(r[5
]+r[4],7),r[7]^=n(r[6]+r[5],9),r[4]^=n(r[7]+r[6],13),r[5]^=n(r[4]+r[7],18),r[11]^=
n(r[10]+r[9],7),r[8]^=n(r[11]+r[10],9),r[9]^=n(r[8]+r[11],13),r[10]^=n(r[9]+r[8]
,18),r[12]^=n(r[15]+r[14],7),r[13]^=n(r[12]+r[15],9),r[14]^=n(r[13]+r[12],13),r[15
]^=n(r[14]+r[13],18);for(i=0;i<16;i++)e[i]=r[i]+e[i]},sjcl.misc.scrypt.blockMix=
function(e){var t=e.slice(-16),n=[],r=e.length/16,i=sjcl.misc.scrypt;for(var s=0
;s<r;s++)i.blockxor(e,16*s,t,0,16),i.salsa20Core(t,8),(s&1)==0?i.blockcopy(t,0,n
,8*s):i.blockcopy(t,0,n,8*(s^1+r));return n},sjcl.misc.scrypt.ROMix=function(e,t
){var n=e.slice(0),r=[],i=sjcl.misc.scrypt;for(var s=0;s<t;s++)r.push(n.slice(0)
),n=i.blockMix(n);for(s=0;s<t;s++){var o=n[n.length-16]&t-1;i.blockxor(r[o],0,n,0
),n=i.blockMix(n)}return n},sjcl.misc.scrypt.reverse=function(e){for(var t in e)
{var n=e[t]&255;n=n<<8|e[t]>>>8&255,n=n<<8|e[t]>>>16&255,n=n<<8|e[t]>>>24&255,e[
t]=n}},sjcl.misc.scrypt.blockcopy=function(e,t,n,r,i){var s;i=i||e.length-t;for(
s=0;s<i;s++)n[r+s]=e[t+s]|0},sjcl.misc.scrypt.blockxor=function(e,t,n,r,i){var s
;i=i||e.length-t;for(s=0;s<i;s++)n[r+s]=n[r+s]^e[t+s]|0}
}());



// rollup-file core/cbc.js
// 2016-05-31T18:26:45Z
// https://github.com/bitwiseshiftleft/sjcl/blob/1.0.6/core/cbc.js
// utility2-uglifyjs https://raw.githubusercontent.com/bitwiseshiftleft/sjcl/1.0.6/core/cbc.js
(function () { var sjcl; sjcl = local.sjcl;
sjcl.beware===undefined&&(sjcl.beware={}),sjcl.beware["CBC mode is dangerous because it doesn't protect message integrity."
]=function(){sjcl.mode.cbc={name:"cbc",encrypt:function(e,t,n,r){if(r&&r.length)
throw new sjcl.exception.invalid("cbc can't authenticate data");if(sjcl.bitArray
.bitLength(n)!==128)throw new sjcl.exception.invalid("cbc iv must be 128 bits");
var i,s=sjcl.bitArray,o=s._xor4,u=s.bitLength(t),a=0,f=[];if(u&7)throw new sjcl.
exception.invalid("pkcs#5 padding only works for multiples of a byte");for(i=0;a+128<=
u;i+=4,a+=128)n=e.encrypt(o(n,t.slice(i,i+4))),f.splice(i,0,n[0],n[1],n[2],n[3])
;return u=(16-(u>>3&15))*16843009,n=e.encrypt(o(n,s.concat(t,[u,u,u,u]).slice(i,
i+4))),f.splice(i,0,n[0],n[1],n[2],n[3]),f},decrypt:function(e,t,n,r){if(r&&r.length
)throw new sjcl.exception.invalid("cbc can't authenticate data");if(sjcl.bitArray
.bitLength(n)!==128)throw new sjcl.exception.invalid("cbc iv must be 128 bits");
if(sjcl.bitArray.bitLength(t)&127||!t.length)throw new sjcl.exception.corrupt("cbc ciphertext must be a positive multiple of the block size"
);var i,s=sjcl.bitArray,o=s._xor4,u,a,f=[];r=r||[];for(i=0;i<t.length;i+=4)u=t.slice
(i,i+4),a=o(n,e.decrypt(u)),f.splice(i,0,a[0],a[1],a[2],a[3]),n=u;u=f[i-1]&255;if(
u===0||u>16)throw new sjcl.exception.corrupt("pkcs#5 padding corrupt");a=u*16843009
;if(!s.equal(s.bitSlice([a,a,a,a],0,u*8),s.bitSlice(f,f.length*32-u*8,f.length*32
)))throw new sjcl.exception.corrupt("pkcs#5 padding corrupt");return s.bitSlice(
f,0,f.length*32-u*8)}}}
}());
/* jslint ignore:end */
// init exports
if (local.isBrowser) {
    globalThis.utility2_sjcl = local.sjcl;
} else {
    module.exports = local.sjcl;
    module.exports.__dirname = __dirname;
}
}());



}());
/* script-end /assets.utility2.lib.sjcl.js */



/* script-begin /assets.utility2.lib.uglifyjs.js */
// usr/bin/env node
/*
 * lib.uglifyjs.js (2018.8.15)
 * https://github.com/kaizhu256/node-uglifyjs-lite
 * this zero-dependency package will provide a browser-compatible version of the uglifyjs (v1.3.5) javascript-minifier, with a working web-demo
 *
 */



/* istanbul instrument in package uglifyjs */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



/* istanbul ignore next */
// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    // || globalThis.utility2_rollup_old
    // || require("./assets.utility2.rollup.js")
    || globalThis.globalLocal
);
// init exports
if (local.isBrowser) {
    globalThis.utility2_uglifyjs = local;
} else {
    module.exports = local;
    module.exports.__dirname = __dirname;
}
// init lib main
local.uglifyjs = local;



/* validateLineSortedReset */
local.cliRun = function (option) {
/*
 * this function will run the cli
 */
    local.cliDict._eval = local.cliDict._eval || function () {
    /*
     * <code>
     * will eval <code>
     */
        globalThis.local = local;
        local.vm.runInThisContext(process.argv[3]);
    };
    local.cliDict["--eval"] = local.cliDict["--eval"] || local.cliDict._eval;
    local.cliDict["-e"] = local.cliDict["-e"] || local.cliDict._eval;
    local.cliDict._help = local.cliDict._help || function () {
    /*
     *
     * will print help
     */
        var commandList;
        var file;
        var packageJson;
        var text;
        var textDict;
        commandList = [{
            argList: "<arg2>  ...",
            description: "usage:",
            command: ["<arg1>"]
        }, {
            argList: "'console.log(\"hello world\")'",
            description: "example:",
            command: ["--eval"]
        }];
        file = __filename.replace((
            /.*\//
        ), "");
        option = Object.assign({}, option);
        packageJson = require("./package.json");
        // validate comment
        option.rgxComment = option.rgxComment || (
            /\)\u0020\{\n(?:|\u0020{4})\/\*\n(?:\u0020|\u0020{5})\*((?:\u0020<[^>]*?>|\u0020\.\.\.)*?)\n(?:\u0020|\u0020{5})\*\u0020(will\u0020.*?\S)\n(?:\u0020|\u0020{5})\*\/\n(?:\u0020{4}|\u0020{8})\S/
        );
        textDict = {};
        Object.keys(local.cliDict).sort().forEach(function (key, ii) {
            if (key[0] === "_" && key !== "_default") {
                return;
            }
            text = String(local.cliDict[key]);
            if (key === "_default") {
                key = "";
            }
            textDict[text] = textDict[text] || (ii + 2);
            ii = textDict[text];
            if (commandList[ii]) {
                commandList[ii].command.push(key);
                return;
            }
            try {
                commandList[ii] = option.rgxComment.exec(text);
                commandList[ii] = {
                    argList: (commandList[ii][1] || "").trim(),
                    command: [key],
                    description: commandList[ii][2]
                };
            } catch (ignore) {
                local.assertThrow(null, new Error(
                    "cliRun - cannot parse comment in COMMAND "
                    + key + ":\nnew RegExp("
                    + JSON.stringify(option.rgxComment.source)
                    + ").exec(" + JSON.stringify(text)
                    .replace((
                        /\\\\/g
                    ), "\u0000")
                    .replace((
                        /\\n/g
                    ), "\\n\\\n")
                    .replace((
                        /\u0000/g
                    ), "\\\\") + ");"
                ));
            }
        });
        text = "";
        text += packageJson.name + " (" + packageJson.version + ")\n\n";
        text += commandList
        .filter(function (element) {
            return element;
        })
        .map(function (element, ii) {
            element.command = element.command.filter(function (element) {
                return element;
            });
            switch (ii) {
            case 0:
            case 1:
                element.argList = [element.argList];
                break;
            default:
                element.argList = element.argList.split(" ");
                element.description = (
                    "# COMMAND "
                    + (element.command[0] || "<none>") + "\n# "
                    + element.description
                );
            }
            return (
                element.description + "\n  " + file
                + ("  " + element.command.sort().join("|") + "  ")
                    .replace((
                    /^\u0020{4}$/
                ), "  ")
                + element.argList.join("  ")
            );
        })
        .join("\n\n");
        console.log(text);
    };
    local.cliDict["--help"] = local.cliDict["--help"] || local.cliDict._help;
    local.cliDict["-h"] = local.cliDict["-h"] || local.cliDict._help;
    local.cliDict._default = local.cliDict._default || local.cliDict._help;
    local.cliDict.help = local.cliDict.help || local.cliDict._help;
    local.cliDict._interactive = local.cliDict._interactive || function () {
    /*
     *
     * will start interactive-mode
     */
        globalThis.local = local;
        local.identity(local.replStart || require("repl").start)({
            useGlobal: true
        });
    };
    local.cliDict["--interactive"] = (
        local.cliDict["--interactive"]
        || local.cliDict._interactive
    );
    local.cliDict["-i"] = local.cliDict["-i"] || local.cliDict._interactive;
    local.cliDict._version = local.cliDict._version || function () {
    /*
     *
     * will print version
     */
        console.log(require(__dirname + "/package.json").version);
    };
    local.cliDict["--version"] = (
        local.cliDict["--version"]
        || local.cliDict._version
    );
    local.cliDict["-v"] = local.cliDict["-v"] || local.cliDict._version;
    // default to --help command if no arguments are given
    if (process.argv.length <= 2) {
        local.cliDict._help();
        return;
    }
    if (local.cliDict[process.argv[2]]) {
        local.cliDict[process.argv[2]]();
        return;
    }
    local.cliDict._default();
};
}());



/* istanbul ignore next */
// run shared js-env code - function
(function () {
var exports;
var require;
// init exports
exports = local;
require = function () {
    return exports;
};
// jslint-hack
require();



/* jslint ignore:start */
/*
file UglifyJS/parse-js.js
2013-06-07T11:23:05Z - shGithubDateCommitted https://github.com/mishoo/UglifyJS/commits/v1.3.5
https://github.com/mishoo/UglifyJS/blob/v1.3.5/lib/parse-js.js
utility2-uglifyjs https://raw.githubusercontent.com/mishoo/UglifyJS/v1.3.5/lib/parse-js.js > /tmp/aa.js
*/
function is_letter(e){return UNICODE.letter.test(e)}function is_digit(e){return e=
e.charCodeAt(0),e>=48&&e<=57}function is_unicode_digit(e){return UNICODE.digit.test
(e)}function is_alphanumeric_char(e){return is_digit(e)||is_letter(e)}function is_unicode_combining_mark
(e){return UNICODE.combining_mark.test(e)}function is_unicode_connector_punctuation
(e){return UNICODE.connector_punctuation.test(e)}function is_identifier_start(e)
{return e=="$"||e=="_"||is_letter(e)}function is_identifier_char(e){return is_identifier_start
(e)||is_unicode_combining_mark(e)||is_unicode_digit(e)||is_unicode_connector_punctuation
(e)||e=="\u200c"||e=="\u200d"}function parse_js_number(e){if(RE_HEX_NUMBER.test(
e))return parseInt(e.substr(2),16);if(RE_OCT_NUMBER.test(e))return parseInt(e.substr
(1),8);if(RE_DEC_NUMBER.test(e))return parseFloat(e)}function JS_Parse_Error(e,t
,n,r){this.message=e,this.line=t+1,this.col=n+1,this.pos=r+1,this.stack=(new Error
).stack}function js_error(e,t,n,r){throw new JS_Parse_Error(e,t,n,r)}function is_token
(e,t,n){return e.type==t&&(n==null||e.value==n)}function tokenizer(e){function n
(){return t.text.charAt(t.pos)}function r(e,n){var r=t.text.charAt(t.pos++);if(e&&!
r)throw EX_EOF;return r=="\n"?(t.newline_before=t.newline_before||!n,++t.line,t.
col=0):++t.col,r}function i(){return!t.peek()}function s(e,n){var r=t.text.indexOf
(e,t.pos);if(n&&r==-1)throw EX_EOF;return r}function o(){t.tokline=t.line,t.tokcol=
t.col,t.tokpos=t.pos}function u(e,n,r){t.regex_allowed=e=="operator"&&!HOP(UNARY_POSTFIX
,n)||e=="keyword"&&HOP(KEYWORDS_BEFORE_EXPRESSION,n)||e=="punc"&&HOP(PUNC_BEFORE_EXPRESSION
,n);var i={type:e,value:n,line:t.tokline,col:t.tokcol,pos:t.tokpos,endpos:t.pos,
nlb:t.newline_before};if(!r){i.comments_before=t.comments_before,t.comments_before=
[];for(var s=0,o=i.comments_before.length;s<o;s++)i.nlb=i.nlb||i.comments_before
[s].nlb}return t.newline_before=!1,i}function a(){while(HOP(WHITESPACE_CHARS,n()
))r()}function f(e){var t="",i=n(),s=0;while(i&&e(i,s++))t+=r(),i=n();return t}function l
(e){js_error(e,t.tokline,t.tokcol,t.tokpos)}function c(e){var t=!1,n=!1,r=!1,i=e=="."
,s=f(function(s,o){return s=="x"||s=="X"?r?!1:r=!0:!!r||s!="E"&&s!="e"?s=="-"?n||
o==0&&!e?!0:!1:s=="+"?n:(n=!1,s=="."?!i&&!r&&!t?i=!0:!1:is_alphanumeric_char(s))
:t?!1:t=n=!0});e&&(s=e+s);var o=parse_js_number(s);if(!isNaN(o))return u("num",o
);l("Invalid syntax: "+s)}function h(e){var t=r(!0,e);switch(t){case"n":return"\n"
;case"r":return"\r";case"t":return"\t";case"b":return"\b";case"v":return"\u000b"
;case"f":return"\f";case"0":return"\0";case"x":return String.fromCharCode(p(2));
case"u":return String.fromCharCode(p(4));case"\n":return"";default:return t}}function p
(e){var t=0;for(;e>0;--e){var n=parseInt(r(!0),16);isNaN(n)&&l("Invalid hex-character pattern in string"
),t=t<<4|n}return t}function d(){return x("Unterminated string constant",function(
){var e=r(),t="";for(;;){var n=r(!0);if(n=="\\"){var i=0,s=null;n=f(function(e){
if(e>="0"&&e<="7"){if(!s)return s=e,++i;if(s<="3"&&i<=2)return++i;if(s>="4"&&i<=1
)return++i}return!1}),i>0?n=String.fromCharCode(parseInt(n,8)):n=h(!0)}else{if(n==
e)break;if(n=="\n")throw EX_EOF}t+=n}return u("string",t)})}function v(){r();var e=
s("\n"),n;return e==-1?(n=t.text.substr(t.pos),t.pos=t.text.length):(n=t.text.substring
(t.pos,e),t.pos=e),u("comment1",n,!0)}function m(){return r(),x("Unterminated multiline comment"
,function(){var e=s("*/",!0),n=t.text.substring(t.pos,e);return t.pos=e+2,t.line+=
n.split("\n").length-1,t.newline_before=t.newline_before||n.indexOf("\n")>=0,/^@cc_on/i
.test(n)&&(warn("WARNING: at line "+t.line),warn('*** Found "conditional comment": '+
n),warn("*** UglifyJS DISCARDS ALL COMMENTS.  This means your code might no longer work properly in Internet Explorer."
)),u("comment2",n,!0)})}function g(){var e=!1,t="",i,s=!1,o;while((i=n())!=null)
if(!e)if(i=="\\")s=e=!0,r();else{if(!is_identifier_char(i))break;t+=r()}else i!="u"&&
l("Expecting UnicodeEscapeSequence -- uXXXX"),i=h(),is_identifier_char(i)||l("Unicode char: "+
i.charCodeAt(0)+" is not valid in identifier"),t+=i,e=!1;return HOP(KEYWORDS,t)&&
s&&(o=t.charCodeAt(0).toString(16).toUpperCase(),t="\\u"+"0000".substr(o.length)+
o+t.slice(1)),t}function y(e){return x("Unterminated regular expression",function(
){var t=!1,n,i=!1;while(n=r(!0))if(t)e+="\\"+n,t=!1;else if(n=="[")i=!0,e+=n;else if(
n=="]"&&i)i=!1,e+=n;else{if(n=="/"&&!i)break;n=="\\"?t=!0:e+=n}var s=g();return u
("regexp",[e,s])})}function b(e){function t(e){if(!n())return e;var i=e+n();return HOP
(OPERATORS,i)?(r(),t(i)):e}return u("operator",t(e||r()))}function w(){r();var e=
t.regex_allowed;switch(n()){case"/":return t.comments_before.push(v()),t.regex_allowed=
e,T();case"*":return t.comments_before.push(m()),t.regex_allowed=e,T()}return t.
regex_allowed?y(""):b("/")}function E(){return r(),is_digit(n())?c("."):u("punc"
,".")}function S(){var e=g();return HOP(KEYWORDS,e)?HOP(OPERATORS,e)?u("operator"
,e):HOP(KEYWORDS_ATOM,e)?u("atom",e):u("keyword",e):u("name",e)}function x(e,t){
try{return t()}catch(n){if(n!==EX_EOF)throw n;l(e)}}function T(e){if(e!=null)return y
(e);a(),o();var t=n();if(!t)return u("eof");if(is_digit(t))return c();if(t=='"'||
t=="'")return d();if(HOP(PUNC_CHARS,t))return u("punc",r());if(t==".")return E()
;if(t=="/")return w();if(HOP(OPERATOR_CHARS,t))return b();if(t=="\\"||is_identifier_start
(t))return S();l("Unexpected character '"+t+"'")}var t={text:e.replace(/\r\n?|[\n\u2028\u2029]/g
,"\n").replace(/^\uFEFF/,""),pos:0,tokpos:0,line:0,tokline:0,col:0,tokcol:0,newline_before
:!1,regex_allowed:!1,comments_before:[]};return T.context=function(e){return e&&
(t=e),t},T}function NodeWithToken(e,t,n){this.name=e,this.start=t,this.end=n}function parse
(e,t,n){function i(e,t){return is_token(r.token,e,t)}function s(){return r.peeked||
(r.peeked=r.input())}function o(){return r.prev=r.token,r.peeked?(r.token=r.peeked
,r.peeked=null):r.token=r.input(),r.in_directives=r.in_directives&&(r.token.type=="string"||
i("punc",";")),r.token}function u(){return r.prev}function a(e,t,n,i){var s=r.input
.context();js_error(e,t!=null?t:s.tokline,n!=null?n:s.tokcol,i!=null?i:s.tokpos)
}function f(e,t){a(t,e.line,e.col)}function l(e){e==null&&(e=r.token),f(e,"Unexpected token: "+
e.type+" ("+e.value+")")}function c(e,t){if(i(e,t))return o();f(r.token,"Unexpected token "+
r.token.type+", expected "+e)}function h(e){return c("punc",e)}function p(){return!
t&&(r.token.nlb||i("eof")||i("punc","}"))}function d(){i("punc",";")?o():p()||l(
)}function v(){return slice(arguments)}function m(){h("(");var e=K();return h(")"
),e}function g(e,t,n){return e instanceof NodeWithToken?e:new NodeWithToken(e,t,
n)}function y(e){return n?function(){var t=r.token,n=e.apply(this,arguments);return n
[0]=g(n[0],t,u()),n}:e}function w(e){r.labels.push(e);var n=r.token,i=b();return t&&!
HOP(STATEMENTS_WITH_LABELS,i[0])&&l(n),r.labels.pop(),v("label",e,i)}function E(
){return v("stat",prog1(K,d))}function S(e){var t;return p()||(t=i("name")?r.token
.value:null),t!=null?(o(),member(t,r.labels)||a("Label "+t+" without matching loop or statement"
)):r.in_loop==0&&a(e+" not inside a loop or switch"),d(),v(e,t)}function x(){h("("
);var e=null;if(!i("punc",";")){e=i("keyword","var")?(o(),_(!0)):K(!0,!0);if(i("operator"
,"in"))return e[0]=="var"&&e[1].length>1&&a("Only one variable declaration allowed in for..in loop"
),N(e)}return T(e)}function T(e){h(";");var t=i("punc",";")?null:K();h(";");var n=
i("punc",")")?null:K();return h(")"),v("for",e,t,n,Q(b))}function N(e){var t=e[0
]=="var"?v("name",e[1][0]):e;o();var n=K();return h(")"),v("for-in",e,t,n,Q(b))}
function k(){var e=m(),t=b(),n;return i("keyword","else")&&(o(),n=b()),v("if",e,
t,n)}function L(){h("{");var e=[];while(!i("punc","}"))i("eof")&&l(),e.push(b())
;return o(),e}function O(){var e=L(),t,n;if(i("keyword","catch")){o(),h("("),i("name"
)||a("Name expected");var s=r.token.value;o(),h(")"),t=[s,L()]}return i("keyword"
,"finally")&&(o(),n=L()),!t&&!n&&a("Missing catch/finally blocks"),v("try",e,t,n
)}function M(e){var t=[];for(;;){i("name")||l();var n=r.token.value;o(),i("operator"
,"=")?(o(),t.push([n,K(!1,e)])):t.push([n]);if(!i("punc",","))break;o()}return t
}function _(e){return v("var",M(e))}function D(){return v("const",M())}function P
(){var e=H(!1),t;return i("punc","(")?(o(),t=B(")")):t=[],R(v("new",e,t),!0)}function B
(e,t,n){var r=!0,s=[];while(!i("punc",e)){r?r=!1:h(",");if(t&&i("punc",e))break;
i("punc",",")&&n?s.push(["atom","undefined"]):s.push(K(!1))}return o(),s}function j
(){return v("array",B("]",!t,!0))}function F(){var e=!0,n=[];while(!i("punc","}"
)){e?e=!1:h(",");if(!t&&i("punc","}"))break;var s=r.token.type,u=I();s!="name"||
u!="get"&&u!="set"||!!i("punc",":")?(h(":"),n.push([u,K(!1)])):n.push([q(),C(!1)
,u])}return o(),v("object",n)}function I(){switch(r.token.type){case"num":case"string"
:return prog1(r.token.value,o)}return q()}function q(){switch(r.token.type){case"name"
:case"operator":case"keyword":case"atom":return prog1(r.token.value,o);default:l
()}}function R(e,t){return i("punc",".")?(o(),R(v("dot",e,q()),t)):i("punc","[")?
(o(),R(v("sub",e,prog1(K,curry(h,"]"))),t)):t&&i("punc","(")?(o(),R(v("call",e,B
(")")),!0)):e}function U(e){if(i("operator")&&HOP(UNARY_PREFIX,r.token.value))return z
("unary-prefix",prog1(r.token.value,o),U(e));var t=H(e);while(i("operator")&&HOP
(UNARY_POSTFIX,r.token.value)&&!r.token.nlb)t=z("unary-postfix",r.token.value,t)
,o();return t}function z(e,t,n){return(t=="++"||t=="--")&&!$(n)&&a("Invalid use of "+
t+" operator"),v(e,t,n)}function W(e,t,n){var s=i("operator")?r.token.value:null
;s&&s=="in"&&n&&(s=null);var u=s!=null?PRECEDENCE[s]:null;if(u!=null&&u>t){o();var a=
W(U(!0),u,n);return W(v("binary",s,e,a),t,n)}return e}function X(e){return W(U(!0
),0,e)}function V(e){var t=X(e);if(i("operator","?")){o();var n=K(!1);return h(":"
),v("conditional",t,n,K(!1,e))}return t}function $(e){if(!t)return!0;switch(e[0]+""
){case"dot":case"sub":case"new":case"call":return!0;case"name":return e[1]!="this"
}}function J(e){var t=V(e),n=r.token.value;if(i("operator")&&HOP(ASSIGNMENT,n)){
if($(t))return o(),v("assign",ASSIGNMENT[n],t,J(e));a("Invalid assignment")}return t
}function Q(e){try{return++r.in_loop,e()}finally{--r.in_loop}}var r={input:typeof
e=="string"?tokenizer(e,!0):e,token:null,prev:null,peeked:null,in_function:0,in_directives
:!0,in_loop:0,labels:[]};r.token=o();var b=y(function(){if(i("operator","/")||i("operator"
,"/="))r.peeked=null,r.token=r.input(r.token.value.substr(1));switch(r.token.type
){case"string":var e=r.in_directives,t=E();if(e&&t[1][0]=="string"&&!i("punc",","
))return v("directive",t[1][1]);return t;case"num":case"regexp":case"operator":case"atom"
:return E();case"name":return is_token(s(),"punc",":")?w(prog1(r.token.value,o,o
)):E();case"punc":switch(r.token.value){case"{":return v("block",L());case"[":case"("
:return E();case";":return o(),v("block");default:l()};case"keyword":switch(prog1
(r.token.value,o)){case"break":return S("break");case"continue":return S("continue"
);case"debugger":return d(),v("debugger");case"do":return function(e){return c("keyword"
,"while"),v("do",prog1(m,d),e)}(Q(b));case"for":return x();case"function":return C
(!0);case"if":return k();case"return":return r.in_function==0&&a("'return' outside of function"
),v("return",i("punc",";")?(o(),null):p()?null:prog1(K,d));case"switch":return v
("switch",m(),A());case"throw":return r.token.nlb&&a("Illegal newline after 'throw'"
),v("throw",prog1(K,d));case"try":return O();case"var":return prog1(_,d);case"const"
:return prog1(D,d);case"while":return v("while",m(),Q(b));case"with":return v("with"
,m(),b());default:l()}}}),C=function(e){var t=i("name")?prog1(r.token.value,o):null
;return e&&!t&&l(),h("("),v(e?"defun":"function",t,function(e,t){while(!i("punc"
,")"))e?e=!1:h(","),i("name")||l(),t.push(r.token.value),o();return o(),t}(!0,[]
),function(){++r.in_function;var e=r.in_loop;r.in_directives=!0,r.in_loop=0;var t=
L();return--r.in_function,r.in_loop=e,t}())},A=curry(Q,function(){h("{");var e=[
],t=null;while(!i("punc","}"))i("eof")&&l(),i("keyword","case")?(o(),t=[],e.push
([K(),t]),h(":")):i("keyword","default")?(o(),h(":"),t=[],e.push([null,t])):(t||
l(),t.push(b()));return o(),e}),H=y(function(e){if(i("operator","new"))return o(
),P();if(i("punc")){switch(r.token.value){case"(":return o(),R(prog1(K,curry(h,")"
)),e);case"[":return o(),R(j(),e);case"{":return o(),R(F(),e)}l()}if(i("keyword"
,"function"))return o(),R(C(!1),e);if(HOP(ATOMIC_START_TOKEN,r.token.type)){var t=
r.token.type=="regexp"?v("regexp",r.token.value[0],r.token.value[1]):v(r.token.type
,r.token.value);return R(prog1(t,o),e)}l()}),K=y(function(e,t){arguments.length==0&&
(e=!0);var n=J(t);return e&&i("punc",",")?(o(),v("seq",n,K(!0,t))):n});return v("toplevel"
,function(e){while(!i("eof"))e.push(b());return e}([]))}function curry(e){var t=
slice(arguments,1);return function(){return e.apply(this,t.concat(slice(arguments
)))}}function prog1(e){e instanceof Function&&(e=e());for(var t=1,n=arguments.length
;--n>0;++t)arguments[t]();return e}function array_to_hash(e){var t={};for(var n=0
;n<e.length;++n)t[e[n]]=!0;return t}function slice(e,t){return Array.prototype.slice
.call(e,t||0)}function characters(e){return e.split("")}function member(e,t){for(
var n=t.length;--n>=0;)if(t[n]==e)return!0;return!1}function HOP(e,t){return Object
.prototype.hasOwnProperty.call(e,t)}var KEYWORDS=array_to_hash(["break","case","catch"
,"const","continue","debugger","default","delete","do","else","finally","for","function"
,"if","in","instanceof","new","return","switch","throw","try","typeof","var","void"
,"while","with"]),RESERVED_WORDS=array_to_hash(["abstract","boolean","byte","char"
,"class","double","enum","export","extends","final","float","goto","implements","import"
,"int","interface","long","native","package","private","protected","public","short"
,"static","super","synchronized","throws","transient","volatile"]),KEYWORDS_BEFORE_EXPRESSION=
array_to_hash(["return","new","delete","throw","else","case"]),KEYWORDS_ATOM=array_to_hash
(["false","null","true","undefined"]),OPERATOR_CHARS=array_to_hash(characters("+-*&%=<>!?|~^"
)),RE_HEX_NUMBER=/^0x[0-9a-f]+$/i,RE_OCT_NUMBER=/^0[0-7]+$/,RE_DEC_NUMBER=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i
,OPERATORS=array_to_hash(["in","instanceof","typeof","new","void","delete","++","--"
,"+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","==="
,"!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&"
,"||"]),WHITESPACE_CHARS=array_to_hash(characters(" \u00a0\n\r\t\f\u000b\u200b\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\ufeff"
)),PUNC_BEFORE_EXPRESSION=array_to_hash(characters("[{(,.;:")),PUNC_CHARS=array_to_hash
(characters("[]{}(),;:")),REGEXP_MODIFIERS=array_to_hash(characters("gmsiy")),UNICODE=
{letter:new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F0\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"
),combining_mark:new RegExp("[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u08FE\\u0900-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C01-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C82\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D02\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1DC0-\\u1DE6\\u1DFC-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]"
),connector_punctuation:new RegExp("[\\u005F\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F]"
),digit:new RegExp("[\\u0030-\\u0039\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0BE6-\\u0BEF\\u0C66-\\u0C6F\\u0CE6-\\u0CEF\\u0D66-\\u0D6F\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F29\\u1040-\\u1049\\u1090-\\u1099\\u17E0-\\u17E9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19D9\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\uA620-\\uA629\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19]"
)};JS_Parse_Error.prototype.toString=function(){return this.message+" (line: "+this
.line+", col: "+this.col+", pos: "+this.pos+")"+"\n\n"+this.stack};var EX_EOF={}
,UNARY_PREFIX=array_to_hash(["typeof","void","delete","--","++","!","~","-","+"]
),UNARY_POSTFIX=array_to_hash(["--","++"]),ASSIGNMENT=function(e,t,n){while(n<e.
length)t[e[n]]=e[n].substr(0,e[n].length-1),n++;return t}(["+=","-=","/=","*=","%="
,">>=","<<=",">>>=","|=","^=","&="],{"=":!0},0),PRECEDENCE=function(e,t){for(var n=0
,r=1;n<e.length;++n,++r){var i=e[n];for(var s=0;s<i.length;++s)t[i[s]]=r}return t
}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in"
,"instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),STATEMENTS_WITH_LABELS=
array_to_hash(["for","do","while","switch"]),ATOMIC_START_TOKEN=array_to_hash(["atom"
,"num","string","regexp","name"]);NodeWithToken.prototype.toString=function(){return this
.name};var warn=function(){};exports.tokenizer=tokenizer,exports.parse=parse,exports
.slice=slice,exports.curry=curry,exports.member=member,exports.array_to_hash=array_to_hash
,exports.PRECEDENCE=PRECEDENCE,exports.KEYWORDS_ATOM=KEYWORDS_ATOM,exports.RESERVED_WORDS=
RESERVED_WORDS,exports.KEYWORDS=KEYWORDS,exports.ATOMIC_START_TOKEN=ATOMIC_START_TOKEN
,exports.OPERATORS=OPERATORS,exports.is_alphanumeric_char=is_alphanumeric_char,exports
.is_identifier_start=is_identifier_start,exports.is_identifier_char=is_identifier_char
,exports.set_logger=function(e){warn=e}



/*
file UglifyJS/process.js
2013-06-07T11:23:05Z - shGithubDateCommitted https://github.com/mishoo/UglifyJS/commits/v1.3.5
https://github.com/mishoo/UglifyJS/blob/v1.3.5/lib/process.js
utility2-uglifyjs https://raw.githubusercontent.com/mishoo/UglifyJS/v1.3.5/lib/process.js > /tmp/aa.js
*/
function ast_walker(){function e(e){return[this[0],MAP(e,function(e){var t=[e[0]
];return e.length>1&&(t[1]=s(e[1])),t})]}function t(e){var t=[this[0]];return e!=
null&&t.push(MAP(e,s)),t}function s(e){if(e==null)return null;try{i.push(e);var t=
e[0],s=r[t];if(s){var o=s.apply(e,e.slice(1));if(o!=null)return o}return s=n[t],
s.apply(e,e.slice(1))}finally{i.pop()}}function o(e){if(e==null)return null;try{
return i.push(e),n[e[0]].apply(e,e.slice(1))}finally{i.pop()}}function u(e,t){var n=
{},i;for(i in e)HOP(e,i)&&(n[i]=r[i],r[i]=e[i]);var s=t();for(i in n)HOP(n,i)&&(
n[i]?r[i]=n[i]:delete r[i]);return s}var n={string:function(e){return[this[0],e]
},num:function(e){return[this[0],e]},name:function(e){return[this[0],e]},toplevel
:function(e){return[this[0],MAP(e,s)]},block:t,splice:t,"var":e,"const":e,"try":
function(e,t,n){return[this[0],MAP(e,s),t!=null?[t[0],MAP(t[1],s)]:null,n!=null?
MAP(n,s):null]},"throw":function(e){return[this[0],s(e)]},"new":function(e,t){return[
this[0],s(e),MAP(t,s)]},"switch":function(e,t){return[this[0],s(e),MAP(t,function(
e){return[e[0]?s(e[0]):null,MAP(e[1],s)]})]},"break":function(e){return[this[0],
e]},"continue":function(e){return[this[0],e]},conditional:function(e,t,n){return[
this[0],s(e),s(t),s(n)]},assign:function(e,t,n){return[this[0],e,s(t),s(n)]},dot
:function(e){return[this[0],s(e)].concat(slice(arguments,1))},call:function(e,t)
{return[this[0],s(e),MAP(t,s)]},"function":function(e,t,n){return[this[0],e,t.slice
(),MAP(n,s)]},"debugger":function(){return[this[0]]},defun:function(e,t,n){return[
this[0],e,t.slice(),MAP(n,s)]},"if":function(e,t,n){return[this[0],s(e),s(t),s(n
)]},"for":function(e,t,n,r){return[this[0],s(e),s(t),s(n),s(r)]},"for-in":function(
e,t,n,r){return[this[0],s(e),s(t),s(n),s(r)]},"while":function(e,t){return[this[0
],s(e),s(t)]},"do":function(e,t){return[this[0],s(e),s(t)]},"return":function(e)
{return[this[0],s(e)]},binary:function(e,t,n){return[this[0],e,s(t),s(n)]},"unary-prefix"
:function(e,t){return[this[0],e,s(t)]},"unary-postfix":function(e,t){return[this
[0],e,s(t)]},sub:function(e,t){return[this[0],s(e),s(t)]},object:function(e){return[
this[0],MAP(e,function(e){return e.length==2?[e[0],s(e[1])]:[e[0],s(e[1]),e[2]]}
)]},regexp:function(e,t){return[this[0],e,t]},array:function(e){return[this[0],MAP
(e,s)]},stat:function(e){return[this[0],s(e)]},seq:function(){return[this[0]].concat
(MAP(slice(arguments),s))},label:function(e,t){return[this[0],e,s(t)]},"with":function(
e,t){return[this[0],s(e),s(t)]},atom:function(e){return[this[0],e]},directive:function(
e){return[this[0],e]}},r={},i=[];return{walk:s,dive:o,with_walkers:u,parent:function(
){return i[i.length-2]},stack:function(){return i}}}function Scope(e){this.names=
{},this.mangled={},this.rev_mangled={},this.cname=-1,this.refs={},this.uses_with=!1
,this.uses_eval=!1,this.directives=[],this.parent=e,this.children=[],e?(this.level=
e.level+1,e.children.push(this)):this.level=0}function base54_digits(){return typeof
DIGITS_OVERRIDE_FOR_TESTING!="undefined"?DIGITS_OVERRIDE_FOR_TESTING:"etnrisouaflchpdvmgybwESxTNCkLAOM_DPHBjFIqRUzWXV$JKQGYZ0516372984"
}function ast_add_scope(e){function s(e){t=new Scope(t),t.labels=new Scope;var n=
t.body=e();return n.scope=t,t=t.parent,n}function o(e,n){return t.define(e,n)}function u
(e){t.refs[e]=!0}function a(e,t,n){var i=this[0]=="defun";return[this[0],i?o(e,"defun"
):e,t,s(function(){return i||o(e,"lambda"),MAP(t,function(e){o(e,"arg")}),MAP(n,
r)})]}function f(e){return function(t){MAP(t,function(t){o(t[0],e),t[1]&&u(t[0])
})}}function l(e){e&&(t.labels.refs[e]=!0)}var t=null,n=ast_walker(),r=n.walk,i=
[];return s(function(){function c(e,t){for(t=e.children.length;--t>=0;)c(e.children
[t]);for(t in e.refs)if(HOP(e.refs,t))for(var n=e.has(t),r=e;r;r=r.parent){r.refs
[t]=n;if(r===n)break}}var s=n.with_walkers({"function":a,defun:a,label:function(
e,n){t.labels.define(e)},"break":l,"continue":l,"with":function(e,n){for(var r=t
;r;r=r.parent)r.uses_with=!0},"var":f("var"),"const":f("const"),"try":function(e
,t,n){if(t!=null)return[this[0],MAP(e,r),[o(t[0],"catch"),MAP(t[1],r)],n!=null?MAP
(n,r):null]},name:function(e){e=="eval"&&i.push(t),u(e)}},function(){return r(e)
});return MAP(i,function(e){if(!e.has("eval"))while(e)e.uses_eval=!0,e=e.parent}
),c(t),s})}function ast_mangle(e,t){function s(e,n){return t.mangle?!t.toplevel&&!
i.parent?e:t.except&&member(e,t.except)?e:t.no_functions&&HOP(i.names,e)&&(i.names
[e]=="defun"||i.names[e]=="lambda")?e:i.get_mangled(e,n):e}function o(e){if(t.defines
)return!i.has(e)&&HOP(t.defines,e)?t.defines[e]:null}function u(e,n,o){if(!t.no_functions&&
t.mangle){var u=this[0]=="defun",f;e&&(u?e=s(e):o.scope.references(e)?(f={},!i.uses_eval&&!
i.uses_with?e=f[e]=i.next_mangled():f[e]=e):e=null)}return o=a(o.scope,function(
){return n=MAP(n,function(e){return s(e)}),MAP(o,r)},f),[this[0],e,n,o]}function a
(e,t,n){var r=i;i=e;if(n)for(var o in n)HOP(n,o)&&e.set_mangle(o,n[o]);for(var o in
e.names)HOP(e.names,o)&&s(o,!0);var u=t();return u.scope=e,i=r,u}function f(e){return[
this[0],MAP(e,function(e){return[s(e[0]),r(e[1])]})]}function l(e){if(e)return[this
[0],i.labels.get_mangled(e)]}var n=ast_walker(),r=n.walk,i;return t=defaults(t,{
mangle:!0,toplevel:!1,defines:null,except:null,no_functions:!1}),n.with_walkers(
{"function":u,defun:function(){var e=u.apply(this,arguments);switch(n.parent()[0
]){case"toplevel":case"function":case"defun":return MAP.at_top(e)}return e},label
:function(e,t){return i.labels.refs[e]?[this[0],i.labels.get_mangled(e,!0),r(t)]
:r(t)},"break":l,"continue":l,"var":f,"const":f,name:function(e){return o(e)||[this
[0],s(e)]},"try":function(e,t,n){return[this[0],MAP(e,r),t!=null?[s(t[0]),MAP(t[1
],r)]:null,n!=null?MAP(n,r):null]},toplevel:function(e){var t=this;return a(t.scope
,function(){return[t[0],MAP(e,r)]})},directive:function(){return MAP.at_top(this
)}},function(){return r(ast_add_scope(e))})}function best_of(e,t){return gen_code
(e).length>gen_code(t[0]=="stat"?t[1]:t).length?t:e}function last_stat(e){return e
[0]=="block"&&e[1]&&e[1].length>0?e[1][e[1].length-1]:e}function aborts(e){if(e)
switch(last_stat(e)[0]){case"return":case"break":case"continue":case"throw":return!0
}}function boolean_expr(e){return e[0]=="unary-prefix"&&member(e[1],["!","delete"
])||e[0]=="binary"&&member(e[1],["in","instanceof","==","!=","===","!==","<","<="
,">=",">"])||e[0]=="binary"&&member(e[1],["&&","||"])&&boolean_expr(e[2])&&boolean_expr
(e[3])||e[0]=="conditional"&&boolean_expr(e[2])&&boolean_expr(e[3])||e[0]=="assign"&&
e[1]===!0&&boolean_expr(e[3])||e[0]=="seq"&&boolean_expr(e[e.length-1])}function empty
(e){return!e||e[0]=="block"&&(!e[1]||e[1].length==0)}function is_string(e){return e
[0]=="string"||e[0]=="unary-prefix"&&e[1]=="typeof"||e[0]=="binary"&&e[1]=="+"&&
(is_string(e[2])||is_string(e[3]))}function warn_unreachable(e){empty(e)||warn("Dropping unreachable code: "+
gen_code(e,!0))}function prepare_ifs(e){function r(e){e=MAP(e,n);for(var t=0;t<e
.length;++t){var i=e[t];if(i[0]!="if")continue;if(i[3])continue;var s=i[2];if(!aborts
(s))continue;var o=n(i[1]),u=r(e.slice(t+1)),a=u.length==1?u[0]:["block",u];return e
.slice(0,t).concat([[i[0],o,s,a]])}return e}function i(e,t,n){return n=r(n),[this
[0],e,t,n]}function s(e){return[this[0],e!=null?r(e):null]}var t=ast_walker(),n=
t.walk;return t.with_walkers({defun:i,"function":i,block:s,splice:s,toplevel:function(
e){return[this[0],r(e)]},"try":function(e,t,n){return[this[0],r(e),t!=null?[t[0]
,r(t[1])]:null,n!=null?r(n):null]}},function(){return n(e)})}function for_side_effects
(e,t){function o(){throw i}function u(){throw s}function a(){return t.call(this,
this,n,o,u)}function f(e){if(e=="++"||e=="--")return a.apply(this,arguments)}function l
(e){if(e=="&&"||e=="||")return a.apply(this,arguments)}var n=ast_walker(),r=n.walk
,i={},s={};return n.with_walkers({"try":a,"throw":a,"return":a,"new":a,"switch":
a,"break":a,"continue":a,assign:a,call:a,"if":a,"for":a,"for-in":a,"while":a,"do"
:a,"return":a,"unary-prefix":f,"unary-postfix":f,conditional:a,binary:l,defun:a}
,function(){for(;;)try{r(e);break}catch(t){if(t===i)break;if(t===s)continue;throw t
}})}function ast_lift_variables(e){function i(e,t){var i=r;r=t,e=MAP(e,n);var s=
{},o=MAP(t.names,function(e,n){return e!="var"?MAP.skip:t.references(n)?(s[n]=!0
,[n]):MAP.skip});return o.length>0&&(for_side_effects(["block",e],function(e,t,n
,r){if(e[0]=="assign"&&e[1]===!0&&e[2][0]=="name"&&HOP(s,e[2][1])){for(var i=o.length
;--i>=0;)if(o[i][0]==e[2][1]){o[i][1]&&n(),o[i][1]=e[3],o.push(o.splice(i,1)[0])
;break}var u=t.parent();if(u[0]=="seq"){var a=u[2];a.unshift(0,u.length),u.splice
.apply(u,a)}else u[0]=="stat"?u.splice(0,u.length,"block"):n();r()}n()}),e.unshift
(["var",o])),r=i,e}function s(e){var n=null;for(var r=e.length;--r>=0;){var i=e[
r];if(!i[1])continue;i=["assign",!0,["name",i[0]],i[1]],n==null?n=i:n=["seq",i,n
]}return n==null&&t.parent()[0]!="for"?t.parent()[0]=="for-in"?["name",e[0][0]]:
MAP.skip:["stat",n]}function o(e){return[this[0],i(e,this.scope)]}var t=ast_walker
(),n=t.walk,r;return t.with_walkers({"function":function(e,t,n){for(var r=t.length
;--r>=0&&!n.scope.references(t[r]);)t.pop();return n.scope.references(e)||(e=null
),[this[0],e,t,i(n,n.scope)]},defun:function(e,t,n){if(!r.references(e))return MAP
.skip;for(var s=t.length;--s>=0&&!n.scope.references(t[s]);)t.pop();return[this[0
],e,t,i(n,n.scope)]},"var":s,toplevel:o},function(){return n(ast_add_scope(e))})
}function ast_squeeze(e,t){return e=squeeze_1(e,t),e=squeeze_2(e,t),e}function squeeze_1
(e,t){function s(e){var n=["unary-prefix","!",e];switch(e[0]){case"unary-prefix"
:return e[1]=="!"&&boolean_expr(e[2])?e[2]:n;case"seq":return e=slice(e),e[e.length-1
]=s(e[e.length-1]),e;case"conditional":return best_of(n,["conditional",e[1],s(e[2
]),s(e[3])]);case"binary":var r=e[1],i=e[2],o=e[3];if(!t.keep_comps)switch(r){case"<="
:return["binary",">",i,o];case"<":return["binary",">=",i,o];case">=":return["binary"
,"<",i,o];case">":return["binary","<=",i,o]}switch(r){case"==":return["binary","!="
,i,o];case"!=":return["binary","==",i,o];case"===":return["binary","!==",i,o];case"!=="
:return["binary","===",i,o];case"&&":return best_of(n,["binary","||",s(i),s(o)])
;case"||":return best_of(n,["binary","&&",s(i),s(o)])}}return n}function o(e,t,n
){var r=function(){return e[0]=="unary-prefix"&&e[1]=="!"?n?["conditional",e[2],
n,t]:["binary","||",e[2],t]:n?best_of(["conditional",e,t,n],["conditional",s(e),
n,t]):["binary","&&",e,t]};return when_constant(e,function(e,r){return warn_unreachable
(r?n:t),r?t:n},r)}function u(e){return e!=null&&e[0]=="block"&&e[1]&&(e[1].length==1?
e=e[1][0]:e[1].length==0&&(e=["block"])),e}function a(e,t,n){return[this[0],e,t,
f(n,"lambda")]}function f(e,n){return e=MAP(e,r),e=e.reduce(function(e,t){return t
[0]=="block"?t[1]&&e.push.apply(e,t[1]):e.push(t),e},[]),e=function(t,n){return e
.forEach(function(e){n&&(e[0]=="var"&&n[0]=="var"||e[0]=="const"&&n[0]=="const")?
n[1]=n[1].concat(e[1]):(t.push(e),n=e)}),t}([]),t.dead_code&&(e=function(n,r){return e
.forEach(function(e){r?e[0]=="function"||e[0]=="defun"?n.push(e):e[0]=="var"||e[0
]=="const"?(t.no_warnings||warn("Variables declared in unreachable code"),e[1]=MAP
(e[1],function(e){return e[1]&&!t.no_warnings&&warn_unreachable(["assign",!0,["name"
,e[0]],e[1]]),[e[0]]}),n.push(e)):t.no_warnings||warn_unreachable(e):(n.push(e),
member(e[0],["return","throw","break","continue"])&&(r=!0))}),n}([])),t.make_seqs&&
(e=function(t,n){return e.forEach(function(e){n&&n[0]=="stat"&&e[0]=="stat"?n[1]=
["seq",n[1],e[1]]:(t.push(e),n=e)}),t.length>=2&&t[t.length-2][0]=="stat"&&(t[t.
length-1][0]=="return"||t[t.length-1][0]=="throw")&&t[t.length-1][1]&&t.splice(t
.length-2,2,[t[t.length-1][0],["seq",t[t.length-2][1],t[t.length-1][1]]]),t}([])
),e}function l(e,t,n){return when_constant(e,function(e,i){return i?(t=r(t),warn_unreachable
(n),t||["block"]):(n=r(n),warn_unreachable(t),n||["block"])},function(){return h
(e,t,n)})}function c(e,t,n){var i=[["if",s(e),n]];return t[0]=="block"?t[1]&&(i=
i.concat(t[1])):i.push(t),r(["block",i])}function h(e,t,n){e=r(e),t=r(t),n=r(n);
if(empty(n)&&empty(t))return["stat",e];empty(t)?(e=s(e),t=n,n=null):empty(n)?n=null
:function(){var r=gen_code(e),i=s(e),o=gen_code(i);if(o.length<r.length){var u=t
;t=n,n=u,e=i}}();var i=["if",e,t,n];return t[0]=="if"&&empty(t[3])&&empty(n)?i=best_of
(i,r(["if",["binary","&&",e,t[1]],t[2]])):t[0]=="stat"?n?n[0]=="stat"?i=best_of(
i,["stat",o(e,t[1],n[1])]):aborts(n)&&(i=c(e,t,n)):i=best_of(i,["stat",o(e,t[1])
]):n&&t[0]==n[0]&&(t[0]=="return"||t[0]=="throw")&&t[1]&&n[1]?i=best_of(i,[t[0],
o(e,t[1],n[1])]):n&&aborts(t)?(i=[["if",e,t]],n[0]=="block"?n[1]&&(i=i.concat(n[1
])):i.push(n),i=r(["block",i])):t&&aborts(n)&&(i=c(e,t,n)),i}function p(e,t){return when_constant
(e,function(e,n){return n?["for",null,null,null,r(t)]:(warn_unreachable(t),["block"
])})}t=defaults(t,{make_seqs:!0,dead_code:!0,no_warnings:!1,keep_comps:!0,unsafe
:!1});var n=ast_walker(),r=n.walk,i;return n.with_walkers({sub:function(e,t){if(
t[0]=="string"){var n=t[1];if(is_identifier(n))return["dot",r(e),n];if(/^[1-9][0-9]*$/
.test(n)||n==="0")return["sub",r(e),["num",parseInt(n,10)]]}},"if":l,toplevel:function(
e){return["toplevel",f(e)]},"switch":function(e,t){var n=t.length-1;return["switch"
,r(e),MAP(t,function(e,t){var i=f(e[1]);if(t==n&&i.length>0){var s=i[i.length-1]
;s[0]=="break"&&!s[1]&&i.pop()}return[e[0]?r(e[0]):null,i]})]},"function":a,defun
:a,block:function(e){if(e)return u(["block",f(e)])},binary:function(e,t,n){return when_constant
(["binary",e,r(t),r(n)],function(t){return best_of(r(t),this)},function(){return function(
){if(e!="=="&&e!="!=")return;var i=r(t),s=r(n);return i&&i[0]=="unary-prefix"&&i
[1]=="!"&&i[2][0]=="num"?t=["num",+!i[2][1]]:s&&s[0]=="unary-prefix"&&s[1]=="!"&&
s[2][0]=="num"&&(n=["num",+!s[2][1]]),["binary",e,t,n]}()||this})},conditional:function(
e,t,n){return o(r(e),r(t),r(n))},"try":function(e,t,n){return["try",f(e),t!=null?
[t[0],f(t[1])]:null,n!=null?f(n):null]},"unary-prefix":function(e,t){t=r(t);var n=
["unary-prefix",e,t];return e=="!"&&(n=best_of(n,s(t))),when_constant(n,function(
e,t){return r(e)},function(){return n})},name:function(e){switch(e){case"true":return["unary-prefix"
,"!",["num",0]];case"false":return["unary-prefix","!",["num",1]]}},"while":p,assign
:function(e,t,n){t=r(t),n=r(n);var i=["+","-","/","*","%",">>","<<",">>>","|","^"
,"&"];return e===!0&&t[0]==="name"&&n[0]==="binary"&&~i.indexOf(n[1])&&n[2][0]==="name"&&
n[2][1]===t[1]?[this[0],n[1],t,n[3]]:[this[0],e,t,n]},call:function(e,n){return e=
r(e),t.unsafe&&e[0]=="dot"&&e[1][0]=="string"&&e[2]=="toString"?e[1]:[this[0],e,
MAP(n,r)]},num:function(e){return isFinite(e)?[this[0],e]:["binary","/",e===1/0?
["num",1]:e===-1/0?["unary-prefix","-",["num",1]]:["num",0],["num",0]]}},function(
){return r(prepare_ifs(r(prepare_ifs(e))))})}function squeeze_2(e,t){function s(
e,t){var n=i,r;return i=e,r=t(),i=n,r}function o(e,t,n){return[this[0],e,t,s(n.scope
,curry(MAP,n,r))]}var n=ast_walker(),r=n.walk,i;return n.with_walkers({directive
:function(e){if(i.active_directive(e))return["block"];i.directives.push(e)},toplevel
:function(e){return[this[0],s(this.scope,curry(MAP,e,r))]},"function":o,defun:o}
,function(){return r(ast_add_scope(e))})}function make_string(e,t){var n=0,r=0;return e=
e.replace(/[\\\b\f\n\r\t\x22\x27\u2028\u2029\0]/g,function(e){switch(e){case"\\"
:return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r"
:return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case'"':return++
n,'"';case"'":return++r,"'";case"\0":return"\\0"}return e}),t&&(e=to_ascii(e)),n>
r?"'"+e.replace(/\x27/g,"\\'")+"'":'"'+e.replace(/\x22/g,'\\"')+'"'}function to_ascii
(e){
return e.replace((/\r/g),"\\r").replace((/\t/g),"\\t").replace((/[^\n\u0020-\u007e]/g),function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4);});
}function gen_code(e,t){function o(
e){var n=make_string(e,t.ascii_only);return t.inline_script&&(n=n.replace(/<\x2fscript([>\/\t\n\f\r ])/gi
,"<\\/script$1")),n}function u(e){return e=e.toString(),t.ascii_only&&(e=to_ascii
(e)),e}function a(e){return e==null&&(e=""),n&&(e=repeat_string(" ",t.indent_start+
r*t.indent_level)+e),e}function f(e,t){t==null&&(t=1),r+=t;try{return e.apply(null
,slice(arguments,1))}finally{r-=t}}function l(e){return e=e.toString(),e.charAt(
e.length-1)}function c(e){return e.toString().charAt(0)}function h(e){if(n)return e
.join(" ");var t=[];for(var r=0;r<e.length;++r){var i=e[r+1];t.push(e[r]),i&&(is_identifier_char
(l(e[r]))&&(is_identifier_char(c(i))||c(i)=="\\")||/[\+\-]$/.test(e[r].toString(
))&&/^[\+\-]/.test(i.toString())||l(e[r])=="/"&&c(i)=="/")&&t.push(" ")}return t
.join("")}function p(e){return e.join(","+s)}function d(e){var t=b(e);for(var n=1
;n<arguments.length;++n){var r=arguments[n];if(r instanceof Function&&r(e)||e[0]==
r)return"("+t+")"}return t}function v(e){if(e.length==1)return e[0];if(e.length==2
){var t=e[1];return e=e[0],e.length<=t.length?e:t}return v([e[0],v(e.slice(1))])
}function m(e){if(e[0]=="function"||e[0]=="object"){var t=slice(y.stack()),n=t.pop
(),r=t.pop();while(r){if(r[0]=="stat")return!0;if((r[0]!="seq"&&r[0]!="call"&&r[0
]!="dot"&&r[0]!="sub"&&r[0]!="conditional"||r[1]!==n)&&(r[0]!="binary"&&r[0]!="assign"&&
r[0]!="unary-postfix"||r[2]!==n))return!1;n=r,r=t.pop()}}return!HOP(DOT_CALL_NO_PARENS
,e[0])}function g(e){var t=e.toString(10),n=[t.replace(/^0\./,".").replace("e+","e"
)],r;return Math.floor(e)===e?(e>=0?n.push("0x"+e.toString(16).toLowerCase(),"0"+
e.toString(8)):n.push("-0x"+(-e).toString(16).toLowerCase(),"-0"+(-e).toString(8
)),(r=/^(.*?)(0+)$/.exec(e))&&n.push(r[1]+"e"+r[2].length)):(r=/^0?\.(0+)(.*)$/.
exec(e))&&n.push(r[2]+"e-"+(r[1].length+r[2].length),t.substr(t.indexOf("."))),v
(n)}function w(e){if(e==null)return";";if(e[0]=="do")return N([e]);var t=e;for(;
;){var n=t[0];if(n=="if"){if(!t[3])return b(["block",[e]]);t=t[3]}else if(n=="while"||
n=="do")t=t[2];else{if(n!="for"&&n!="for-in")break;t=t[4]}}return b(e)}function E
(e,t,n,r,i){var s=r||"function";return e&&(s+=" "+u(e)),s+="("+p(MAP(t,u))+")",s=
h([s,N(n)]),!i&&m(this)?"("+s+")":s}function S(e){switch(e[0]){case"with":case"while"
:return empty(e[2])||S(e[2]);case"for":case"for-in":return empty(e[4])||S(e[4]);
case"if":if(empty(e[2])&&!e[3])return!0;if(e[3])return empty(e[3])?!0:S(e[3]);return S
(e[2]);case"directive":return!0}}function x(e,t){for(var r=[],i=e.length-1,s=0;s<=
i;++s){var o=e[s],u=b(o);u!=";"&&(!n&&s==i&&!S(o)&&(u=u.replace(/;+\s*$/,"")),r.
push(u))}return t?r:MAP(r,a)}function T(e){var t=e.length;return t==0?"{}":"{"+i+
MAP(e,function(e,r){var s=e[1].length>0,o=f(function(){return a(e[0]?h(["case",b
(e[0])+":"]):"default:")},.5)+(s?i+f(function(){return x(e[1]).join(i)}):"");return!
n&&s&&r<t-1&&(o+=";"),o}).join(i)+i+a("}")}function N(e){return e?e.length==0?"{}"
:"{"+i+f(function(){return x(e).join(i)})+i+a("}"):";"}function C(e){var t=e[0],
n=e[1];return n!=null&&(t=h([u(t),"=",d(n,"seq")])),t}t=defaults(t,{indent_start
:0,indent_level:4,quote_keys:!1,space_colon:!1,beautify:!1,ascii_only:!1,inline_script
:!1});var n=!!t.beautify,r=0,i=n?"\n":"",s=n?" ":"",y=ast_walker(),b=y.walk;return y
.with_walkers({string:o,num:g,name:u,"debugger":function(){return"debugger;"},toplevel
:function(e){return x(e).join(i+i)},splice:function(e){var t=y.parent();return HOP
(SPLICE_NEEDS_BRACKETS,t)?N.apply(this,arguments):MAP(x(e,!0),function(e,t){return t>0?
a(e):e}).join(i)},block:N,"var":function(e){return"var "+p(MAP(e,C))+";"},"const"
:function(e){return"const "+p(MAP(e,C))+";"},"try":function(e,t,n){var r=["try",
N(e)];return t&&r.push("catch","("+t[0]+")",N(t[1])),n&&r.push("finally",N(n)),h
(r)},"throw":function(e){return h(["throw",b(e)])+";"},"new":function(e,t){return t=
t.length>0?"("+p(MAP(t,function(e){return d(e,"seq")}))+")":"",h(["new",d(e,"seq"
,"binary","conditional","assign",function(e){var t=ast_walker(),n={};try{t.with_walkers
({call:function(){throw n},"function":function(){return this}},function(){t.walk
(e)})}catch(r){if(r===n)return!0;throw r}})+t])},"switch":function(e,t){return h
(["switch","("+b(e)+")",T(t)])},"break":function(e){var t="break";return e!=null&&
(t+=" "+u(e)),t+";"},"continue":function(e){var t="continue";return e!=null&&(t+=" "+
u(e)),t+";"},conditional:function(e,t,n){return h([d(e,"assign","seq","conditional"
),"?",d(t,"seq"),":",d(n,"seq")])},assign:function(e,t,n){return e&&e!==!0?e+="="
:e="=",h([b(t),e,d(n,"seq")])},dot:function(e){var t=b(e),n=1;e[0]=="num"?/[a-f.]/i
.test(t)||(t+="."):e[0]!="function"&&m(e)&&(t="("+t+")");while(n<arguments.length
)t+="."+u(arguments[n++]);return t},call:function(e,t){var n=b(e),r=e[0]=="function"&&
n.charAt(0)=="(";return!r&&m(e)&&(n="("+n+")"),n+"("+p(MAP(t,function(e){return d
(e,"seq")}))+")"},"function":E,defun:E,"if":function(e,t,n){var r=["if","("+b(e)+")"
,n?w(t):b(t)];return n&&r.push("else",b(n)),h(r)},"for":function(e,t,n,r){var i=
["for"];e=(e!=null?b(e):"").replace(/;*\s*$/,";"+s),t=(t!=null?b(t):"").replace(/;*\s*$/
,";"+s),n=(n!=null?b(n):"").replace(/;*\s*$/,"");var o=e+t+n;return o=="; ; "&&(
o=";;"),i.push("("+o+")",b(r)),h(i)},"for-in":function(e,t,n,r){return h(["for","("+
(e?b(e).replace(/;+$/,""):b(t)),"in",b(n)+")",b(r)])},"while":function(e,t){return h
(["while","("+b(e)+")",b(t)])},"do":function(e,t){return h(["do",b(t),"while","("+
b(e)+")"])+";"},"return":function(e){var t=["return"];return e!=null&&t.push(b(e
)),h(t)+";"},binary:function(e,r,i){var s=b(r),o=b(i);if(member(r[0],["assign","conditional"
,"seq"])||r[0]=="binary"&&PRECEDENCE[e]>PRECEDENCE[r[1]]||r[0]=="function"&&m(this
))s="("+s+")";return member(i[0],["assign","conditional","seq"])||i[0]=="binary"&&
PRECEDENCE[e]>=PRECEDENCE[i[1]]&&(i[1]!=e||!member(e,["&&","||","*"]))?o="("+o+")"
:!n&&t.inline_script&&(e=="<"||e=="<<")&&i[0]=="regexp"&&/^script/i.test(i[1])&&
(o=" "+o),h([s,e,o])},"unary-prefix":function(e,t){var n=b(t);return t[0]=="num"||
t[0]=="unary-prefix"&&!HOP(OPERATORS,e+t[1])||!m(t)||(n="("+n+")"),e+(jsp.is_alphanumeric_char
(e.charAt(0))?" ":"")+n},"unary-postfix":function(e,t){var n=b(t);return t[0]=="num"||
t[0]=="unary-postfix"&&!HOP(OPERATORS,e+t[1])||!m(t)||(n="("+n+")"),n+e},sub:function(
e,t){var n=b(e);return m(e)&&(n="("+n+")"),n+"["+b(t)+"]"},object:function(e){var r=
m(this);if(e.length==0)return r?"({})":"{}";var s="{"+i+f(function(){return MAP(
e,function(e){if(e.length==3)return a(E(e[0],e[1][2],e[1][3],e[2],!0));var r=e[0
],i=d(e[1],"seq");return t.quote_keys?r=o(r):(typeof r=="number"||!n&&+r+""==r)&&
parseFloat(r)>=0?r=g(+r):is_identifier(r)||(r=o(r)),a(h(n&&t.space_colon?[r,":",
i]:[r+":",i]))}).join(","+i)})+i+a("}");return r?"("+s+")":s},regexp:function(e,
n){return t.ascii_only&&(e=to_ascii(e)),"/"+e+"/"+n},array:function(e){return e.
length==0?"[]":h(["[",p(MAP(e,function(t,r){return!n&&t[0]=="atom"&&t[1]=="undefined"?
r===e.length-1?",":"":d(t,"seq")})),"]"])},stat:function(e){return e!=null?b(e).
replace(/;*\s*$/,";"):";"},seq:function(){return p(MAP(slice(arguments),b))},label
:function(e,t){return h([u(e),":",b(t)])},"with":function(e,t){return h(["with","("+
b(e)+")",b(t)])},atom:function(e){return u(e)},directive:function(e){return make_string
(e)+";"}},function(){return b(e)})}function split_lines(e,t){var n=[0];return jsp
.parse(function(){function o(e){return e.pos-i}function u(e){i=e.pos,n.push(i)}function a
(){var e=r.apply(this,arguments);e:{if(s&&s.type=="keyword")break e;if(o(e)>t)switch(
e.type){case"keyword":case"atom":case"name":case"punc":u(e);break e}}return s=e,
e}var r=jsp.tokenizer(e),i=0,s;return a.context=function(){return r.context.apply
(this,arguments)},a}()),n.map(function(t,r){return e.substring(t,n[r+1]||e.length
)}).join("\n")}function repeat_string(e,t){if(t<=0)return"";if(t==1)return e;var n=
repeat_string(e,t>>1);return n+=n,t&1&&(n+=e),n}function defaults(e,t){var n={};
e===!0&&(e={});for(var r in t)HOP(t,r)&&(n[r]=e&&HOP(e,r)?e[r]:t[r]);return n}function is_identifier
(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)&&e!="this"&&!HOP(jsp.KEYWORDS_ATOM,e)&&!
HOP(jsp.RESERVED_WORDS,e)&&!HOP(jsp.KEYWORDS,e)}function HOP(e,t){return Object.
prototype.hasOwnProperty.call(e,t)}var jsp=require("./parse-js"),curry=jsp.curry
,slice=jsp.slice,member=jsp.member,is_identifier_char=jsp.is_identifier_char,PRECEDENCE=
jsp.PRECEDENCE,OPERATORS=jsp.OPERATORS,base54=function(){var e=base54_digits();return function(
t){var n="",r=54;do n+=e.charAt(t%r),t=Math.floor(t/r),r=64;while(t>0);return n}
}();Scope.prototype={has:function(e){for(var t=this;t;t=t.parent)if(HOP(t.names,
e))return t},has_mangled:function(e){for(var t=this;t;t=t.parent)if(HOP(t.rev_mangled
,e))return t},toJSON:function(){return{names:this.names,uses_eval:this.uses_eval
,uses_with:this.uses_with}},next_mangled:function(){for(;;){var e=base54(++this.
cname),t;t=this.has_mangled(e);if(t&&this.refs[t.rev_mangled[e]]===t)continue;t=
this.has(e);if(t&&t!==this&&this.refs[e]===t&&!t.has_mangled(e))continue;if(HOP(
this.refs,e)&&this.refs[e]==null)continue;if(!is_identifier(e))continue;return e
}},set_mangle:function(e,t){return this.rev_mangled[t]=e,this.mangled[e]=t},get_mangled
:function(e,t){if(this.uses_eval||this.uses_with)return e;var n=this.has(e);return n?
HOP(n.mangled,e)?n.mangled[e]:t?n.set_mangle(e,n.next_mangled()):e:e},references
:function(e){return e&&!this.parent||this.uses_with||this.uses_eval||this.refs[e
]},define:function(e,t){if(e!=null){if(t=="var"||!HOP(this.names,e))this.names[e
]=t||"var";return e}},active_directive:function(e){return member(e,this.directives
)||this.parent&&this.parent.active_directive(e)}};var warn=function(){},when_constant=
function(){function t(n){switch(n[0]){case"string":case"num":return n[1];case"name"
:case"atom":switch(n[1]){case"true":return!0;case"false":return!1;case"null":return null
}break;case"unary-prefix":switch(n[1]){case"!":return!t(n[2]);case"typeof":return typeof
t(n[2]);case"~":return~t(n[2]);case"-":return-t(n[2]);case"+":return+t(n[2])}break;
case"binary":var r=n[2],i=n[3];switch(n[1]){case"&&":return t(r)&&t(i);case"||":
return t(r)||t(i);case"|":return t(r)|t(i);case"&":return t(r)&t(i);case"^":return t
(r)^t(i);case"+":return t(r)+t(i);case"*":return t(r)*t(i);case"/":return t(r)/t
(i);case"%":return t(r)%t(i);case"-":return t(r)-t(i);case"<<":return t(r)<<t(i)
;case">>":return t(r)>>t(i);case">>>":return t(r)>>>t(i);case"==":return t(r)==t
(i);case"===":return t(r)===t(i);case"!=":return t(r)!=t(i);case"!==":return t(r
)!==t(i);case"<":return t(r)<t(i);case"<=":return t(r)<=t(i);case">":return t(r)>
t(i);case">=":return t(r)>=t(i);case"in":return t(r)in t(i);case"instanceof":return t
(r)instanceof t(i)}}throw e}var e={};return function(n,r,i){try{var s=t(n),o;switch(typeof
s){case"string":o=["string",s];break;case"number":o=["num",s];break;case"boolean"
:o=["name",String(s)];break;default:if(s===null){o=["atom","null"];break}throw new
Error("Can't handle constant of type: "+typeof s)}return r.call(n,o,s)}catch(u){
if(u===e){if(n[0]!="binary"||n[1]!="==="&&n[1]!="!=="||!(is_string(n[2])&&is_string
(n[3])||boolean_expr(n[2])&&boolean_expr(n[3]))){if(i&&n[0]=="binary"&&(n[1]=="||"||
n[1]=="&&"))try{var a=t(n[2]);n=n[1]=="&&"&&(a?n[3]:a)||n[1]=="||"&&(a?a:n[3])||
n}catch(f){}}else n[1]=n[1].substr(0,2);return i?i.call(n,n):null}throw u}}}(),DOT_CALL_NO_PARENS=
jsp.array_to_hash(["name","array","object","string","dot","sub","call","regexp","defun"
]),SPLICE_NEEDS_BRACKETS=jsp.array_to_hash(["if","while","do","for","for-in","with"
]),MAP;(function(){function t(e){this.v=e}function n(e){this.v=e}MAP=function(r,
i,s){function f(){var f=i.call(s,r[a],a);f instanceof t?(f=f.v,f instanceof n?u.
push.apply(u,f.v):u.push(f)):f!=e&&(f instanceof n?o.push.apply(o,f.v):o.push(f)
)}var o=[],u=[],a;if(r instanceof Array)for(a=0;a<r.length;++a)f();else for(a in
r)HOP(r,a)&&f();return u.concat(o)},MAP.at_top=function(e){return new t(e)},MAP.
splice=function(e){return new n(e)};var e=MAP.skip={}})(),exports.ast_walker=ast_walker
,exports.ast_mangle=ast_mangle,exports.ast_squeeze=ast_squeeze,exports.ast_lift_variables=
ast_lift_variables,exports.gen_code=gen_code,exports.ast_add_scope=ast_add_scope
,exports.set_logger=function(e){warn=e},exports.make_string=make_string,exports.
split_lines=split_lines,exports.MAP=MAP,exports.ast_squeeze_more=require("./squeeze-more"
).ast_squeeze_more
/*
file none
*/
/* jslint ignore:end */



local.uglify = function (code, file) {
/*
 * this function will uglify the js-code
 */
    var tmp;
    switch ((
        /\.\w+?$|$/m
    ).exec(file)[0]) {
    case ".css":
        return code
        // remove comment /**/
        .replace((
            /\/\*[\S\s]*?\*\//g
        ), "")
        // remove comment //
        .replace((
            /\/\/.*?$/gm
        ), "")
        // remove whitespace
        .replace((
            /\t/g
        ), " ")
        .replace((
            /\u0020{2,}/g
        ), " ")
        .replace((
            /\u0020*?([\n,:;{}])\u0020*/g
        ), "$1")
        .replace((
            /\n\n+/g
        ), "\n")
        .trim();
    case ".htm":
    case ".html":
        return code
        // remove comment /**/
        .replace((
            /\/\*[\S\s]*?\*\//g
        ), "")
        // remove comment //
        .replace((
            /\/\/.*?$/gm
        ), "")
        // save whitespace in <pre></pre>
        .replace((
            /<pre>[\S\s]*?<\/pre>/g
        ), function (match0) {
            return match0.replace((
                /\n/g
            ), "\u0000");
        })
        // remove whitespace
        .replace((
            /\s*?\n\s*/g
        ), " ")
        // restore whitespace in <pre></pre>
        .replace((
            /\u0000/g
        ), "\n")
        .trim();
    case ".json":
        return JSON.stringify(JSON.parse(code));
    }
    // parse code and get the initial AST
    tmp = local.parse(code
    .trim()
    // comment shebang
    .replace((
        /^#!\//
    ), "// "));
    // get a new AST with mangled names
    tmp = local.ast_mangle(tmp);
    // get an AST with compression optimizations
    tmp = local.ast_squeeze(tmp);
    // compressed code here
    tmp = local.split_lines(local.gen_code(tmp, {
        ascii_only: true
    }), 79);
    // escape \r and \t
    tmp = tmp.replace((
        /\r/g
    ), "\\r").replace((
        /\t/g
    ), "\\t");
    return tmp;
};
}());



/* istanbul ignore next */
// run node js-env code - init-after
(function () {
if (local.isBrowser) {
    return;
}



local.cliDict = {};
local.cliDict._default = function () {
/*
 * <file>
 * will uglify <file> and print result to stdout
 */
    if ((
        /^(?:http|https):\/\//
    ).test(process.argv[2])) {
        // uglify url
        (
            process.argv[2].indexOf("https") === 0
            ? local.https
            : local.http
        ).request(local.url.parse(process.argv[2]), function (response) {
            local.chunkList = [];
            response
            .on("data", function (chunk) {
                local.chunkList.push(chunk);
            })
            .on("end", function () {
                console.log(local.uglify(
                    Buffer.concat(local.chunkList).toString(),
                    local.url.parse(process.argv[2]).pathname
                ));
            });
        })
        .end();
        return;
    }
    // uglify file
    try {
        console.log(local.uglify(local.fs.readFileSync(
            local.path.resolve(process.cwd(), process.argv[2]),
            "utf8"
        ), process.argv[2]));
    } catch (errorCaught) {
        console.error(errorCaught);
    }
};

// run cli
if (module === require.main && !globalThis.utility2_rollup) {
    local.cliRun();
}
}());



}());
/* script-end /assets.utility2.lib.uglifyjs.js */



/* script-begin /assets.utility2.js */
// usr/bin/env node
/*
 * lib.utility2.js (2018.12.30)
 * https://github.com/kaizhu256/node-utility2
 * the zero-dependency, swiss-army-knife utility for building, testing, and deploying webapps
 *
 */



/* istanbul instrument in package utility2 */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



/* istanbul ignore next */
// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    // || globalThis.utility2_rollup_old
    // || require("./assets.utility2.rollup.js")
    || globalThis.globalLocal
);
// init exports
if (local.isBrowser) {
    globalThis.utility2_utility2 = local;
} else {
    module.exports = local;
    module.exports.__dirname = __dirname;
}
// init lib main
local.utility2 = local;



/* validateLineSortedReset */
// init lib utility2
globalThis.utility2 = local;
// init lib extra
[
    "apidoc",
    "db",
    "github_crud",
    "istanbul",
    "jslint",
    "marked",
    "sjcl",
    "uglifyjs"
].forEach(function (key) {
    try {
        local[key] = (
            local.isBrowser
            ? globalThis["utility2_" + key]
            : require("./lib." + key + ".js")
        );
    } catch (errorCaught) {
        local.assertThrow(
            errorCaught.code === "MODULE_NOT_FOUND",
            errorCaught
        );
    }
    local[key] = local[key] || {};
});
// init assets and templates
local.assetsDict = local.assetsDict || {};



/* jslint ignore:start */
local.assetsDict["/assets.index.template.html"] =
local.assetsDict["/assets.utility2.template.html"] = '\
<!doctype html>\n\
<html lang="en">\n\
<head>\n\
<meta charset="utf-8">\n\
<meta name="viewport" content="width=device-width, initial-scale=1">\n\
<!-- "assets.utility2.template.html" -->\n\
<title>{{env.npm_package_name}} ({{env.npm_package_version}})</title>\n\
<style>\n\
/* jslint utility2:true */\n\
/*csslint\n\
*/\n\
/* csslint ignore:start */\n\
*,\n\
*:after,\n\
*:before {\n\
    box-sizing: border-box;\n\
}\n\
/* csslint ignore:end */\n\
@keyframes uiAnimateShake {\n\
    0%, 50% {\n\
        transform: translateX(10px);\n\
    }\n\
    25%, 75% {\n\
        transform: translateX(-10px);\n\
    }\n\
    100% {\n\
        transform: translateX(0);\n\
    }\n\
}\n\
@keyframes uiAnimateSpin {\n\
    0% {\n\
        transform: rotate(0deg);\n\
    }\n\
    100% {\n\
        transform: rotate(360deg);\n\
    }\n\
}\n\
a {\n\
    overflow-wrap: break-word;\n\
}\n\
body {\n\
    background: #eef;\n\
    font-family: Arial, Helvetica, sans-serif;\n\
    margin: 0 40px;\n\
}\n\
body > div,\n\
body > form > div,\n\
body > form > input,\n\
body > form > pre,\n\
body > form > textarea,\n\
body > form > .button,\n\
body > input,\n\
body > pre,\n\
body > textarea,\n\
body > .button {\n\
    margin-bottom: 20px;\n\
}\n\
body > form > input,\n\
body > form > .button,\n\
body > input,\n\
body > .button {\n\
    width: 20rem;\n\
}\n\
body > form > textarea,\n\
body > textarea {\n\
    height: 10rem;\n\
    width: 100%;\n\
}\n\
body > textarea[readonly] {\n\
    background: #ddd;\n\
}\n\
code,\n\
pre,\n\
textarea {\n\
    font-family: Consolas, Menlo, monospace;\n\
    font-size: small;\n\
}\n\
pre {\n\
    overflow-wrap: break-word;\n\
    white-space: pre-wrap;\n\
}\n\
textarea {\n\
    overflow: auto;\n\
    white-space: pre;\n\
}\n\
.button {\n\
    background-color: #fff;\n\
    border: 1px solid;\n\
    border-bottom-color: rgb(186, 186, 186);\n\
    border-left-color: rgb(209, 209, 209);\n\
    border-radius: 4px;\n\
    border-right-color: rgb(209, 209, 209);\n\
    border-top-color: rgb(216, 216, 216);\n\
    color: #00d;\n\
    cursor: pointer;\n\
    display: inline-block;\n\
    font-family: Arial, Helvetica, sans-serif;\n\
    font-size: 12px;\n\
    font-style: normal;\n\
    font-weight: normal;\n\
    margin: 0;\n\
    padding: 2px 7px 3px 7px;\n\
    text-align: center;\n\
    text-decoration: underline;\n\
}\n\
.colorError {\n\
    color: #d00;\n\
}\n\
.uiAnimateShake {\n\
    animation-duration: 500ms;\n\
    animation-name: uiAnimateShake;\n\
}\n\
.uiAnimateSlide {\n\
    overflow-y: hidden;\n\
    transition: max-height ease-in 250ms, min-height ease-in 250ms, padding-bottom ease-in 250ms, padding-top ease-in 250ms;\n\
}\n\
.utility2FooterDiv {\n\
    text-align: center;\n\
}\n\
.zeroPixel {\n\
    border: 0;\n\
    height: 0;\n\
    margin: 0;\n\
    padding: 0;\n\
    width: 0;\n\
}\n\
</style>\n\
</head>\n\
<body>\n\
<div id="ajaxProgressDiv1" style="background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 500ms, width 1500ms; width: 0%; z-index: 1;"></div>\n\
<div class="uiAnimateSpin" style="animation: uiAnimateSpin 2s linear infinite; border: 5px solid #999; border-radius: 50%; border-top: 5px solid #7d7; display: none; height: 25px; vertical-align: middle; width: 25px;"></div>\n\
<a class="zeroPixel" download="db.persistence.json" href="" id="dbExportA1"></a>\n\
<input class="zeroPixel" id="dbImportInput1" type="file">\n\
<script>\n\
/* jslint utility2:true */\n\
// init domOnEventWindowOnloadTimeElapsed\n\
(function () {\n\
/*\n\
 * this function will measure and print the time-elapsed for window.onload\n\
 */\n\
    "use strict";\n\
    if (window.domOnEventWindowOnloadTimeElapsed) {\n\
        return;\n\
    }\n\
    window.domOnEventWindowOnloadTimeElapsed = Date.now() + 100;\n\
    window.addEventListener("load", function () {\n\
        setTimeout(function () {\n\
            window.domOnEventWindowOnloadTimeElapsed = (\n\
                Date.now()\n\
                - window.domOnEventWindowOnloadTimeElapsed\n\
            );\n\
            console.error(\n\
                "domOnEventWindowOnloadTimeElapsed = "\n\
                + window.domOnEventWindowOnloadTimeElapsed\n\
            );\n\
        }, 100);\n\
    });\n\
}());\n\
\n\
\n\
\n\
// init timerIntervalAjaxProgressUpdate\n\
(function () {\n\
/*\n\
 * this function will increment the ajax-progress-bar\n\
 * until the webpage has loaded\n\
 */\n\
    "use strict";\n\
    var ajaxProgressDiv1;\n\
    var ajaxProgressState;\n\
    var ajaxProgressUpdate;\n\
    if (\n\
        window.timerIntervalAjaxProgressUpdate\n\
        || !document.querySelector(\n\
            "#ajaxProgressDiv1"\n\
        )\n\
    ) {\n\
        return;\n\
    }\n\
    ajaxProgressDiv1 = document.querySelector(\n\
        "#ajaxProgressDiv1"\n\
    );\n\
    setTimeout(function () {\n\
        ajaxProgressDiv1.style.width = "25%";\n\
    });\n\
    ajaxProgressState = 0;\n\
    ajaxProgressUpdate = (\n\
        window.local\n\
        && window.local.ajaxProgressUpdate\n\
    ) || function () {\n\
        ajaxProgressDiv1.style.width = "100%";\n\
        setTimeout(function () {\n\
            ajaxProgressDiv1.style.background = "transparent";\n\
            setTimeout(function () {\n\
                ajaxProgressDiv1.style.width = "0%";\n\
            }, 500);\n\
        }, 1000);\n\
    };\n\
    window.timerIntervalAjaxProgressUpdate = setInterval(function () {\n\
        ajaxProgressState += 1;\n\
        ajaxProgressDiv1.style.width = Math.max(\n\
            100 - 75 * Math.exp(-0.125 * ajaxProgressState),\n\
            ajaxProgressDiv1.style.width.slice(0, -1) | 0\n\
        ) + "%";\n\
    }, 1000);\n\
    window.addEventListener("load", function () {\n\
        clearInterval(window.timerIntervalAjaxProgressUpdate);\n\
        ajaxProgressUpdate();\n\
    });\n\
}());\n\
\n\
\n\
\n\
// init domOnEventSelectAllWithinPre\n\
(function () {\n\
/*\n\
 * this function will limit select-all within <pre tabIndex="0"> elements\n\
 * https://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse\n\
 */\n\
    "use strict";\n\
    if (window.domOnEventSelectAllWithinPre) {\n\
        return;\n\
    }\n\
    window.domOnEventSelectAllWithinPre = function (event) {\n\
        var range;\n\
        var selection;\n\
        if (\n\
            event\n\
            && event.key === "a"\n\
            && (event.ctrlKey || event.metaKey)\n\
            && event.target.closest("pre")\n\
        ) {\n\
            range = document.createRange();\n\
            range.selectNodeContents(event.target.closest("pre"));\n\
            selection = window.getSelection();\n\
            selection.removeAllRanges();\n\
            selection.addRange(range);\n\
            event.preventDefault();\n\
        }\n\
    };\n\
    // init event-handling\n\
    document.addEventListener(\n\
        "keydown",\n\
        window.domOnEventSelectAllWithinPre\n\
    );\n\
}());\n\
</script>\n\
<h1>\n\
<!-- utility2-comment\n\
    <a\n\
        {{#if env.npm_package_homepage}}\n\
        href="{{env.npm_package_homepage}}"\n\
        {{/if env.npm_package_homepage}}\n\
        target="_blank"\n\
    >\n\
utility2-comment -->\n\
        {{env.npm_package_name}} ({{env.npm_package_version}})\n\
<!-- utility2-comment\n\
    </a>\n\
utility2-comment -->\n\
</h1>\n\
<h3>{{env.npm_package_description}}</h3>\n\
<!-- utility2-comment\n\
<a class="button" download href="assets.app.js">download standalone app</a><br>\n\
<button class="button eventDelegateClick onreset" data-onevent="testRunBrowser" id="testRunButton1">run internal test</button><br>\n\
<div class="uiAnimateSlide" id="testReportDiv1" style="border-bottom: 0; border-top: 0; margin-bottom: 0; margin-top: 0; max-height: 0; padding-bottom: 0; padding-top: 0;"></div>\n\
utility2-comment -->\n\
\n\
\n\
\n\
<label>stderr and stdout</label>\n\
<textarea class="resettable" id="outputStdoutTextarea1" readonly></textarea>\n\
<!-- utility2-comment\n\
{{#if isRollup}}\n\
<script src="assets.app.js"></script>\n\
{{#unless isRollup}}\n\
utility2-comment -->\n\
<script src="assets.utility2.rollup.js"></script>\n\
<script>window.utility2_onReadyBefore.counter += 1;</script>\n\
<script src="jsonp.utility2.stateInit?callback=window.utility2.stateInit"></script>\n\
<script src="assets.{{packageJson.nameLib}}.js"></script>\n\
<script src="assets.example.js"></script>\n\
<script src="assets.test.js"></script>\n\
<script>window.utility2_onReadyBefore();</script>\n\
<!-- utility2-comment\n\
{{/if isRollup}}\n\
utility2-comment -->\n\
<div class="utility2FooterDiv">\n\
    [ this app was created with\n\
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>\n\
    ]\n\
</div>\n\
</body>\n\
</html>\n\
';



/* validateLineSortedReset */
// https://img.shields.io/badge/last_build-0000_00_00_00_00_00_UTC_--_master_--_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa-0077ff.svg?style=flat
local.assetsDict["/assets.buildBadge.template.svg"] =
'<svg xmlns="http://www.w3.org/2000/svg" width="563" height="20"><linearGradient id="a" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><rect rx="0" width="563" height="20" fill="#555"/><rect rx="0" x="61" width="502" height="20" fill="#07f"/><path fill="#07f" d="M61 0h4v20h-4z"/><rect rx="0" width="563" height="20" fill="url(#a)"/><g fill="#fff" text-anchor="middle" font-family="DejaVu Sans,Verdana,Geneva,sans-serif" font-size="11"><text x="31.5" y="15" fill="#010101" fill-opacity=".3">last build</text><text x="31.5" y="14">last build</text><text x="311" y="15" fill="#010101" fill-opacity=".3">0000-00-00 00:00:00 UTC - master - aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</text><text x="311" y="14">0000-00-00 00:00:00 UTC - master - aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</text></g></svg>';



local.assetsDict["/assets.example.html"] = "";



local.assetsDict["/assets.example.begin.js"] = '\
(function (globalThis) {\n\
    "use strict";\n\
    var consoleError;\n\
    var local;\n\
    // init globalThis\n\
    (function () {\n\
        try {\n\
            globalThis = Function("return this")(); // jslint ignore:line\n\
        } catch (ignore) {}\n\
    }());\n\
    globalThis.globalThis = globalThis;\n\
    // init debug_inline\n\
    if (!globalThis["debug\\u0049nline"]) {\n\
        consoleError = console.error;\n\
        globalThis["debug\\u0049nline"] = function () {\n\
        /*\n\
         * this function will both print <arguments> to stderr\n\
         * and return <arguments>[0]\n\
         */\n\
            var argList;\n\
            argList = Array.from(arguments); // jslint ignore:line\n\
            // debug arguments\n\
            globalThis["debug\\u0049nlineArguments"] = argList;\n\
            consoleError("\\n\\ndebug\\u0049nline");\n\
            consoleError.apply(console, argList);\n\
            consoleError("\\n");\n\
            // return arg0 for inspection\n\
            return argList[0];\n\
        };\n\
    }\n\
    // init local\n\
    local = {};\n\
    local.local = local;\n\
    globalThis.globalLocal = local;\n\
    // init isBrowser\n\
    local.isBrowser = (\n\
        typeof window === "object"\n\
        && window === globalThis\n\
        && typeof window.XMLHttpRequest === "function"\n\
        && window.document\n\
        && typeof window.document.querySelector === "function"\n\
    );\n\
    // init function\n\
    local.assertThrow = function (passed, message) {\n\
    /*\n\
     * this function will throw the error <message> if <passed> is falsy\n\
     */\n\
        var error;\n\
        if (passed) {\n\
            return;\n\
        }\n\
        error = (\n\
            // ternary-condition\n\
            (\n\
                message\n\
                && typeof message.message === "string"\n\
                && typeof message.stack === "string"\n\
            )\n\
            // if message is an error-object, then leave it as is\n\
            ? message\n\
            : new Error(\n\
                typeof message === "string"\n\
                // if message is a string, then leave it as is\n\
                ? message\n\
                // else JSON.stringify message\n\
                : JSON.stringify(message, null, 4)\n\
            )\n\
        );\n\
        throw error;\n\
    };\n\
    local.functionOrNop = function (fnc) {\n\
    /*\n\
     * this function will if <fnc> exists,\n\
     * them return <fnc>,\n\
     * else return <nop>\n\
     */\n\
        return fnc || local.nop;\n\
    };\n\
    local.identity = function (value) {\n\
    /*\n\
     * this function will return <value>\n\
     */\n\
        return value;\n\
    };\n\
    local.nop = function () {\n\
    /*\n\
     * this function will do nothing\n\
     */\n\
        return;\n\
    };\n\
    local.objectAssignDefault = function (target, source) {\n\
    /*\n\
     * this function will if items from <target> are\n\
     * null, undefined, or empty-string,\n\
     * then overwrite them with items from <source>\n\
     */\n\
        Object.keys(source).forEach(function (key) {\n\
            if (\n\
                target[key] === null\n\
                || target[key] === undefined\n\
                || target[key] === ""\n\
            ) {\n\
                target[key] = target[key] || source[key];\n\
            }\n\
        });\n\
    };\n\
    // require builtin\n\
    if (!local.isBrowser) {\n\
        local.assert = require("assert");\n\
        local.buffer = require("buffer");\n\
        local.child_process = require("child_process");\n\
        local.cluster = require("cluster");\n\
        local.crypto = require("crypto");\n\
        local.dgram = require("dgram");\n\
        local.dns = require("dns");\n\
        local.domain = require("domain");\n\
        local.events = require("events");\n\
        local.fs = require("fs");\n\
        local.http = require("http");\n\
        local.https = require("https");\n\
        local.net = require("net");\n\
        local.os = require("os");\n\
        local.path = require("path");\n\
        local.querystring = require("querystring");\n\
        local.readline = require("readline");\n\
        local.repl = require("repl");\n\
        local.stream = require("stream");\n\
        local.string_decoder = require("string_decoder");\n\
        local.timers = require("timers");\n\
        local.tls = require("tls");\n\
        local.tty = require("tty");\n\
        local.url = require("url");\n\
        local.util = require("util");\n\
        local.vm = require("vm");\n\
        local.zlib = require("zlib");\n\
    }\n\
}(this));\n\
'



local.assetsDict["/assets.example.template.js"] = '\
/*\n\
example.js\n\
\n\
this script will run a web-demo of my-app-lite\n\
\n\
instruction\n\
    1. save this script as example.js\n\
    2. run the shell-command:\n\
        $ npm install my-app-lite && PORT=8081 node example.js\n\
    3. open a browser to http://127.0.0.1:8081 and play with the web-demo\n\
    4. edit this script to suit your needs\n\
*/\n\
\n\
\n\
\n\
/* istanbul instrument in package my_app */\n\
/* istanbul ignore next */\n\
/* jslint utility2:true */\n\
' + local.assetsDict["/assets.example.begin.js"] + '\
\n\
\n\
\n\
(function (local) {\n\
"use strict";\n\
\n\
\n\
\n\
// run shared js\-env code - init-before\n\
(function () {\n\
// init local\n\
local = (\n\
    globalThis.utility2_rollup\n\
    || globalThis.utility2_my_app\n\
    || require("my-app-lite")\n\
);\n\
// init exports\n\
globalThis.local = local;\n\
}());\n\
\n\
\n\
\n\
/* istanbul ignore next */\n\
// run browser js\-env code - init-test\n\
(function () {\n\
if (!local.isBrowser) {\n\
    return;\n\
}\n\
local.testRunBrowser = function (event) {\n\
    if (!event || (\n\
        event\n\
        && event.currentTarget\n\
        && event.currentTarget.className\n\
        && event.currentTarget.className.includes\n\
        && event.currentTarget.className.includes("onreset")\n\
    )) {\n\
        // reset output\n\
        Array.from(document.querySelectorAll(\n\
            "body > .resettable"\n\
        )).forEach(function (element) {\n\
            switch (element.tagName) {\n\
            case "INPUT":\n\
            case "TEXTAREA":\n\
                element.value = "";\n\
                break;\n\
            default:\n\
                element.textContent = "";\n\
            }\n\
        });\n\
    }\n\
    switch (event && event.currentTarget && event.currentTarget.id) {\n\
    case "testRunButton1":\n\
        // show tests\n\
        if (document.querySelector(\n\
            "#testReportDiv1"\n\
        ).style.maxHeight === "0px") {\n\
            local.uiAnimateSlideDown(document.querySelector(\n\
                "#testReportDiv1"\n\
            ));\n\
            document.querySelector(\n\
                "#testRunButton1"\n\
            ).textContent = "hide internal test";\n\
            local.modeTest = 1;\n\
            local.testRunDefault(local);\n\
        // hide tests\n\
        } else {\n\
            local.uiAnimateSlideUp(document.querySelector(\n\
                "#testReportDiv1"\n\
            ));\n\
            document.querySelector(\n\
                "#testRunButton1"\n\
            ).textContent = "run internal test";\n\
        }\n\
        break;\n\
    /* validateLineSortedReset */\n\
    // custom-case\n\
    }\n\
    if (document.querySelector(\n\
        "#inputTextareaEval1"\n\
    ) && (!event || (\n\
        event\n\
        && event.currentTarget\n\
        && event.currentTarget.className\n\
        && event.currentTarget.className.includes\n\
        && event.currentTarget.className.includes("oneval")\n\
    ))) {\n\
        // try to eval input-code\n\
        try {\n\
            eval( // jslint ignore:line\n\
                document.querySelector(\n\
                    "#inputTextareaEval1"\n\
                ).value\n\
            );\n\
        } catch (errorCaught) {\n\
            console.error(errorCaught);\n\
        }\n\
    }\n\
};\n\
\n\
local.uiEventDelegate = local.uiEventDelegate || function (event) {\n\
    // filter non-input keyup-event\n\
    event.targetOnEvent = event.target.closest("[data-onevent]");\n\
    if (!event.targetOnEvent) {\n\
        return;\n\
    }\n\
    // rate-limit keyup\n\
    if (event.type === "keyup") {\n\
        local.uiEventDelegateKeyupEvent = event;\n\
        if (local.uiEventDelegateKeyupTimerTimeout !== 2) {\n\
            local.uiEventDelegateKeyupTimerTimeout = (\n\
                local.uiEventDelegateKeyupTimerTimeout\n\
                || setTimeout(function () {\n\
                    local.uiEventDelegateKeyupTimerTimeout = 2;\n\
                    local.uiEventDelegate(local.uiEventDelegateKeyupEvent);\n\
                }, 100)\n\
            );\n\
            return;\n\
        }\n\
        local.uiEventDelegateKeyupTimerTimeout = null;\n\
        if (!event.target.closest("input, option, select, textarea")) {\n\
            return;\n\
        }\n\
    }\n\
    switch (event.targetOnEvent.tagName) {\n\
    case "BUTTON":\n\
    case "FORM":\n\
        event.preventDefault();\n\
        break;\n\
    }\n\
    event.stopPropagation();\n\
    local.uiEventListenerDict[event.targetOnEvent.dataset.onevent](event);\n\
};\n\
\n\
local.uiEventListenerDict = local.uiEventListenerDict || {};\n\
\n\
local.uiEventListenerDict.testRunBrowser = local.testRunBrowser;\n\
\n\
// log stderr and stdout to #outputStdoutTextarea1\n\
["error", "log"].forEach(function (key) {\n\
    console[key + "_original"] = console[key + "_original"] || console[key];\n\
    console[key] = function () {\n\
        var argList;\n\
        var element;\n\
        argList = Array.from(arguments); // jslint ignore:line\n\
        console[key + "_original"].apply(console, argList);\n\
        element = document.querySelector(\n\
            "#outputStdoutTextarea1"\n\
        );\n\
        if (!element) {\n\
            return;\n\
        }\n\
        // append text to #outputStdoutTextarea1\n\
        element.value += argList.map(function (arg) {\n\
            return (\n\
                typeof arg === "string"\n\
                ? arg\n\
                : JSON.stringify(arg, null, 4)\n\
            );\n\
        }).join(" ").replace((\n\
            /\\u001b\\[\\d*m/g\n\
        ), "") + "\\n";\n\
        // scroll textarea to bottom\n\
        element.scrollTop = element.scrollHeight;\n\
    };\n\
});\n\
// init event-handling\n\
["Change", "Click", "Keyup", "Submit"].forEach(function (eventType) {\n\
    Array.from(document.querySelectorAll(\n\
        ".eventDelegate" + eventType\n\
    )).forEach(function (element) {\n\
        element.addEventListener(eventType.toLowerCase(), local.uiEventDelegate);\n\
    });\n\
});\n\
// run tests\n\
local.testRunBrowser();\n\
}());\n\
\n\
\n\
\n\
/* istanbul ignore next */\n\
// run node js\-env code - init-test\n\
(function () {\n\
if (local.isBrowser) {\n\
    return;\n\
}\n\
// init exports\n\
module.exports = local;\n\
/* validateLineSortedReset */\n\
// init assets\n\
local.assetsDict = local.assetsDict || {};\n\
[\n\
    "assets.index.template.html",\n\
    "assets.swgg.swagger.json",\n\
    "assets.swgg.swagger.server.json"\n\
].forEach(function (file) {\n\
    file = "/" + file;\n\
    local.assetsDict[file] = local.assetsDict[file] || "";\n\
    if (local.fs.existsSync(local.__dirname + file)) {\n\
        local.assetsDict[file] = local.fs.readFileSync(\n\
            local.__dirname + file,\n\
            "utf8"\n\
        );\n\
    }\n\
});\n\
/* jslint ignore:start */\n\
local.assetsDict["/assets.index.template.html"] = \'\\\n\
' + local.assetsDict["/assets.index.template.html"].replace((/\n/g), "\\n\\\n") + '\';\n\
/* jslint ignore:end */\n\
/* validateLineSortedReset */\n\
/* jslint ignore:start */\n\
local.assetsDict["/assets.my_app.js"] =\n\
    local.assetsDict["/assets.my_app.js"] ||\n\
    local.fs.readFileSync(local.__dirname + "/lib.my_app.js", "utf8"\n\
).replace((/^#!\\//), "// ");\n\
/* jslint ignore:end */\n\
/* validateLineSortedReset */\n\
local.assetsDict["/"] = local.assetsDict["/assets.index.template.html"]\n\
.replace((\n\
    /\\{\\{env\\.(\\w+?)\\}\\}/g\n\
), function (match0, match1) {\n\
    switch (match1) {\n\
    case "npm_package_description":\n\
        return "the greatest app in the world!";\n\
    case "npm_package_name":\n\
        return "my-app-lite";\n\
    case "npm_package_nameLib":\n\
        return "my_app";\n\
    case "npm_package_version":\n\
        return "0.0.1";\n\
    default:\n\
        return match0;\n\
    }\n\
});\n\
local.assetsDict["/assets.example.html"] = local.assetsDict["/"];\n\
local.assetsDict["/index.html"] = local.assetsDict["/"];\n\
// init cli\n\
if (module !== require.main || globalThis.utility2_rollup) {\n\
    return;\n\
}\n\
/* validateLineSortedReset */\n\
local.assetsDict["/assets.example.js"] = (\n\
    local.assetsDict["/assets.example.js"]\n\
    || local.fs.readFileSync(__filename, "utf8")\n\
);\n\
local.assetsDict["/favicon.ico"] = local.assetsDict["/favicon.ico"] || "";\n\
// if $npm_config_timeout_exit exists,\n\
// then exit this process after $npm_config_timeout_exit ms\n\
if (Number(process.env.npm_config_timeout_exit)) {\n\
    setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n\
}\n\
// start server\n\
if (globalThis.utility2_serverHttp1) {\n\
    return;\n\
}\n\
process.env.PORT = process.env.PORT || "8081";\n\
console.error("server starting on port " + process.env.PORT);\n\
local.http.createServer(function (request, response) {\n\
    request.urlParsed = local.url.parse(request.url);\n\
    if (local.assetsDict[request.urlParsed.pathname] !== undefined) {\n\
        response.end(local.assetsDict[request.urlParsed.pathname]);\n\
        return;\n\
    }\n\
    response.statusCode = 404;\n\
    response.end();\n\
}).listen(process.env.PORT);\n\
}());\n\
\n\
\n\
\n\
}());\n\
';



local.assetsDict["/assets.my_app.template.js"] = '\
#!/usr/bin/env node\n\
/*\n\
 * lib.my_app.js ({{packageJson.version}})\n\
 * https://github.com/kaizhu256/node-my-app-lite\n\
 * {{packageJson.description}}\n\
 *\n\
 */\n\
\n\
\n\
\n\
/* istanbul instrument in package my_app */\n\
/* istanbul ignore next */\n\
/* jslint utility2:true */\n\
' + local.assetsDict["/assets.example.begin.js"] + '\
\n\
\n\
\n\
(function (local) {\n\
"use strict";\n\
\n\
\n\
\n\
/* istanbul ignore next */\n\
// run shared js\-env code - init-before\n\
(function () {\n\
// init local\n\
local = (\n\
    globalThis.utility2_rollup\n\
    // || globalThis.utility2_rollup_old\n\
    // || require("./assets.utility2.rollup.js")\n\
    || globalThis.globalLocal\n\
);\n\
// init exports\n\
if (local.isBrowser) {\n\
    globalThis.utility2_my_app = local;\n\
} else {\n\
    module.exports = local;\n\
    module.exports.__dirname = __dirname;\n\
}\n\
// init lib main\n\
local.my_app = local;\n\
\n\
\n\
\n\
/* validateLineSortedReset */\n\
return;\n\
}());\n\
\n\
\n\
\n\
}());\n\
';



local.assetsDict["/assets.readme.template.md"] = '\
# my-app-lite\n\
the greatest app in the world!\n\
\n\
# live web demo\n\
- [https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/app](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/app)\n\
\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithub.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp.png)](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/app)\n\
\n\
\n\
\n\
[![travis-ci.org build-status](https://api.travis-ci.org/kaizhu256/node-my-app-lite.svg)](https://travis-ci.org/kaizhu256/node-my-app-lite) [![coverage](https://kaizhu256.github.io/node-my-app-lite/build/coverage.badge.svg)](https://kaizhu256.github.io/node-my-app-lite/build/coverage.html/index.html)\n\
\n\
[![NPM](https://nodei.co/npm/my-app-lite.png?downloads=true)](https://www.npmjs.com/package/my-app-lite)\n\
\n\
[![build commit status](https://kaizhu256.github.io/node-my-app-lite/build/build.badge.svg)](https://travis-ci.org/kaizhu256/node-my-app-lite)\n\
\n\
| git-branch : | [master](https://github.com/kaizhu256/node-my-app-lite/tree/master) | [beta](https://github.com/kaizhu256/node-my-app-lite/tree/beta) | [alpha](https://github.com/kaizhu256/node-my-app-lite/tree/alpha)|\n\
|--:|:--|:--|:--|\n\
| test-server-github : | [![github.com test-server](https://kaizhu256.github.io/node-my-app-lite/GitHub-Mark-32px.png)](https://kaizhu256.github.io/node-my-app-lite/build..master..travis-ci.org/app) | [![github.com test-server](https://kaizhu256.github.io/node-my-app-lite/GitHub-Mark-32px.png)](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/app) | [![github.com test-server](https://kaizhu256.github.io/node-my-app-lite/GitHub-Mark-32px.png)](https://kaizhu256.github.io/node-my-app-lite/build..alpha..travis-ci.org/app)|\n\
| test-server-heroku : | [![heroku.com test-server](https://kaizhu256.github.io/node-my-app-lite/heroku-logo.75x25.png)](https://h1-my-app-master.herokuapp.com) | [![heroku.com test-server](https://kaizhu256.github.io/node-my-app-lite/heroku-logo.75x25.png)](https://h1-my-app-beta.herokuapp.com) | [![heroku.com test-server](https://kaizhu256.github.io/node-my-app-lite/heroku-logo.75x25.png)](https://h1-my-app-alpha.herokuapp.com)|\n\
| test-report : | [![test-report](https://kaizhu256.github.io/node-my-app-lite/build..master..travis-ci.org/test-report.badge.svg)](https://kaizhu256.github.io/node-my-app-lite/build..master..travis-ci.org/test-report.html) | [![test-report](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/test-report.badge.svg)](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/test-report.html) | [![test-report](https://kaizhu256.github.io/node-my-app-lite/build..alpha..travis-ci.org/test-report.badge.svg)](https://kaizhu256.github.io/node-my-app-lite/build..alpha..travis-ci.org/test-report.html)|\n\
| coverage : | [![coverage](https://kaizhu256.github.io/node-my-app-lite/build..master..travis-ci.org/coverage.badge.svg)](https://kaizhu256.github.io/node-my-app-lite/build..master..travis-ci.org/coverage.html/index.html) | [![coverage](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/coverage.badge.svg)](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/coverage.html/index.html) | [![coverage](https://kaizhu256.github.io/node-my-app-lite/build..alpha..travis-ci.org/coverage.badge.svg)](https://kaizhu256.github.io/node-my-app-lite/build..alpha..travis-ci.org/coverage.html/index.html)|\n\
| build-artifacts : | [![build-artifacts](https://kaizhu256.github.io/node-my-app-lite/glyphicons_144_folder_open.png)](https://github.com/kaizhu256/node-my-app-lite/tree/gh-pages/build..master..travis-ci.org) | [![build-artifacts](https://kaizhu256.github.io/node-my-app-lite/glyphicons_144_folder_open.png)](https://github.com/kaizhu256/node-my-app-lite/tree/gh-pages/build..beta..travis-ci.org) | [![build-artifacts](https://kaizhu256.github.io/node-my-app-lite/glyphicons_144_folder_open.png)](https://github.com/kaizhu256/node-my-app-lite/tree/gh-pages/build..alpha..travis-ci.org)|\n\
\n\
[![npmPackageListing](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.npmPackageListing.svg)](https://github.com/kaizhu256/node-my-app-lite)\n\
\n\
![npmPackageDependencyTree](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.npmPackageDependencyTree.svg)\n\
\n\
\n\
\n\
# table of contents\n\
\n\
\n\
\n\
# cdn download\n\
- [https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/app/assets.my_app.js](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/app/assets.my_app.js)\n\
\n\
\n\
\n\
# documentation\n\
#### cli help\n\
![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.npmPackageCliHelp.svg)\n\
\n\
#### api doc\n\
- [https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/apidoc.html](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/apidoc.html)\n\
\n\
[![apidoc](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Fapidoc.html.png)](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/apidoc.html)\n\
\n\
#### swagger doc\n\
- [https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/app/assets.swgg.html](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/app/assets.swgg.html)\n\
\n\
[![swaggerdoc](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithub.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp%252Fassets.swgg.html.png)](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/app/assets.swgg.html)\n\
\n\
#### todo\n\
- none\n\
\n\
#### changelog 0.0.1\n\
- npm publish 0.0.1\n\
- update build\n\
- none\n\
\n\
#### this package requires\n\
- darwin or linux os\n\
\n\
\n\
\n\
# quickstart standalone app\n\
#### to run this example, follow the instruction in the script below\n\
- [assets.app.js](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/app/assets.app.js)\n\
```shell\n\
# example.sh\n\
\n\
# this shell script will download and run a web-demo of my-app-lite as a standalone app\n\
\n\
# 1. download standalone app\n\
curl -O https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/app/assets.app.js\n\
# 2. run standalone app\n\
PORT=8081 node ./assets.app.js\n\
# 3. open a browser to http://127.0.0.1:8081 and play with the web-demo\n\
# 4. edit file assets.app.js to suit your needs\n\
```\n\
\n\
#### output from browser\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleSh.browser.%252F.png)](https://kaizhu256.github.io/node-my-app-lite/build/app/assets.example.html)\n\
\n\
#### output from shell\n\
![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleSh.svg)\n\
\n\
\n\
\n\
# quickstart example.js\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleJs.browser.%252F.png)](https://kaizhu256.github.io/node-my-app-lite/build/app/assets.example.html)\n\
\n\
#### to run this example, follow the instruction in the script below\n\
- [example.js](https://kaizhu256.github.io/node-my-app-lite/build..beta..travis-ci.org/example.js)\n\
```javascript\n' + local.assetsDict["/assets.example.template.js"] + '```\n\
\n\
#### output from browser\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleJs.browser.%252F.png)](https://kaizhu256.github.io/node-my-app-lite/build/app/assets.example.html)\n\
\n\
#### output from shell\n\
![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleJs.svg)\n\
\n\
\n\
\n\
# extra screenshots\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Fapidoc.html.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Fapidoc.html.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Fapidoc.html.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Fapidoc.html.png)\n\
\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Fcoverage.lib.html.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Fcoverage.lib.html.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Fcoverage.lib.html.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Fcoverage.lib.html.png)\n\
\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Ftest-report.html.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Ftest-report.html.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Ftest-report.html.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.buildCi.browser.%252Ftmp%252Fbuild%252Ftest-report.html.png)\n\
\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithub.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp%252Fassets.swgg.html.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithub.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp%252Fassets.swgg.html.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithub.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp%252Fassets.swgg.html.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithub.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp%252Fassets.swgg.html.png)\n\
\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithub.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithub.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithub.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithub.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp.png)\n\
\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithubTest.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithubTest.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithubTest.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployGithubTest.browser.%252Fnode-my-app-lite%252Fbuild%252Fapp.png)\n\
\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHeroku.browser.%252Fassets.swgg.html.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHeroku.browser.%252Fassets.swgg.html.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHeroku.browser.%252Fassets.swgg.html.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHeroku.browser.%252Fassets.swgg.html.png)\n\
\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHeroku.browser.%252F.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHeroku.browser.%252F.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHeroku.browser.%252F.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHeroku.browser.%252F.png)\n\
\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHerokuTest.browser.%252F.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHerokuTest.browser.%252F.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHerokuTest.browser.%252F.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.deployHerokuTest.browser.%252F.png)\n\
\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.npmTest.browser.%252F.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.npmTest.browser.%252F.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.npmTest.browser.%252F.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.npmTest.browser.%252F.png)\n\
\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleJs.browser.%252F.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleJs.browser.%252F.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleJs.browser.%252F.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleJs.browser.%252F.png)\n\
\n\
1. [https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleSh.browser.%252F.png](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleSh.browser.%252F.png)\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleSh.browser.%252F.png)](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.testExampleSh.browser.%252F.png)\n\
\n\
\n\
\n\
# package.json\n\
```json\n\
{\n\
    "author": "kai zhu <kaizhu256@gmail.com>",\n\
    "description": "the greatest app in the world!",\n\
    "devDependencies": {\n\
        "electron-lite": "kaizhu256/node-electron-lite#alpha",\n\
        "utility2": "kaizhu256/node-utility2#alpha"\n\
    },\n\
    "engines": {\n\
        "node": ">=8.0"\n\
    },\n\
    "homepage": "https://github.com/kaizhu256/node-my-app-lite",\n\
    "keywords": [],\n\
    "license": "MIT",\n\
    "main": "lib.my_app.js",\n\
    "name": "my-app-lite",\n\
    "nameAliasPublish": "",\n\
    "os": [\n\
        "darwin",\n\
        "linux"\n\
    ],\n\
    "repository": {\n\
        "type": "git",\n\
        "url": "https://github.com/kaizhu256/node-my-app-lite.git"\n\
    },\n\
    "scripts": {\n\
        "build-ci": "./npm_scripts.sh",\n\
        "env": "env",\n\
        "eval": "./npm_scripts.sh",\n\
        "heroku-postbuild": "./npm_scripts.sh",\n\
        "postinstall": "./npm_scripts.sh",\n\
        "start": "./npm_scripts.sh",\n\
        "test": "./npm_scripts.sh",\n\
        "utility2": "./npm_scripts.sh"\n\
    },\n\
    "version": "0.0.1"\n\
}\n\
```\n\
\n\
\n\
\n\
# changelog of last 50 commits\n\
[![screenshot](https://kaizhu256.github.io/node-my-app-lite/build/screenshot.gitLog.svg)](https://github.com/kaizhu256/node-my-app-lite/commits)\n\
\n\
\n\
\n\
# internal build script\n\
- build_ci.sh\n\
```shell\n\
# build_ci.sh\n\
\n\
# this shell script will run the build for this package\n\
\n\
shBuildCiAfter () {(set -e\n\
    # shDeployCustom\n\
    shDeployGithub\n\
    # shDeployHeroku\n\
    shReadmeTest example.sh\n\
)}\n\
\n\
shBuildCiBefore () {(set -e\n\
    # shNpmTestPublished\n\
    shReadmeTest example.js\n\
)}\n\
\n\
# run shBuildCi\n\
eval "$(utility2 source)"\n\
shBuildCi\n\
```\n\
\n\
\n\
\n\
# misc\n\
- this package was created with [utility2](https://github.com/kaizhu256/node-utility2)\n\
';



local.assetsDict["/assets.test.template.js"] = '\
/* istanbul instrument in package my_app */\n\
/* istanbul ignore next */\n\
/* jslint utility2:true */\n\
' + local.assetsDict["/assets.example.begin.js"] + '\
\n\
\n\
\n\
(function (local) {\n\
"use strict";\n\
\n\
\n\
\n\
// run shared js\-env code - init-before\n\
(function () {\n\
// init local\n\
local = (globalThis.utility2 || require("utility2")).requireReadme();\n\
globalThis.local = local;\n\
// init test\n\
local.testRunDefault(local);\n\
}());\n\
\n\
\n\
\n\
// run shared js\-env code - function\n\
(function () {\n\
return;\n\
}());\n\
\n\
\n\
\n\
}());\n\
';



local.assetsDict["/assets.testReport.template.html"] =
    local.assetsDict["/assets.utility2.template.html"]
    .replace("assets.utility2.template.html", "")
    .replace((/<title>.*?<\/title>/), "<title>test-report</title>")
    .replace("</style>\n", '\
<style>\n\
/* jslint utility2:true */\n\
/*csslint\n\
*/\n\
.testReportDiv img {\n\
    border: 1px solid black;\n\
    margin: 5px 0 5px 0;\n\
    max-height: 256px;\n\
    max-width: 512px;\n\
}\n\
.testReportDiv pre {\n\
    background: #fdd;\n\
    border-top: 1px solid black;\n\
    margin-bottom: 0;\n\
    padding: 10px;\n\
}\n\
.testReportDiv span {\n\
    display: inline-block;\n\
    width: 120px;\n\
}\n\
.testReportDiv table {\n\
    border-top: 1px solid black;\n\
    text-align: left;\n\
    width: 100%;\n\
}\n\
.testReportDiv table > tbody > tr:nth-child(odd) {\n\
    background: #bfb;\n\
}\n\
.testReportDiv .displayNone {\n\
    display: none;\n\
}\n\
.testReportDiv .footer {\n\
    text-align: center;\n\
}\n\
.testReportDiv .platform {\n\
    background: #fff;\n\
    border: 1px solid black;\n\
    margin-bottom: 20px;\n\
    padding: 0 10px 10px 10px;\n\
    text-align: left;\n\
}\n\
.testReportDiv .summary {\n\
    background: #bfb;\n\
}\n\
.testReportDiv .testFailed {\n\
    background: #f99;\n\
}\n\
.testReportDiv .testPending {\n\
    background: #99f;\n\
}\n\
</style>\n\
'.replace("<style>\n", ""))
    .replace((/<\/script>[\S\s]*?<\/body>/), '\
</script>\n\
<div class="testReportDiv">\n\
<h1>test-report for\n\
    <a\n\
        {{#if env.npm_package_homepage}}\n\
        href="{{env.npm_package_homepage}}"\n\
        {{/if env.npm_package_homepage}}\n\
    >\n\
        {{env.npm_package_name}} ({{env.npm_package_version}})\n\
    </a>\n\
</h1>\n\
<div class="platform summary">\n\
<h2>summary</h2>\n\
<h4>\n\
    <span>version</span>-\n\
        {{env.npm_package_version}}<br>\n\
    <span>test date</span>- {{date}}<br>\n\
    <span>commit info</span>-\n\
        {{#if env.CI_COMMIT_INFO}}\n\
        {{env.CI_COMMIT_INFO}}<br>\n\
        {{#unless env.CI_COMMIT_INFO}}\n\
        undefined<br>\n\
        {{/if env.CI_COMMIT_INFO}}\n\
</h4>\n\
<table>\n\
<thead>\n\
    <tr>\n\
        <th>total time-elapsed</th>\n\
        <th>total tests failed</th>\n\
        <th>total tests passed</th>\n\
        <th>total tests pending</th>\n\
    </tr>\n\
</thead>\n\
<tbody><tr>\n\
    <td>{{timeElapsed}} ms</td>\n\
    <td class="{{testStatusClass}}">{{testsFailed}}</td>\n\
    <td>{{testsPassed}}</td>\n\
    <td>{{testsPending}}</td>\n\
</tr></tbody>\n\
</table>\n\
</div>\n\
{{#each testPlatformList}}\n\
<div class="platform">\n\
<h4>\n\
    {{testPlatformNumber}}. {{name}}<br>\n\
    {{#if screenshot}}\n\
    <a href="{{screenshot encodeURIComponent}}">\n\
        <img alt="{{screenshot encodeURIComponent}}" src="{{screenshot encodeURIComponent}}">\n\
    </a>\n\
    <br>\n\
    {{/if screenshot}}\n\
    {{#if domOnEventWindowOnloadTimeElapsed}}\n\
    <span>onload-time</span>- {{domOnEventWindowOnloadTimeElapsed}} ms<br>\n\
    {{/if domOnEventWindowOnloadTimeElapsed}}\n\
    <span>time-elapsed</span>- {{timeElapsed}} ms<br>\n\
    <span>tests failed</span>- {{testsFailed}}<br>\n\
    <span>tests passed</span>- {{testsPassed}}<br>\n\
    <span>tests pending</span>- {{testsPending}}<br>\n\
</h4>\n\
<table>\n\
<thead><tr>\n\
    <th>#</th>\n\
    <th>time-elapsed</th>\n\
    <th>status</th>\n\
    <th>test-case</th>\n\
</tr></thead>\n\
<tbody>\n\
{{#each testCaseList}}\n\
<tr>\n\
    <td>{{testCaseNumber}}</td>\n\
    <td>{{timeElapsed}} ms</td>\n\
    <td class="{{testReportTestStatusClass}}">{{status}}</td>\n\
    <td>{{name}}</td>\n\
</tr>\n\
{{/each testCaseList}}\n\
</tbody>\n\
</table>\n\
<pre class="{{preClass}}" tabIndex="0">\n\
{{#each errorStackList}}\n\
{{errorStack}}\n\
{{/each errorStackList}}\n\
</pre>\n\
</div>\n\
{{/each testPlatformList}}\n\
<div class="footer">\n\
    [ this document was created with\n\
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>\n\
    ]\n\
</div>\n\
</div>\n\
</body>');



// https://img.shields.io/badge/tests_failed-999-dd0000.svg?style=flat
local.assetsDict["/assets.testReportBadge.template.svg"] =
'<svg xmlns="http://www.w3.org/2000/svg" width="103" height="20"><linearGradient id="a" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><rect rx="0" width="103" height="20" fill="#555"/><rect rx="0" x="72" width="31" height="20" fill="#d00"/><path fill="#d00" d="M72 0h4v20h-4z"/><rect rx="0" width="103" height="20" fill="url(#a)"/><g fill="#fff" text-anchor="middle" font-family="DejaVu Sans,Verdana,Geneva,sans-serif" font-size="11"><text x="37" y="15" fill="#010101" fill-opacity=".3">tests failed</text><text x="37" y="14">tests failed</text><text x="86.5" y="15" fill="#010101" fill-opacity=".3">999</text><text x="86.5" y="14">999</text></g></svg>';



local.assetsDict["/assets.utility2.rollup.begin.js"] = '\
/* utility2.rollup.js begin */\n\
/* istanbul ignore all */\n\
/* jslint utility2:true */\n\
' + local.assetsDict["/assets.example.begin.js"] + '\
\n\
\n\
\n\
(function () {\n\
    "use strict";\n\
    // init utility2_rollup\n\
    globalThis.utility2_rollup = (\n\
        globalThis.utility2_rollup_old\n\
        || globalThis.globalLocal\n\
    );\n\
    globalThis.utility2_rollup.local = globalThis.utility2_rollup;\n\
    globalThis.utility2_rollup_old = null;\n\
}());\n\
';



local.assetsDict["/assets.utility2.rollup.content.js"] = '\
(function (local) {\n\
    "use strict";\n\
/* jslint ignore:start */\n\
/* utility2.rollup.js content */\n\
/* jslint ignore:end */\n\
    return local;\n\
}(globalThis.utility2_rollup));\n\
';



local.assetsDict["/assets.utility2.rollup.end.js"] = '\
(function () {\n\
    "use strict";\n\
    globalThis.utility2_rollup_old = globalThis.utility2_rollup;\n\
    globalThis.utility2_rollup = null;\n\
}());\n\
/* utility2.rollup.js end */\n\
';



local.assetsDict["/favicon.ico"] = "";
/* jslint ignore:end */



local.cliDict = {};

local.cliDict["utility2.browserTest"] = function () {
/*
 * <urlList> <mode>
 * will browser-test in parallel, comma-separated <urlList> with given <mode>
 */
    process.argv[3].split(
        process.argv[3].indexOf("?") >= 0
        ? (
            /\s/g
        )
        : (
            /[,\s]/g
        )
    ).filter(local.identity).forEach(function (url) {
        local.browserTest({
            url: url
        }, local.onErrorDefault);
    });
};

local.cliDict["utility2.customOrgRepoCreate"] = function () {
/*
 * <repoList>
 * will create in parallel, comma-separated <repoList> of github-repos
 */
    process.env.TRAVIS_DOMAIN = process.env.TRAVIS_DOMAIN || "travis-ci.org";
    process.chdir("/tmp");
    local.child_process.spawnSync([
        "if [ ! -d /tmp/githubRepo/kaizhu256/base ]; then (",
        "git clone https://github.com/kaizhu256/base "
        + "/tmp/githubRepo/kaizhu256/base",
        "cd /tmp/githubRepo/kaizhu256/base",
        "git checkout -b alpha origin/alpha",
        "git checkout -b beta origin/beta",
        "git checkout -b gh-pages origin/gh-pages",
        "git checkout -b master origin/master",
        "git checkout -b publish origin/publish",
        "git checkout alpha",
        ") fi"
    ].join("\n"), {
        shell: true,
        stdio: ["ignore", 1, 2]
    });
    local.onParallelList({
        list: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (option2, onParallel) {
        var option;
        onParallel.counter += 1;
        option = {};
        local.onNext(option, function (error, data) {
            switch (option.modeNext) {
            case 1:
                option2.onParallel2 = local.onParallel(option.onNext);
                option2.shBuildPrintPrefix = (
                    "\n\u001b[35m[MODE_BUILD=shCustomOrgRepoCreate]\u001b[0m - "
                );
                console.error(
                    option2.shBuildPrintPrefix + new Date().toISOString()
                    + option2.element + " - creating ..."
                );
                local.childProcessSpawnWithUtility2(
                    "shGithubRepoBaseCreate " + option2.element,
                    option.onNext
                );
                break;
            case 2:
                local.ajax({
                    headers: {
                        Authorization: "token "
                        + process.env.TRAVIS_ACCESS_TOKEN
                    },
                    url: "https://api." + process.env.TRAVIS_DOMAIN + "/repos/"
                    + option2.element
                }, option.onNext);
                break;
            case 3:
                option2.id = JSON.parse(data.responseText).id;
                setTimeout(option.onNext, 5000);
                break;
            case 4:
                local.ajax({
                    data: "{\"hook\":{\"active\":true}}",
                    headers: {
                        Authorization: "token "
                        + process.env.TRAVIS_ACCESS_TOKEN,
                        "Content-Type": "application/json; charset=utf-8"
                    },
                    method: "PUT",
                    url: (
                        "https://api." + process.env.TRAVIS_DOMAIN + "/hooks/"
                        + option2.id
                    )
                }, option.onNext);
                break;
            case 5:
                setTimeout(option.onNext, 5000);
                break;
            case 6:
                option2.onParallel2.counter += 1;
                option2.onParallel2.counter += 1;
                local.ajax({
                    data: "{\"setting.value\":true}",
                    headers: {
                        Authorization: "token "
                        + process.env.TRAVIS_ACCESS_TOKEN,
                        "Content-Type": "application/json; charset=utf-8",
                        "Travis-API-Version": 3
                    },
                    method: "PATCH",
                    url: (
                        "https://api." + process.env.TRAVIS_DOMAIN + "/repo/"
                        + option2.id + "/setting/builds_only_with_travis_yml"
                    )
                }, option2.onParallel2);
                option2.onParallel2.counter += 1;
                local.ajax({
                    data: "{\"setting.value\":true}",
                    headers: {
                        Authorization: "token "
                        + process.env.TRAVIS_ACCESS_TOKEN,
                        "Content-Type": "application/json; charset=utf-8",
                        "Travis-API-Version": 3
                    },
                    method: "PATCH",
                    url: (
                        "https://api." + process.env.TRAVIS_DOMAIN + "/repo/"
                        + option2.id + "/setting/auto_cancel_pushes"
                    )
                }, option2.onParallel2);
                option2.onParallel2();
                break;
            case 7:
                option2.onParallel2.counter += 1;
                option2.onParallel2.counter += 1;
                local.ajax({
                    url: (
                        "https://raw.githubusercontent.com"
                        + "/kaizhu256/node-utility2/alpha/.gitignore"
                    )
                }, function (error, xhr) {
                    local.assertThrow(!error, error);
                    local.fs.writeFile(
                        "/tmp/githubRepo/" + option2.element + "/.gitignore",
                        xhr.responseText,
                        option2.onParallel2
                    );
                });
                option2.onParallel2.counter += 1;
                local.ajax({
                    url: (
                        "https://raw.githubusercontent.com"
                        + "/kaizhu256/node-utility2/alpha/.travis.yml"
                    )
                }, function (error, xhr) {
                    local.assertThrow(!error, error);
                    local.fs.writeFile(
                        "/tmp/githubRepo/" + option2.element + "/.travis.yml",
                        xhr.responseText,
                        option2.onParallel2
                    );
                });
                option2.onParallel2.counter += 1;
                local.fs.open("README.md", "w", function (error, fd) {
                    local.assertThrow(!error, error);
                    local.fs.close(fd, option2.onParallel2);
                });
                option2.onParallel2.counter += 1;
                local.fs.writeFile(
                    "/tmp/githubRepo/" + option2.element + "/package.json",
                    JSON.stringify({
                        devDependencies: {
                            "electron-lite":
                            "kaizhu256/node-electron-lite#alpha",
                            utility2: "kaizhu256/node-utility2#alpha"
                        },
                        name: option2.element.replace((
                            /.+?\/node-|.+?\//
                        ), ""),
                        homepage: "https://github.com/" + option2.element,
                        repository: {
                            type: "git",
                            url: "https://github.com/" + option2.element
                            + ".git"
                        },
                        scripts: {
                            "build-ci": "utility2 shBuildCi"
                        },
                        version: "0.0.1"
                    }, null, 4),
                    option2.onParallel2
                );
                option2.onParallel2();
                break;
            case 8:
                local.childProcessSpawnWithUtility2([
                    "cd /tmp/githubRepo/" + option2.element,
                    "unset GITHUB_ORG",
                    "unset GITHUB_REPO",
                    "shBuildInit",
                    "shCryptoTravisEncrypt > /dev/null",
                    "git add -f . .gitignore .travis.yml",
                    "git commit -am \"[npm publishAfterCommitAfterBuild]\"", (
                        "shGitCommandWithGithubToken push https://github.com/"
                        + option2.element + " -f" + " alpha"
                    )
                ].join(" &&\n"), option.onNext);
                break;
            default:
                console.error(
                    option2.shBuildPrintPrefix + new Date().toISOString()
                    + option2.element + (
                        error
                        ? " - ... failed to create - modeNext = "
                        + option.modeNext
                        : " - ... created"
                    )
                );
                onParallel(
                    local.onErrorDefault(option.modeNext !== 1002 && error)
                );
            }
        });
        option.modeNext = 0;
        option.onNext();
    }, local.onErrorThrow);
};

local.cliDict["utility2.githubCrudContentDelete"] = function () {
/*
 * <fileRemote|dirRemote> <commitMessage>
 * will delete from github <fileRemote|dirRemote>
 */
    local.github_crud.githubCrudContentDelete({
        message: process.argv[4],
        url: process.argv[3]
    }, function (error) {
        process.exit(Boolean(error));
    });
};

local.cliDict["utility2.githubCrudContentGet"] = function () {
/*
 * <fileRemote>
 * will get from github <fileRemote>
 */
    local.github_crud.githubCrudContentGet({
        url: process.argv[3]
    }, function (error, data) {
        try {
            process.stdout.write(data);
        } catch (ignore) {}
        process.exit(Boolean(error));
    });
};

local.cliDict["utility2.githubCrudContentPut"] = function () {
/*
 * <fileRemote> <fileLocal> <commitMessage>
 * will put on github <fileRemote>, <fileLocal>
 */
    local.github_crud.githubCrudContentPutFile({
        message: process.argv[5],
        url: process.argv[3],
        file: process.argv[4]
    }, function (error) {
        process.exit(Boolean(error));
    });
};

local.cliDict["utility2.githubCrudContentTouch"] = function () {
/*
 * <fileRemoteList> <commitMessage>
 * will touch on github in parallel, comma-separated <fileRemoteList>
 */
    local.github_crud.githubCrudContentTouchList({
        message: process.argv[4],
        urlList: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (error) {
        process.exit(Boolean(error));
    });
};

local.cliDict["utility2.githubCrudRepoCreate"] = function () {
/*
 * <repoList>
 * will create on github in parallel, comma-separated <repoList>
 */
    local.github_crud.githubCrudRepoCreateList({
        urlList: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (error) {
        process.exit(Boolean(error));
    });
};

local.cliDict["utility2.githubCrudRepoDelete"] = function () {
/*
 * <repoList>
 * will delete from github in parallel, comma-separated <repoList>
 */
    local.github_crud.githubCrudRepoDeleteList({
        urlList: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (error) {
        process.exit(Boolean(error));
    });
};

local.cliDict["utility2.start"] = function () {
/*
 * <port>
 * will start utility2 http-server on given <port> (default 8081)
 */
    local.env.PORT = process.argv[3] || local.env.PORT;
    globalThis.local = local;
    local.replStart();
    local.testRunServer({});
};

local.cliDict["utility2.swaggerValidateFile"] = function () {
/*
 * <file/url>
 * will swagger-validate file/url
 */
    setTimeout(function () {
        local.swgg.swaggerValidateFile({
            file: process.argv[3]
        }, function (error, data) {
            console.error(data);
            process.exit(error);
        });
    });
};

local.cliDict["utility2.testReportCreate"] = function () {
/*
 *
 * will create test-report
 */
    local.exit(
        local.testReportCreate(
            JSON.parse(local.fs.readFileSync(
                local.env.npm_config_dir_build + "/test-report.json"
            ))
        ).testsFailed
    );
};
}());



// run shared js-env code - function
(function () {
// init lib Blob
local.Blob = (
    local.isBrowser
    ? globalThis.Blob
    : function (array, option) {
        /*
         * this function will create a node-compatible Blob instance
         * https://developer.mozilla.org/en-US/docs/Web/API/Blob/Blob
         */
        this.bff = local.bufferConcat(array.map(function (element) {
            return (
                // ternary-condition
                (
                    typeof element === "string"
                    || Object.prototype.toString.call(element)
                    === "[object Uint8Array]"
                )
                ? element
                : String(element)
            );
        }));
        this.type = option && option.type;
    }
);

// init lib FormData
local.FormData = function () {
/*
 * this function will create a serverLocal-compatible FormData instance
 * The FormData(form) constructor must run these steps:
 * 1. Let fd be a new FormData object.
 * 2. If form is given, set fd's entries to the result
 *    of constructing the form data set for form. (not implemented)
 * 3. Return fd.
 * https://xhr.spec.whatwg.org/#dom-formdata
 */
    this.entryList = [];
};

local.FormData.prototype.append = function (name, value, filename) {
/*
 * The append(name, value, filename) method, when invoked, must run these steps:
 * 1. If the filename argument is given, set value to a new File object
 *    whose contents are value and name is filename.
 * 2. Append a new entry whose name is name, and value is value,
 *    to context object's list of entries.
 * https://xhr.spec.whatwg.org/#dom-formdata-append
 */
    if (filename) {
        // bug-workaround - chromium cannot assign name to Blob instance
        local.tryCatchOnError(function () {
            value.name = filename;
        }, local.nop);
    }
    this.entryList.push({
        name: name,
        value: value
    });
};

local.FormData.prototype.read = function (onError) {
/*
 * this function will read from formData as a buffer, e.g.
 * --Boundary\r\n
 * Content-Disposition: form-data; name="key"\r\n
 * \r\n
 * value\r\n
 * --Boundary\r\n
 * Content-Disposition: form-data; name="input1"; filename="file1.png"\r\n
 * Content-Type: image/jpeg\r\n
 * \r\n
 * <data1>\r\n
 * --Boundary\r\n
 * Content-Disposition: form-data; name="input2"; filename="file2.png"\r\n
 * Content-Type: image/jpeg\r\n
 * \r\n
 * <data2>\r\n
 * --Boundary--\r\n
 * https://tools.ietf.org/html/rfc7578
 */
    var boundary;
    var result;
    // handle null-case
    if (!this.entryList.length) {
        onError(null, "");
        return;
    }
    // init boundary
    boundary = "--" + Date.now().toString(16) + Math.random().toString(16);
    // init result
    result = [];
    local.onParallelList({
        list: this.entryList
    }, function (option2, onParallel) {
        var value;
        value = option2.element.value;
        if (!(value && value.constructor === local.Blob)) {
            result[option2.ii] = [(
                boundary + "\r\nContent-Disposition: form-data; name=\""
                + option2.element.name + "\"\r\n\r\n"
            ), value, "\r\n"];
            onParallel.counter += 1;
            onParallel();
            return;
        }
        // read from blob in parallel
        onParallel.counter += 1;
        local.blobRead(value, function (error, data) {
            result[option2.ii] = !error && [(
                boundary + "\r\nContent-Disposition: form-data; name=\""
                + option2.element.name + "\"" + (
                    (value && value.name)
                    // read param filename
                    ? "; filename=\"" + value.name + "\""
                    : ""
                ) + "\r\n" + (
                    (value && value.type)
                    // read param Content-Type
                    ? "Content-Type: " + value.type + "\r\n"
                    : ""
                ) + "\r\n"
            ), data, "\r\n"];
            onParallel(error);
        });
    }, function (error) {
        // add closing boundary
        result.push([boundary + "--\r\n"]);
        // concatenate result
        onError(
            error,
            // flatten result
            !error
            && local.bufferConcat(Array.prototype.concat.apply([], result))
        );
    });
};

// init lib _http
local._http = {};

// init _http.IncomingMessage
local._http.IncomingMessage = function (xhr) {
/*
 * An IncomingMessage object is created by http.Server or http.ClientRequest
 * and passed as the first argument to the 'request' and 'response' event
 * respectively.
 * It may be used to access response status, headers and data.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_http_incomingmessage
 */
    this.headers = xhr.headers;
    this.httpVersion = "1.1";
    this.method = xhr.method;
    this.onEvent = document.createDocumentFragment();
    this.readable = true;
    this.url = xhr.url;
};

local._http.IncomingMessage.prototype.addListener = function (event, onEvent) {
/*
 * Adds a listener to the end of the listeners array for the specified event.
 * No checks are made to see if the listener has already been added.
 * Multiple calls passing the same combination of event and listener will result
 * in the listener being added multiple times.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_emitter_addlistener_event_listener
 */
    this.onEvent.addEventListener(event, function (event) {
        onEvent(event.data);
    });
    if (this.readable && event === "end") {
        this.readable = null;
        this.emit("data", this.data);
        this.emit("end");
    }
    return this;
};

local._http.IncomingMessage.prototype.emit = function (event, data) {
/*
 * Execute each of the listeners in order with the supplied arguments.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_emitter_emit_event_arg1_arg2
 */
    event = new globalThis.Event(event);
    event.data = data;
    this.onEvent.dispatchEvent(event);
};

/*
 * Adds a listener to the end of the listeners array for the specified event.
 * No checks are made to see if the listener has already been added.
 * Multiple calls passing the same combination of event and listener will result
 * in the listener being added multiple times.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_emitter_on_event_listener
 */
local._http.IncomingMessage.prototype.on = (
    local._http.IncomingMessage.prototype.addListener
);

local._http.IncomingMessage.prototype.pipe = function (writable) {
/*
 * This method pulls all the data out of a readable stream, and writes it
 * to the supplied destination, automatically managing the flow
 * so that the destination is not overwhelmed by a fast readable stream.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_readable_pipe_destination_options
 */
    this.on("data", function (chunk) {
        writable.write(chunk);
    });
    this.on("end", function () {
        writable.end();
    });
    return writable;
};

local._http.STATUS_CODES = {
    "100": "Continue",
    "101": "Switching Protocols",
    "102": "Processing",
    "200": "OK",
    "201": "Created",
    "202": "Accepted",
    "203": "Non-Authoritative Information",
    "204": "No Content",
    "205": "Reset Content",
    "206": "Partial Content",
    "207": "Multi-Status",
    "208": "Already Reported",
    "226": "IM Used",
    "300": "Multiple Choices",
    "301": "Moved Permanently",
    "302": "Found",
    "303": "See Other",
    "304": "Not Modified",
    "305": "Use Proxy",
    "307": "Temporary Redirect",
    "308": "Permanent Redirect",
    "400": "Bad Request",
    "401": "Unauthorized",
    "402": "Payment Required",
    "403": "Forbidden",
    "404": "Not Found",
    "405": "Method Not Allowed",
    "406": "Not Acceptable",
    "407": "Proxy Authentication Required",
    "408": "Request Timeout",
    "409": "Conflict",
    "410": "Gone",
    "411": "Length Required",
    "412": "Precondition Failed",
    "413": "Payload Too Large",
    "414": "URI Too Long",
    "415": "Unsupported Media Type",
    "416": "Range Not Satisfiable",
    "417": "Expectation Failed",
    "418": "I'm a teapot",
    "421": "Misdirected Request",
    "422": "Unprocessable Entity",
    "423": "Locked",
    "424": "Failed Dependency",
    "425": "Unordered Collection",
    "426": "Upgrade Required",
    "428": "Precondition Required",
    "429": "Too Many Requests",
    "431": "Request Header Fields Too Large",
    "451": "Unavailable For Legal Reasons",
    "500": "Internal Server Error",
    "501": "Not Implemented",
    "502": "Bad Gateway",
    "503": "Service Unavailable",
    "504": "Gateway Timeout",
    "505": "HTTP Version Not Supported",
    "506": "Variant Also Negotiates",
    "507": "Insufficient Storage",
    "508": "Loop Detected",
    "509": "Bandwidth Limit Exceeded",
    "510": "Not Extended",
    "511": "Network Authentication Required"
};

// init _http.ServerResponse
local._http.ServerResponse = function (onResponse) {
/*
 * This object is created internally by a HTTP server--not by the user.
 * It is passed as the second parameter to the 'request' event.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_class_http_serverresponse
 */
    this.chunkList = [];
    this.responseHeaders = {};
    this.onEvent = document.createDocumentFragment();
    this.onResponse = onResponse;
    this.statusCode = 200;
};

/*
 * Adds a listener to the end of the listeners array for the specified event.
 * No checks are made to see if the listener has already been added.
 * Multiple calls passing the same combination of event and listener will result
 * in the listener being added multiple times.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_emitter_addlistener_event_listener
 */
local._http.ServerResponse.prototype.addListener = (
    local._http.IncomingMessage.prototype.addListener
);
/*
 * Execute each of the listeners in order with the supplied arguments.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_emitter_emit_event_arg1_arg2
 */
local._http.ServerResponse.prototype.emit = (
    local._http.IncomingMessage.prototype.emit
);

local._http.ServerResponse.prototype.end = function (data) {
/*
 * This method signals to the server that all of the response headers and body
 * have been sent; that server should consider this message complete.
 * The method, response.end(), MUST be called on each response.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_response_end_data_encoding_callback
 */
    var that;
    that = this;
    if (that._isDone) {
        return;
    }
    that._isDone = true;
    that.chunkList.push(data);
    // notify server response is finished
    that.emit("finish");
    // asynchronously send response from server -> client
    setTimeout(function () {
        that.onResponse(that);
        that.emit("data", local.bufferConcat(that.chunkList));
        that.emit("end");
    });
};

/*
 * Adds a listener to the end of the listeners array for the specified event.
 * No checks are made to see if the listener has already been added.
 * Multiple calls passing the same combination of event and listener
 * will result in the listener being added multiple times.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_emitter_on_event_listener
 */
local._http.ServerResponse.prototype.on = (
    local._http.IncomingMessage.prototype.addListener
);

local._http.ServerResponse.prototype.setHeader = function (key, value) {
/*
 * Sets a single header value for implicit headers.
 * If this header already exists in the to-be-sent headers,
 * its value will be replaced.
 * Use an array of strings here if you need to send multiple headers
 * with the same name.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_response_setheader_name_value
 */
    this.responseHeaders[key.toLowerCase()] = value;
};

local._http.ServerResponse.prototype.write = function (data) {
/*
 * This sends a chunk of the response body.
 * This method may be called multiple times
 * to provide successive parts of the body.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_response_write_chunk_encoding_callback
 */
    this.chunkList.push(data);
};

local._http.createServer = function () {
/*
 * Returns a new instance of http.Server.
 * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_http_createserver_requestlistener
 */
    return {
        listen: function (port, onError) {
        /*
         * This will cause the server to accept connections
         * on the specified handle,
         * but it is presumed that the file descriptor or handle
         * has already been bound to a port or domain socket.
         * https://nodejs.org/dist/v0.12.18/docs/api/all.html#all_server_listen_handle_callback
         */
            onError(null, port);
        }
    };
};

local._http.request = function (xhr, onResponse) {
    var isDone;
    xhr = {
        headers: xhr.headers,
        method: xhr.method,
        timeout: xhr.timeout,
        url: xhr.href
    };
    xhr.end = function (data) {
        if (isDone) {
            return;
        }
        isDone = true;
        xhr.serverRequest.data = data;
        // asynchronously send request from client -> server
        setTimeout(function () {
            local.serverLocalRequestHandler(
                xhr.serverRequest,
                xhr.serverResponse
            );
        });
    };
    xhr.on = function () {
        return xhr;
    };
    xhr.serverRequest = new local._http.IncomingMessage(xhr);
    xhr.serverResponse = new local._http.ServerResponse(onResponse);
    return xhr;
};

local._testCase_buildApidoc_default = function (option, onError) {
/*
 * this function will test buildApidoc's default handling-behavior
 */
    if (local.isBrowser) {
        onError(null, option);
        return;
    }
    return local.buildApidoc(option, onError);
};

local._testCase_buildApp_default = function (option, onError) {
/*
 * this function will test buildApp's default handling-behavior
 */
    if (local.isBrowser) {
        onError(null, option);
        return;
    }
    globalThis.local.testCase_buildReadme_default(option, local.onErrorThrow);
    globalThis.local.testCase_buildLib_default(option, local.onErrorThrow);
    globalThis.local.testCase_buildTest_default(option, local.onErrorThrow);
    local.buildApp(option, onError);
};

local._testCase_buildLib_default = function (option, onError) {
/*
 * this function will test buildLib's default handling-behavior
 */
    if (local.isBrowser) {
        onError(null, option);
        return;
    }
    return local.buildLib({}, onError);
};

local._testCase_buildReadme_default = function (option, onError) {
/*
 * this function will test buildReadme's default handling-behavior
 */
    if (local.isBrowser) {
        onError(null, option);
        return;
    }
    return local.buildReadme({}, onError);
};

local._testCase_buildTest_default = function (option, onError) {
/*
 * this function will test buildTest's default handling-behavior
 */
    if (local.isBrowser) {
        onError(null, option);
        return;
    }
    return local.buildTest({}, onError);
};

local._testCase_webpage_default = function (option, onError) {
/*
 * this function will test webpage's default handling-behavior
 */
    local.domStyleValidate();
    if (local.isBrowser) {
        onError(null, option);
        return;
    }
    local.browserTest({
        fileScreenshot: (
            local.env.npm_config_dir_build
            + "/screenshot." + local.env.MODE_BUILD + ".browser.%2F.png"
        ),
        modeCoverageMerge: true,
        url: (
            local.assetsDict["/"].indexOf(
                "<script src=\"assets.test.js\"></script>"
            ) >= 0
            ? local.serverLocalHost + "?modeTest=1&timeoutDefault="
            + local.timeoutDefault
            : local.serverLocalHost
            + "/assets.utility2.base.html?modeTest=1&timeoutDefault=1"
        ) + "&modeTestCase=" + local.modeTestCase.replace((
            /_?testCase_webpage_default/
        ), "")
    }, onError);
};

local.ajax = function (option, onError) {
/*
 * this function will send an ajax-request with given <option>.url,
 * with error-handling and timeout
 * example usage:
    local.ajax({
        data: "hello world",
        header: {"x-header-hello": "world"},
        method: "POST",
        url: "/index.html"
    }, function (error, xhr) {
        console.log(xhr.statusCode);
        console.log(xhr.responseText);
    });
 */
    var ajaxProgressUpdate;
    var bufferValidateAndCoerce;
    var isDone;
    var local2;
    var onEvent;
    var streamCleanup;
    var timeout;
    var tmp;
    var xhr;
    var xhrInit;
    // init local2
    local2 = local.utility2 || {};
    // init function
    ajaxProgressUpdate = local2.ajaxProgressUpdate || local.nop;
    bufferValidateAndCoerce = local2.bufferValidateAndCoerce || function (
        bff,
        mode
    ) {
    /*
     * this function will validate and coerce/convert <bff> -> Buffer
     * (or String if <mode> = "string")
     */
        // coerce ArrayBuffer -> Buffer
        if (Object.prototype.toString.call(bff) === "[object ArrayBuffer]") {
            bff = new Uint8Array(bff);
        }
        // convert Buffer -> utf8
        if (mode === "string" && typeof bff !== "string") {
            bff = String(bff);
        }
        return bff;
    };
    onEvent = function (event) {
    /*
     * this function will handle events
     */
        if (Object.prototype.toString.call(event) === "[object Error]") {
            xhr.error = xhr.error || event;
            xhr.onEvent({
                type: "error"
            });
            return;
        }
        // init statusCode
        xhr.statusCode = (xhr.statusCode || xhr.status) | 0;
        switch (event.type) {
        case "abort":
        case "error":
        case "load":
            if (isDone) {
                return;
            }
            isDone = true;
            // decrement ajaxProgressCounter
            local2.ajaxProgressCounter = Math.max(
                local2.ajaxProgressCounter - 1,
                0
            );
            ajaxProgressUpdate();
            // handle abort or error event
            switch (!xhr.error && event.type) {
            case "abort":
            case "error":
                xhr.error = new Error("ajax - event " + event.type);
                break;
            case "load":
                if (xhr.statusCode >= 400) {
                    xhr.error = new Error(
                        "ajax - statusCode " + xhr.statusCode
                    );
                }
                break;
            }
            // debug statusCode / method / url
            if (xhr.error) {
                xhr.statusCode = xhr.statusCode || 500;
                xhr.error.statusCode = xhr.statusCode;
                tmp = (
                    // ternary-condition
                    (
                        local.isBrowser
                        ? "browser"
                        : "node"
                    )
                    + " - " + xhr.statusCode + " " + xhr.method + " " + xhr.url
                    + "\n"
                );
                xhr.error.message = tmp + xhr.error.message;
                xhr.error.stack = tmp + xhr.error.stack;
            }
            // update responseHeaders
            // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders
            if (xhr.getAllResponseHeaders) {
                xhr.getAllResponseHeaders().replace((
                    /(.*?):\u0020*(.*?)\r\n/g
                ), function (ignore, match1, match2) {
                    xhr.responseHeaders[match1.toLowerCase()] = match2;
                });
            }
            // debug ajaxResponse
            xhr.responseContentLength = (
                xhr.response
                && (xhr.response.byteLength || xhr.response.length)
            ) | 0;
            xhr.timeElapsed = Date.now() - xhr.timeStart;
            if (xhr.modeDebug) {
                console.error("serverLog - " + JSON.stringify({
                    time: new Date(xhr.timeStart).toISOString(),
                    type: "ajaxResponse",
                    method: xhr.method,
                    url: xhr.url,
                    statusCode: xhr.statusCode,
                    timeElapsed: xhr.timeElapsed,
                    // extra
                    responseContentLength: xhr.responseContentLength
                }));
            }
            // init responseType
            // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType
            switch (xhr.response && xhr.responseType) {
            // init responseText
            // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseText
            case "":
            case "text":
                if (typeof xhr.responseText === "string") {
                    break;
                }
                xhr.responseText = bufferValidateAndCoerce(
                    xhr.response,
                    "string"
                );
                break;
            case "arraybuffer":
                xhr.responseBuffer = bufferValidateAndCoerce(xhr.response);
                break;
            }
            // cleanup timerTimeout
            clearTimeout(xhr.timerTimeout);
            // cleanup requestStream and responseStream
            streamCleanup(xhr.requestStream);
            streamCleanup(xhr.responseStream);
            onError(xhr.error, xhr);
            break;
        }
    };
    streamCleanup = function (stream) {
    /*
     * this function will try to end or destroy the stream
     */
        var error;
        // try to end the stream
        try {
            stream.end();
        } catch (errorCaught) {
            error = errorCaught;
        }
        // if error, then try to destroy the stream
        if (error) {
            try {
                stream.destroy();
            } catch (ignore) {}
        }
    };
    xhrInit = function () {
    /*
     * this function will init xhr
     */
        // init option
        Object.keys(option).forEach(function (key) {
            if (key[0] !== "_") {
                xhr[key] = option[key];
            }
        });
        // init timeout
        timeout = xhr.timeout || local2.timeoutDefault || 30000;
        // init defaults
        local.objectAssignDefault(xhr, {
            corsForwardProxyHost: local2.corsForwardProxyHost,
            headers: {},
            location: (local.isBrowser && location) || {},
            method: "GET",
            responseType: ""
        });
        // init headers
        Object.keys(xhr.headers).forEach(function (key) {
            xhr.headers[key.toLowerCase()] = xhr.headers[key];
        });
        // coerce Uint8Array -> Buffer
        if (
            !local.isBrowser
            && !Buffer.isBuffer(xhr.data)
            && Object.prototype.toString.call(xhr.data)
            === "[object Uint8Array]"
        ) {
            Object.setPrototypeOf(xhr.data, Buffer.prototype);
        }
        // init misc
        local2._debugXhr = xhr;
        xhr.onEvent = onEvent;
        xhr.responseHeaders = {};
        xhr.timeStart = xhr.timeStart || Date.now();
    };
    // init onError
    if (local2.onErrorWithStack) {
        onError = local2.onErrorWithStack(onError);
    }
    // init xhr - XMLHttpRequest
    xhr = (
        local.isBrowser
        && !option.httpRequest
        && !(local2.serverLocalUrlTest && local2.serverLocalUrlTest(option.url))
        && new XMLHttpRequest()
    );
    // init xhr - http.request
    if (!xhr) {
        xhr = local.identity(local2.urlParse || require("url").parse)(
            option.url
        );
        // init xhr
        xhrInit();
        // init xhr - http.request
        xhr = local.identity(
            option.httpRequest
            || (local.isBrowser && local2.http.request)
            || require(xhr.protocol.slice(0, -1)).request
        )(xhr, function (responseStream) {
        /*
         * this function will read the responseStream
         */
            var chunkList;
            chunkList = [];
            xhr.responseHeaders = (
                responseStream.responseHeaders
                || responseStream.headers
            );
            xhr.responseStream = responseStream;
            xhr.statusCode = responseStream.statusCode;
            responseStream.dataLength = 0;
            responseStream.on("data", function (chunk) {
                chunkList.push(chunk);
            });
            responseStream.on("end", function () {
                xhr.response = (
                    local.isBrowser
                    ? chunkList[0]
                    : Buffer.concat(chunkList)
                );
                responseStream.dataLength = (
                    xhr.response.byteLength
                    || xhr.response.length
                );
                xhr.onEvent({
                    type: "load"
                });
            });
            responseStream.on("error", xhr.onEvent);
        });
        xhr.abort = function () {
        /*
         * this function will abort the xhr-request
         * https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/abort
         */
            xhr.onEvent({
                type: "abort"
            });
        };
        xhr.addEventListener = local.nop;
        xhr.open = local.nop;
        xhr.requestStream = xhr;
        xhr.send = xhr.end;
        xhr.setRequestHeader = local.nop;
        xhr.on("error", onEvent);
    }
    // init xhr
    xhrInit();
    // init timerTimeout
    xhr.timerTimeout = setTimeout(function () {
        xhr.error = xhr.error || new Error(
            "onTimeout - timeout-error - "
            + timeout + " ms - " + "ajax " + xhr.method + " " + xhr.url
        );
        xhr.abort();
        // cleanup requestStream and responseStream
        streamCleanup(xhr.requestStream);
        streamCleanup(xhr.responseStream);
    }, timeout);
    // increment ajaxProgressCounter
    local2.ajaxProgressCounter = local2.ajaxProgressCounter || 0;
    local2.ajaxProgressCounter += 1;
    // init event-handling
    xhr.addEventListener("abort", xhr.onEvent);
    xhr.addEventListener("error", xhr.onEvent);
    xhr.addEventListener("load", xhr.onEvent);
    xhr.addEventListener("loadstart", ajaxProgressUpdate);
    xhr.addEventListener("progress", ajaxProgressUpdate);
    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/upload
    if (xhr.upload && xhr.upload.addEventListener) {
        xhr.upload.addEventListener("progress", ajaxProgressUpdate);
    }
    // open url - corsForwardProxyHost
    if (local.functionOrNop(local2.corsForwardProxyHostIfNeeded)(xhr)) {
        xhr.open(xhr.method, local2.corsForwardProxyHostIfNeeded(xhr));
        xhr.setRequestHeader(
            "forward-proxy-headers",
            JSON.stringify(xhr.headers)
        );
        xhr.setRequestHeader("forward-proxy-url", xhr.url);
    // open url - default
    } else {
        xhr.open(xhr.method, xhr.url);
    }
    // send headers
    Object.keys(xhr.headers).forEach(function (key) {
        xhr.setRequestHeader(key, xhr.headers[key]);
    });
    // send data
    switch ((xhr.data && xhr.data.constructor) || true) {
    // Blob
    // https://developer.mozilla.org/en-US/docs/Web/API/Blob
    case local2.Blob:
    // FormData
    // https://developer.mozilla.org/en-US/docs/Web/API/FormData
    case local2.FormData:
        local2.blobRead(xhr.data, function (error, data) {
            if (error) {
                xhr.onEvent(error);
                return;
            }
            // send data
            xhr.send(data);
        });
        break;
    default:
        xhr.send(xhr.data);
    }
    return xhr;
};

local.ajaxProgressUpdate = function () {
/*
 * this function will update ajaxProgress
 */
    var ajaxProgressDiv1;
    ajaxProgressDiv1 = (
        (local.isBrowser && document.querySelector(
            "#ajaxProgressDiv1"
        ))
        || {
            style: {
                width: ""
            }
        }
    );
    // init ajaxProgressDiv1StyleBackground
    local.ajaxProgressDiv1StyleBackground = (
        local.ajaxProgressDiv1StyleBackground
        || ajaxProgressDiv1.style.background
    );
    // show ajaxProgress
    ajaxProgressDiv1.style.background = local.ajaxProgressDiv1StyleBackground;
    // increment ajaxProgress
    if (local.ajaxProgressCounter > 0) {
        // this algorithm will indefinitely increment the ajaxProgressBar
        // with successively smaller increments without ever reaching 100%
        local.ajaxProgressState += 1;
        ajaxProgressDiv1.style.width = Math.max(
            100 - 75 * Math.exp(-0.125 * local.ajaxProgressState),
            ajaxProgressDiv1.style.width.slice(0, -1) | 0
        ) + "%";
    } else {
        // finish ajaxProgress
        ajaxProgressDiv1.style.width = "100%";
    }
    // cleanup timerTimeout
    clearTimeout(local.timerTimeoutAjaxProgressHide);
    // hide ajaxProgress
    local.timerTimeoutAjaxProgressHide = setTimeout(function () {
        ajaxProgressDiv1.style.background = "transparent";
        local.ajaxProgressCounter = 0;
        local.ajaxProgressState = 0;
        // reset ajaxProgress
        setTimeout(function () {
            if (!local.ajaxProgressState) {
                ajaxProgressDiv1.style.width = "0%";
            }
        }, 500);
    }, (
        local.ajaxProgressCounter > 0
        ? local.timeoutDefault
        : 1000
    ));
};

local.assertJsonEqual = function (aa, bb, message) {
/*
 * this function will assert jsonStringifyOrdered(<aa>) === JSON.stringify(<bb>)
 */
    aa = local.jsonStringifyOrdered(aa);
    bb = JSON.stringify(bb);
    local.assertThrow(aa === bb, message || [aa, bb]);
};

local.assertJsonNotEqual = function (aa, bb, message) {
/*
 * this function will assert jsonStringifyOrdered(<aa>) !== JSON.stringify(<bb>)
 */
    aa = local.jsonStringifyOrdered(aa);
    bb = JSON.stringify(bb);
    local.assertThrow(aa !== bb, [aa], message || aa);
};

local.base64FromBuffer = function (bff) {
/*
 * this function will convert Uint8Array <bff> to base64
 * https://developer.mozilla.org/en-US/Add-ons/Code_snippets/StringView#The_code
 */
    var ii;
    var mod3;
    var text;
    var uint24;
    var uint6ToB64;
    // convert utf8 -> Uint8Array
    if (typeof bff === "string") {
        bff = new TextEncoder().encode(bff);
    }
    bff = bff || [];
    text = "";
    uint24 = 0;
    uint6ToB64 = function (uint6) {
        return (
            uint6 < 26
            ? uint6 + 65
            : uint6 < 52
            ? uint6 + 71
            : uint6 < 62
            ? uint6 - 4
            : uint6 === 62
            ? 43
            : 47
        );
    };
    ii = 0;
    while (ii < bff.length) {
        mod3 = ii % 3;
        uint24 |= bff[ii] << (16 >>> mod3 & 24);
        if (mod3 === 2 || bff.length - ii === 1) {
            text += String.fromCharCode(
                uint6ToB64(uint24 >>> 18 & 63),
                uint6ToB64(uint24 >>> 12 & 63),
                uint6ToB64(uint24 >>> 6 & 63),
                uint6ToB64(uint24 & 63)
            );
            uint24 = 0;
        }
        ii += 1;
    }
    return text.replace((
        /A(?=A$|$)/gm
    ), "=");
};

local.base64ToBuffer = function (b64, mode) {
/*
 * this function will convert <b64> to Uint8Array
 * https://gist.github.com/wang-bin/7332335
 */
    var bff;
    var byte;
    var chr;
    var ii;
    var jj;
    var map64;
    var mod4;
    b64 = b64 || "";
    bff = new Uint8Array(b64.length); // 3/4
    byte = 0;
    jj = 0;
    map64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    mod4 = 0;
    ii = 0;
    while (ii < b64.length) {
        chr = map64.indexOf(b64[ii]);
        if (chr >= 0) {
            mod4 %= 4;
            if (mod4 === 0) {
                byte = chr;
            } else {
                byte = byte * 64 + chr;
                bff[jj] = 255 & (byte >> ((-2 * (mod4 + 1)) & 6));
                jj += 1;
            }
            mod4 += 1;
        }
        ii += 1;
    }
    // optimization - create resized-view of bff
    bff = bff.subarray(0, jj);
    return local.bufferValidateAndCoerce(bff, mode);
};

local.base64ToUtf8 = function (b64) {
/*
 * this function will convert <b64> -> utf8
 */
    return local.base64ToBuffer(b64, "string");
};

local.blobRead = function (blob, onError) {
/*
 * this function will read from the <blob>
 */
    var isDone;
    var reader;
    if (blob && blob.constructor && blob.constructor === local.FormData) {
        blob.read(onError);
        return;
    }
    if (!local.isBrowser) {
        onError(null, local.bufferValidateAndCoerce(blob.bff));
        return;
    }
    reader = new FileReader();
    reader.onabort = function (event) {
        if (isDone) {
            return;
        }
        isDone = true;
        switch (event.type) {
        case "abort":
        case "error":
            onError(new Error("blobRead - " + event.type));
            break;
        case "load":
            onError(
                null,
                Object.prototype.toString.call(reader.result)
                === "[object ArrayBuffer]"
                // convert ArrayBuffer -> Uint8Array
                ? new Uint8Array(reader.result)
                : reader.result
            );
            break;
        }
    };
    reader.onerror = reader.onabort;
    reader.onload = reader.onabort;
    reader.readAsArrayBuffer(blob);
};

local.browserTest = function (option, onError) {
/*
 * this function will spawn an electron process to test <option.url>
 */
    var isDone;
    var isDoneHtml;
    var onMessage;
    var onParallel;
    var timerTimeout;
    var window;
    window = option.window || globalThis;
    // init utility2_testReport
    window.utility2_testReport = window.utility2_testReport || {
        coverage: window.__coverage__,
        testPlatformList: [{
            name: (
                local.isBrowser
                ? "browser - " + location.pathname + " - " + navigator.userAgent
                : "node - " + process.platform + " " + process.version
            ) + " - " + new Date().toISOString(),
            screenshot: local.env && local.env.MODE_BUILD_SCREENSHOT_IMG,
            testCaseList: []
        }]
    };
    window.utility2_testReportSave = (
        window.utility2_testReportSave
        || local.nop
    );
    if (option.modeTestReportCreate) {
        return;
    }
    onMessage = function (event, type, data) {
        switch (event && type) {
        case "html":
            if (isDoneHtml) {
                return;
            }
            isDoneHtml = true;
            option.fs.writeFile(
                option.fileScreenshot.replace((
                    /\.\w+$/
                ), ".html"),
                data,
                onParallel
            );
            return;
        case "testReport":
            if (option.isDoneTestReport || option.modeBrowserTest !== "test") {
                return;
            }
            option.isDoneTestReport = true;
            // save browser-coverage
            if (data.coverage) {
                onParallel.counter += 1;
                option.fs.writeFile(
                    option.fileCoverage,
                    JSON.stringify(data.coverage),
                    onParallel
                );
                data.coverage = null;
            }
            // save browser-screenshot
            data.testPlatformList[0].screenshot = (
                option.fileScreenshot.replace((
                    /.*\//
                ), "")
            );
            // save browser-test-report
            onParallel.counter += 1;
            option.fs.writeFile(
                option.fileTestReport,
                JSON.stringify(data, null, 4),
                onParallel
            );
            onParallel();
            return;
        }
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        // node - init
        case 1:
            // init fileElectronHtml
            option.fileElectronHtml = (
                option.npm_config_dir_tmp + "/electron."
                + Date.now().toString(16) + Math.random().toString(16) + ".html"
            );
            // init url
            if (!(
                /^\w+:\/\//
            ).test(option.url)) {
                option.url = local.path.resolve(process.cwd(), option.url);
            }
            option.urlParsed = local.urlParse(option.url);
            // init testName
            option.testName = option.urlParsed.pathname;
            if (option.testName.indexOf(process.cwd()) === 0) {
                option.testName = option.testName.replace(process.cwd(), "");
            }
            option.testName = (
                option.MODE_BUILD + ".browser."
                + encodeURIComponent(option.testName.replace(
                    "/build.." + option.CI_BRANCH + ".." + option.CI_HOST,
                    "/build"
                ))
            );
            local.objectSetDefault(option, {
                fileCoverage: (
                    option.npm_config_dir_tmp + "/coverage."
                    + option.testName + ".json"
                ),
                fileScreenshot: (
                    option.npm_config_dir_build + "/screenshot."
                    + option.testName + ".png"
                ),
                fileTestReport: (
                    option.npm_config_dir_tmp + "/test-report."
                    + option.testName + ".json"
                ),
                modeBrowserTest: "test",
                timeExit: Date.now() + option.timeoutDefault,
                timeoutScreenshot: option.timeoutScreenshot || 15000
            }, 1);
            // init timerTimeout
            timerTimeout = local.onTimeout(
                option.onNext,
                option.timeoutDefault,
                option.testName
            ).unref();
            data = {};
            Object.keys(option).forEach(function (key) {
                if (typeof option[key] !== "object") {
                    data[key] = option[key];
                }
            });
            data.modeNext = 20;
            // init file fileElectronHtml
            local.fsWriteFileWithMkdirpSync(option.fileElectronHtml, (
                "//<body "
                + "style=\"border:1px solid black;margin:0;padding:0;\">"
                + "<webview "
                + "preload=\"" + option.fileElectronHtml + "\" "
                + "src=\"" + option.url.replace("{{timeExit}}", option.timeExit)
                + "\" style="
                + "\"border:none;height:100%;margin:0;padding:0;width:100%;\">"
                + "</webview>"
                + "<script>document.body.removeChild(document.body.firstChild);"
                + "</script>"
                + "</body>"
                + "<textarea disabled style=\"display:none;\">\n"
                + local.assetsDict["/assets.example.begin.js"]
                + "(function(local){\n"
                + "\"use strict\";\n"
                + "local=globalThis.globalLocal;\n"
                + "local.env={};\n"
                + "local.isBrowser=true;\n"
                + "var option=" + JSON.stringify(data) + ";\n"
                + [
                    "browserTest",
                    "nop",
                    "onErrorWithStack",
                    "onNext"
                ].map(function (key) {
                    return "local." + key + "=" + String(local[key])
                    // html-safe
                    .replace((
                        /<\//g
                    ), "<\\/")
                    // coverage-hack - un-instrument
                    .replace((
                        /\b__cov_.*?\+\+/g
                    ), "0") + ";\n";
                }).join("")
                + "local.browserTest(option,console.error);\n"
                + "}());\n"
                + "//</textarea>\n"
            ));
            console.error(
                "\nbrowserTest - created fileElectronHtml "
                + option.fileElectronHtml + "\n"
            );
            // spawn an electron process to test a url
            option.npm_config_time_exit = option.timeExit;
            data.modeNext = 10;
            local.childProcessSpawnWithTimeout("electron", [
                __filename,
                "utility2.browserTest",
                option.url,
                "--enable-logging"
            ], {
                env: data,
                stdio: (
                    (!option.modeDebug && option.modeSilent)
                    ? "ignore"
                    : ["ignore", 1, 2]
                ),
                timeout: option.timeoutDefault
            }).once("error", option.onNext).once("exit", option.onNext);
            return;
        // node - after electron
        case 2:
            console.error(
                "\nbrowserTest - exit-code " + error + " - " + option.url
                + "\n"
            );
            if (option.modeBrowserTest !== "test") {
                option.modeNext += 1000;
                option.onNext();
                return;
            }
            // merge browser coverage
            data = (
                option.modeCoverageMerge
                && local.fsReadFileOrEmptyStringSync(
                    option.fileCoverage,
                    "json"
                )
            );
            local.istanbulCoverageMerge(window.__coverage__, data);
            console.error(
                "\nbrowserTest - merged coverage from file "
                + option.fileCoverage + "\n"
            );
            // merge browser test-report
            data = local.fsReadFileOrEmptyStringSync(
                option.fileTestReport,
                "json"
            );
            local.testReportMerge(
                window.utility2_testReport,
                !option.modeSilent && data
            );
            console.error(
                "\nbrowserTest - merged test-report from file "
                + option.fileTestReport + "\n"
            );
            // create test-report.json
            local.fs.writeFileSync(
                local.env.npm_config_dir_build + "/test-report.json",
                JSON.stringify(window.utility2_testReport)
            );
            option.onNext(
                data && data.testsFailed && new Error(data.testsFailed)
            );
            return;
        // node.electron - init
        case 11:
            // handle uncaughtException
            window.process.once("uncaughtException", option.onNext);
            // wait for electron to init
            option.electron.app.once("ready", function () {
                option.onNext();
            });
            return;
        // node.electron - after ready
        case 12:
            Object.assign(option, {
                frame: false,
                height: 768,
                // disable nodeIntegration
                // https://github.com/electron/electron/blob/v2.0.0/docs/tutorial/security.md#how-1
                nodeIntegration: false,
                show: false,
                width: 1024,
                x: 0,
                y: 0
            });
            onParallel = local.onParallel(option.onNext);
            // onParallel - html
            onParallel.counter += 1;
            // onParallel - test
            if (option.modeBrowserTest === "test") {
                onParallel.counter += 1;
            }
            // init event-handling - ipc
            option.electron.ipcMain.on(option.fileElectronHtml, function (
                event,
                type,
                data
            ) {
                try {
                    onMessage(event, type, data);
                } catch (errorCaught) {
                    option.onNext(errorCaught);
                }
            }, false);
            // init browserWindow
            option.browserWindow = new option.electron.BrowserWindow(option);
            // load url in browserWindow
            option.browserWindow.loadURL("file://" + option.fileElectronHtml);
            return;
        // node.electron - screenshot
        case 13:
            option.browserWindow.capturePage(option, function (data) {
                option.onNext(null, data);
            });
            return;
        case 14:
            option.fs.writeFile(
                option.fileScreenshot,
                data.toPNG(),
                option.onNext
            );
            return;
        case 15:
            console.error(
                "\nbrowserTest - created screenshot file "
                + option.fileScreenshot + "\n"
            );
            console.error(
                "browserTest - created screenshot file "
                + option.fileScreenshot.replace((
                    /\.\w+$/
                ), ".html")
            );
            local.exit();
            return;
        // node.electron.browserWindow.webview.preload - init
        case 21:
            // init domOnEventWindowOnloadTimeElapsed
            (function () {
            /*
             * this function will measure and print the time-elapsed
             * for window.onload
             */
                if (window.domOnEventWindowOnloadTimeElapsed) {
                    return;
                }
                window.domOnEventWindowOnloadTimeElapsed = Date.now() + 100;
                window.addEventListener("load", function () {
                    setTimeout(function () {
                        window.domOnEventWindowOnloadTimeElapsed = (
                            Date.now()
                            - window.domOnEventWindowOnloadTimeElapsed
                        );
                        console.error(
                            "domOnEventWindowOnloadTimeElapsed = "
                            + window.domOnEventWindowOnloadTimeElapsed
                        );
                    }, 100);
                });
            }());
            // init event-handling - load
            window.addEventListener("load", function () {
                setTimeout(option.onNext, 5000);
            });
            // wait for render before screenshot
            setTimeout(option.onNext, option.timeoutScreenshot);
            if (option.modeBrowserTest !== "test") {
                return;
            }
            // init utility2_testReportSave
            window.utility2_testReportSave = function () {
                window.utility2_testReportSave = local.nop;
                window.utility2_testReport.coverage = window.__coverage__;
                option.electron.ipcRenderer.send(
                    option.fileElectronHtml,
                    "testReport",
                    window.utility2_testReport
                );
            };
            return;
        // node.electron.browserWindow.webview.preload - screenshot
        case 22:
            // cleanup fileElectronHtml
            option.fs.rename(
                option.fileElectronHtml,
                option.npm_config_dir_tmp + "/electron.html",
                console.error
            );
            option.electron.ipcRenderer.send(
                option.fileElectronHtml,
                "html",
                window.document.documentElement.outerHTML
            );
            if (
                option.modeBrowserTest === "test" && !window.utility2_modeTest
            ) {
                window.utility2_testReportSave();
            }
            return;
        default:
            if (isDone) {
                return;
            }
            isDone = true;
            // cleanup timerTimeout
            clearTimeout(timerTimeout);
            onError(error);
        }
    });
    // init option
    [
        "CI_BRANCH",
        "CI_HOST",
        "DISPLAY",
        "MODE_BUILD",
        "PATH",
        "fileCoverage",
        "fileElectronHtml",
        "fileScreenshot",
        "fileTestReport",
        "modeBrowserTest",
        "modeCoverageMerge",
        "modeDebug",
        "modeNext",
        "modeSilent",
        "npm_config_dir_build",
        "npm_config_dir_tmp",
        "npm_config_time_exit",
        "npm_config_timeout_default",
        "timeExit",
        "timeoutDefault",
        "timeoutScreenshot",
        "url"
    ].forEach(function (key) {
        if (
            local.env
            && local.env[key] !== undefined
            && typeof option[key] !== "number"
        ) {
            option[key] = option[key] || local.env[key];
        }
    });
    option.modeNext = Number(option.modeNext) || 0;
    option.timeoutDefault = (
        Number(option.timeoutDefault)
        || Number(local.timeoutDefault)
    );
    if (10 <= option.modeNext) {
        option.electron = option.electron || require("electron");
    }
    option.fs = option.fs || require("fs");
    option.onNext();
};

local.bufferConcat = function (bffList) {
/*
 * this function will emulate node's Buffer.concat for Uint8Array in the browser
 */
    var byteLength;
    var ii;
    var isString;
    var jj;
    var result;
    isString = true;
    result = [""];
    byteLength = 0;
    bffList.forEach(function (bff) {
        if (bff !== 0 && !(bff && bff.length)) {
            return;
        }
        // optimization - concat string
        if (isString && typeof bff === "string") {
            result[0] += bff;
            return;
        }
        isString = null;
        bff = local.bufferValidateAndCoerce(bff);
        byteLength += bff.byteLength;
        result.push(bff);
    });
    // optimization - return string
    if (isString) {
        return result[0];
    }
    result[0] = local.bufferValidateAndCoerce(result[0]);
    byteLength += result[0].byteLength;
    bffList = result;
    result = local.bufferValidateAndCoerce(new Uint8Array(byteLength));
    ii = 0;
    bffList.forEach(function (bff) {
        jj = 0;
        while (jj < bff.byteLength) {
            result[ii] = bff[jj];
            ii += 1;
            jj += 1;
        }
    });
    return result;
};

local.bufferIndexOfSubBuffer = function (bff, subBff, fromIndex) {
/*
 * this function will search bff for the indexOf-like position of the subBff
 */
    var ii;
    var jj;
    var kk;
    if (!subBff.length) {
        return 0;
    }
    ii = fromIndex || 0;
    while (ii < bff.length) {
        kk = ii;
        jj = 0;
        while (jj < subBff.length) {
            if (subBff[jj] !== bff[kk]) {
                break;
            }
            kk += 1;
            jj += 1;
        }
        if (jj === subBff.length) {
            return kk - jj;
        }
        ii += 1;
    }
    return -1;
};

local.bufferRandomBytes = function (length) {
/*
 * this function will return a Buffer with given <length>,
 * filled with cryptographically-strong random-values
 */
    return (
        // ternary-condition
        (
            typeof window === "object"
            && window.crypto
            && typeof window.crypto.getRandomValues === "function"
        )
        ? window.crypto.getRandomValues(new Uint8Array(length))
        : require("crypto").randomBytes(length)
    );
};

local.bufferToUtf8 = function (bff) {
/*
 * this function will convert Uint8Array <bff> -> utf8
 */
    return local.bufferValidateAndCoerce(bff, "string");
};

local.bufferValidateAndCoerce = function (bff, mode) {
/*
 * this function will validate and coerce/convert <bff> -> Buffer
 * (or String if <mode> = "string")
 */
    // validate not 0
    if (bff !== 0) {
        bff = bff || "";
    }
    if (typeof bff === "string" && mode === "string") {
        return bff;
    }
    // convert utf8 -> Uint8Array
    if (typeof bff === "string") {
        bff = (
            local.isBrowser
            ? new TextEncoder().encode(bff)
            : Buffer.from(bff)
        );
    // validate instanceof Uint8Array
    } else if (Object.prototype.toString.call(bff) !== "[object Uint8Array]") {
        throw new Error(
            "bufferValidateAndCoerce - value is not instanceof "
            + "ArrayBuffer, String, or Uint8Array"
        );
    }
    // convert Uint8Array -> utf8
    if (mode === "string") {
        return new TextDecoder().decode(bff);
    }
    // coerce Uint8Array -> Buffer
    if (!local.isBrowser && !Buffer.isBuffer(bff)) {
        Object.setPrototypeOf(bff, Buffer.prototype);
    }
    return bff;
};

local.buildApidoc = function (option, onError) {
/*
 * this function will build the apidoc
 */
    var result;
    // optimization - do not run if $npm_config_mode_coverage = all
    if (local.env.npm_config_mode_coverage === "all") {
        onError();
        return;
    }
    option = local.objectSetDefault(option, {
        blacklistDict: local,
        require: local.requireInSandbox
    });
    // save apidoc.html
    result = (
        local.fsReadFileOrEmptyStringSync("apidoc.html", "utf8")
        || local.apidocCreate(option)
    );
    local.fsWriteFileWithMkdirpSync("tmp/build/apidoc.html", result);
    console.error(
        "created apidoc file " + process.cwd() + "/apidoc.html\n"
    );
    onError();
};

local.buildApp = function (option, onError) {
/*
 * this function will build the app
 */
    option = local.objectSetDefault(option, {
        assetsList: []
    });
    // build assets
    local.fsRmrSync("tmp/build/app");
    local.onParallelList({
        list: [{
            file: "/LICENSE",
            url: "/LICENSE"
        }, {
            file: "/assets." + local.env.npm_package_nameLib + ".html",
            url: "/index.html"
        }, {
            file: "/assets." + local.env.npm_package_nameLib + ".js",
            url: "/assets." + local.env.npm_package_nameLib + ".js"
        }, {
            file: "/assets.app.js",
            url: "/assets.app.js"
        }, {
            file: "/assets.example.html",
            url: "/assets.example.html"
        }, {
            file: "/assets.example.js",
            url: "/assets.example.js"
        }, {
            file: "/assets.swgg.html",
            url: "/assets.swgg.html"
        }, {
            file: "/assets.swgg.swagger.json",
            url: "/assets.swgg.swagger.json"
        }, {
            file: "/assets.swgg.swagger.petstore.json",
            url: "/assets.swgg.swagger.petstore.json"
        }, {
            file: "/assets.swgg.swagger.server.json",
            url: "/assets.swgg.swagger.server.json"
        }, {
            file: "/assets.test.js",
            url: "/assets.test.js"
        }, {
            file: "/assets.utility2.html",
            url: "/assets.utility2.html"
        }, {
            file: "/assets.utility2.base.html",
            url: "/assets.utility2.base.html"
        }, {
            file: "/assets.utility2.rollup.js",
            url: "/assets.utility2.rollup.js"
        }, {
            file: "/index.html",
            url: "/index.html"
        }, {
            file: "/index.rollup.html",
            url: "/index.rollup.html"
        }, {
            file: "/jsonp.utility2.stateInit",
            url: "/jsonp.utility2.stateInit?callback=window.utility2.stateInit"
        }].concat(option.assetsList)
    }, function (option2, onParallel) {
        option2 = option2.element;
        onParallel.counter += 1;
        local.ajax(option2, function (error, xhr) {
            // validate no error occurred
            local.assertThrow(!error, error);
            // jslint file
            local.jslintAndPrint(xhr.responseText, option2.file, {
                conditional: true,
                coverage: local.env.npm_config_mode_coverage
            });
            // validate no error occurred
            local.assertThrow(
                !local.jslint.jslintResult.errorText,
                local.jslint.jslintResult.errorText
            );
            local.fsWriteFileWithMkdirpSync(
                "tmp/build/app" + option2.file,
                xhr.response
            );
            onParallel();
        });
    }, function (error) {
        // validate no error occurred
        local.assertThrow(!error, error);
        // test standalone assets.app.js
        local.fsWriteFileWithMkdirpSync(
            "tmp/buildApp/assets.app.js",
            local.assetsDict["/assets.app.js"]
        );
        local.childProcessSpawnWithTimeout("node", ["assets.app.js"], {
            cwd: "tmp/buildApp",
            env: {
                PATH: local.env.PATH,
                PORT: (local.env.PORT ^ (Math.random() * 0x10000)) | 0x8000,
                npm_config_timeout_exit: 5000
            },
            stdio: ["ignore", 1, 2]
        })
        .on("error", onError)
        .on("exit", function (exitCode) {
            // validate exitCode
            local.assertThrow(!exitCode, exitCode);
            onError();
        });
    });
};

local.buildLib = function (option, onError) {
/*
 * this function will build the lib
 */
    var result;
    local.objectSetDefault(option, {
        customize: local.nop,
        dataFrom: local.fsReadFileOrEmptyStringSync(
            "lib." + local.env.npm_package_nameLib + ".js",
            "utf8"
        ),
        dataTo: local.templateRenderMyApp(
            local.assetsDict["/assets.my_app.template.js"],
            option
        )
    });
    // search-and-replace - customize dataTo
    [
        // customize top-level comment-description
        (
            /\n\u0020\*\n(?:[\S\s]*?\n)?\u0020\*\/\n/
        ),
        // customize body after /* validateLineSortedReset */
        (
            /\n\/\*\u0020validateLineSortedReset\u0020\*\/\n[\S\s]*?$/
        )
    ].forEach(function (rgx) {
        option.dataTo = local.stringMerge(option.dataTo, option.dataFrom, rgx);
    });
    // customize local for assets.utility2.rollup.js
    if (
        local.fs.existsSync("./assets.utility2.rollup.js")
        && local.env.npm_package_nameLib !== "swgg"
    ) {
        option.dataTo = option.dataTo
        .replace(
            "    // || globalThis.utility2_rollup_old",
            "    || globalThis.utility2_rollup_old"
        )
        .replace(
            "    // || require(\"./assets.utility2.rollup.js\")",
            "    || require(\"./assets.utility2.rollup.js\")"
        );
    }
    // save lib
    result = option.dataTo;
    local.fsWriteFileWithMkdirpSync(
        "lib." + local.env.npm_package_nameLib + ".js",
        result,
        local.env.npm_config_mode_coverage && local.identity("noWrite")
    );
    option.customize(option);
    onError();
    return result;
};

local.buildReadme = function (option, onError) {
/*
 * this function will build the readme in my-app-lite style
 */
    var result;
    local.objectSetDefault(option, {
        customize: local.nop,
        // reset toc
        dataFrom: local.fsReadFileOrEmptyStringSync(
            "README.md",
            "utf8"
        ).replace((
            /\n#\u0020table\u0020of\u0020contents$[\S\s]*?\n\n\n\n/m
        ), "\n# table of contents\n\n\n\n"),
        packageJsonRgx: (
            /\n#\u0020package.json\n```json\n([\S\s]*?)\n```\n/
        )
    });
    // render dataTo
    option.dataTo = local.templateRenderMyApp(
        local.assetsDict["/assets.readme.template.md"],
        option
    );
    // init package.json
    option.dataFrom.replace(option.packageJsonRgx, function (match0, match1) {
        // remove null-items from package.json
        option.packageJson = JSON.parse(match1.replace((
            /\u0020{4}".*?":\u0020null,?$/gm
        ), ""));
        option.packageJson.description = option.dataFrom.split("\n")[1];
        local.tryCatchOnError(function () {
            local.objectSetDefault(option.packageJson, {
                nameLib: local.fsReadFileOrEmptyStringSync(
                    "./package.json",
                    "json"
                ).nameLib
            });
        }, local.nop);
        option.packageJson = local.objectSetDefault(option.packageJson, {
            nameLib: option.packageJson.name.replace((
                /\W/g
            ), "_"),
            nameOriginal: option.packageJson.name
        });
        option.packageJson = local.objectSetDefault(
            option.packageJson,
            JSON.parse(local.templateRenderMyApp(
                option.packageJsonRgx.exec(
                    local.assetsDict["/assets.readme.template.md"]
                )[1],
                option
            )),
            2
        );
        // avoid npm-installing that
        delete option.packageJson.devDependencies[option.packageJson.name];
        // reset scripts
        option.packageJson.scripts = {
            "build-ci": "./npm_scripts.sh",
            env: "env",
            eval: "./npm_scripts.sh",
            "heroku-postbuild": "./npm_scripts.sh",
            postinstall: "./npm_scripts.sh",
            start: "./npm_scripts.sh",
            test: "./npm_scripts.sh",
            utility2: "./npm_scripts.sh"
        };
        // save package.json
        local.fsWriteFileWithMkdirpSync(
            "package.json",
            local.jsonStringifyOrdered(option.packageJson, null, 4) + "\n"
        );
        // re-render dataTo
        option.dataTo = local.templateRenderMyApp(
            local.assetsDict["/assets.readme.template.md"],
            option
        );
        option.dataTo = option.dataTo.replace(
            option.packageJsonRgx,
            match0.replace(
                match1,
                local.jsonStringifyOrdered(option.packageJson, null, 4)
            )
        );
    });
    // search-and-replace - customize dataTo
    [
        // customize name and description
        (
            /.*?\n.*?\n/
        ),
        // customize cdn-download
        (
            /\n#\u0020cdn\u0020download\n[\S\s]*?\n\n\n\n/
        ),
        // customize live web demo
        (
            /\n#\u0020live\u0020web\u0020demo\n[\S\s]*?\n\n\n\n/
        ),
        // customize to-do
        (
            /\n####\u0020todo\n[\S\s]*?\n\n\n\n/
        ),
        // customize quickstart-example-js
        (
            /\nglobalThis\.local\u0020=\u0020local;\n[^`]*?\n\/\/\u0020run\u0020browser\u0020js\-env\u0020code\u0020-\u0020init-test\n/
        ), (
            /\nlocal\.testRunBrowser\u0020=\u0020function\u0020\(event\)\u0020\{\n[^`]*?^\u0020{4}if\u0020\(!event\u0020\|\|\u0020\(event\u0020&&\n/m
        ), (
            /\n\u0020{4}\/\/\u0020custom-case\n[^`]*?\n\}\n/
        ),
        // customize quickstart-html-body
        (
            /\nutility2-comment\u0020-->(?:\\n\\\n){4}[^`]*?^<!--\u0020utility2-comment\\n\\\n/m
        ),
        // customize build script
        (
            /\n#\u0020internal\u0020build\u0020script\n[\S\s]*?^-\u0020build_ci\.sh\n/m
        ), (
            /\nshBuildCiAfter\u0020\(\)\u0020\{\(set\u0020-e\n[\S\s]*?\n\)\}\n/
        ), (
            /\nshBuildCiBefore\u0020\(\)\u0020\{\(set\u0020-e\n[\S\s]*?\n\)\}\n/
        )
    ].forEach(function (rgx) {
        option.dataTo = local.stringMerge(option.dataTo, option.dataFrom, rgx);
    });
    // customize private-repository
    if (local.env.npm_package_private) {
        option.dataTo = (
            option.dataTo
            .replace((
                /\n\[!\[NPM\]\(https:\/\/nodei.co\/npm\/.*?\n/
            ), "\n")
            .replace(
                "$ npm install ",
                (
                    "$ git clone "
                    + local.env.npm_package_repository_url
                    .replace("git+https://github.com/", "git@github.com:")
                    + " --single-branch -b beta node_modules/"
                )
            )
        );
    }
    // customize version
    ["dataFrom", "dataTo"].forEach(function (element) {
        option[element] = option[element].replace((
            /\n(####\u0020changelog\u0020|-\u0020npm\u0020publish\u0020)\d+?\.\d+?\.\d+?.*?\n/g
        ), "\n$1" + option.packageJson.version + "\n");
    });
    // customize swaggerdoc
    if (
        !local.assetsDict["/assets.swgg.swagger.json"]
        || (
            /\bswggUiContainer\b/
        ).test(local.assetsDict["/index.html"])
        || local.env.npm_package_name === "utility2"
    ) {
        option.dataTo = option.dataTo.replace((
            /\n####\u0020swagger\u0020doc\n[\S\s]*?\n####\u0020/
        ), "\n#### ");
    }
    // customize example.js
    if (
        local.assetsDict["/index.html"].indexOf(
            "<script src=\"assets.example.js\"></script>"
        ) < 0
    ) {
        option.dataTo = option.dataTo.replace((
            /\nif\u0020\(!local.isBrowser\)\u0020\{\n[\S\s]*?\n\}\(\)\);\n/g
        ), "\nif (!local.isBrowser) {\n    return;\n}\n}());\n");
    }
    // customize comment
    option.dataFrom.replace((
        /^(\u0020*?)(?:#\!\!\u0020|#\/\/\u0020|\/\/\!\!\u0020|<!--\u0020)(.*?)(?:\u0020-->)?$/gm
    ), function (match0, match1, match2) {
        option.dataTo = option.dataTo.replace(
            "\n" + match1 + match2 + "\n",
            "\n" + match0 + "\n"
        );
    });
    // customize - user-defined
    option.customize(option);
    // customize assets.index.template.html
    if (local.assetsDict["/assets.index.template.html"].indexOf(
        "\"assets.utility2.template.html\""
    ) < 0) {
        option.dataTo = option.dataTo.replace((
            /\n\/\*\u0020jslint\u0020ignore:start\u0020\*\/\nlocal.assetsDict\["\/assets.index.template.html"\]\u0020=\u0020'\\\n[\S\s]*?\n\/\*\u0020jslint\u0020ignore:end\u0020\*\/\n/
        ), "\n");
    }
    // customize shDeployCustom
    if (option.dataFrom.indexOf("    shDeployCustom\n") >= 0) {
        [
            // customize quickstart
            (
                /\n####\u0020changelog\u0020[\S\s]*\n#\u0020quickstart\u0020example.js\n/
            ), (
                option.dataFrom.indexOf("\"assets.utility2.template.html\"") < 0
                && local.identity(
                    /\n#\u0020quickstart\u0020[\S\s]*?\n#\u0020extra\u0020screenshots\n/
                )
            )
        ].forEach(function (rgx) {
            option.dataTo = local.stringMerge(
                option.dataTo,
                option.dataFrom,
                rgx
            );
        });
        // customize screenshot
        option.dataTo = option.dataTo.replace((
            /^1\.\u0020.*?screenshot\.(?:npmTest|testExampleJs|testExampleSh).*?\.png[\S\s]*?\n\n/gm
        ), "");
    }
    // customize shNpmTestPublished
    option.dataTo = option.dataTo.replace(
        "$ npm install " + local.env.GITHUB_REPO + "#alpha",
        "$ npm install " + local.env.npm_package_name
    );
    if (option.dataFrom.indexOf("    shNpmTestPublished\n") < 0) {
        option.dataTo = option.dataTo.replace(
            "$ npm install " + local.env.npm_package_name,
            "$ npm install " + local.env.GITHUB_REPO + "#alpha"
        );
        [(
            /\n.*?\bhttps:\/\/www.npmjs.com\/package\/.*?\n/
        ), (
            /\n.*?npmPackageDependencyTree.*?\n/
        )].forEach(function (rgx) {
            option.dataTo = option.dataTo.replace(rgx, "");
        });
    }
    // customize shBuildCiAfter and shBuildCiBefore
    [
        ["shDeployGithub", (
            /.*?\/screenshot\.deployGithub.*?\n/g
        )],
        ["shDeployHeroku", (
            /.*?\/screenshot\.deployHeroku.*?\n/g
        )],
        ["shReadmeTest example.js", (
            /.*?\/screenshot\.testExampleJs.*?\n/g
        )],
        ["shReadmeTest example.sh", (
            /.*?\/screenshot\.testExampleSh.*?\n/g
        )]
    ].forEach(function (element) {
        if (option.dataFrom.indexOf("    " + element[0] + "\n") >= 0) {
            return;
        }
        // customize test-server
        option.dataTo = option.dataTo.replace(
            new RegExp(
                "\\n\\| test-server-"
                + element[0].replace("shDeploy", "").toLowerCase()
                + " : \\|.*?\\n"
            ),
            "\n"
        );
        // customize screenshot
        option.dataTo = option.dataTo.replace(element[1], "");
    });
    option.dataTo = local.templateRenderMyApp(option.dataTo, option);
    // customize toc
    option.toc = "\n# table of contents\n";
    option.dataTo.replace((
        /\n\n\n\n#\u0020(.*)/g
    ), function (ignore, match1) {
        if (match1 === "table of contents") {
            return;
        }
        option.toc += "1. [" + match1 + "](#" + match1.toLowerCase()
        .replace((
            /[^\u0020\-0-9A-Z_a-z]/g
        ), "").replace((
            /\u0020/g
        ), "-") + ")\n";
    });
    option.dataTo = option.dataTo.replace(
        "\n# table of contents\n",
        option.toc
    );
    // save README.md
    result = option.dataTo;
    local.fs.writeFileSync("README.md", result);
    // customize assets.swgg.swagger.json
    option.swaggerJson = local.swgg.normalizeSwaggerJson(
        local.fsReadFileOrEmptyStringSync("assets.swgg.swagger.json", "json")
    );
    local.objectSetOverride(option.swaggerJson, {
        info: {
            title: option.packageJson.name,
            version: option.packageJson.version,
            "x-swgg-description": option.packageJson.description,
            "x-swgg-homepage": option.packageJson.homepage
        }
    }, 2);
    option.dataTo.replace((
        /\bhttps:\/\/.*?\/assets\.app\.js/
    ), function (match0) {
        option.swaggerJson["x-swgg-downloadStandaloneApp"] = (
            !local.env.npm_package_private && match0
        );
    });
    local.fsWriteFileWithMkdirpSync(
        "assets.swgg.swagger.json",
        local.jsonStringifyOrdered(option.swaggerJson, null, 4) + "\n",
        !option.swaggerJson.swagger && local.identity("noWrite")
    );
    onError();
    return result;
};

local.buildTest = function (option, onError) {
/*
 * this function will build the test
 */
    var result;
    local.objectSetDefault(option, {
        customize: local.nop,
        dataFrom: local.fsReadFileOrEmptyStringSync("test.js", "utf8"),
        dataTo: local.templateRenderMyApp(
            local.assetsDict["/assets.test.template.js"],
            option
        )
    });
    // search-and-replace - customize dataTo
    [
        // customize shared js\-env code - function
        (
            /\n\}\(\)\);\n\n\n\n\/\/\u0020run\u0020shared\u0020js\-env\u0020code\u0020-\u0020function\n[\S\s]*?$/
        )
    ].forEach(function (rgx) {
        option.dataTo = local.stringMerge(option.dataTo, option.dataFrom, rgx);
    });
    // customize require("utility2")
    [
        "./assets.utility2.rollup.js",
        "./lib.utility2.js"
    ].forEach(function (file) {
        if (local.fs.existsSync(file)) {
            option.dataTo = option.dataTo.replace(
                "require(\"utility2\")",
                "require(\"" + file + "\")"
            );
        }
    });
    option.customize(option);
    // save test.js
    result = option.dataTo;
    local.fs.writeFileSync("test.js", result);
    onError();
    return result;
};

local.childProcessSpawnWithTimeout = function (command, args, option) {
/*
 * this function will run like child_process.spawn,
 * but with auto-timeout after timeout milliseconds
 * example usage:
    var child = local.childProcessSpawnWithTimeout(
        "/bin/sh",
        ["-c", "echo hello world"],
        {stdio: ["ignore", 1, 2], timeout: 5000}
    );
    child.on("error", console.error);
    child.on("exit", function (exitCode) {
        console.error("exitCode " + exitCode);
    });
 */
    var child;
    var child_process;
    var timerTimeout;
    child_process = require("child_process");
    // spawn child
    child = child_process.spawn(command, args, option)
    .on("exit", function () {
        // cleanup timerTimeout
        try {
            process.kill(timerTimeout.pid);
        } catch (ignore) {}
    });
    // init timerTimeout
    timerTimeout = child_process.spawn(
        // convert timeout to integer seconds with 2 second delay
        "sleep "
        + Math.floor(
            0.001 * (Number(option && option.timeout) || local.timeoutDefault)
            + 2
        )
        + "; kill -9 " + child.pid + " 2>/dev/null",
        {
            shell: true,
            stdio: "ignore"
        }
    );
    return child;
};

local.childProcessSpawnWithUtility2 = function (script, onError) {
/*
 * this function will run child_process.spawn, with lib.utility2.sh sourced
 */
    require("child_process").spawn(
        ". " + (process.env.npm_config_dir_utility2 || __dirname)
        + "/lib.utility2.sh; " + script,
        {
            shell: true,
            stdio: ["ignore", 1, 2]
        }
    ).on("exit", function (exitCode) {
        onError(exitCode && Object.assign(new Error(), {
            exitCode: exitCode
        }));
    });
};

local.cliRun = function (option) {
/*
 * this function will run the cli
 */
    local.cliDict._eval = local.cliDict._eval || function () {
    /*
     * <code>
     * will eval <code>
     */
        globalThis.local = local;
        local.vm.runInThisContext(process.argv[3]);
    };
    local.cliDict["--eval"] = local.cliDict["--eval"] || local.cliDict._eval;
    local.cliDict["-e"] = local.cliDict["-e"] || local.cliDict._eval;
    local.cliDict._help = local.cliDict._help || function () {
    /*
     *
     * will print help
     */
        var commandList;
        var file;
        var packageJson;
        var text;
        var textDict;
        commandList = [{
            argList: "<arg2>  ...",
            description: "usage:",
            command: ["<arg1>"]
        }, {
            argList: "'console.log(\"hello world\")'",
            description: "example:",
            command: ["--eval"]
        }];
        file = __filename.replace((
            /.*\//
        ), "");
        option = Object.assign({}, option);
        packageJson = require("./package.json");
        // validate comment
        option.rgxComment = option.rgxComment || (
            /\)\u0020\{\n(?:|\u0020{4})\/\*\n(?:\u0020|\u0020{5})\*((?:\u0020<[^>]*?>|\u0020\.\.\.)*?)\n(?:\u0020|\u0020{5})\*\u0020(will\u0020.*?\S)\n(?:\u0020|\u0020{5})\*\/\n(?:\u0020{4}|\u0020{8})\S/
        );
        textDict = {};
        Object.keys(local.cliDict).sort().forEach(function (key, ii) {
            if (key[0] === "_" && key !== "_default") {
                return;
            }
            text = String(local.cliDict[key]);
            if (key === "_default") {
                key = "";
            }
            textDict[text] = textDict[text] || (ii + 2);
            ii = textDict[text];
            if (commandList[ii]) {
                commandList[ii].command.push(key);
                return;
            }
            try {
                commandList[ii] = option.rgxComment.exec(text);
                commandList[ii] = {
                    argList: (commandList[ii][1] || "").trim(),
                    command: [key],
                    description: commandList[ii][2]
                };
            } catch (ignore) {
                local.assertThrow(null, new Error(
                    "cliRun - cannot parse comment in COMMAND "
                    + key + ":\nnew RegExp("
                    + JSON.stringify(option.rgxComment.source)
                    + ").exec(" + JSON.stringify(text)
                    .replace((
                        /\\\\/g
                    ), "\u0000")
                    .replace((
                        /\\n/g
                    ), "\\n\\\n")
                    .replace((
                        /\u0000/g
                    ), "\\\\") + ");"
                ));
            }
        });
        text = "";
        text += packageJson.name + " (" + packageJson.version + ")\n\n";
        text += commandList
        .filter(function (element) {
            return element;
        })
        .map(function (element, ii) {
            element.command = element.command.filter(function (element) {
                return element;
            });
            switch (ii) {
            case 0:
            case 1:
                element.argList = [element.argList];
                break;
            default:
                element.argList = element.argList.split(" ");
                element.description = (
                    "# COMMAND "
                    + (element.command[0] || "<none>") + "\n# "
                    + element.description
                );
            }
            return (
                element.description + "\n  " + file
                + ("  " + element.command.sort().join("|") + "  ")
                    .replace((
                    /^\u0020{4}$/
                ), "  ")
                + element.argList.join("  ")
            );
        })
        .join("\n\n");
        console.log(text);
    };
    local.cliDict["--help"] = local.cliDict["--help"] || local.cliDict._help;
    local.cliDict["-h"] = local.cliDict["-h"] || local.cliDict._help;
    local.cliDict._default = local.cliDict._default || local.cliDict._help;
    local.cliDict.help = local.cliDict.help || local.cliDict._help;
    local.cliDict._interactive = local.cliDict._interactive || function () {
    /*
     *
     * will start interactive-mode
     */
        globalThis.local = local;
        local.identity(local.replStart || require("repl").start)({
            useGlobal: true
        });
    };
    local.cliDict["--interactive"] = (
        local.cliDict["--interactive"]
        || local.cliDict._interactive
    );
    local.cliDict["-i"] = local.cliDict["-i"] || local.cliDict._interactive;
    local.cliDict._version = local.cliDict._version || function () {
    /*
     *
     * will print version
     */
        console.log(require(__dirname + "/package.json").version);
    };
    local.cliDict["--version"] = (
        local.cliDict["--version"]
        || local.cliDict._version
    );
    local.cliDict["-v"] = local.cliDict["-v"] || local.cliDict._version;
    // default to --help command if no arguments are given
    if (process.argv.length <= 2) {
        local.cliDict._help();
        return;
    }
    if (local.cliDict[process.argv[2]]) {
        local.cliDict[process.argv[2]]();
        return;
    }
    local.cliDict._default();
};

local.corsBackendHostInject = function (url, backendHost, rgx, location) {
/*
 * this function will if <location>.host is a github site,
 * inject <backendHost> into <url> with given <rgx>
 */
    location = (
        location
        || (typeof window === "object" && window && window.location)
    );
    if (!(backendHost && location && (
        /\bgithub.io$/
    ).test(location.host))) {
        return url;
    }
    // init github-branch
    location.pathname.replace((
        /\/build\.\.(alpha|beta|master)\.\.travis-ci\.org\//
    ), function (ignore, match1) {
        backendHost = backendHost.replace("-alpha.", "-" + match1 + ".");
    });
    return url.replace(rgx || (
        /.*?($)/m
    ), backendHost + "$1");
};

local.corsForwardProxyHostIfNeeded = function (xhr) {
/*
 * this function will return xhr.corsForwardProxyHost, if needed
 */
    return (
        local.isBrowser
        && local.env.npm_package_nameLib
        && (
            /^https?:\/\//
        ).test(xhr.url)
        && xhr.url.indexOf(xhr.location.protocol + "//" + xhr.location.host)
        !== 0
        && (
            /\.github\.io$/
        ).test(xhr.location.host)
        && xhr.corsForwardProxyHost !== "disabled"
        && (xhr.corsForwardProxyHost || "https://h1-proxy1.herokuapp.com")
    );
};

/* istanbul ignore next */
local.cryptoAesXxxCbcRawDecrypt = function (option, onError) {
/*
 * this function will aes-xxx-cbc decrypt with given option
 * example usage:
    data = new Uint8Array([1,2,3]);
    key = '0123456789abcdef0123456789abcdef';
    mode = null;
    local.cryptoAesXxxCbcRawEncrypt({data: data, key: key, mode: mode}, function (
        error,
        data
    ) {
        console.assert(!error, error);
        local.cryptoAesXxxCbcRawDecrypt({data: data, key: key, mode: mode}, console.log);
    });
 */
    var cipher;
    var crypto;
    var data;
    var ii;
    var iv;
    var key;
    // init key
    key = new Uint8Array(0.5 * option.key.length);
    ii = 0;
    while (ii < key.byteLength) {
        key[ii] = parseInt(option.key.slice(2 * ii, 2 * ii + 2), 16);
        ii += 2;
    }
    data = option.data;
    // base64
    if (option.mode === "base64") {
        data = local.base64ToBuffer(data);
    }
    // normalize data
    if (Object.prototype.toString.call(data) !== "[object Uint8Array]") {
        data = new Uint8Array(data);
    }
    // init iv
    iv = data.subarray(0, 16);
    // optimization - create resized-view of data
    data = data.subarray(16);
    crypto = globalThis.crypto;
    if (!local.isBrowser) {
        setTimeout(function () {
            crypto = require("crypto");
            cipher = crypto.createDecipheriv(
                "aes-" + (8 * key.byteLength) + "-cbc",
                key,
                iv
            );
            onError(null, Buffer.concat([cipher.update(data), cipher.final()]));
        });
        return;
    }
    crypto.subtle.importKey("raw", key, {
        name: "AES-CBC"
    }, false, ["decrypt"]).then(function (key) {
        crypto.subtle.decrypt({
            iv: iv,
            name: "AES-CBC"
        }, key, data).then(function (data) {
            onError(null, new Uint8Array(data));
        }).catch(onError);
    }).catch(onError);
};

/* istanbul ignore next */
local.cryptoAesXxxCbcRawEncrypt = function (option, onError) {
/*
 * this function will aes-xxx-cbc encrypt with given option
 * example usage:
    data = new Uint8Array([1,2,3]);
    key = '0123456789abcdef0123456789abcdef';
    mode = null;
    local.cryptoAesXxxCbcRawEncrypt({data: data, key: key, mode: mode}, function (
        error,
        data
    ) {
        console.assert(!error, error);
        local.cryptoAesXxxCbcRawDecrypt({data: data, key: key, mode: mode}, console.log);
    });
 */
    var cipher;
    var crypto;
    var data;
    var ii;
    var iv;
    var key;
    // init key
    key = new Uint8Array(0.5 * option.key.length);
    ii = 0;
    while (ii < key.byteLength) {
        key[ii] = parseInt(option.key.slice(2 * ii, 2 * ii + 2), 16);
        ii += 2;
    }
    data = option.data;
    // init iv
    iv = new Uint8Array((((data.byteLength) >> 4) << 4) + 32);
    crypto = globalThis.crypto;
    if (!local.isBrowser) {
        setTimeout(function () {
            crypto = require("crypto");
            // init iv
            iv.set(crypto.randomBytes(16));
            cipher = crypto.createCipheriv(
                "aes-" + (8 * key.byteLength) + "-cbc",
                key,
                iv.subarray(0, 16)
            );
            data = cipher.update(data);
            iv.set(data, 16);
            iv.set(cipher.final(), 16 + data.byteLength);
            if (option.mode === "base64") {
                iv = local.base64FromBuffer(iv);
                iv += "\n";
            }
            onError(null, iv);
        });
        return;
    }
    // init iv
    iv.set(crypto.getRandomValues(new Uint8Array(16)));
    crypto.subtle.importKey("raw", key, {
        name: "AES-CBC"
    }, false, ["encrypt"]).then(function (key) {
        crypto.subtle.encrypt({
            iv: iv.subarray(0, 16),
            name: "AES-CBC"
        }, key, data).then(function (data) {
            iv.set(new Uint8Array(data), 16);
            // base64
            if (option.mode === "base64") {
                iv = local.base64FromBuffer(iv);
                iv += "\n";
            }
            onError(null, iv);
        }).catch(onError);
    }).catch(onError);
};

local.domElementRender = function (template, dict) {
/*
 * this function will return dom-element
 * rendered from <template> with given <dict>
 */
    var tmp;
    tmp = document.createElement("template");
    tmp.innerHTML = local.templateRender(template, dict);
    return tmp.content;
};

local.domStyleValidate = function () {
/*
 * this function will validate the document's style
 */
    var rgx;
    var tmp;
    rgx = (
        /^0\u0020(?:(body\u0020>\u0020)?(?:form\u0020>\u0020)?(?:\.testReportDiv\u0020.+|\.x-istanbul\u0020.+|\.button|\.colorError|\.uiAnimateShake|\.uiAnimateSlide|a|body|code|div|input|pre|textarea)(?:\[readonly\])?(?:,|\u0020\{))/
    );
    tmp = [];
    Array.from(
        // ternary-condition
        (
            typeof document === "object"
            && document
            && typeof document.querySelector === "function"
        )
        ? document.querySelectorAll(
            "style"
        )
        : []
    ).map(function (element, ii) {
        element.innerHTML
        .replace((
            /\/\*[\S\s]*?\*\/|;|\}/g
        ), "\n")
        .replace((
            /^([^\n\u0020@].*?)[,{:].*?$/gm
        ), function (match0, match1) {
            ii = document.querySelectorAll(
                match1
            ).length;
            if (!(ii > 1)) {
                tmp.push(ii + " " + match0);
            }
        });
    });
    tmp
    .filter(function (element) {
        return !rgx.test(element);
    })
    .sort()
    .reverse()
    .forEach(function (element, ii) {
        console.error("domStyleValidateUnmatched " + ii + ". " + element);
    });
};

local.errorMessagePrepend = function (error, message) {
/*
 * this function will prepend the message to error.message and error.stack
 */
    if (error === local.errorDefault) {
        return;
    }
    error.message = message + error.message;
    error.stack = message + error.stack;
    return error;
};

local.exit = function (exitCode, testReport) {
/*
 * this function will exit the current process with given <exitCode>
 */
    local.onErrorDefault(typeof exitCode !== "number" && exitCode);
    exitCode = (
        (!exitCode || Number(exitCode) === 0)
        ? 0
        : Number(exitCode) || 1
    );
    if (!local.isBrowser) {
        process.exit(exitCode);
        return;
    }
    if (testReport !== globalThis.utility2_testReport) {
        return;
    }
    // update coverage
    (document.querySelector(
        "#coverageReportDiv1"
    ) || {}).innerHTML = (
        local.istanbulCoverageReportCreate()
    );
    // save testReport
    globalThis.utility2_testReportSave();
};

local.fsReadFileOrEmptyStringSync = function (file, option) {
/*
 * this function will try to read the file or return empty-string
 * if option === 'json', then try to JSON.parse the file or return null
 */
    try {
        return (
            option === "json"
            ? JSON.parse(local.fs.readFileSync(file, "utf8"))
            : local.fs.readFileSync(file, option)
        );
    } catch (ignore) {
        return (
            option === "json"
            ? {}
            : ""
        );
    }
};

local.fsRmrSync = function (dir) {
/*
 * this function will synchronously 'rm -fr' the dir
 */
    local.child_process.execFileSync(
        "rm",
        ["-fr", local.path.resolve(process.cwd(), dir)],
        {
            stdio: ["ignore", 1, 2]
        }
    );
};

local.fsWriteFileWithMkdirpSync = function (file, data, mode) {
/*
 * this function will synchronously 'mkdir -p' and write the <data> to <file>
 */
    try {
        if (
            mode === "noWrite"
            || typeof require("fs").writeFileSync !== "function"
        ) {
            return;
        }
    } catch (ignore) {
        return;
    }
    // try to write to file
    try {
        require("fs").writeFileSync(file, data);
    } catch (ignore) {
        // mkdir -p
        require("child_process").spawnSync(
            "mkdir",
            ["-p", require("path").dirname(file)],
            {
                stdio: ["ignore", 1, 2]
            }
        );
        // re-write to file
        require("fs").writeFileSync(file, data);
    }
};

local.isNullOrUndefined = function (arg0) {
/*
 * this function will test if arg0 is null or undefined
 */
    return arg0 === null || arg0 === undefined;
};

local.jslintAutofixLocalFunction = function (code, file) {
/*
 * this function will jslint-autofix local-function
 */
    var code2;
    var dictFnc;
    var dictProp;
    if (local.isBrowser || !local.functionAllDict) {
        return code;
    }
    file = file.replace(process.cwd() + "/", "");
    switch (file) {
    case "README.md":
    case "lib." + process.env.npm_package_nameLib + ".js":
    case "lib." + process.env.npm_package_nameLib + ".sh":
    case "lib.apidoc.js":
    case "lib.db.js":
    case "lib.github_crud.js":
    case "lib.istanbul.js":
    case "lib.jslint.js":
    case "lib.marked.js":
    case "lib.sjcl.js":
    case "lib.swgg.js":
    case "lib.uglifyjs.js":
    case "npm_scripts.sh":
    case "test.js":
        break;
    default:
        return code;
    }
    // assets.example.begin.js
    code = code.replace((
        /^\(function\u0020\(globalThis\)\u0020\{\n[\S\s]*?\n\}\(this\)\);\n/m
    ), local.assetsDict["/assets.example.begin.js"]);
    // assets.my_app.template.js
    code = local.stringMerge(
        code,
        local.assetsDict["/assets.my_app.template.js"].replace((
            /my_app/g
        ), file.split(".")[1]),
        file !== "README.md" && local.identity(
            /\n\/\*\u0020istanbul\u0020instrument\u0020in\u0020package\u0020[\S\s]*?\n\/\*\u0020validateLineSortedReset\u0020\*\/\n/
        )
    );
    // local-function
    dictFnc = {};
    dictProp = {};
    code = code.replace((
        /^local\.(.*?)\u0020=\u0020(function\u0020\([\S\s]*?\n\});\n+/gm
    ), function (match0, key, match2, match3) {
        // local-function - duplicate
        if (dictFnc[key]) {
            return "";
        }
        // local-function - normalize
        dictFnc[key] = true;
        match3 = local.functionAllDict[key] || "";
        // make shell-safe
        // https://unix.stackexchange.com/questions/57794/shell-escape-characters-for-sh-c
        if (file.slice(-3) === ".sh") {
            match3 = match3.replace((
                /'/g
            ), "'\"'\"'");
        }
        if (match3 && match3 !== match2) {
            match0 = match0.replace(match2, match3.replace((
                /\$\$|\$/g
            ), "$$$$"));
        }
        return match0.trimRight() + "\n\n";
    });
    // comment
    code2 = code;
    code2 = code2
    .replace((
        /^\u0020*?\/\*[\S\s]*?\*\/|^\u0020*?(?:\/\/.*?|.*?\\)$/gm
    ), "");
    // local-function - update dictFnc and dictProp
    code2.replace((
        /\blocal\.(\w+?\b)(?:\u0020(===|=|\|\|)(?:\u0020"function"\u0020&&\u0020local\.\w|\u0020|$))?/gm
    ), function (ignore, match1, match2) {
        switch (match2) {
        case "=":
            dictFnc[match1] = true;
            break;
        case "===":
        case "||":
            dictProp[match1] = false;
            break;
        default:
            dictProp[match1] = true;
        }
    });
    [dictFnc, dictProp].forEach(function (dict) {
        Object.keys(dict).forEach(function (key) {
            dict[key] = dict[key] && local.functionBaseDict[key];
        });
    });
    dictFnc = local.jsonCopy(dictFnc);
    dictProp = local.jsonCopy(dictProp);
    [
        "assertThrow",
        "functionOrNop",
        "identity",
        "nop",
        "objectAssignDefault"
    ].forEach(function (key) {
        dictFnc[key] = true;
        dictProp[key] = true;
    });
    // local-function - missing
    switch (local.fs.existsSync("assets.utility2.rollup.js") || file) {
    case "README.md":
    case "lib.swgg.js":
    case "lib.utility2.js":
    case "test.js":
    case true:
        break;
    default:
        Object.keys(dictProp).forEach(function (key) {
            if (dictProp[key] && !dictFnc[key]) {
                console.error(
                    "local-function - missing (" + file + ") local." + key
                );
            }
        });
    }
    // local-function - unused
    switch (file) {
    case "lib.swgg.js":
    case "lib.utility2.js":
    case "lib.utility2.sh":
        break;
    default:
        Object.keys(dictFnc).forEach(function (key) {
            if (!dictProp.hasOwnProperty(key)) {
                console.error(
                    "local-function - unused (" + file + ") local." + key
                );
            }
        });
    }
    return code;
};

local.jsonCopy = function (obj) {
/*
 * this function will deep-copy obj
 */
    return (
        obj === undefined
        ? undefined
        : JSON.parse(JSON.stringify(obj))
    );
};

local.jsonStringifyOrdered = function (obj, replacer, space) {
/*
 * this function will JSON.stringify <obj>,
 * with object-keys sorted and circular-references removed
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Syntax
 */
    var circularSet;
    var stringify;
    var tmp;
    stringify = function (obj) {
    /*
     * this function will recursively JSON.stringify obj,
     * with object-keys sorted and circular-references removed
     */
        // if obj is not an object or function, then JSON.stringify as normal
        if (!(
            obj
            && typeof obj === "object"
            && typeof obj.toJSON !== "function"
        )) {
            return JSON.stringify(obj);
        }
        // ignore circular-reference
        if (circularSet.has(obj)) {
            return;
        }
        circularSet.add(obj);
        // if obj is an array, then recurse its items
        if (Array.isArray(obj)) {
            tmp = "[" + obj.map(function (obj) {
                // recurse
                tmp = stringify(obj);
                return (
                    typeof tmp === "string"
                    ? tmp
                    : "null"
                );
            }).join(",") + "]";
            circularSet.delete(obj);
            return tmp;
        }
        // if obj is not an array,
        // then recurse its items with object-keys sorted
        tmp = "{" + Object.keys(obj)
        // sort object-keys
        .sort()
        .map(function (key) {
            // recurse
            tmp = stringify(obj[key]);
            if (typeof tmp === "string") {
                return JSON.stringify(key) + ":" + tmp;
            }
        })
        .filter(function (obj) {
            return typeof obj === "string";
        })
        .join(",") + "}";
        circularSet.delete(obj);
        return tmp;
    };
    circularSet = new Set();
    return JSON.stringify((
        (typeof obj === "object" && obj)
        // recurse
        ? JSON.parse(stringify(obj))
        : obj
    ), replacer, space);
};

local.jwtAes256GcmDecrypt = function (token, key) {
/*
 * this function will use json-web-encryption to
 * aes-256-gcm-decrypt the token with given base64url-encoded <key>
 * https://tools.ietf.org/html/rfc7516
 */
    return local.tryCatchOnError(function () {
        token = token
        .replace((
            /-/g
        ), "+")
        .replace((
            /_/g
        ), "/")
        .split(".");
        token = local.sjcl.decrypt(
            local.sjcl.codec.base64url.toBits(local.jwtAes256KeyInit(key)),
            JSON.stringify({
                adata: token[4],
                ct: token[3],
                iv: token[2],
                ks: 256,
                mode: "gcm"
            })
        );
        return local.jwtHs256Decode(token, key);
    }, local.nop) || {};
};

local.jwtAes256GcmEncrypt = function (data, key) {
/*
 * this function will use json-web-encryption to
 * aes-256-gcm-encrypt the data with given base64url-encoded <key>
 * https://tools.ietf.org/html/rfc7516
 */
    var adata;
    adata = local.jwtAes256KeyCreate();
    data = local.jwtHs256Encode(data, key);
    data = JSON.parse(local.sjcl.encrypt(
        local.sjcl.codec.base64url.toBits(local.jwtAes256KeyInit(key)),
        data,
        {
            adata: local.sjcl.codec.base64url.toBits(adata),
            ks: 256,
            mode: "gcm"
        }
    ));
    return local.normalizeJwtBase64Url(
        "eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4R0NNIn0.."
        + data.iv + "." + data.ct + "." + adata
    );
};

local.jwtAes256KeyCreate = function () {
/*
 * this function will create a random, aes-256-base64url-jwt-key
 */
    return local.normalizeJwtBase64Url(
        local.base64FromBuffer(local.bufferRandomBytes(32))
    );
};

local.jwtAes256KeyInit = function (key) {
/*
 * this function will init the aes-256-base64url-jwt-key
 * https://jwt.io/
 */
    // init npm_config_jwtAes256Key
    local.env.npm_config_jwtAes256Key = (
        local.env.npm_config_jwtAes256Key
        || "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
    );
    return key || local.env.npm_config_jwtAes256Key;
};

local.jwtHs256Decode = function (token, key) {
/*
 * this function will decode the json-web-token with given base64-encoded <key>
 * https://jwt.io/
 */
    var Hmac;
    var timeNow;
    Hmac = local.sjcl.misc.hmac;
    timeNow = Date.now() / 1000;
    // try to decode the token
    return local.tryCatchOnError(function () {
        token = token.split(".");
        // validate header
        local.assertThrow(
            token[0] === "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",
            token
        );
        // validate signature
        local.assertThrow(local.sjcl.codec.base64url.fromBits(
            new Hmac(local.sjcl.codec.base64url.toBits(
                local.jwtAes256KeyInit(key)
            )).encrypt(token[0] + "." + token[1])
        ) === token[2]);
        // return decoded data
        token = JSON.parse(local.base64ToUtf8(token[1]));
        // https://tools.ietf.org/html/rfc7519#section-4.1
        // validate jwt-registered-headers
        local.assertThrow(!token.exp || token.exp >= timeNow);
        local.assertThrow(!token.nbf || token.nbf <= timeNow);
        return token;
    }, local.nop) || {};
};

local.jwtHs256Encode = function (data, key) {
/*
 * this function will encode the data into a json-web-token
 * with given base64-encoded <key>
 * https://jwt.io/
 */
    var Hmac;
    Hmac = local.sjcl.misc.hmac;
    data = (
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9."
        + local.normalizeJwtBase64Url(
            local.base64FromBuffer(JSON.stringify(data))
        )
    );
    return data + "." + local.sjcl.codec.base64url.fromBits(
        new Hmac(local.sjcl.codec.base64url.toBits(
            local.jwtAes256KeyInit(key)
        )).encrypt(data)
    );
};

local.listGetElementRandom = function (list) {
/*
 * this function will return a random element from the list
 */
    return list[Math.floor(Math.random() * list.length)];
};

local.listShuffle = function (list) {
/*
 * this function will inplace shuffle the list using fisher-yates algorithm
 * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle
 */
    var ii;
    var random;
    var swap;
    ii = list.length;
    while (ii > 1) {
        ii -= 1;
        random = Math.floor(Math.random() * (ii + 1));
        swap = list[ii];
        list[ii] = list[random];
        list[random] = swap;
    }
    return list;
};

local.localStorageSetItemOrClear = function (key, value) {
/*
 * this function will try to set the key/value pair to localStorage,
 * or else call localStorage.clear()
 */
    try {
        localStorage.setItem(key, value);
    } catch (ignore) {
        localStorage.clear();
    }
};

local.middlewareAssetsCached = function (request, response, nextMiddleware) {
/*
 * this function will run the middleware that will serve cached-assets
 */
    var option;
    option = {};
    local.onNext(option, function (error, data) {
        option.result = (
            option.result || local.assetsDict[request.urlParsed.pathname]
        );
        if (option.result === undefined) {
            nextMiddleware(error);
            return;
        }
        switch (option.modeNext) {
        case 1:
            // skip gzip
            if (
                response.headersSent
                || !(
                    /\bgzip\b/
                ).test(request.headers["accept-encoding"])
            ) {
                option.modeNext += 1;
                option.onNext();
                return;
            }
            // gzip and cache result
            local.taskCreateCached({
                cacheDict: "middlewareAssetsCachedGzip",
                key: request.urlParsed.pathname
            }, function (onError) {
                local.zlib.gzip(option.result, function (error, data) {
                    onError(error, !error && data.toString("base64"));
                });
            }, option.onNext);
            break;
        case 2:
            // set gzip header
            option.result = local.base64ToBuffer(data);
            response.setHeader("Content-Encoding", "gzip");
            response.setHeader("Content-Length", option.result.length);
            option.onNext();
            break;
        case 3:
            local.middlewareCacheControlLastModified(
                request,
                response,
                option.onNext
            );
            break;
        case 4:
            response.end(option.result);
            break;
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.middlewareBodyRead = function (request, ignore, nextMiddleware) {
/*
 * this function will run the middleware that will
 * read and save the request-body to request.bodyRaw
 */
    // if request is already read, then goto nextMiddleware
    if (!request.readable) {
        nextMiddleware();
        return;
    }
    local.streamReadAll(request, function (error, data) {
        request.bodyRaw = request.bodyRaw || data;
        nextMiddleware(error);
    });
};

local.middlewareCacheControlLastModified = function (
    request,
    response,
    nextMiddleware
) {
/*
 * this function will run the middleware
 * that will update the response-header Last-Modified
 */
    // do not cache if headers already sent or url has '?' search indicator
    if (response.headersSent || request.url.indexOf("?") >= 0) {
        nextMiddleware();
        return;
    }
    // init serverResponseHeaderLastModified
    local.serverResponseHeaderLastModified = (
        local.serverResponseHeaderLastModified
        // resolve to 1000 ms
        || new Date(new Date().toUTCString())
    );
    // respond with 304 If-Modified-Since serverResponseHeaderLastModified
    if (
        new Date(request.headers["if-modified-since"])
        >= local.serverResponseHeaderLastModified
    ) {
        response.statusCode = 304;
        response.end();
        return;
    }
    response.setHeader("Cache-Control", "no-cache");
    response.setHeader(
        "Last-Modified",
        local.serverResponseHeaderLastModified.toUTCString()
    );
    nextMiddleware();
};

local.middlewareError = function (error, request, response) {
/*
 * this function will run the middleware that will handle errors
 */
    // default - 404 Not Found
    if (!error) {
        local.serverRespondDefault(request, response, 404);
        return;
    }
    // http://jsonapi.org/format/#errors
    if (local.swgg && typeof local.swgg.serverRespondJsonapi === "function") {
        local.swgg.serverRespondJsonapi(request, response, error);
    }
    // statusCode [400, 600)
    local.serverRespondDefault(request, response, (
        (error.statusCode >= 400 && error.statusCode < 600)
        ? error.statusCode
        : 500
    ), error);
};

local.middlewareFileServer = function (request, response, nextMiddleware) {
/*
 * this function will run the middleware that will serve files
 */
    if (request.method !== "GET" || local.isBrowser) {
        nextMiddleware();
        return;
    }
    request.urlFile = (process.cwd() + request.urlParsed.pathname
    // security - disable parent directory lookup
    .replace((
        /.*\/\.\.\//g
    ), "/"))
        // replace trailing '/' with '/index.html'
        .replace((
        /\/$/
    ), "/index.html");
    // serve file from cache
    local.taskCreateCached({
        cacheDict: "middlewareFileServer",
        key: request.urlFile
    // run background-task to re-cache file
    }, function (onError) {
        local.fs.readFile(request.urlFile, function (error, data) {
            onError(error, data && local.base64FromBuffer(data));
        });
    }, function (error, data) {
        // default to nextMiddleware
        if (error) {
            nextMiddleware();
            return;
        }
        // init response-header content-type
        local.serverRespondHeadSet(request, response, null, {
            "Content-Type": local.contentTypeDict[(
                /\.[^.]*?$|$/m
            ).exec(request.urlParsed.pathname)[0]]
        });
        // serve file from cache
        response.end(local.base64ToBuffer(data));
    });
};

local.middlewareForwardProxy = function (request, response, nextMiddleware) {
/*
 * this function will run the middleware that will forward-proxy the request
 * to its destination-host
 */
    var isDone;
    var onError;
    var option;
    var timerTimeout;
    // handle preflight-cors
    if (request.method === "OPTIONS" && (
        /forward-proxy-url/
    )
    .test(request.headers["access-control-request-headers"])) {
        local.serverRespondCors(request, response);
        response.end();
        return;
    }
    if (!request.headers["forward-proxy-url"]) {
        nextMiddleware();
        return;
    }
    local.serverRespondCors(request, response);
    // init onError
    onError = function (error) {
        if (isDone) {
            return;
        }
        isDone = true;
        // cleanup timerTimeout
        clearTimeout(timerTimeout);
        // debug middlewareForwardProxy
        console.error("serverLog - " + JSON.stringify({
            time: new Date(option.timeStart).toISOString(),
            type: "middlewareForwardProxyResponse",
            method: option.method,
            url: option.url,
            statusCode: response.statusCode | 0,
            timeElapsed: Date.now() - option.timeStart,
            // extra
            headers: option.headers
        }));
        if (!error) {
            return;
        }
        // cleanup clientRequest and clientResponse
        local.streamCleanup(option.clientRequest);
        local.streamCleanup(option.clientResponse);
        nextMiddleware(error);
    };
    // init option
    option = local.urlParse(request.headers["forward-proxy-url"]);
    option.method = request.method;
    option.url = request.headers["forward-proxy-url"];
    // init timerTimeout
    timerTimeout = local.onTimeout(
        onError,
        local.timeoutDefault,
        "forward-proxy " + option.method + " " + option.url
    );
    // parse headers
    option.headers = {};
    local.tryCatchOnError(function () {
        option.headers = JSON.parse(request.headers["forward-proxy-headers"]);
    }, local.nop);
    // debug option
    local._debugForwardProxy = option;
    option.clientRequest = (
        option.protocol === "https:"
        ? local.https
        : local.http
    ).request(option, function (clientResponse) {
        option.clientResponse = clientResponse.on("error", onError);
        response.statusCode = option.clientResponse.statusCode;
        // pipe clientResponse to serverResponse
        option.clientResponse.pipe(response);
    }).on("error", onError);
    option.timeStart = Date.now();
    // init event-handling
    request.on("error", onError);
    response.on("finish", onError).on("error", onError);
    // pipe serverRequest to clientRequest
    request.pipe(option.clientRequest);
};

local.middlewareInit = function (request, response, nextMiddleware) {
/*
 * this function will run the middleware that will init the request and response
 */
    // debug request and response
    local._debugServerRequestResponse4 = local._debugServerRequestResponse3;
    local._debugServerRequestResponse3 = local._debugServerRequestResponse2;
    local._debugServerRequestResponse2 = local._debugServerRequestResponse1;
    local._debugServerRequestResponse1 = {
        request: request,
        response: response
    };
    // init timerTimeout
    local.serverRespondTimeoutDefault(request, response, local.timeoutDefault);
    // init request.urlParsed
    request.urlParsed = local.urlParse(request.url);
    // init response-header content-type
    local.serverRespondHeadSet(request, response, null, {
        "Content-Type": local.contentTypeDict[(
            /\.[^.]*?$|$/m
        ).exec(request.urlParsed.pathname)[0]]
    });
    // set main-page content-type to text/html
    if (request.urlParsed.pathname === "/") {
        local.serverRespondHeadSet(request, response, null, {
            "Content-Type": "text/html; charset=utf-8"
        });
    }
    // default to nextMiddleware
    nextMiddleware();
};

local.middlewareJsonpStateInit = function (request, response, nextMiddleware) {
/*
 * this function will run the middleware that will
 * serve the browser-state wrapped in given jsonp-callback
 */
    var state;
    if (!(request.stateInit || (
        request.urlParsed
        && request.urlParsed.pathname === "/jsonp.utility2.stateInit"
    ))) {
        nextMiddleware();
        return;
    }
    state = {
        utility2: {
            assetsDict: {
                "/assets.example.html":
                local.assetsDict["/assets.example.html"],
                "/assets.example.js": local.assetsDict["/assets.example.js"],
                "/assets.swgg.swagger.json":
                local.assetsDict["/assets.swgg.swagger.json"],
                "/assets.test.js": local.assetsDict["/assets.test.js"],
                "/assets.utility2.base.html":
                local.assetsDict["/assets.utility2.base.rollup.html"],
                "/index.rollup.html": local.assetsDict["/index.rollup.html"]
            },
            env: {
                NODE_ENV: local.env.NODE_ENV,
                npm_config_mode_backend: local.env.npm_config_mode_backend,
                npm_package_assetsList: local.env.npm_package_assetsList,
                npm_package_description: local.env.npm_package_description,
                npm_package_homepage: local.env.npm_package_homepage,
                npm_package_name: local.env.npm_package_name,
                npm_package_nameLib: local.env.npm_package_nameLib,
                npm_package_version: local.env.npm_package_version
            }
        }
    };
    (local.env.npm_package_assetsList || "").split(" ").forEach(function (
        file
    ) {
        local.assetsDict["/" + file] = (
            local.assetsDict["/" + file]
            || local.fsReadFileOrEmptyStringSync(file, "utf8")
        );
        state.utility2.assetsDict["/" + file] = local.assetsDict["/" + file];
    });
    if (request.stateInit) {
        return state;
    }
    response.end(
        request.urlParsed.query.callback + "(" + JSON.stringify(state) + ");"
    );
};

local.moduleDirname = function (module, modulePathList) {
/*
 * this function will search modulePathList for the module's __dirname
 */
    var result;
    // search process.cwd()
    if (!module || module === "." || module.indexOf("/") >= 0) {
        return require("path").resolve(process.cwd(), module || "");
    }
    // search modulePathList
    ["node_modules"]
    .concat(modulePathList)
    .concat(require("module").globalPaths)
    .concat([process.env.HOME + "/node_modules", "/usr/local/lib/node_modules"])
    .some(function (modulePath) {
        try {
            result = require("path").resolve(
                process.cwd(),
                modulePath + "/" + module
            );
            result = require("fs").statSync(result).isDirectory() && result;
            return result;
        } catch (ignore) {
            result = null;
        }
        return result;
    });
    return result || "";
};

local.normalizeChunk = function (chunk) {
/*
 * this function will normalize the chunk
 */
    return chunk || "";
};

local.normalizeJwt = function (data) {
/*
 * this function will normalize the jwt-data with registered-headers
 * https://tools.ietf.org/html/rfc7519#section-4.1
 */
    var timeNow;
    timeNow = Date.now() / 1000;
    return local.objectSetDefault(data, {
        exp: timeNow + 5 * 60,
        iat: timeNow,
        jti: Math.random().toString(16).slice(2),
        nbf: timeNow
    });
};

local.normalizeJwtBase64Url = function (b64) {
/*
 * this function will normlize <b64> to base64url format
 */
    return b64
    .replace((
        /\=/g
    ), "")
    .replace((
        /\+/g
    ), "-")
    .replace((
        /\//g
    ), "_");
};

local.numberToRomanNumerals = function (num) {
/*
 * this function will convert num to a roman-numeral
 * https://stackoverflow.com/questions/9083037/convert-a-number-into-a-roman-numeral-in-javascript
 */
    var digits;
    var ii;
    var key;
    var roman;
    digits = String(num).split("");
    key = [
        "", "C", "CC", "CCC", "CD", "D", "DC", "DCC", "DCCC", "CM",
        "", "X", "XX", "XXX", "XL", "L", "LX", "LXX", "LXXX", "XC",
        "", "I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX"
    ];
    roman = "";
    ii = 3;
    while (ii) {
        ii -= 1;
        roman = (key[Number(digits.pop()) + (ii * 10)] || "") + roman;
    }
    return new Array(Number(digits.join("") + 1)).join("M") + roman;
};

local.objectLiteralize = function (dict) {
/*
 * this function will traverse dict, and replace every encounter of the magical key '$[]'
 * with its object literal [key, value]
 */
    local.objectTraverse(dict, function (element) {
        if (typeof element === "object" && element && !Array.isArray(element)) {
            Object.keys(element).forEach(function (key) {
                if (key.indexOf("$[]") === 0) {
                    element[element[key][0]] = element[key][1];
                    delete element[key];
                }
            });
        }
    });
    return dict;
};

local.objectSetDefault = function (dict, defaults, depth) {
/*
 * this function will recursively set defaults for undefined-items in dict
 */
    dict = dict || {};
    defaults = defaults || {};
    Object.keys(defaults).forEach(function (key) {
        var defaults2;
        var dict2;
        dict2 = dict[key];
        // handle misbehaving getter
        try {
            defaults2 = defaults[key];
        } catch (ignore) {}
        if (defaults2 === undefined) {
            return;
        }
        // init dict[key] to default value defaults[key]
        switch (dict2) {
        case "":
        case null:
        case undefined:
            dict[key] = defaults2;
            return;
        }
        // if dict2 and defaults2 are both non-null and non-array objects,
        // then recurse with dict2 and defaults2
        if (
            depth > 1
            // dict2 is a non-null and non-array object
            && typeof dict2 === "object" && dict2 && !Array.isArray(dict2)
            // defaults2 is a non-null and non-array object
            && typeof defaults2 === "object" && defaults2
            && !Array.isArray(defaults2)
        ) {
            // recurse
            local.objectSetDefault(dict2, defaults2, depth - 1);
        }
    });
    return dict;
};

local.objectSetOverride = function (dict, overrides, depth, env) {
/*
 * this function will recursively set overrides for items in dict
 */
    dict = dict || {};
    env = env || (typeof process === "object" && process.env) || {};
    overrides = overrides || {};
    Object.keys(overrides).forEach(function (key) {
        var dict2;
        var overrides2;
        dict2 = dict[key];
        overrides2 = overrides[key];
        if (overrides2 === undefined) {
            return;
        }
        // if both dict2 and overrides2 are non-null and non-array objects,
        // then recurse with dict2 and overrides2
        if (
            depth > 1
            // dict2 is a non-null and non-array object
            && typeof dict2 === "object" && dict2 && !Array.isArray(dict2)
            // overrides2 is a non-null and non-array object
            && typeof overrides2 === "object" && overrides2
            && !Array.isArray(overrides2)
        ) {
            local.objectSetOverride(dict2, overrides2, depth - 1, env);
            return;
        }
        // else set dict[key] with overrides[key]
        dict[key] = (
            dict === env
            // if dict is env, then overrides falsy-value with empty-string
            ? overrides2 || ""
            : overrides2
        );
    });
    return dict;
};

local.objectTraverse = function (dict, onSelf, circularList) {
/*
 * this function will recursively traverse dict,
 * and run onSelf with dict's properties
 */
    onSelf(dict);
    circularList = circularList || [];
    if (dict && typeof dict === "object" && circularList.indexOf(dict) < 0) {
        circularList.push(dict);
        Object.keys(dict).forEach(function (key) {
            // recurse with dict[key]
            local.objectTraverse(dict[key], onSelf, circularList);
        });
    }
    return dict;
};

local.onErrorDefault = function (error) {
/*
 * this function will if <error> exists, then print it to stderr
 */
    if (error) {
        console.error(error);
    }
    return error;
};

local.onErrorThrow = function (error) {
/*
 * this function will if error exists, then throw it
 */
    if (error) {
        throw error;
    }
    return error;
};

local.onErrorWithStack = function (onError) {
/*
 * this function will create a new callback that will call onError,
 * and append the current stack to any error
 */
    var onError2;
    var stack;
    stack = new Error().stack.replace((
        /(.*?)\n.*?$/m
    ), "$1");
    onError2 = function (error, data, meta) {
        if (
            error
            && typeof error.stack === "string"
            && error !== local.errorDefault
            && String(error.stack).indexOf(stack.split("\n")[2]) < 0
        ) {
            // append the current stack to error.stack
            error.stack += "\n" + stack;
        }
        onError(error, data, meta);
    };
    // debug onError
    onError2.toString = function () {
        return String(onError);
    };
    return onError2;
};

local.onFileModifiedRestart = function (file) {
/*
 * this function will watch the file, and if modified, then restart the process
 */
    if (
        local.env.npm_config_mode_auto_restart
        && local.fs.existsSync(file)
        && local.fs.statSync(file).isFile()
    ) {
        local.fs.watchFile(file, {
            interval: 1000,
            persistent: false
        }, function (stat2, stat1) {
            if (stat2.mtime > stat1.mtime) {
                console.error("file modified - " + file);
                setTimeout(function () {
                    local.exit(77);
                }, 1000);
            }
        });
    }
};

local.onNext = function (option, onError) {
/*
 * this function will wrap onError inside the recursive function option.onNext,
 * and append the current stack to any error
 */
    option.onNext = local.onErrorWithStack(function (error, data, meta) {
        try {
            option.modeNext += (
                (error && !option.modeErrorIgnore)
                ? 1000
                : 1
            );
            if (option.modeDebug) {
                console.error("onNext - " + JSON.stringify({
                    modeNext: option.modeNext,
                    errorMessage: error && error.message
                }));
                if (error && error.stack) {
                    console.error(error.stack);
                }
            }
            onError(error, data, meta);
        } catch (errorCaught) {
            // throw errorCaught to break infinite recursion-loop
            if (option.errorCaught) {
                local.assertThrow(null, option.errorCaught);
            }
            option.errorCaught = errorCaught;
            option.onNext(errorCaught, data, meta);
        }
    });
    return option;
};

local.onParallel = function (onError, onEach, onRetry) {
/*
 * this function will create a function that will
 * 1. run async tasks in parallel
 * 2. if counter === 0 or error occurred, then call onError with error
 */
    var onParallel;
    onError = local.onErrorWithStack(onError);
    onEach = onEach || local.nop;
    onRetry = onRetry || local.nop;
    onParallel = function (error, data) {
        if (onRetry(error, data)) {
            return;
        }
        // decrement counter
        onParallel.counter -= 1;
        // validate counter
        if (!(onParallel.counter >= 0 || error || onParallel.error)) {
            error = new Error(
                "invalid onParallel.counter = " + onParallel.counter
            );
        // ensure onError is run only once
        } else if (onParallel.counter < 0) {
            return;
        }
        // handle error
        if (error) {
            onParallel.error = error;
            // ensure counter <= 0
            onParallel.counter = -Math.abs(onParallel.counter);
        }
        // call onError when isDone
        if (onParallel.counter <= 0) {
            onError(error, data);
            return;
        }
        onEach();
    };
    // init counter
    onParallel.counter = 0;
    // return callback
    return onParallel;
};

local.onParallelList = function (option, onEach, onError) {
/*
 * this function will
 * 1. async-run onEach in parallel,
 *    with given option.rateLimit and option.retryLimit
 * 2. call onError when onParallel.ii + 1 === option.list.length
 */
    var isListEnd;
    var onEach2;
    var onParallel;
    option.list = option.list || [];
    onEach2 = function () {
        while (true) {
            if (!(onParallel.ii + 1 < option.list.length)) {
                isListEnd = true;
                return;
            }
            if (!(onParallel.counter < option.rateLimit + 1)) {
                return;
            }
            onParallel.ii += 1;
            onEach({
                element: option.list[onParallel.ii],
                ii: onParallel.ii,
                list: option.list,
                retry: 0
            }, onParallel);
        }
    };
    onParallel = local.onParallel(onError, onEach2, function (error, data) {
        if (error && data && data.retry < option.retryLimit) {
            local.onErrorDefault(error);
            data.retry += 1;
            setTimeout(function () {
                onParallel.counter -= 1;
                onEach(data, onParallel);
            }, 1000);
            return true;
        }
        // restart if option.list has grown
        if (isListEnd && (onParallel.ii + 1 < option.list.length)) {
            isListEnd = null;
            onEach2();
        }
    });
    onParallel.ii = -1;
    option.rateLimit = Number(option.rateLimit) || 6;
    option.rateLimit = Math.max(option.rateLimit, 1);
    option.retryLimit = Number(option.retryLimit) || 2;
    onParallel.counter += 1;
    onEach2();
    onParallel();
};

local.onTimeout = function (onError, timeout, message) {
/*
 * this function will create a timeout-error-handler,
 * that will append the current stack to any error encountered
 */
    onError = local.onErrorWithStack(onError);
    // create timerTimeout
    return setTimeout(function () {
        onError(new Error(
            "onTimeout - timeout-error - " + timeout + " ms - " + message
        ));
    // coerce to finite integer
    }, timeout);
};

local.profile = function (fnc, onError) {
/*
 * this function will profile async <fnc> in milliseconds
 * with callback <onError>
 */
    var timeStart;
    timeStart = Date.now();
    // run async fnc
    fnc(function (error) {
        // call onError with difference in milliseconds
        // between Date.now() and timeStart
        onError(error, Date.now() - timeStart);
    });
};

local.profileSync = function (fnc) {
/*
 * this function will profile sync <fnc> in milliseconds
 */
    var timeStart;
    timeStart = Date.now();
    // run sync fnc
    fnc();
    // return difference in milliseconds between Date.now() and timeStart
    return Date.now() - timeStart;
};

local.replStart = function () {
/*
 * this function will start the repl-debugger
 */
    var that;
    if (globalThis.utility2_serverRepl1) {
        return;
    }
    // start replServer
    that = require("repl").start({
        useGlobal: true
    });
    globalThis.utility2_serverRepl1 = that;
    that.onError = function (error) {
    /*
     * this function will debug any repl-error
     */
        // debug error
        globalThis.utility2_debugReplError = error;
        console.error(error);
    };
    // save repl eval function
    that.evalDefault = that.eval;
    // hook custom repl eval function
    that.eval = function (script, context, file, onError) {
        var onError2;
        onError2 = function (error, data) {
            // debug error
            globalThis.utility2_debugReplError = (
                error
                || globalThis.utility2_debugReplError
            );
            onError(error, data);
        };
        script.replace((
            /^(\S+)\u0020(.*?)\n/
        ), function (ignore, match1, match2) {
            switch (match1) {
            // syntax-sugar to run async shell-command
            case "$":
                switch (match2) {
                // syntax-sugar to run git diff
                case "git diff":
                    match2 = "git diff --color | cat";
                    break;
                // syntax-sugar to run git log
                case "git log":
                    match2 = "git log -n 4 | cat";
                    break;
                }
                // source lib.utility2.sh
                if (process.env.npm_config_dir_utility2 && (match2 !== ":")) {
                    match2 = (
                        ". " + process.env.npm_config_dir_utility2
                        + "/lib.utility2.sh;" + match2
                    );
                }
                // run async shell-command
                require("child_process").spawn(match2, {
                    shell: true,
                    stdio: ["ignore", 1, 2]
                })
                // on shell exit, print return prompt
                .on("exit", function (exitCode) {
                    console.error("exit-code " + exitCode);
                    that.evalDefault(
                        "\n",
                        context,
                        file,
                        onError2
                    );
                });
                script = "\n";
                break;
            // syntax-sugar to map text with charCodeAt
            case "charCode":
                console.error(
                    match2.split("").map(function (chr) {
                        return (
                            "\\u"
                            + chr.charCodeAt(0).toString(16).padStart(4, 0)
                        );
                    }).join("")
                );
                script = "\n";
                break;
            // syntax-sugar to sort chr
            case "charSort":
                console.error(JSON.stringify(match2.split("").sort().join("")));
                script = "\n";
                break;
            // syntax-sugar to grep current dir
            case "grep":
                // run async shell-command
                require("child_process").spawn((
                    "find . -type f | grep -v -E "
/* jslint ignore:start */
+ '"\
/\\.|(\\b|_)(\\.\\d|\
archive|artifact|\
bower_component|build|\
coverage|\
doc|\
external|\
fixture|\
git_module|\
jquery|\
log|\
min|mock|\
node_module|\
rollup|\
swp|\
tmp|\
vendor)s{0,1}(\\b|_)\
" '
/* jslint ignore:end */
                    + "| tr \"\\n\" \"\\000\" | xargs -0 grep -HIin -E \""
                    + match2 + "\""
                ), {
                    shell: true,
                    stdio: ["ignore", 1, 2]
                })
                // on shell exit, print return prompt
                .on("exit", function (exitCode) {
                    console.error("exit-code " + exitCode);
                    that.evalDefault(
                        "\n",
                        context,
                        file,
                        onError2
                    );
                });
                script = "\n";
                break;
            // syntax-sugar to list object's keys, sorted by item-type
            // console.error(Object.keys(global).map(function(key){return(typeof global[key]==='object'&&global[key]&&global[key]===global[key]?'global':typeof global[key])+' '+key;}).sort().join('\n')) // jslint ignore:line
            case "keys":
                script = (
                    "console.error(Object.keys(" + match2
                    + ").map(function(key){return("
                    + "typeof " + match2 + "[key]==='object'&&"
                    + match2 + "[key]&&"
                    + match2 + "[key]===global[key]"
                    + "?'global'"
                    + ":typeof " + match2 + "[key]"
                    + ")+' '+key;"
                    + "}).sort().join('\\n'))\n"
                );
                break;
            // syntax-sugar to print stringified arg
            case "print":
                script = "console.error(String(" + match2 + "))\n";
                break;
            // syntax-sugar to read file
            case "readFile":
                try {
                    console.error(JSON.stringify(
                        require("fs").readFileSync(match2, "utf8")
                    ));
                } catch (errorCaught) {
                    console.error(errorCaught);
                }
                script = "\n";
                break;
            }
        });
        // eval the script
        that.evalDefault(script, context, file, onError2);
    };
    that.socket = {
        end: local.nop,
        on: local.nop,
        write: local.nop
    };
    // init process.stdout
    process.stdout._writeDefault = (
        process.stdout._writeDefault
        || process.stdout._write
    );
    process.stdout._write = function (chunk, encoding, callback) {
        process.stdout._writeDefault(chunk, encoding, callback);
        // coverage-hack - ignore else-statement
        local.nop(that.socket.writable && (function () {
            that.socket.write(chunk, encoding);
        }()));
    };
    // start tcp-server
    globalThis.utility2_serverReplTcp1 = require("net").createServer(function (
        socket
    ) {
        // init socket
        that.socket = socket;
        that.socket.on("data", that.write.bind(that));
        that.socket.on("error", that.onError);
        that.socket.setKeepAlive(true);
    });
    // coverage-hack - ignore else-statement
    local.nop(process.env.PORT_REPL && (function () {
        console.error(
            "repl-server listening on tcp-port " + process.env.PORT_REPL
        );
        globalThis.utility2_serverReplTcp1.listen(process.env.PORT_REPL);
    }()));
};

local.requireInSandbox = function (file) {
/*
 * this function will require the file in a sandbox-lite env
 */
    var exports;
    var mockDict;
    var mockList;
    var tmp;
    mockList = [
        [globalThis, {
            setImmediate: local.nop,
            setInterval: local.nop,
            setTimeout: local.nop
        }]
    ];
    [
        [local, "child_process"],
        [local, "cluster"],
        [local, "http"],
        [local, "https"],
        [local, "net"],
        [local, "repl"],
        [local.events, "prototype"],
        [globalThis, "process"],
        [local.stream, "prototype"],
        [process, "stdin"]
    ].forEach(function (element) {
        tmp = element[0][element[1]];
        mockDict = {};
        Object.keys(tmp).forEach(function (key) {
            if (
                typeof tmp[key] === "function"
                && !(
                    /^(?:fs\.Read|fs\.read|process\.binding|process\.dlopen)/
                )
                .test(element[1] + "." + key)
            ) {
                mockDict[key] = function () {
                    return;
                };
                // coverage-hack
                mockDict[key]();
            }
        });
        mockList.push([tmp, mockDict]);
    });
    local.testMock(mockList, function (onError) {
        local.tryCatchOnError(function () {
            exports = require(file);
        }, local.onErrorDefault);
        onError();
    }, local.onErrorThrow);
    return exports;
};

local.requireReadme = function () {
/*
 * this function will require and export example.js embedded in README.md
 */
    var code;
    var module;
    var tmp;
    // init module.exports
    module = {};
    if (local.isBrowser) {
        module.exports = local.objectSetDefault(
            globalThis.utility2_rollup || globalThis.local,
            local
        );
        return module.exports;
    }
    // start repl-debugger
    local.replStart();
    // debug dir
    local.fs.readdirSync(process.cwd()).forEach(function (file) {
        file = process.cwd() + "/" + file;
        // if the file is modified, then restart the process
        local.onFileModifiedRestart(file);
        switch (local.path.basename(file)) {
        // swagger-validate assets.swgg.swagger.json
        case "assets.swgg.swagger.json":
            local.fs.readFile(file, "utf8", function (error, data) {
                local.tryCatchOnError(function () {
                    // validate no error occurred
                    local.assertThrow(!error, error);
                    local.swgg.swaggerValidate(JSON.parse(data));
                }, local.onErrorDefault);
            });
            break;
        }
        switch ((
            /\.\w+?$|$/m
        ).exec(file)[0]) {
        case ".css":
        case ".html":
        case ".js":
        case ".json":
        case ".md":
        case ".sh":
            if ((
                /\b(?:assets\.app\.js|lock|raw|rollup)\b/
            ).test(file) || local.env.npm_config_mode_test) {
                return;
            }
            // jslint file
            local.fs.readFile(file, "utf8", function (error, data) {
                local.jslintAndPrint(!error && data, file, {
                    autofix: true,
                    conditional: true,
                    coverage: globalThis.__coverage__
                });
            });
            break;
        }
    });
    // init functionAllDict and functionBaseDict
    [
        ["utility2", "swgg"],
        ["utility2", "apidoc", "db", "github_crud", "swgg"]
    ].forEach(function (dictList, ii) {
        tmp = (
            ii
            ? "functionAllDict"
            : "functionBaseDict"
        );
        local[tmp] = {};
        dictList.forEach(function (dict) {
            dict = local[dict];
            Object.keys(dict).forEach(function (key) {
                if (
                    !(
                        /^[A-Z_]|^testCase_/m
                    ).test(key)
                    && typeof dict[key] === "function"
                ) {
                    local[tmp][key] = local[tmp][key] || String(dict[key]);
                }
            });
        });
        Object.keys(local[tmp]).forEach(function (key) {
            if (process.binding("natives")[key]) {
                local[tmp][key] = undefined;
            }
        });
    });
    if (globalThis.utility2_rollup || local.env.npm_config_mode_start) {
        // init assets
        local.assetsDict["/index.html"] = (
            local.fsReadFileOrEmptyStringSync("index.html")
            || local.assetsDict["/index.rollup.html"] || ""
        );
        local.assetsDict["/"] = local.assetsDict["/index.html"];
        local.assetsDict["/assets.app.js"] = local.fs.readFileSync(
            __filename,
            "utf8"
        ).replace((
            /^#!\//
        ), "// ");
        // init exports
        local[local.env.npm_package_nameLib] = local;
        module.exports = local;
        return module.exports;
    }
    // init file $npm_package_main
    globalThis.utility2_moduleExports = require(
        process.cwd() + "/" + local.env.npm_package_main
    );
    globalThis.utility2_moduleExports.globalThis = globalThis;
    // read code from README.md
    code = local.templateRenderMyApp(
        local.assetsDict["/assets.example.template.js"],
        {}
    );
    local.tryCatchOnError(function () {
        tmp = (
            /```\w*?(\n[\W\s]*?example\.js[\n"][\S\s]*?)\n```/
        ).exec(
            local.fs.readFileSync("README.md", "utf8")
        );
        code = tmp.input.slice(0, tmp.index).replace((
            /.+/g
        ), "") + tmp[1];
    }, local.nop);
    code = code
    // alias require($npm_package_name) to utility2_moduleExports;
    .replace(
        new RegExp("require\\(." + local.env.npm_package_name + ".\\)"),
        "globalThis.utility2_moduleExports"
    )
    .replace(
        new RegExp("require\\(." + local.env.npm_package_nameOriginal + ".\\)"),
        "globalThis.utility2_moduleExports"
    );
    // init example.js
    tmp = process.cwd() + "/example.js";
    // jslint code
    local.jslintAndPrint(code, tmp);
    // cover code
    code = local.istanbulInstrumentInPackage(code, tmp);
    // init module.exports
    module = new local.Module(tmp);
    require.cache[tmp] = module;
    // load code into module
    module._compile(code, tmp);
    // init exports
    module.exports.utility2 = local;
    module.exports[local.env.npm_package_nameLib] = (
        globalThis.utility2_moduleExports
    );
    // init assets
    tmp = process.cwd() + "/" + local.env.npm_package_main;
    local.assetsDict["/assets." + local.env.npm_package_nameLib + ".js"] = (
        local.fs.readFileSync(tmp, "utf8").replace((
            /^#!\//
        ), "// ")
    );
    local.objectSetOverride(local.assetsDict, module.exports.assetsDict);
    local.assetsDict["/assets." + local.env.npm_package_nameLib + ".js"] = (
        local.istanbulInstrumentInPackage(
            local.assetsDict[
                "/assets." + local.env.npm_package_nameLib + ".js"
            ],
            tmp
        )
    );
    module.exports.assetsDict = local.assetsDict;
    local.assetsDict["/assets.example.js"] = code;
    local.assetsDict["/assets.test.js"] = local.istanbulInstrumentInPackage(
        local.fs.readFileSync("test.js", "utf8"),
        process.cwd() + "/test.js"
    );
    // init assets index.html
    ["", ".rollup"].forEach(function (isRollup) {
        ["index", "utility2"].forEach(function (file) {
            tmp = "assets." + file + ".template.html";
            local.assetsDict["/" + tmp] = (
                local.fsReadFileOrEmptyStringSync(tmp, "utf8")
                || local.assetsDict["/" + tmp]
            );
            file = (
                file.replace("utility2", "assets.utility2.base") + isRollup
                + ".html"
            );
            local.assetsDict["/" + file] = local.fsReadFileOrEmptyStringSync(
                file,
                "utf8"
            ) || local.templateRender(
                // uncomment utility2-comment
                local.assetsDict["/" + tmp].replace((
                    /<!--\u0020utility2-comment\b([\S\s]*?)\butility2-comment\u0020-->/g
                ), "$1"),
                {
                    env: local.env,
                    isRollup: isRollup
                }
            );
        });
    });
    local.assetsDict["/"] = local.assetsDict["/index.html"];
    // init assets.app.js
    local.assetsDict["/assets.app.js"] = [
        "header",
        "/assets.utility2.rollup.js",
        "/assets.utility2.rollup.begin.js",
        "local.stateInit",
        "/assets.my_app.js",
        "/assets.example.js",
        "/assets.test.js",
        "/assets.utility2.rollup.end.js"
    ].map(function (key) {
        switch (key) {
/* jslint ignore:start */
case 'header':
return '\
/* this rollup was created with utility2 (https://github.com/kaizhu256/node-utility2) */\n\
\n\
\n\
\n\
/*\n\
assets.app.js\n\
\n\
' + local.env.npm_package_description + '\n\
\n\
instruction\n\
    1. save this script as assets.app.js\n\
    2. run the shell-command:\n\
        $ PORT=8081 node assets.app.js\n\
    3. open a browser to http://127.0.0.1:8081 and play with the web-demo\n\
    4. edit this script to suit your needs\n\
*/\n\
' + local.assetsDict["/assets.utility2.rollup.begin.js"]
    .replace((/utility2_rollup/g), 'utility2_app');
/* jslint ignore:end */
        case "/assets.my_app.js":
            // handle large string-replace
            tmp = "/assets." + local.env.npm_package_nameLib + ".js";
            code = local.assetsDict["/assets.utility2.rollup.content.js"]
            .split("/* utility2.rollup.js content */");
            code.splice(
                1,
                0,
                "local.assetsDict[\"" + tmp + "\"] = "
                + JSON.stringify(local.assetsDict[tmp]).replace((
                    /\\\\/g
                ), "\u0000").replace((
                    /\\n/g
                ), "\\n\\\n").replace((
                    /\u0000/g
                ), "\\\\")
            );
            code = code.join("");
            code += "\n";
            code += local.assetsDict[tmp];
            break;
        case "local.stateInit":
            // handle large string-replace
            code = local.assetsDict["/assets.utility2.rollup.content.js"]
            .split("/* utility2.rollup.js content */");
            tmp = local.middlewareJsonpStateInit({
                stateInit: true
            });
            // add extra physical files to assetsDict
            local.fs.readdirSync(".").forEach(function (file) {
                file = "/" + file;
                if (
                    local.assetsDict[file]
                    && local.assetsDict[file].length <= 0x100000
                    && String(local.assetsDict[file])
                    === local.fsReadFileOrEmptyStringSync("." + file, "utf8")
                ) {
                    tmp.utility2.assetsDict[file] = local.assetsDict[file];
                }
            });
            code.splice(1, 0, key + "(" + JSON.stringify(tmp, null, 4) + ");");
            code = code.join("");
            break;
        default:
            code = local.assetsDict[key];
        }
        return (
            "/* script-begin " + key + " */\n"
            + code.trim()
            + "\n/* script-end " + key + " */\n"
        );
    }).join("\n\n\n");
    local.objectSetDefault(module.exports, local);
    // init testCase_buildXxx
    Object.keys(local).forEach(function (key) {
        if (
            key.indexOf("_testCase_build") === 0
            || key === "_testCase_webpage_default"
        ) {
            module.exports[key.slice(1)] = (
                module.exports[key.slice(1)] || local[key]
            );
        }
    });
    return module.exports;
};

local.semverCompare = function (aa, bb) {
/*
 * this function will compare semver versions aa ? bb and return
 * -1 if aa < bb
 *  0 if aa = bb
 *  1 if aa > bb
 * https://semver.org/#spec-item-11
 */
    return [aa, bb].map(function (aa) {
        aa = aa.split("-");
        return [aa[0], aa.slice(1).join("-") || "\u00ff"].map(function (aa) {
            return aa.split(".").map(function (aa) {
                return ("0000000000000000" + aa).slice(-16);
            }).join(".");
        }).join("-");
    }).reduce(function (aa, bb) {
        return (
            aa === bb
            ? 0
            : aa < bb
            ? -1
            : 1
        );
    });
};

local.serverRespondCors = function (request, response) {
/*
 * this function will enable cors for the request
 * http://en.wikipedia.org/wiki/Cross-origin_resource_sharing
 */
    local.serverRespondHeadSet(request, response, null, local.jsonCopy({
        "access-control-allow-headers":
        request.headers["access-control-request-headers"],
        "access-control-allow-methods":
        request.headers["access-control-request-method"],
        "access-control-allow-origin": "*"
    }));
};

local.serverRespondDefault = function (request, response, statusCode, error) {
/*
 * this function will respond with a default message,
 * or error.stack for given statusCode
 */
    // init statusCode and contentType
    local.serverRespondHeadSet(
        request,
        response,
        statusCode,
        {
            "Content-Type": "text/plain; charset=utf-8"
        }
    );
    if (error) {
        // debug statusCode / method / url
        local.errorMessagePrepend(
            error,
            response.statusCode + " " + request.method + " " + request.url
            + "\n"
        );
        // print error.stack to stderr
        local.onErrorDefault(error);
        // end response with error.stack
        response.end(error.stack);
        return;
    }
    // end response with default statusCode message
    response.end(
        statusCode + " " + local.http.STATUS_CODES[statusCode]
    );
};

local.serverRespondEcho = function (request, response) {
/*
 * this function will respond with debug info
 */
    response.write(
        request.method + " " + request.url
        + " HTTP/" + request.httpVersion + "\r\n"
        + Object.keys(request.headers).map(function (key) {
            return key + ": " + request.headers[key] + "\r\n";
        }).join("") + "\r\n"
    );
    request.pipe(response);
};

local.serverRespondHeadSet = function (ignore, response, statusCode, headers) {
/*
 * this function will set the <response> object's <statusCode> and <headers>
 */
    if (response.headersSent) {
        return;
    }
    // init response.statusCode
    if (Number(statusCode)) {
        response.statusCode = Number(statusCode);
    }
    Object.keys(headers).forEach(function (key) {
        if (headers[key]) {
            response.setHeader(key, headers[key]);
        }
    });
    return true;
};

local.serverRespondTimeoutDefault = function (request, response, timeout) {
/*
 * this function will create a timeout-error-handler for the server-request
 */
    var isDone;
    var onError;
    onError = function () {
        if (isDone) {
            return;
        }
        isDone = true;
        // debug serverResponse
        console.error("serverLog - " + JSON.stringify({
            time: new Date(request.timeStart).toISOString(),
            type: "serverResponse",
            method: request.method,
            url: request.url,
            statusCode: response.statusCode | 0,
            timeElapsed: Date.now() - request.timeStart,
            // extra
            requestContentLength: request.dataLength || 0,
            responseContentLength: response.contentLength,
            requestHeaderXForwardedFor:
            request.headers["x-forwarded-for"] || "",
            requestHeaderOrigin: request.headers.origin || "",
            requestHeaderReferer: request.headers.referer || "",
            requestHeaderUserAgent: request.headers["user-agent"]
        }));
        // cleanup timerTimeout
        clearTimeout(request.timerTimeout);
    };
    request.timeStart = Date.now();
    request.onTimeout = request.onTimeout || function (error) {
        local.serverRespondDefault(request, response, 500, error);
        setTimeout(function () {
            // cleanup request and response
            local.streamCleanup(request);
            local.streamCleanup(response);
        }, 1000);
    };
    // init timerTimeout
    request.timerTimeout = local.onTimeout(
        request.onTimeout,
        timeout || local.timeoutDefault,
        "server " + request.method + " " + request.url
    );
    response.contentLength = 0;
    response.writeContentLength = response.writeContentLength || response.write;
    response.write = function (chunk, encoding, callback) {
        chunk = local.normalizeChunk(chunk);
        response.contentLength += chunk.length;
        response.writeContentLength(chunk, encoding, callback);
    };
    response.on("error", onError);
    response.on("finish", onError);
};

local.setTimeoutOnError = function (onError, timeout, error, data) {
/*
 * this function will after timeout has passed, then call onError(error, data)
 */
    if (typeof onError === "function") {
        setTimeout(function () {
            onError(error, data);
        }, timeout);
    }
    return data;
};

local.sjclHashScryptCreate = function (password, option) {
/*
 * this function will create a scrypt-hash of the password
 * with given option (default = $s0$10801)
 * e.g. $s0$e0801$epIxT/h6HbbwHaehFnh/bw==$7H0vsXlY8UxxyW/BWx/9GuY7jEvGjT71GFd6O4SZND0=
 * https://github.com/wg/scrypt
 */
    // init option
    option = (option || "$s0$10801").split("$");
    // init salt
    if (!option[3]) {
        option[3] = local.sjcl.codec.base64.fromBits(
            local.sjcl.random.randomWords(4, 0)
        );
    }
    // init hash
    option[4] = local.sjcl.codec.base64.fromBits(
        local.sjcl.misc.scrypt(
            password || "",
            local.sjcl.codec.base64.toBits(option[3]),
            Math.pow(2, parseInt(option[2].slice(0, 1), 16)),
            parseInt(option[2].slice(1, 2), 16),
            parseInt(option[2].slice(3, 4), 16)
        )
    );
    return option.slice(0, 5).join("$");
};

local.sjclHashScryptValidate = function (password, hash) {
/*
 * this function will validate the password against the scrypt-hash
 * https://github.com/wg/scrypt
 */
    return local.sjclHashScryptCreate(password, hash) === hash;
};

local.sjclHashSha1Create = function (data) {
/*
 * this function will create a base64-encoded sha1 hash of the string data
 */
    return local.sjcl.codec.base64.fromBits(local.sjcl.hash.sha1.hash(data));
};

local.sjclHashSha256Create = function (data) {
/*
 * this function will create a base64-encoded sha256 hash of the string data
 */
    return local.sjcl.codec.base64.fromBits(local.sjcl.hash.sha256.hash(data));
};

local.sjclHmacSha1Create = function (key, data) {
/*
 * this function will create a base64-encoded sha1 hmac
 * from the string key and string data
 */
    var Hmac;
    Hmac = local.sjcl.misc.hmac;
    return local.sjcl.codec.base64.fromBits(
        (new Hmac(
            local.sjcl.codec.utf8String.toBits(key),
            local.sjcl.hash.sha1
        )).mac(local.sjcl.codec.utf8String.toBits(data))
    );
};

local.sjclHmacSha256Create = function (key, data) {
/*
 * this function will create a base64-encoded sha256 hmac
 * from the string key and string data
 */
    var Hmac;
    Hmac = local.sjcl.misc.hmac;
    return local.sjcl.codec.base64.fromBits(
        (new Hmac(
            local.sjcl.codec.utf8String.toBits(key),
            local.sjcl.hash.sha256
        )).mac(local.sjcl.codec.utf8String.toBits(data))
    );
};

local.stateInit = function (option) {
/*
 * this function will init the state-option
 */
    local.objectSetOverride(local, option, 10);
    // init swgg
    local.swgg.apiUpdate(local.swgg.swaggerJson);
};

local.streamCleanup = function (stream) {
/*
 * this function will try to end or destroy the stream
 */
    var error;
    // try to end the stream
    try {
        stream.end();
    } catch (errorCaught) {
        error = errorCaught;
    }
    // if error, then try to destroy the stream
    if (error) {
        try {
            stream.destroy();
        } catch (ignore) {}
    }
};

local.streamReadAll = function (stream, onError) {
/*
 * this function will concat data from the stream,
 * and pass it to onError when isDone reading
 */
    var chunkList;
    chunkList = [];
    stream.dataLength = 0;
    // read data from the stream
    stream
    // on data event, push the buffer chunk to chunkList
    .on("data", function (chunk) {
        chunk = local.normalizeChunk(chunk);
        chunkList.push(chunk);
        stream.dataLength += chunk.length;
    })
    // on end event, pass concatenated read buffer to onError
    .on("end", function () {
        onError(
            null,
            local.isBrowser
            ? chunkList[0]
            : local.bufferConcat(chunkList)
        );
    })
    // on error event, pass error to onError
    .on("error", onError);
};

local.stringHtmlSafe = function (text) {
/*
 * this function will make the text html-safe
 * https://stackoverflow.com/questions/7381974/which-characters-need-to-be-escaped-on-html
 */
    return text
    .replace((
        /&/g
    ), "&amp;")
    .replace((
        /"/g
    ), "&quot;")
    .replace((
        /'/g
    ), "&apos;")
    .replace((
        /</g
    ), "&lt;")
    .replace((
        />/g
    ), "&gt;")
    .replace((
        /&amp;(amp;|apos;|gt;|lt;|quot;)/ig
    ), "&$1");
};

local.stringMerge = function (str1, str2, rgx) {
/*
 * this function will merge <str2> -> <str1>, for sections where both match <rgx>
 */
    str2.replace(rgx, function (match2) {
        str1.replace(rgx, function (match1) {
            str1 = str1.replace(match1, function () {
                return match2;
            });
        });
    });
    return str1;
};

local.stringQuotedToAscii = function (str) {
/*
 * this function will replace non-ascii-chr -> unicode-escaped ascii-chr in the quoted-str
 */
    return str
    .replace((
        /\r/g
    ), "\\r")
    .replace((
        /\t/g
    ), "\\t")
    .replace((
        /[^\n\u0020-\u007e]/g
    ), function (chr) {
        return "\\u" + ("0000" + chr.charCodeAt(0).toString(16)).slice(-4);
    });
};

local.stringRegexpEscape = function (text) {
/*
 * this function will regexp-escape text
 * https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript
 */
    return text.replace((
        /[\-\/\\\^$*+?.()|\[\]{}]/g
    ), "\\$&");
};

local.stringTruncate = function (text, maxLength) {
/*
 * this function will truncate text to given maxLength
 */
    return (
        text.length > maxLength
        ? text.slice(0, maxLength - 3).trimRight() + "..."
        : text
    );
};

local.stringUniqueKey = function (text) {
/*
 * this function will return a string-key that is unique in given text
 */
    var key;
    // seed the key with the least frequent letters in the english-language
    // https://en.wikipedia.org/wiki/Letter_frequency
    key = "zqxj";
    do {
        key += ((1 + Math.random()) * 0x10000000000000).toString(36).slice(1);
    } while (text.indexOf(key) >= 0);
    return key;
};

local.taskCreate = function (option, onTask, onError) {
/*
 * this function will create the task onTask named option.key, if it does not exist,
 * and push onError to its onErrorList
 */
    var task;
    // init task
    local.taskOnTaskDict[option.key] = (
        local.taskOnTaskDict[option.key]
        || {
            onErrorList: []
        }
    );
    task = local.taskOnTaskDict[option.key];
    // push callback onError to the task
    if (onError) {
        onError = local.onErrorWithStack(onError);
        task.onErrorList.push(onError);
    }
    // if task exists, then return it
    if (!onTask || task.onTask) {
        return task;
    }
    task.onDone = function (error, data, meta) {
        // if isDone, then do nothing
        if (task.isDone) {
            return;
        }
        task.isDone = true;
        // cleanup timerTimeout
        clearTimeout(task.timerTimeout);
        // cleanup task
        delete local.taskOnTaskDict[option.key];
        // preserve error.message and error.stack
        task.result = JSON.stringify([(
            (error && error.stack)
            ? Object.assign(local.jsonCopy(error), {
                message: error.message,
                name: error.name,
                stack: error.stack
            })
            : error
        ), data, meta]);
        // pass result to callbacks in onErrorList
        task.onErrorList.forEach(function (onError) {
            onError.apply(null, JSON.parse(task.result));
        });
    };
    // init timerTimeout
    task.timerTimeout = local.onTimeout(
        task.onDone,
        option.timeout || local.timeoutDefault,
        "taskCreate " + option.key
    );
    task.onTask = onTask;
    // run onTask
    task.onTask(task.onDone);
    return task;
};

local.taskCreateCached = function (option, onTask, onError) {
/*
 * this function will
 * 1. if cache-hit, then call onError with cacheValue
 * 2. run onTask in background to update cache
 * 3. save onTask's result to cache
 * 4. if cache-miss, then call onError with onTask's result
 */
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        // 1. if cache-hit, then call onError with cacheValue
        case 1:
            // read cacheValue from memory-cache
            local.cacheDict[option.cacheDict] = (
                local.cacheDict[option.cacheDict]
                || {}
            );
            option.cacheValue = local.cacheDict[option.cacheDict][option.key];
            if (option.cacheValue) {
                // call onError with cacheValue
                option.modeCacheHit = true;
                onError(null, JSON.parse(option.cacheValue));
                if (!option.modeCacheUpdate) {
                    break;
                }
            }
            // run background-task with lower priority for cache-hit
            setTimeout(option.onNext, option.modeCacheHit && option.cacheTtl);
            break;
        // 2. run onTask in background to update cache
        case 2:
            local.taskCreate(option, onTask, option.onNext);
            break;
        default:
            // 3. save onTask's result to cache
            // JSON.stringify data to prevent side-effects on cache
            option.cacheValue = JSON.stringify(data);
            if (!error && option.cacheValue) {
                local.cacheDict[option.cacheDict][option.key] = option.cacheValue;
            }
            // 4. if cache-miss, then call onError with onTask's result
            if (!option.modeCacheHit) {
                onError(error, option.cacheValue && JSON.parse(option.cacheValue));
            }
            local.functionOrNop(option.onCacheWrite)();
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.templateRender = function (template, dict, option) {
/*
 * this function will render the template with given dict
 */
    var argList;
    var getValue;
    var match;
    var renderPartial;
    var rgx;
    var skip;
    var value;
    dict = dict || {};
    option = option || {};
    getValue = function (key) {
        argList = key.split(" ");
        value = dict;
        if (argList[0] === "#this/") {
            return;
        }
        // iteratively lookup nested values in the dict
        argList[0].split(".").forEach(function (key) {
            value = value && value[key];
        });
        return value;
    };
    renderPartial = function (match0, helper, key, partial) {
        switch (helper) {
        case "each":
        case "eachTrimRightComma":
            value = getValue(key);
            value = (
                Array.isArray(value)
                ? value.map(function (dict) {
                    // recurse with partial
                    return local.templateRender(partial, dict, option);
                }).join("")
                : ""
            );
            // remove trailing-comma from last element
            if (helper === "eachTrimRightComma") {
                value = value.trimRight().replace((
                    /,$/
                ), "");
            }
            return value;
        case "if":
            partial = partial.split("{{#unless " + key + "}}");
            partial = (
                getValue(key)
                ? partial[0]
                // handle 'unless' case
                : partial.slice(1).join("{{#unless " + key + "}}")
            );
            // recurse with partial
            return local.templateRender(partial, dict, option);
        case "unless":
            return (
                getValue(key)
                ? ""
                // recurse with partial
                : local.templateRender(partial, dict, option)
            );
        default:
            // recurse with partial
            return match0[0] + local.templateRender(match0.slice(1), dict, option);
        }
    };
    // render partials
    rgx = (
        /\{\{#(\w+)\u0020([^}]+?)\}\}/g
    );
    template = template || "";
    match = rgx.exec(template);
    while (match) {
        rgx.lastIndex += 1 - match[0].length;
        template = template.replace(
            new RegExp(
                "\\{\\{#(" + match[1] + ") (" + match[2]
                + ")\\}\\}([\\S\\s]*?)\\{\\{/" + match[1] + " " + match[2]
                + "\\}\\}"
            ),
            renderPartial
        );
        match = rgx.exec(template);
    }
    // search for keys in the template
    return template.replace((
        /\{\{[^}]+?\}\}/g
    ), function (match0) {
        var markdownToHtml;
        var notHtmlSafe;
        notHtmlSafe = option.notHtmlSafe;
        try {
            getValue(match0.slice(2, -2));
            if (value === undefined) {
                return match0;
            }
            argList.slice(1).forEach(function (arg0, ii, list) {
                switch (arg0) {
                case "alphanumeric":
                    value = value.replace((
                        /\W/g
                    ), "_");
                    break;
                case "decodeURIComponent":
                    value = decodeURIComponent(value);
                    break;
                case "encodeURIComponent":
                    value = encodeURIComponent(value);
                    break;
                case "jsonStringify":
                    value = JSON.stringify(value);
                    break;
                case "jsonStringify4":
                    value = JSON.stringify(value, null, 4);
                    break;
                case "markdownSafe":
                    value = value.replace((
                        /`/g
                    ), "'");
                    break;
                case "markdownToHtml":
                    markdownToHtml = true;
                    break;
                case "notHtmlSafe":
                    notHtmlSafe = true;
                    break;
                case "truncate":
                    skip = ii + 1;
                    if (value.length > list[skip]) {
                        value = value.slice(0, list[skip] - 3).trimRight() + "...";
                    }
                    break;
                // default to String.prototype[arg0]()
                default:
                    if (ii === skip) {
                        break;
                    }
                    value = value[arg0]();
                }
            });
            value = String(value);
            // default to htmlSafe
            if (!notHtmlSafe) {
                value = value
                .replace((
                    /&/g
                ), "&amp;")
                .replace((
                    /"/g
                ), "&quot;")
                .replace((
                    /'/g
                ), "&apos;")
                .replace((
                    /</g
                ), "&lt;")
                .replace((
                    />/g
                ), "&gt;")
                .replace((
                    /&amp;(amp;|apos;|gt;|lt;|quot;)/ig
                ), "&$1");
            }
            markdownToHtml = (
                markdownToHtml
                && (typeof local.marked === "function" && local.marked)
            );
            if (markdownToHtml) {
                value = markdownToHtml(value)
                .replace((
                    /&amp;(amp;|apos;|gt;|lt;|quot;)/ig
                ), "&$1");
            }
            return value;
        } catch (errorCaught) {
            errorCaught.message = (
                "templateRender could not render expression "
                + JSON.stringify(match0) + "\n"
            ) + errorCaught.message;
            local.assertThrow(null, errorCaught);
        }
    });
};

local.templateRenderMyApp = function (template, option) {
/*
 * this function will render the my-app-lite template with given option.packageJson
 */
    option.packageJson = local.fsReadFileOrEmptyStringSync("package.json", "json");
    local.objectSetDefault(option.packageJson, {
        nameLib: option.packageJson.name.replace((
            /\W/g
        ), "_"),
        repository: {
            url: "https://github.com/kaizhu256/node-" + option.packageJson.name + ".git"
        }
    }, 2);
    option.githubRepo = option.packageJson.repository.url
    .replace((
        /\.git$/
    ), "").split("/").slice(-2);
    template = template.replace((
        /kaizhu256(\.github\.io\/|%252F|\/)/g
    ), option.githubRepo[0] + ("$1"));
    template = template.replace((
        /node-my-app-lite/g
    ), option.githubRepo[1]);
    template = template.replace((
        /\bh1-my-app\b/g
    ), (
        option.packageJson.nameHeroku
        || ("h1-" + option.packageJson.nameLib.replace((
            /_/g
        ), "-"))
    ));
    template = template.replace((
        /my-app-lite/g
    ), option.packageJson.name);
    template = template.replace((
        /my_app/g
    ), option.packageJson.nameLib);
    template = template.replace((
        /\{\{packageJson\.(\S+)\}\}/g
    ), function (ignore, match1) {
        return option.packageJson[match1];
    });
    return template;
};

local.testCase_nop_default = function (option, onError) {
/*
 * this function will test nop's default handling-behavior
 */
    local.nop();
    onError(null, option);
};

local.testMock = function (mockList, onTestCase, onError) {
/*
 * this function will mock the objects in mockList while running the onTestCase
 */
    var onError2;
    onError2 = function (error) {
        // restore mock[0] from mock[2]
        mockList.reverse().forEach(function (mock) {
            Object.keys(mock[2]).forEach(function (key) {
                mock[0][key] = mock[2][key];
            });
        });
        onError(error);
    };
    // suppress console.error and console.log
    if (!(mockList[0] && mockList[0][0] === console)) {
        mockList.unshift([console, {}]);
    }
    local.objectSetDefault(mockList[0][1], {
        error: local.nop,
        log: local.nop
    });
    // mock-objects
    mockList.forEach(function (mock) {
        mock[2] = {};
        // backup mock[0] into mock[2]
        Object.keys(mock[1]).forEach(function (key) {
            mock[2][key] = (
                // ternary-condition
                (
                    typeof process === "object"
                    && process.env === mock[0]
                    && mock[0][key] === undefined
                )
                // handle process.env
                ? ""
                : mock[0][key]
            );
        });
        // override mock[0] with mock[1]
        Object.keys(mock[1]).forEach(function (key) {
            mock[0][key] = mock[1][key];
        });
    });
    // try to call onError with mock-objects
    local.tryCatchOnError(function () {
        // run onTestCase
        onTestCase(onError2);
    }, onError2);
};

local.testReportCreate = function (testReport) {
/*
 * this function will create test-report artifacts
 */
    testReport = local.objectSetDefault(testReport, {
        testPlatformList: []
    });
    // print test-report summary
    console.error("\n" + new Array(56).join("-") + "\n" + testReport.testPlatformList
    .filter(function (testPlatform) {
        // if testPlatform has no tests, then filter it out
        return testPlatform.testCaseList.length;
    })
    .map(function (testPlatform) {
        return (
            "| test-report - " + testPlatform.name + "\n|"
            + ("        " + testPlatform.timeElapsed + " ms     ")
            .slice(-16)
            + ("        " + testPlatform.testsFailed + " failed ")
            .slice(-16)
            + ("        " + testPlatform.testsPassed + " passed ")
            .slice(-16) + "     |\n" + new Array(56).join("-")
        );
    })
    .join("\n") + "\n");
    // create test-report.html
    local.fs.writeFileSync(
        "tmp/build/test-report.html",
        local.testReportMerge(testReport, {})
    );
    // create build.badge.svg
    local.fs.writeFileSync(
        "tmp/build/build.badge.svg",
        local.assetsDict["/assets.buildBadge.template.svg"].replace((
            /0000-00-00\u002000:00:00\u0020UTC\u0020-\u0020master\u0020-\u0020aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/g
        ), (
            new Date().toISOString().slice(0, 19).replace("T", " ")
            + " - " + local.env.CI_BRANCH + " - " + local.env.CI_COMMIT_ID
        ))
    );
    // create test-report.badge.svg
    local.fs.writeFileSync(
        "tmp/build/test-report.badge.svg",
        local.assetsDict["/assets.testReportBadge.template.svg"]
        // edit number of tests failed
        .replace((
            /999/g
        ), testReport.testsFailed)
        // edit badge color
        .replace((
            /d00/g
        ), (
            testReport.testsFailed
            ? "d00"
            : "0d0"
        ))
    );
    console.error(
        "created test-report file "
        + process.cwd() + "/tmp/build/test-report.html\n"
    );
    // if any test failed, then exit with non-zero exit-code
    console.error(
        "\n" + local.env.MODE_BUILD
        + " - " + testReport.testsFailed + " failed tests\n"
    );
    // print failed testCase
    testReport.testPlatformList.forEach(function (testPlatform) {
        testPlatform.testCaseList.forEach(function (testCase) {
            if (testCase.status !== "passed") {
                console.error(JSON.stringify(testCase, null, 4));
            }
        });
    });
    return testReport;
};

local.testReportMerge = function (testReport1, testReport2) {
/*
 * this function will
 * 1. merge testReport2 into testReport1
 * 2. return testReport1 in html-format
 */
    var errorStackList;
    var testCaseNumber;
    var testReport;
    testReport2 = testReport2 || {};
    // 1. merge testReport2 into testReport1
    [testReport1, testReport2].forEach(function (testReport, ii) {
        ii += 1;
        local.objectSetDefault(testReport, {
            date: new Date().toISOString(),
            errorStackList: [],
            testPlatformList: [],
            timeElapsed: 0
        }, 8);
        // security - handle malformed testReport
        local.assertThrow(
            typeof testReport === "object" && testReport,
            ii + " invalid testReport " + typeof testReport
        );
        // validate timeElapsed
        local.assertThrow(
            typeof testReport.timeElapsed === "number",
            ii + " invalid testReport.timeElapsed " + typeof testReport.timeElapsed
        );
        // security - handle malformed testReport.testPlatformList
        testReport.testPlatformList.forEach(function (testPlatform) {
            local.objectSetDefault(testPlatform, {
                name: "undefined",
                testCaseList: [],
                timeElapsed: 0
            }, 8);
            local.assertThrow(
                typeof testPlatform.name === "string",
                ii + " invalid testPlatform.name " + typeof testPlatform.name
            );
            // insert $MODE_BUILD into testPlatform.name
            if (local.env.MODE_BUILD) {
                testPlatform.name = testPlatform.name.replace((
                    /^(browser|node)\b/
                ), local.env.MODE_BUILD + " - $1");
            }
            // validate timeElapsed
            local.assertThrow(
                typeof testPlatform.timeElapsed === "number",
                (
                    ii + " invalid testPlatform.timeElapsed "
                    + typeof testPlatform.timeElapsed
                )
            );
            // security - handle malformed testPlatform.testCaseList
            testPlatform.testCaseList.forEach(function (testCase) {
                local.objectSetDefault(testCase, {
                    errorStack: "",
                    name: "undefined",
                    timeElapsed: 0
                }, 8);
                local.assertThrow(
                    typeof testCase.errorStack === "string",
                    ii + " invalid testCase.errorStack " + typeof testCase.errorStack
                );
                local.assertThrow(
                    typeof testCase.name === "string",
                    ii + " invalid testCase.name " + typeof testCase.name
                );
                // validate timeElapsed
                local.assertThrow(
                    typeof testCase.timeElapsed === "number",
                    ii + " invalid testCase.timeElapsed " + typeof testCase.timeElapsed
                );
            });
        });
    });
    // merge testReport2.testPlatformList into testReport1.testPlatformList
    testReport2.testPlatformList.forEach(function (testPlatform2) {
        // add testPlatform2 to testReport1.testPlatformList
        testReport1.testPlatformList.push(testPlatform2);
    });
    testReport = testReport1;
    testReport.testsFailed = 0;
    testReport.testsPassed = 0;
    testReport.testsPending = 0;
    testReport.testPlatformList.forEach(function (testPlatform) {
        testPlatform.testsFailed = 0;
        testPlatform.testsPassed = 0;
        testPlatform.testsPending = 0;
        testPlatform.testCaseList.forEach(function (testCase) {
            switch (testCase.status) {
            // update failed tests
            case "failed":
                testPlatform.testsFailed += 1;
                testReport.testsFailed += 1;
                break;
            // update passed tests
            case "passed":
                testPlatform.testsPassed += 1;
                testReport.testsPassed += 1;
                break;
            // update pending tests
            default:
                testPlatform.testsPending += 1;
                testReport.testsPending += 1;
            }
        });
        // update testPlatform.status
        testPlatform.status = (
            testPlatform.testsFailed
            ? "failed"
            : testPlatform.testsPending
            ? "pending"
            : "passed"
        );
        // sort testCaseList by status and name
        testPlatform.testCaseList.sort(function (aa, bb) {
            return (
                aa.status.replace("passed", "z") + aa.name
                > bb.status.replace("passed", "z") + bb.name
                ? 1
                : -1
            );
        });
    });
    // sort testPlatformList by status and name
    testReport.testPlatformList.sort(function (aa, bb) {
        return (
            aa.status.replace("passed", "z") + aa.name
            > bb.status.replace("passed", "z") + bb.name
            ? 1
            : -1
        );
    });
    // stop testReport timer
    if (!testReport.testsPending) {
        local.timeElapsedPoll(testReport);
    }
    // 2. return testReport1 in html-format
    // json-copy testReport that will be modified for html templating
    testReport = local.jsonCopy(testReport1);
    // update timeElapsed
    local.timeElapsedPoll(testReport);
    testReport.testPlatformList.forEach(function (testPlatform) {
        // update testPlatform.timeElapsed
        local.timeElapsedPoll(testPlatform);
        testPlatform.testCaseList.forEach(function (testCase) {
            if (!testCase.isDone) {
                local.timeElapsedPoll(testCase);
            }
            testPlatform.timeElapsed = Math.max(
                testPlatform.timeElapsed,
                testCase.timeElapsed
            );
        });
        // update testReport.timeElapsed with testPlatform.timeElapsed
        testReport.timeElapsed = Math.max(
            testReport.timeElapsed,
            testPlatform.timeElapsed
        );
    });
    // create html test-report
    testCaseNumber = 0;
    return local.templateRender(
        local.assetsDict["/assets.testReport.template.html"],
        local.objectSetOverride(testReport, {
            env: local.env,
            // map testPlatformList
            testPlatformList: testReport.testPlatformList
            .filter(function (testPlatform) {
                // if testPlatform has no tests, then filter it out
                return testPlatform.testCaseList.length;
            })
            .map(function (testPlatform, ii) {
                errorStackList = [];
                return local.objectSetOverride(testPlatform, {
                    errorStackList: errorStackList,
                    name: testPlatform.name,
                    screenshot: testPlatform.screenshot,
                    // map testCaseList
                    testCaseList: testPlatform.testCaseList.map(function (testCase) {
                        testCaseNumber += 1;
                        if (testCase.errorStack) {
                            errorStackList.push({
                                errorStack: (
                                    testCaseNumber + ". " + testCase.name
                                    + "\n" + testCase.errorStack
                                )
                            });
                        }
                        return local.objectSetOverride(testCase, {
                            testCaseNumber: testCaseNumber,
                            testReportTestStatusClass: (
                                "test"
                                + testCase.status[0].toUpperCase()
                                + testCase.status.slice(1)
                            )
                        }, 8);
                    }),
                    preClass: (
                        errorStackList.length
                        ? ""
                        : "displayNone"
                    ),
                    testPlatformNumber: ii + 1
                });
            }, 8),
            testStatusClass: (
                testReport.testsFailed
                ? "testFailed"
                : "testPassed"
            )
        }, 8)
    );
};

local.testRunDefault = function (option) {
/*
 * this function will run the tests in testPlatform.testCaseList
 */
    var processExit;
    var testPlatform;
    var testReport;
    var testReportDiv1;
    var timerInterval;
    // run-server
    if (!local.isBrowser) {
        local.testRunServer(option);
    }
    globalThis.utility2_modeTest = Number(
        globalThis.utility2_modeTest
        || option.modeTest
        || local.modeTest
        || local.env.npm_config_mode_test
    );
    switch (globalThis.utility2_modeTest) {
    // init-pre
    case 1:
        globalThis.utility2_modeTest += 1;
        // click #testRunButton1
        if (local.isBrowser && document.querySelector(
            "#testRunButton1"
        )) {
            document.querySelector(
                "#testRunButton1"
            ).click();
        }
        local.testRunDefault(option);
        return;
    // init-after
    case 2:
        globalThis.utility2_modeTest += 1;
        // reset db
        if (local.db && typeof local.db.dbReset === "function") {
            local.db.dbReset(
                globalThis.utility2_dbSeedList,
                local.onErrorThrow
            );
        }
        globalThis.utility2_onReadyAfter(function () {
            local.testRunDefault(option);
        });
        return;
    // test-run
    default:
        // test-ignore
        if (
            globalThis.utility2_onReadyBefore.counter
            || !globalThis.utility2_modeTest
            || globalThis.utility2_modeTest > 3
        ) {
            return;
        }
        // test-run
        globalThis.utility2_modeTest += 1;
    }
    // visual notification - testRun
    local.ajaxProgressUpdate();
    // mock serverLog
    local._testRunConsoleError = local._testRunConsoleError || console.error;
    console.error = function (arg0) {
    /*
     * this function will ignore serverLog-messages during test-run
     */
        /* istanbul ignore next */
        if (!globalThis.__coverage__ && !(
            /^serverLog\u0020-\u0020\{/
        ).test(arg0)) {
            local._testRunConsoleError.apply(console, arguments); // jslint ignore:line
        }
    };
    if (!local.isBrowser) {
        // mock proces.exit
        processExit = process.exit;
        process.exit = local.nop;
    }
    // init modeTestCase
    local.modeTestCase = (
        local.modeTestCase
        || local.env.npm_config_mode_test_case || ""
    );
    // init testReport
    testReport = globalThis.utility2_testReport;
    // init testReport timer
    local.timeElapsedStart(testReport);
    // init testPlatform
    testPlatform = testReport.testPlatformList[0];
    // init testPlatform timer
    local.timeElapsedStart(testPlatform);
    // reset testPlatform.testCaseList
    testPlatform.testCaseList.length = 0;
    // add tests into testPlatform.testCaseList
    Object.keys(option).forEach(function (key) {
        // add testCase option[key] to testPlatform.testCaseList
        if (
            typeof option[key] === "function" && (
                local.modeTestCase
                ? local.modeTestCase.split(
                    /[,\s]/g
                ).indexOf(key) >= 0
                : key.indexOf("testCase_") === 0
            )
        ) {
            testPlatform.testCaseList.push({
                isBrowser: local.isBrowser,
                name: key,
                status: "pending",
                onTestCase: option[key]
            });
        }
    });
    // visual notification - update test-progress until isDone
    // init testReportDiv1 element
    if (local.isBrowser) {
        testReportDiv1 = document.querySelector(
            "#testReportDiv1"
        );
    }
    testReportDiv1 = testReportDiv1 || {
        style: {}
    };
    local.uiAnimateSlideDown(testReportDiv1);
    testReportDiv1.innerHTML = local.testReportMerge(testReport, {});
    // update test-report status every 1000 ms until isDone
    timerInterval = setInterval(function () {
        // update testPlatform.timeElapsed
        local.timeElapsedPoll(testPlatform);
        // update testReportDiv1 in browser
        testReportDiv1.innerHTML = local.testReportMerge(testReport, {});
        if (!testReport.testsPending) {
            // cleanup timerInterval
            clearInterval(timerInterval);
        }
        // notify of remaining tests
        if (testPlatform.timeElapsed % 5000 < 1000) {
            local._testRunConsoleError(
                "testRunDefault - "
                + testPlatform.timeElapsed + " ms - testCase pending - "
                + testPlatform.testCaseList
                .filter(function (testCase) {
                    return testCase.status === "pending";
                })
                .slice(0, 4)
                .map(function (testCase) {
                    return testCase.name;
                }).join(", ") + " ..."
            );
        }
    }, 1000);
    // shallow-copy testPlatform.testCaseList to prevent side-effects
    // from in-place sort from testReportMerge
    local.onParallelList({
        list: testPlatform.testCaseList.slice(),
        rateLimit: Infinity
    }, function (testCase, onParallel) {
        var onError;
        var timerTimeout;
        onError = function (error) {
            // update testPlatform.timeElapsed
            local.timeElapsedPoll(testPlatform);
            // cleanup timerTimeout
            clearTimeout(timerTimeout);
            // if testCase isDone,
            // then fail testCase with error for ending again
            if (testCase.isDone) {
                error = error || new Error(
                    "callback in testCase "
                    + testCase.name + " called multiple times"
                );
            }
            // if error occurred, then fail testCase
            if (error) {
                // restore console.log
                console.error = local._testRunConsoleError;
                testCase.status = "failed";
                local._testRunConsoleError(
                    "\ntestRunDefault - "
                    + testPlatform.timeElapsed + " ms - testCase failed - "
                    + testCase.name + "\n" + error.message + "\n" + error.stack
                );
                testCase.errorStack = (
                    testCase.errorStack
                    || error.message + "\n" + error.stack
                );
                // validate errorStack is non-empty
                local.assertThrow(
                    testCase.errorStack,
                    "invalid errorStack " + testCase.errorStack
                );
            }
            // if tests isDone, then do nothing
            if (testCase.isDone) {
                return;
            }
            testCase.isDone = true;
            if (testCase.status === "pending") {
                testCase.status = "passed";
            }
            // stop testCase timer
            local.timeElapsedPoll(testCase);
            local._testRunConsoleError(
                "testRunDefault - "
                + testPlatform.timeElapsed + " ms - [" + (
                    local.isBrowser
                    ? "browser"
                    : "node"
                ) + " test-case "
                + testPlatform.testCaseList.filter(function (testCase) {
                    return testCase.isDone;
                }).length + " of " + testPlatform.testCaseList.length + " "
                + testCase.status + "] - " + testCase.name
            );
            // if all testCase.isDone, then create test-report
            onParallel();
        };
        testCase = testCase.element;
        // init timerTimeout
        timerTimeout = local.onTimeout(
            onError,
            local.timeoutDefault,
            testCase.name
        );
        // increment number of tests remaining
        onParallel.counter += 1;
        // try to run testCase
        local.tryCatchOnError(function () {
            // start testCase timer
            local.timeElapsedStart(testCase);
            testCase.onTestCase(null, onError);
        }, onError);
    }, function () {
    /*
     * this function will create the test-report after all tests isDone
     */
        // update testPlatform.timeElapsed
        local.timeElapsedPoll(testPlatform);
        globalThis.utility2_modeTest = 1;
        local.ajaxProgressUpdate();
        // init domOnEventWindowOnloadTimeElapsed
        if (globalThis.domOnEventWindowOnloadTimeElapsed < 0x10000000000) {
            testPlatform.domOnEventWindowOnloadTimeElapsed = (
                globalThis.domOnEventWindowOnloadTimeElapsed
            );
        }
        // finalize testReport
        local.testReportMerge(testReport, {});
        // create test-report.json
        delete testReport.coverage;
        local.fsWriteFileWithMkdirpSync(
            local.env.npm_config_dir_build + "/test-report.json",
            JSON.stringify(testReport, null, 4)
        );
        setTimeout(function () {
            // restore console.log
            console.error = local._testRunConsoleError;
            // restore process.exit
            if (processExit) {
                process.exit = processExit;
            }
            // reset utility2_modeTest
            globalThis.utility2_modeTest = 0;
            // exit with number of tests failed
            local.exit(testReport.testsFailed, testReport);
        // coverage-hack - wait 1000 ms for timerInterval
        }, 1000);
    });
};

local.testRunServer = function (option) {
/*
 * this function will
 * 1. create server from local.middlewareList
 * 2. start server on local.env.PORT
 * 3. run tests
 */
    if (globalThis.utility2_serverHttp1) {
        return;
    }
    globalThis.utility2_onReadyBefore.counter += 1;
    // 1. create server from local.middlewareList
    local.middlewareList = local.middlewareList || [
        local.middlewareInit,
        local.middlewareForwardProxy,
        local.middlewareAssetsCached,
        local.middlewareJsonpStateInit,
        local.middlewareFileServer
    ];
    local.serverLocalRequestHandler = function (request, response) {
        var that;
        that = {};
        local.onNext(that, function (error) {
            if (error || that.modeNext >= local.middlewareList.length) {
                local.middlewareError(error, request, response);
                return;
            }
            // recurse with next middleware in middlewareList
            local.middlewareList[that.modeNext](request, response, that.onNext);
        });
        that.modeNext = -1;
        that.onNext();
    };
    globalThis.utility2_serverHttp1 = local.http.createServer(
        local.serverLocalRequestHandler
    );
    // 2. start server on local.env.PORT
    console.error("server listening on http-port " + local.env.PORT);
    globalThis.utility2_onReadyBefore.counter += 1;
    globalThis.utility2_serverHttp1.listen(
        local.env.PORT,
        globalThis.utility2_onReadyBefore
    );
    // 3. run tests
    local.testRunDefault(option);
    globalThis.utility2_onReadyBefore();
};

local.throwError = function () {
/*
 * this function will throw a new error
 */
    throw new Error();
};

local.timeElapsedPoll = function (option) {
/*
 * this function will poll option.timeElapsed
 */
    option = local.timeElapsedStart(option);
    option.timeElapsed = Date.now() - option.timeStart;
    return option;
};

local.timeElapsedStart = function (option, timeStart) {
/*
 * this function will start option.timeElapsed
 */
    option = option || {};
    option.timeStart = timeStart || option.timeStart || Date.now();
    return option;
};

local.tryCatchOnError = function (fnc, onError) {
/*
 * this function will run the fnc in a tryCatch block,
 * else call onError with the errorCaught
 */
    var result;
    // validate onError
    local.assertThrow(typeof onError === "function", typeof onError);
    try {
        // reset errorCaught
        local._debugTryCatchError = null;
        result = fnc();
        local._debugTryCatchError = null;
        return result;
    } catch (errorCaught) {
        // debug errorCaught
        local._debugTryCatchError = errorCaught;
        return onError(errorCaught);
    }
};

local.uiAnimateShake = function (element, onError) {
/*
 * this function will shake the dom-element
 */
    if (!element || element.classList.contains("uiAnimateShake")) {
        local.setTimeoutOnError(onError);
        return;
    }
    element.classList.add("uiAnimateShake");
    setTimeout(function () {
        element.classList.remove("uiAnimateShake");
        local.setTimeoutOnError(onError);
    }, 500);
};

local.uiAnimateShakeIfError = function (error, element, onError) {
/*
 * this function will shake the dom-element if error occurred
 */
    var hasError;
    if (!element) {
        local.setTimeoutOnError(onError);
        return;
    }
    hasError = element.classList.contains("hasError");
    if (error && !hasError) {
        element.classList.add("hasError");
        local.uiAnimateShake(element, onError);
        return;
    }
    if (!error && hasError) {
        element.classList.remove("hasError");
    }
    local.setTimeoutOnError(onError);
};

local.uiAnimateSlideAccordian = function (element, elementList, onError) {
/*
 * this function will slideDown the element,
 * and slideUp all other elements in elementList
 */
    elementList.forEach(function (element2) {
        if (element2 !== element) {
            local.uiAnimateSlideUp(element2);
        }
    });
    setTimeout(function () {
        local.uiAnimateSlideDown(element, onError);
    }, 250);
};

local.uiAnimateSlideDown = function (element, onError) {
/*
 * this function will slideDown the dom-element
 */
    onError = onError || local.nop;
    if (!(
        element
        && element.style && element.style.maxHeight !== "100%"
        && element.classList && element.classList.contains("uiAnimateSlide")
    )) {
        onError();
        return;
    }
    element.style.borderBottom = "";
    element.style.borderTop = "";
    element.style.marginBottom = "";
    element.style.marginTop = "";
    element.style.maxHeight = 1.5 * globalThis.innerHeight + "px";
    element.style.paddingBottom = "";
    element.style.paddingTop = "";
    setTimeout(function () {
        element.style.maxHeight = "100%";
        onError();
    }, 250);
};

local.uiAnimateSlideUp = function (element, onError) {
/*
 * this function will slideUp the dom-element
 */
    if (!(
        element
        && element.style && element.style.maxHeight !== "0px"
        && element.classList && element.classList.contains("uiAnimateSlide")
    )) {
        local.setTimeoutOnError(onError);
        return;
    }
    element.style.borderBottom = "0";
    element.style.borderTop = "0";
    element.style.marginBottom = "0";
    element.style.marginTop = "0";
    element.style.maxHeight = "0";
    element.style.paddingBottom = "0";
    element.style.paddingTop = "0";
    local.setTimeoutOnError(onError, 250);
};

local.urlJoin = function (aa, bb) {
/*
 * this function will if bb is relative, url-join aa with bb
 */
    // bb is absolute-url
    if ((
        /^\w+?:\/\//
    ).test(bb)) {
        return bb;
    }
    // bb is absolute-url without protocol
    if (bb.slice(0, 2) === "//") {
        return aa.split("/")[0] + bb;
    }
    // bb is absolute-url without host
    if (bb[0] === "/") {
        return aa.split("/").slice(0, 3).join("/") + bb;
    }
    // bb is relative-url
    if (aa.split("/").length < 4) {
        aa += "/";
    }
    return aa.replace((
        /[?#].*?$/
    ), "").replace((
        /[^\/]*?$/
    ), "") + bb;
};

local.urlParse = function (url) {
/*
 * this function will parse the url according to the above spec, plus a query param
 * https://developer.mozilla.org/en-US/docs/Web/API/URL
 */
    var urlParsed;
    urlParsed = {};
    // try to parse the url
    local.tryCatchOnError(function () {
        // resolve host-less url
        if (local.isBrowser) {
            local.serverLocalHost = (
                local.serverLocalHost
                || location.protocol + "//" + location.host
            );
            // resolve absolute path
            if (url[0] === "/") {
                url = local.serverLocalHost + url;
            // resolve relative path
            } else if (!(
                /^\w+?:\/\//
            ).test(url)) {
                url = (
                    local.serverLocalHost
                    + location.pathname.replace((
                        /\/[^\/]*?$/
                    ), "") + "/" + url
                );
            }
            urlParsed = new globalThis.URL(url);
            urlParsed.path = "/" + urlParsed.href
            .split("/")
            .slice(3)
            .join("/")
            .split("#")[0];
        } else {
            local.env.PORT = local.env.PORT || "8081";
            local.serverLocalHost = (
                local.serverLocalHost
                || ("http://127.0.0.1:" + local.env.PORT)
            );
            // resolve absolute path
            if (url[0] === "/") {
                url = local.serverLocalHost + url;
            // resolve relative path
            } else if (!(
                /^\w+?:\/\//
            ).test(url)) {
                url = local.serverLocalHost + "/" + url;
            }
            urlParsed = local.url.parse(url);
        }
        // init query
        urlParsed.query = {};
        (urlParsed.search || "").slice(1).replace((
            /[^&]+/g
        ), function (item) {
            item = item.split("=");
            item[0] = decodeURIComponent(item[0]);
            item[1] = decodeURIComponent(item.slice(1).join("="));
            // parse repeating query-param as an array
            if (urlParsed.query[item[0]]) {
                if (!Array.isArray(urlParsed.query[item[0]])) {
                    urlParsed.query[item[0]] = [urlParsed.query[item[0]]];
                }
                urlParsed.query[item[0]].push(item[1]);
            } else {
                urlParsed.query[item[0]] = item[1];
            }
        });
        urlParsed.basename = urlParsed.pathname.replace((
            /^.*\//
        ), "");
    }, local.nop);
    // https://developer.mozilla.org/en/docs/Web/API/URL#Properties
    return {
        basename: urlParsed.basename || "",
        hash: urlParsed.hash || "",
        host: urlParsed.host || "",
        hostname: urlParsed.hostname || "",
        href: urlParsed.href || "",
        path: urlParsed.path || "",
        pathname: urlParsed.pathname || "",
        port: urlParsed.port || "",
        protocol: urlParsed.protocol || "",
        query: urlParsed.query || {},
        search: urlParsed.search || ""
    };
};

local.uuid4Create = function () {
/*
 * this function will create a random uuid,
 * with format 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'
 */
    // code derived from http://jsperf.com/uuid4
    var id;
    var ii;
    id = "";
    ii = 0;
    while (ii < 32) {
        switch (ii) {
        case 8:
        case 20:
            id += "-";
            // coerce to finite integer
            id += ((Math.random() * 16) | 0).toString(16);
            break;
        case 12:
            id += "-";
            id += "4";
            break;
        case 16:
            id += "-";
            id += ((Math.random() * 4) | 8).toString(16);
            break;
        default:
            // coerce to finite integer
            id += ((Math.random() * 16) | 0).toString(16);
        }
        ii += 1;
    }
    return id;
};
}());



// run shared js-env code - init-after
(function () {
local.ajaxProgressCounter = 0;
local.ajaxProgressState = 0;
local.apidocCreate = local.apidoc.apidocCreate;
local.browserTest({
modeTestReportCreate: true
});
local.cacheDict = {};
local.contentTypeDict = {
    // application
    ".js": "application/javascript; charset=utf-8",
    ".json": "application/json; charset=utf-8",
    ".pdf": "application/pdf",
    ".xml": "application/xml; charset=utf-8",
    // image
    ".bmp": "image/bmp",
    ".gif": "image/gif",
    ".jpeg": "image/jpeg",
    ".jpg": "image/jpeg",
    ".png": "image/png",
    ".svg": "image/svg+xml; charset=utf-8",
    // text
    ".css": "text/css; charset=utf-8",
    ".htm": "text/html; charset=utf-8",
    ".html": "text/html; charset=utf-8",
    ".md": "text/markdown; charset=utf-8",
    ".txt": "text/plain; charset=utf-8"
};
// init env
local.env = (
    local.isBrowser
    ? {}
    : process.env
);
local.objectSetDefault(local.env, {
    npm_package_nameLib: (local.env.npm_package_name || "").replace((
        /\W/g
    ), "_")
});
local.objectSetDefault(local.env, {
    npm_package_description: "the greatest app in the world!",
    npm_package_name: "my-app-lite",
    npm_package_nameLib: "my_app",
    npm_package_version: "0.0.1"
});
local.errorDefault = new Error("default error");
globalThis.utility2_onReadyAfter = globalThis.utility2_onReadyAfter || function (
    onError
) {
/*
 * this function will call onError when utility2_onReadyBefore.counter === 0
 */
    globalThis.utility2_onReadyBefore.counter += 1;
    // visual notification - utility2_onReadyAfter
    local.ajaxProgressUpdate();
    local.taskCreate({
        key: "globalThis.utility2_onReadyAfter"
    }, null, onError);
    setTimeout(globalThis.utility2_onReadyBefore);
    return onError;
};
globalThis.utility2_onReadyBefore = (
    globalThis.utility2_onReadyBefore
    || local.onParallel(function (error) {
    /*
     * this function will keep track of utility2_onReadyBefore.counter
     */
        local.taskCreate({
            key: "globalThis.utility2_onReadyAfter"
        }, function (onError) {
            onError(error);
        }, local.onErrorThrow);
    })
);
local.istanbulCoverageMerge = local.istanbul.coverageMerge || local.identity;
// cbranch-no cstat-no fstat-no missing-if-branch
local.istanbulCoverageReportCreate = local.istanbul.coverageReportCreate || local.identity;
local.istanbulInstrumentInPackage = local.istanbul.instrumentInPackage || local.identity;
local.istanbulInstrumentSync = local.istanbul.instrumentSync || local.identity;
local.jslintAndPrint = local.jslint.jslintAndPrint || local.identity;
local.regexpCharsetEncodeUri = (
    /\w!#\$%&'\(\)\*\+,\-\.\/:;=\?@~/
);
local.regexpCharsetEncodeUriComponent = (
    /\w!%'\(\)\*\-\.~/
);
// https://github.com/chjj/marked/blob/v0.3.7/lib/marked.js#L499
local.regexpMatchUrl = (
    /\bhttps?:\/\/[^\s<]+[^<.,:;"')\]\s]/
);
// https://www.w3.org/TR/html5/sec-forms.html#email-state-typeemail
local.regexpValidateEmail = (
    /^[a-zA-Z0-9.!#$%&'*+\/=?\^_`{|}~\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?)*$/
);
// https://en.wikipedia.org/wiki/E.164
local.regexpValidatePhone = (
    /^(?:\+\d{1,3}[\u0020\-]?)?(?:\(\d{1,4}\)[\u0020\-]?)?\d[\d\u0020\-]{7,17}$/
);
local.regexpValidateUuid = (
    /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/
);
local.stringCharsetAscii = (
    "\u0000\u0001\u0002\u0003\u0004\u0005\u0006\u0007\b\t\n\u000b\f\r\u000e\u000f"
    + "\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017"
    + "\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f"
    + " !\"#$%&'()*+,-./0123456789:;<=>?"
    + "@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_"
    + "`abcdefghijklmnopqrstuvwxyz{|}~\u007f"
);
local.stringCharsetEncodeUri = (
    "!#$%&'()*+,-./"
    + "0123456789:;=?@ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~"
);
local.stringCharsetEncodeUriComponent = (
    "!%'()*-."
    + "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~"
);
local.stringHelloEmoji = "hello \ud83d\ude01\n";
// mock swgg
local.swgg = local.swgg || {
    apiUpdate: local.nop,
    normalizeSwaggerJson: local.nop,
    swaggerValidate: local.nop
};
local.taskOnTaskDict = {};
// init serverLocalHost
local.urlParse("");
// init timeoutDefault
if (local.isBrowser) {
    location.search.replace((
        /\b(NODE_ENV|mode[A-Z]\w+|timeExit|timeoutDefault)=([^&#]+)/g
    ), function (match0, key, value) {
        local[key] = decodeURIComponent(value);
        local.env[key] = local[key];
        // try to JSON.parse the string
        local.tryCatchOnError(function () {
            local[key] = JSON.parse(match0);
        }, local.nop);
    });
} else {
    local.timeoutDefault = local.env.npm_config_timeout_default;
}
// init timeExit
local.timeExit = (
    Number(local.env.npm_config_time_exit) || local.timeExit
    || Number(Date.now() + Number(local.env.npm_config_timeout_exit))
);
if (local.timeExit) {
    local.timeoutDefault = local.timeExit - Date.now();
    setTimeout(local.exit, local.timeoutDefault);
}
// re-init timeoutDefault
local.timeoutDefault = Number(local.timeoutDefault) || 30000;
globalThis.utility2_onReadyAfter(local.nop);
// init uglify
local.uglify = local.uglifyjs.uglify || local.identity;
}());



// run browser js-env code - init-after
(function () {
if (!local.isBrowser) {
    return;
}
// require modules
local.http = local._http;
local.https = local._http;
}());



/* istanbul ignore next */
// run node js-env code - init-after
(function () {
if (local.isBrowser) {
    return;
}
local.Module = require("module");
// init env
local.objectAssignDefault(local.env, {
    npm_config_dir_build: process.cwd() + "/tmp/build",
    npm_config_dir_tmp: process.cwd() + "/tmp"
});
// merge previous test-report
if (local.env.npm_config_file_test_report_merge) {
    local.testReportMerge(
        globalThis.utility2_testReport,
        local.fsReadFileOrEmptyStringSync(
            local.env.npm_config_file_test_report_merge,
            "json"
        )
    );
    if (process.argv[2] !== "--help") {
        console.error(
            "\n" + local.env.MODE_BUILD + " - merged test-report from file "
            + local.env.npm_config_file_test_report_merge
        );
    }
}
// init cli
if (module === require.main && (!globalThis.utility2_rollup || (
    process.argv[2]
    && local.cliDict[process.argv[2]]
    && process.argv[2].indexOf("utility2.") === 0
))) {
    local.cliRun({}, local.nop);
    if (local.cliDict[process.argv[2]]) {
        local.cliDict[process.argv[2]]();
        switch (process.argv[2]) {
        case "--interactive":
        case "-i":
        case "utility2.swaggerValidateFile":
        case "utility2.start":
            break;
        default:
            return;
        }
    }
}
/* validateLineSortedReset */
// override assets
[
    "/assets.index.template.html",
    "/assets.swgg.swagger.json",
    "/assets.swgg.swagger.server.json"
].forEach(function (file) {
    local.assetsDict[file] = local.assetsDict[file] || "";
    if (process.argv[2] !== "--help" && local.fs.existsSync(__dirname + file)) {
        console.error("override assets " + __dirname + file);
        local.assetsDict[file] = local.fs.readFileSync(__dirname + file, "utf8");
    }
});
if (globalThis.utility2_rollup) {
    local.assetsDict["/assets.utility2.rollup.js"] = (
        local.fs.readFileSync(
            __filename,
            "utf8"
        ).split("\n/* script-end /assets.utility2.rollup.end.js */")[0]
        + "\n/* script-end /assets.utility2.rollup.end.js */\n"
    );
    return;
}
// init assets
[
    "/assets.utility2.example.js",
    "/assets.utility2.html",
    "/assets.utility2.test.js",
    "lib.apidoc.js",
    "lib.db.js",
    "lib.github_crud.js",
    "lib.istanbul.js",
    "lib.jslint.js",
    "lib.marked.js",
    "lib.sjcl.js",
    "lib.swgg.js",
    "lib.uglifyjs.js",
    "lib.utility2.js",
    "test.js"
].forEach(function (key) {
    switch (key) {
    case "/assets.utility2.example.js":
        local.assetsDict[key] = "";
        local.tryCatchOnError(function () {
            local.fs.readFileSync(
                __dirname + "/README.md",
                "utf8"
            ).replace((
                /```javascript([\S\s]*?)```/
            ), function (ignore, match1) {
                local.assetsDict[key] = match1.trim() + "\n";
            });
        }, local.nop);
        break;
    case "/assets.utility2.html":
        local.assetsDict[key] = "";
        local.tryCatchOnError(function () {
            local.fs.readFileSync(__dirname + "/README.md", "utf8").replace((
                /<!doctype\u0020html>[\S\s]*?<\/html>\\n\\\n/
            ), function (match0) {
                local.assetsDict[key] = (
                    local.templateRender(match0
                    .replace((
                        /\\n\\$/gm
                    ), "")
                    .replace(
                        "<script src=\"assets.app.js\"></script>\n",
                        (
                            "<script "
                            + "src=\"assets.utility2.rollup.js\"></script>\n"
                            + "<script "
                            + "src=\"assets.utility2.example.js\"></script>\n"
                            + "<script "
                            + "src=\"assets.utility2.test.js\"></script>\n"
                        )
                    )
                    .replace("assets.example.js", "assets.utility2.example.js")
                    .replace("assets.test.js", "assets.utility2.test.js")
                    .replace((
                        /npm_package_/g
                    ), "")
                    // uncomment utility2-comment
                    .replace((
                        /<!--\u0020utility2-comment\b([\S\s]*?)\butility2-comment\u0020-->/g
                    ), "$1"), {
                        env: local.objectSetDefault({
                            version: "0.0.1"
                        }, require(__dirname + "/package.json")),
                        isRollup: true
                    })
                );
            });
        }, local.nop);
        break;
    case "/assets.utility2.test.js":
        local.assetsDict[key] = local.fsReadFileOrEmptyStringSync(
            __dirname + "/test.js",
            "utf8"
        );
        break;
    case "lib.swgg.js":
    case "lib.utility2.js":
        key = key.replace("lib.", "");
        local.assetsDict["/assets." + key] = local.fsReadFileOrEmptyStringSync(
            __dirname + "/lib." + key,
            "utf8"
        ).replace((
            /^#!\//
        ), "// ");
        break;
    default:
        local.assetsDict["/assets.utility2." + key] = (
            local.fsReadFileOrEmptyStringSync(
                __dirname + "/" + key,
                "utf8"
            ).replace((
                /^#!\//
            ), "// ")
        );
    }
});
local.assetsDict["/assets.utility2.rollup.js"] = [
    "header",
    "/assets.utility2.rollup.begin.js",
    "lib.apidoc.js",
    "lib.db.js",
    "lib.github_crud.js",
    "lib.istanbul.js",
    "lib.jslint.js",
    "lib.marked.js",
    "lib.sjcl.js",
    "lib.uglifyjs.js",
    "lib.utility2.js",
    "lib.swgg.js",
    "/assets.utility2.example.js",
    "/assets.utility2.html",
    "/assets.utility2.test.js",
    "/assets.utility2.rollup.end.js"
].map(function (key) {
    var script;
    switch (key) {
    case "/assets.utility2.example.js":
    case "/assets.utility2.html":
    case "/assets.utility2.test.js":
        // handle large string-replace
        script = local.assetsDict["/assets.utility2.rollup.content.js"]
        .split("/* utility2.rollup.js content */");
        script.splice(1, 0, (
            "local.assetsDict[\"" + key + "\"] = "
            + JSON.stringify(local.assetsDict[key])
        ).replace((
            /\\\\/g
        ), "\u0000").replace((
            /\\n/g
        ), "\\n\\\n").replace((
            /\u0000/g
        ), "\\\\"));
        script = script.join("");
        script += "\n";
        break;
    case "/assets.utility2.rollup.begin.js":
    case "/assets.utility2.rollup.end.js":
        script = local.assetsDict[key];
        break;
    case "header":
        return (
            "/* this rollup was created with utility2 "
            + "(https://github.com/kaizhu256/node-utility2) */\n"
        );
    case "lib.swgg.js":
    case "lib.utility2.js":
        key = "/assets." + key.replace("lib.", "");
        script = local.assetsDict[key];
        break;
    default:
        key = "/assets.utility2." + key;
        script = local.assetsDict[key];
    }
    return (
        "/* script-begin " + key + " */\n"
        + script.trim()
        + "\n/* script-end " + key + " */\n"
    );
}).join("\n\n\n");
// init lib dependents
[
    "swgg"
].forEach(function (lib) {
    var file;
    file = __dirname + "/lib." + lib + ".js";
    if (local.fs.existsSync(file)) {
        local[lib] = require(file);
    }
});
}());



}());
/* script-end /assets.utility2.js */



/* script-begin /assets.swgg.js */
// usr/bin/env node
/*
 * lib.swgg.js (2018.12.11)
 * https://github.com/kaizhu256/node-swgg
 * this zero-dependency package will run a virtual swagger-ui server with persistent-storage in the browser, that your webapp can use (in-place of a real backend), with a working web-demo
 *
 */



/* istanbul instrument in package swgg */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



/* istanbul ignore next */
// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    // || globalThis.utility2_rollup_old
    // || require("./assets.utility2.rollup.js")
    || globalThis.globalLocal
);
// init exports
if (local.isBrowser) {
    globalThis.utility2_swgg = local;
} else {
    module.exports = local;
    module.exports.__dirname = __dirname;
}
// init lib main
local.swgg = local;



/* validateLineSortedReset */
// init lib utility2
local.utility2 = globalThis.utility2_rollup || (
    local.isBrowser
    ? globalThis.utility2
    : (function () {
        try {
            return require("./lib.utility2.js");
        } catch (ignore) {
            return require("./assets.utility2.rollup.js");
        }
    }())
);
local.utility2.objectSetDefault(local, local.utility2);
// init lib swgg
globalThis.swgg = local;
local.utility2.swgg = local;
/* validateLineSortedReset */
// init assets and templates
// https://github.com/json-schema-org/json-schema-org.github.io/blob/eb4805e94c3e27932352344767d19cc4c3c3381c/draft-04/schema
/* jslint ignore:start */
// curl -Ls https://raw.githubusercontent.com/json-schema-org/json-schema-org.github.io/eb4805e94c3e27932352344767d19cc4c3c3381c/draft-04/schema > /tmp/aa.json; node -e "console.log(JSON.stringify(require('/tmp/aa.json')));"
local.assetsDict["/assets.swgg.json-schema.json"] = JSON.stringify(
{"id":"http://json-schema.org/draft-04/schema#","$schema":"http://json-schema.org/draft-04/schema#","description":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"positiveInteger":{"type":"integer","minimum":0},"positiveIntegerDefault0":{"allOf":[{"$ref":"#/definitions/positiveInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"minItems":1,"uniqueItems":true}},"type":"object","properties":{"id":{"type":"string","format":"uri"},"$schema":{"type":"string","format":"uri"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"multipleOf":{"type":"number","minimum":0,"exclusiveMinimum":true},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"boolean","default":false},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"boolean","default":false},"maxLength":{"$ref":"#/definitions/positiveInteger"},"minLength":{"$ref":"#/definitions/positiveIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/positiveInteger"},"minItems":{"$ref":"#/definitions/positiveIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"maxProperties":{"$ref":"#/definitions/positiveInteger"},"minProperties":{"$ref":"#/definitions/positiveIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"dependencies":{"exclusiveMaximum":["maximum"],"exclusiveMinimum":["minimum"]},"default":{}}
);



// https://github.com/OAI/OpenAPI-Specification/blob/3.0.0/schemas/v2.0/schema.json
// curl -Ls https://raw.githubusercontent.com/OAI/OpenAPI-Specification/3.0.0/schemas/v2.0/schema.json > /tmp/aa.json; node -e "console.log(JSON.stringify(require('/tmp/aa.json')));"
local.assetsDict["/assets.swgg.schema.json"] = JSON.stringify(
{"title":"A JSON Schema for Swagger 2.0 API.","id":"http://swagger.io/v2/schema.json#","$schema":"http://json-schema.org/draft-04/schema#","type":"object","required":["swagger","info","paths"],"additionalProperties":false,"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}},"properties":{"swagger":{"type":"string","enum":["2.0"],"description":"The Swagger version of this document."},"info":{"$ref":"#/definitions/info"},"host":{"type":"string","pattern":"^[^{}/ :\\\\]+(?::\\d+)?$","description":"The host (name or ip) of the API. Example: 'swagger.io'"},"basePath":{"type":"string","pattern":"^/","description":"The base path to the API. Example: '/api'."},"schemes":{"$ref":"#/definitions/schemesList"},"consumes":{"description":"A list of MIME types accepted by the API.","allOf":[{"$ref":"#/definitions/mediaTypeList"}]},"produces":{"description":"A list of MIME types the API can produce.","allOf":[{"$ref":"#/definitions/mediaTypeList"}]},"paths":{"$ref":"#/definitions/paths"},"definitions":{"$ref":"#/definitions/definitions"},"parameters":{"$ref":"#/definitions/parameterDefinitions"},"responses":{"$ref":"#/definitions/responseDefinitions"},"security":{"$ref":"#/definitions/security"},"securityDefinitions":{"$ref":"#/definitions/securityDefinitions"},"tags":{"type":"array","items":{"$ref":"#/definitions/tag"},"uniqueItems":true},"externalDocs":{"$ref":"#/definitions/externalDocs"}},"definitions":{"info":{"type":"object","description":"General information about the API.","required":["version","title"],"additionalProperties":false,"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}},"properties":{"title":{"type":"string","description":"A unique and precise title of the API."},"version":{"type":"string","description":"A semantic version number of the API."},"description":{"type":"string","description":"A longer description of the API. Should be different from the title.  GitHub Flavored Markdown is allowed."},"termsOfService":{"type":"string","description":"The terms of service for the API."},"contact":{"$ref":"#/definitions/contact"},"license":{"$ref":"#/definitions/license"}}},"contact":{"type":"object","description":"Contact information for the owners of the API.","additionalProperties":false,"properties":{"name":{"type":"string","description":"The identifying name of the contact person/organization."},"url":{"type":"string","description":"The URL pointing to the contact information.","format":"uri"},"email":{"type":"string","description":"The email address of the contact person/organization.","format":"email"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"license":{"type":"object","required":["name"],"additionalProperties":false,"properties":{"name":{"type":"string","description":"The name of the license type. It's encouraged to use an OSI compatible license."},"url":{"type":"string","description":"The URL pointing to the license.","format":"uri"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"paths":{"type":"object","description":"Relative paths to the individual endpoints. They must be relative to the 'basePath'.","patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"},"^/":{"$ref":"#/definitions/pathItem"}},"additionalProperties":false},"definitions":{"type":"object","additionalProperties":{"$ref":"#/definitions/schema"},"description":"One or more JSON objects describing the schemas being consumed and produced by the API."},"parameterDefinitions":{"type":"object","additionalProperties":{"$ref":"#/definitions/parameter"},"description":"One or more JSON representations for parameters"},"responseDefinitions":{"type":"object","additionalProperties":{"$ref":"#/definitions/response"},"description":"One or more JSON representations for parameters"},"externalDocs":{"type":"object","additionalProperties":false,"description":"information about external documentation","required":["url"],"properties":{"description":{"type":"string"},"url":{"type":"string","format":"uri"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"examples":{"type":"object","additionalProperties":true},"mimeType":{"type":"string","description":"The MIME type of the HTTP message."},"operation":{"type":"object","required":["responses"],"additionalProperties":false,"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}},"properties":{"tags":{"type":"array","items":{"type":"string"},"uniqueItems":true},"summary":{"type":"string","description":"A brief summary of the operation."},"description":{"type":"string","description":"A longer description of the operation, GitHub Flavored Markdown is allowed."},"externalDocs":{"$ref":"#/definitions/externalDocs"},"operationId":{"type":"string","description":"A unique identifier of the operation."},"produces":{"description":"A list of MIME types the API can produce.","allOf":[{"$ref":"#/definitions/mediaTypeList"}]},"consumes":{"description":"A list of MIME types the API can consume.","allOf":[{"$ref":"#/definitions/mediaTypeList"}]},"parameters":{"$ref":"#/definitions/parametersList"},"responses":{"$ref":"#/definitions/responses"},"schemes":{"$ref":"#/definitions/schemesList"},"deprecated":{"type":"boolean","default":false},"security":{"$ref":"#/definitions/security"}}},"pathItem":{"type":"object","additionalProperties":false,"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}},"properties":{"$ref":{"type":"string"},"get":{"$ref":"#/definitions/operation"},"put":{"$ref":"#/definitions/operation"},"post":{"$ref":"#/definitions/operation"},"delete":{"$ref":"#/definitions/operation"},"options":{"$ref":"#/definitions/operation"},"head":{"$ref":"#/definitions/operation"},"patch":{"$ref":"#/definitions/operation"},"parameters":{"$ref":"#/definitions/parametersList"}}},"responses":{"type":"object","description":"Response objects names can either be any valid HTTP status code or 'default'.","minProperties":1,"additionalProperties":false,"patternProperties":{"^([0-9]{3})$|^(default)$":{"$ref":"#/definitions/responseValue"},"^x-":{"$ref":"#/definitions/vendorExtension"}},"not":{"type":"object","additionalProperties":false,"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}}},"responseValue":{"oneOf":[{"$ref":"#/definitions/response"},{"$ref":"#/definitions/jsonReference"}]},"response":{"type":"object","required":["description"],"properties":{"description":{"type":"string"},"schema":{"oneOf":[{"$ref":"#/definitions/schema"},{"$ref":"#/definitions/fileSchema"}]},"headers":{"$ref":"#/definitions/headers"},"examples":{"$ref":"#/definitions/examples"}},"additionalProperties":false,"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"headers":{"type":"object","additionalProperties":{"$ref":"#/definitions/header"}},"header":{"type":"object","additionalProperties":false,"required":["type"],"properties":{"type":{"type":"string","enum":["string","number","integer","boolean","array"]},"format":{"type":"string"},"items":{"$ref":"#/definitions/primitivesItems"},"collectionFormat":{"$ref":"#/definitions/collectionFormat"},"default":{"$ref":"#/definitions/default"},"maximum":{"$ref":"#/definitions/maximum"},"exclusiveMaximum":{"$ref":"#/definitions/exclusiveMaximum"},"minimum":{"$ref":"#/definitions/minimum"},"exclusiveMinimum":{"$ref":"#/definitions/exclusiveMinimum"},"maxLength":{"$ref":"#/definitions/maxLength"},"minLength":{"$ref":"#/definitions/minLength"},"pattern":{"$ref":"#/definitions/pattern"},"maxItems":{"$ref":"#/definitions/maxItems"},"minItems":{"$ref":"#/definitions/minItems"},"uniqueItems":{"$ref":"#/definitions/uniqueItems"},"enum":{"$ref":"#/definitions/enum"},"multipleOf":{"$ref":"#/definitions/multipleOf"},"description":{"type":"string"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"vendorExtension":{"description":"Any property starting with x- is valid.","additionalProperties":true,"additionalItems":true},"bodyParameter":{"type":"object","required":["name","in","schema"],"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}},"properties":{"description":{"type":"string","description":"A brief description of the parameter. This could contain examples of use.  GitHub Flavored Markdown is allowed."},"name":{"type":"string","description":"The name of the parameter."},"in":{"type":"string","description":"Determines the location of the parameter.","enum":["body"]},"required":{"type":"boolean","description":"Determines whether or not this parameter is required or optional.","default":false},"schema":{"$ref":"#/definitions/schema"}},"additionalProperties":false},"headerParameterSubSchema":{"additionalProperties":false,"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}},"properties":{"required":{"type":"boolean","description":"Determines whether or not this parameter is required or optional.","default":false},"in":{"type":"string","description":"Determines the location of the parameter.","enum":["header"]},"description":{"type":"string","description":"A brief description of the parameter. This could contain examples of use.  GitHub Flavored Markdown is allowed."},"name":{"type":"string","description":"The name of the parameter."},"type":{"type":"string","enum":["string","number","boolean","integer","array"]},"format":{"type":"string"},"items":{"$ref":"#/definitions/primitivesItems"},"collectionFormat":{"$ref":"#/definitions/collectionFormat"},"default":{"$ref":"#/definitions/default"},"maximum":{"$ref":"#/definitions/maximum"},"exclusiveMaximum":{"$ref":"#/definitions/exclusiveMaximum"},"minimum":{"$ref":"#/definitions/minimum"},"exclusiveMinimum":{"$ref":"#/definitions/exclusiveMinimum"},"maxLength":{"$ref":"#/definitions/maxLength"},"minLength":{"$ref":"#/definitions/minLength"},"pattern":{"$ref":"#/definitions/pattern"},"maxItems":{"$ref":"#/definitions/maxItems"},"minItems":{"$ref":"#/definitions/minItems"},"uniqueItems":{"$ref":"#/definitions/uniqueItems"},"enum":{"$ref":"#/definitions/enum"},"multipleOf":{"$ref":"#/definitions/multipleOf"}}},"queryParameterSubSchema":{"additionalProperties":false,"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}},"properties":{"required":{"type":"boolean","description":"Determines whether or not this parameter is required or optional.","default":false},"in":{"type":"string","description":"Determines the location of the parameter.","enum":["query"]},"description":{"type":"string","description":"A brief description of the parameter. This could contain examples of use.  GitHub Flavored Markdown is allowed."},"name":{"type":"string","description":"The name of the parameter."},"allowEmptyValue":{"type":"boolean","default":false,"description":"allows sending a parameter by name only or with an empty value."},"type":{"type":"string","enum":["string","number","boolean","integer","array"]},"format":{"type":"string"},"items":{"$ref":"#/definitions/primitivesItems"},"collectionFormat":{"$ref":"#/definitions/collectionFormatWithMulti"},"default":{"$ref":"#/definitions/default"},"maximum":{"$ref":"#/definitions/maximum"},"exclusiveMaximum":{"$ref":"#/definitions/exclusiveMaximum"},"minimum":{"$ref":"#/definitions/minimum"},"exclusiveMinimum":{"$ref":"#/definitions/exclusiveMinimum"},"maxLength":{"$ref":"#/definitions/maxLength"},"minLength":{"$ref":"#/definitions/minLength"},"pattern":{"$ref":"#/definitions/pattern"},"maxItems":{"$ref":"#/definitions/maxItems"},"minItems":{"$ref":"#/definitions/minItems"},"uniqueItems":{"$ref":"#/definitions/uniqueItems"},"enum":{"$ref":"#/definitions/enum"},"multipleOf":{"$ref":"#/definitions/multipleOf"}}},"formDataParameterSubSchema":{"additionalProperties":false,"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}},"properties":{"required":{"type":"boolean","description":"Determines whether or not this parameter is required or optional.","default":false},"in":{"type":"string","description":"Determines the location of the parameter.","enum":["formData"]},"description":{"type":"string","description":"A brief description of the parameter. This could contain examples of use.  GitHub Flavored Markdown is allowed."},"name":{"type":"string","description":"The name of the parameter."},"allowEmptyValue":{"type":"boolean","default":false,"description":"allows sending a parameter by name only or with an empty value."},"type":{"type":"string","enum":["string","number","boolean","integer","array","file"]},"format":{"type":"string"},"items":{"$ref":"#/definitions/primitivesItems"},"collectionFormat":{"$ref":"#/definitions/collectionFormatWithMulti"},"default":{"$ref":"#/definitions/default"},"maximum":{"$ref":"#/definitions/maximum"},"exclusiveMaximum":{"$ref":"#/definitions/exclusiveMaximum"},"minimum":{"$ref":"#/definitions/minimum"},"exclusiveMinimum":{"$ref":"#/definitions/exclusiveMinimum"},"maxLength":{"$ref":"#/definitions/maxLength"},"minLength":{"$ref":"#/definitions/minLength"},"pattern":{"$ref":"#/definitions/pattern"},"maxItems":{"$ref":"#/definitions/maxItems"},"minItems":{"$ref":"#/definitions/minItems"},"uniqueItems":{"$ref":"#/definitions/uniqueItems"},"enum":{"$ref":"#/definitions/enum"},"multipleOf":{"$ref":"#/definitions/multipleOf"}}},"pathParameterSubSchema":{"additionalProperties":false,"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}},"required":["required"],"properties":{"required":{"type":"boolean","enum":[true],"description":"Determines whether or not this parameter is required or optional."},"in":{"type":"string","description":"Determines the location of the parameter.","enum":["path"]},"description":{"type":"string","description":"A brief description of the parameter. This could contain examples of use.  GitHub Flavored Markdown is allowed."},"name":{"type":"string","description":"The name of the parameter."},"type":{"type":"string","enum":["string","number","boolean","integer","array"]},"format":{"type":"string"},"items":{"$ref":"#/definitions/primitivesItems"},"collectionFormat":{"$ref":"#/definitions/collectionFormat"},"default":{"$ref":"#/definitions/default"},"maximum":{"$ref":"#/definitions/maximum"},"exclusiveMaximum":{"$ref":"#/definitions/exclusiveMaximum"},"minimum":{"$ref":"#/definitions/minimum"},"exclusiveMinimum":{"$ref":"#/definitions/exclusiveMinimum"},"maxLength":{"$ref":"#/definitions/maxLength"},"minLength":{"$ref":"#/definitions/minLength"},"pattern":{"$ref":"#/definitions/pattern"},"maxItems":{"$ref":"#/definitions/maxItems"},"minItems":{"$ref":"#/definitions/minItems"},"uniqueItems":{"$ref":"#/definitions/uniqueItems"},"enum":{"$ref":"#/definitions/enum"},"multipleOf":{"$ref":"#/definitions/multipleOf"}}},"nonBodyParameter":{"type":"object","required":["name","in","type"],"oneOf":[{"$ref":"#/definitions/headerParameterSubSchema"},{"$ref":"#/definitions/formDataParameterSubSchema"},{"$ref":"#/definitions/queryParameterSubSchema"},{"$ref":"#/definitions/pathParameterSubSchema"}]},"parameter":{"oneOf":[{"$ref":"#/definitions/bodyParameter"},{"$ref":"#/definitions/nonBodyParameter"}]},"schema":{"type":"object","description":"A deterministic version of a JSON Schema object.","patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}},"properties":{"$ref":{"type":"string"},"format":{"type":"string"},"title":{"$ref":"http://json-schema.org/draft-04/schema#/properties/title"},"description":{"$ref":"http://json-schema.org/draft-04/schema#/properties/description"},"default":{"$ref":"http://json-schema.org/draft-04/schema#/properties/default"},"multipleOf":{"$ref":"http://json-schema.org/draft-04/schema#/properties/multipleOf"},"maximum":{"$ref":"http://json-schema.org/draft-04/schema#/properties/maximum"},"exclusiveMaximum":{"$ref":"http://json-schema.org/draft-04/schema#/properties/exclusiveMaximum"},"minimum":{"$ref":"http://json-schema.org/draft-04/schema#/properties/minimum"},"exclusiveMinimum":{"$ref":"http://json-schema.org/draft-04/schema#/properties/exclusiveMinimum"},"maxLength":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/positiveInteger"},"minLength":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/positiveIntegerDefault0"},"pattern":{"$ref":"http://json-schema.org/draft-04/schema#/properties/pattern"},"maxItems":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/positiveInteger"},"minItems":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/positiveIntegerDefault0"},"uniqueItems":{"$ref":"http://json-schema.org/draft-04/schema#/properties/uniqueItems"},"maxProperties":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/positiveInteger"},"minProperties":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/positiveIntegerDefault0"},"required":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/stringArray"},"enum":{"$ref":"http://json-schema.org/draft-04/schema#/properties/enum"},"additionalProperties":{"anyOf":[{"$ref":"#/definitions/schema"},{"type":"boolean"}],"default":{}},"type":{"$ref":"http://json-schema.org/draft-04/schema#/properties/type"},"items":{"anyOf":[{"$ref":"#/definitions/schema"},{"type":"array","minItems":1,"items":{"$ref":"#/definitions/schema"}}],"default":{}},"allOf":{"type":"array","minItems":1,"items":{"$ref":"#/definitions/schema"}},"properties":{"type":"object","additionalProperties":{"$ref":"#/definitions/schema"},"default":{}},"discriminator":{"type":"string"},"readOnly":{"type":"boolean","default":false},"xml":{"$ref":"#/definitions/xml"},"externalDocs":{"$ref":"#/definitions/externalDocs"},"example":{}},"additionalProperties":false},"fileSchema":{"type":"object","description":"A deterministic version of a JSON Schema object.","patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}},"required":["type"],"properties":{"format":{"type":"string"},"title":{"$ref":"http://json-schema.org/draft-04/schema#/properties/title"},"description":{"$ref":"http://json-schema.org/draft-04/schema#/properties/description"},"default":{"$ref":"http://json-schema.org/draft-04/schema#/properties/default"},"required":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/stringArray"},"type":{"type":"string","enum":["file"]},"readOnly":{"type":"boolean","default":false},"externalDocs":{"$ref":"#/definitions/externalDocs"},"example":{}},"additionalProperties":false},"primitivesItems":{"type":"object","additionalProperties":false,"properties":{"type":{"type":"string","enum":["string","number","integer","boolean","array"]},"format":{"type":"string"},"items":{"$ref":"#/definitions/primitivesItems"},"collectionFormat":{"$ref":"#/definitions/collectionFormat"},"default":{"$ref":"#/definitions/default"},"maximum":{"$ref":"#/definitions/maximum"},"exclusiveMaximum":{"$ref":"#/definitions/exclusiveMaximum"},"minimum":{"$ref":"#/definitions/minimum"},"exclusiveMinimum":{"$ref":"#/definitions/exclusiveMinimum"},"maxLength":{"$ref":"#/definitions/maxLength"},"minLength":{"$ref":"#/definitions/minLength"},"pattern":{"$ref":"#/definitions/pattern"},"maxItems":{"$ref":"#/definitions/maxItems"},"minItems":{"$ref":"#/definitions/minItems"},"uniqueItems":{"$ref":"#/definitions/uniqueItems"},"enum":{"$ref":"#/definitions/enum"},"multipleOf":{"$ref":"#/definitions/multipleOf"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"security":{"type":"array","items":{"$ref":"#/definitions/securityRequirement"},"uniqueItems":true},"securityRequirement":{"type":"object","additionalProperties":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"xml":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string"},"namespace":{"type":"string"},"prefix":{"type":"string"},"attribute":{"type":"boolean","default":false},"wrapped":{"type":"boolean","default":false}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"tag":{"type":"object","additionalProperties":false,"required":["name"],"properties":{"name":{"type":"string"},"description":{"type":"string"},"externalDocs":{"$ref":"#/definitions/externalDocs"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"securityDefinitions":{"type":"object","additionalProperties":{"oneOf":[{"$ref":"#/definitions/basicAuthenticationSecurity"},{"$ref":"#/definitions/apiKeySecurity"},{"$ref":"#/definitions/oauth2ImplicitSecurity"},{"$ref":"#/definitions/oauth2PasswordSecurity"},{"$ref":"#/definitions/oauth2ApplicationSecurity"},{"$ref":"#/definitions/oauth2AccessCodeSecurity"}]}},"basicAuthenticationSecurity":{"type":"object","additionalProperties":false,"required":["type"],"properties":{"type":{"type":"string","enum":["basic"]},"description":{"type":"string"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"apiKeySecurity":{"type":"object","additionalProperties":false,"required":["type","name","in"],"properties":{"type":{"type":"string","enum":["apiKey"]},"name":{"type":"string"},"in":{"type":"string","enum":["header","query"]},"description":{"type":"string"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"oauth2ImplicitSecurity":{"type":"object","additionalProperties":false,"required":["type","flow","authorizationUrl"],"properties":{"type":{"type":"string","enum":["oauth2"]},"flow":{"type":"string","enum":["implicit"]},"scopes":{"$ref":"#/definitions/oauth2Scopes"},"authorizationUrl":{"type":"string","format":"uri"},"description":{"type":"string"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"oauth2PasswordSecurity":{"type":"object","additionalProperties":false,"required":["type","flow","tokenUrl"],"properties":{"type":{"type":"string","enum":["oauth2"]},"flow":{"type":"string","enum":["password"]},"scopes":{"$ref":"#/definitions/oauth2Scopes"},"tokenUrl":{"type":"string","format":"uri"},"description":{"type":"string"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"oauth2ApplicationSecurity":{"type":"object","additionalProperties":false,"required":["type","flow","tokenUrl"],"properties":{"type":{"type":"string","enum":["oauth2"]},"flow":{"type":"string","enum":["application"]},"scopes":{"$ref":"#/definitions/oauth2Scopes"},"tokenUrl":{"type":"string","format":"uri"},"description":{"type":"string"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"oauth2AccessCodeSecurity":{"type":"object","additionalProperties":false,"required":["type","flow","authorizationUrl","tokenUrl"],"properties":{"type":{"type":"string","enum":["oauth2"]},"flow":{"type":"string","enum":["accessCode"]},"scopes":{"$ref":"#/definitions/oauth2Scopes"},"authorizationUrl":{"type":"string","format":"uri"},"tokenUrl":{"type":"string","format":"uri"},"description":{"type":"string"}},"patternProperties":{"^x-":{"$ref":"#/definitions/vendorExtension"}}},"oauth2Scopes":{"type":"object","additionalProperties":{"type":"string"}},"mediaTypeList":{"type":"array","items":{"$ref":"#/definitions/mimeType"},"uniqueItems":true},"parametersList":{"type":"array","description":"The parameters needed to send a valid API call.","additionalItems":false,"items":{"oneOf":[{"$ref":"#/definitions/parameter"},{"$ref":"#/definitions/jsonReference"}]},"uniqueItems":true},"schemesList":{"type":"array","description":"The transfer protocol of the API.","items":{"type":"string","enum":["http","https","ws","wss"]},"uniqueItems":true},"collectionFormat":{"type":"string","enum":["csv","ssv","tsv","pipes"],"default":"csv"},"collectionFormatWithMulti":{"type":"string","enum":["csv","ssv","tsv","pipes","multi"],"default":"csv"},"title":{"$ref":"http://json-schema.org/draft-04/schema#/properties/title"},"description":{"$ref":"http://json-schema.org/draft-04/schema#/properties/description"},"default":{"$ref":"http://json-schema.org/draft-04/schema#/properties/default"},"multipleOf":{"$ref":"http://json-schema.org/draft-04/schema#/properties/multipleOf"},"maximum":{"$ref":"http://json-schema.org/draft-04/schema#/properties/maximum"},"exclusiveMaximum":{"$ref":"http://json-schema.org/draft-04/schema#/properties/exclusiveMaximum"},"minimum":{"$ref":"http://json-schema.org/draft-04/schema#/properties/minimum"},"exclusiveMinimum":{"$ref":"http://json-schema.org/draft-04/schema#/properties/exclusiveMinimum"},"maxLength":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/positiveInteger"},"minLength":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/positiveIntegerDefault0"},"pattern":{"$ref":"http://json-schema.org/draft-04/schema#/properties/pattern"},"maxItems":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/positiveInteger"},"minItems":{"$ref":"http://json-schema.org/draft-04/schema#/definitions/positiveIntegerDefault0"},"uniqueItems":{"$ref":"http://json-schema.org/draft-04/schema#/properties/uniqueItems"},"enum":{"$ref":"http://json-schema.org/draft-04/schema#/properties/enum"},"jsonReference":{"type":"object","required":["$ref"],"additionalProperties":false,"properties":{"$ref":{"type":"string"}}}}}
);



local.assetsDict["/assets.swgg.swagger.json"] = local.assetsDict["/assets.swgg.swagger.json"] || "";



// https://petstore.swagger.io/v2/swagger.json
// curl -Ls https://petstore.swagger.io/v2/swagger.json > /tmp/aa.json; node -e "console.log(JSON.stringify(require('/tmp/aa.json')));"
local.assetsDict["/assets.swgg.swagger.petstore.json"] = JSON.stringify(
{"swagger":"2.0","info":{"description":"This is a sample server Petstore server.  You can find out more about Swagger at [http://swagger.io](http://swagger.io) or on [irc.freenode.net, #swagger](http://swagger.io/irc/).  For this sample, you can use the api key `special-key` to test the authorization filters.","version":"1.0.0","title":"Swagger Petstore","termsOfService":"http://swagger.io/terms/","contact":{"email":"apiteam@swagger.io"},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}},"host":"petstore.swagger.io","basePath":"/v2","tags":[{"name":"pet","description":"Everything about your Pets","externalDocs":{"description":"Find out more","url":"http://swagger.io"}},{"name":"store","description":"Access to Petstore orders"},{"name":"user","description":"Operations about user","externalDocs":{"description":"Find out more about our store","url":"http://swagger.io"}}],"schemes":["http"],"paths":{"/pet":{"post":{"tags":["pet"],"summary":"Add a new pet to the store","description":"","operationId":"addPet","consumes":["application/json","application/xml"],"produces":["application/xml","application/json"],"parameters":[{"in":"body","name":"body","description":"Pet object that needs to be added to the store","required":true,"schema":{"$ref":"#/definitions/Pet"}}],"responses":{"405":{"description":"Invalid input"}},"security":[{"petstore_auth":["write:pets","read:pets"]}]},"put":{"tags":["pet"],"summary":"Update an existing pet","description":"","operationId":"updatePet","consumes":["application/json","application/xml"],"produces":["application/xml","application/json"],"parameters":[{"in":"body","name":"body","description":"Pet object that needs to be added to the store","required":true,"schema":{"$ref":"#/definitions/Pet"}}],"responses":{"400":{"description":"Invalid ID supplied"},"404":{"description":"Pet not found"},"405":{"description":"Validation exception"}},"security":[{"petstore_auth":["write:pets","read:pets"]}]}},"/pet/findByStatus":{"get":{"tags":["pet"],"summary":"Finds Pets by status","description":"Multiple status values can be provided with comma separated strings","operationId":"findPetsByStatus","produces":["application/xml","application/json"],"parameters":[{"name":"status","in":"query","description":"Status values that need to be considered for filter","required":true,"type":"array","items":{"type":"string","enum":["available","pending","sold"],"default":"available"},"collectionFormat":"multi"}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"$ref":"#/definitions/Pet"}}},"400":{"description":"Invalid status value"}},"security":[{"petstore_auth":["write:pets","read:pets"]}]}},"/pet/findByTags":{"get":{"tags":["pet"],"summary":"Finds Pets by tags","description":"Muliple tags can be provided with comma separated strings. Use tag1, tag2, tag3 for testing.","operationId":"findPetsByTags","produces":["application/xml","application/json"],"parameters":[{"name":"tags","in":"query","description":"Tags to filter by","required":true,"type":"array","items":{"type":"string"},"collectionFormat":"multi"}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"$ref":"#/definitions/Pet"}}},"400":{"description":"Invalid tag value"}},"security":[{"petstore_auth":["write:pets","read:pets"]}],"deprecated":true}},"/pet/{petId}":{"get":{"tags":["pet"],"summary":"Find pet by ID","description":"Returns a single pet","operationId":"getPetById","produces":["application/xml","application/json"],"parameters":[{"name":"petId","in":"path","description":"ID of pet to return","required":true,"type":"integer","format":"int64"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/Pet"}},"400":{"description":"Invalid ID supplied"},"404":{"description":"Pet not found"}},"security":[{"api_key":[]}]},"post":{"tags":["pet"],"summary":"Updates a pet in the store with form data","description":"","operationId":"updatePetWithForm","consumes":["application/x-www-form-urlencoded"],"produces":["application/xml","application/json"],"parameters":[{"name":"petId","in":"path","description":"ID of pet that needs to be updated","required":true,"type":"integer","format":"int64"},{"name":"name","in":"formData","description":"Updated name of the pet","required":false,"type":"string"},{"name":"status","in":"formData","description":"Updated status of the pet","required":false,"type":"string"}],"responses":{"405":{"description":"Invalid input"}},"security":[{"petstore_auth":["write:pets","read:pets"]}]},"delete":{"tags":["pet"],"summary":"Deletes a pet","description":"","operationId":"deletePet","produces":["application/xml","application/json"],"parameters":[{"name":"api_key","in":"header","required":false,"type":"string"},{"name":"petId","in":"path","description":"Pet id to delete","required":true,"type":"integer","format":"int64"}],"responses":{"400":{"description":"Invalid ID supplied"},"404":{"description":"Pet not found"}},"security":[{"petstore_auth":["write:pets","read:pets"]}]}},"/pet/{petId}/uploadImage":{"post":{"tags":["pet"],"summary":"uploads an image","description":"","operationId":"uploadFile","consumes":["multipart/form-data"],"produces":["application/json"],"parameters":[{"name":"petId","in":"path","description":"ID of pet to update","required":true,"type":"integer","format":"int64"},{"name":"additionalMetadata","in":"formData","description":"Additional data to pass to server","required":false,"type":"string"},{"name":"file","in":"formData","description":"file to upload","required":false,"type":"file"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/ApiResponse"}}},"security":[{"petstore_auth":["write:pets","read:pets"]}]}},"/store/inventory":{"get":{"tags":["store"],"summary":"Returns pet inventories by status","description":"Returns a map of status codes to quantities","operationId":"getInventory","produces":["application/json"],"parameters":[],"responses":{"200":{"description":"successful operation","schema":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}}}},"security":[{"api_key":[]}]}},"/store/order":{"post":{"tags":["store"],"summary":"Place an order for a pet","description":"","operationId":"placeOrder","produces":["application/xml","application/json"],"parameters":[{"in":"body","name":"body","description":"order placed for purchasing the pet","required":true,"schema":{"$ref":"#/definitions/Order"}}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/Order"}},"400":{"description":"Invalid Order"}}}},"/store/order/{orderId}":{"get":{"tags":["store"],"summary":"Find purchase order by ID","description":"For valid response try integer IDs with value >= 1 and <= 10. Other values will generated exceptions","operationId":"getOrderById","produces":["application/xml","application/json"],"parameters":[{"name":"orderId","in":"path","description":"ID of pet that needs to be fetched","required":true,"type":"integer","maximum":10,"minimum":1,"format":"int64"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/Order"}},"400":{"description":"Invalid ID supplied"},"404":{"description":"Order not found"}}},"delete":{"tags":["store"],"summary":"Delete purchase order by ID","description":"For valid response try integer IDs with positive integer value. Negative or non-integer values will generate API errors","operationId":"deleteOrder","produces":["application/xml","application/json"],"parameters":[{"name":"orderId","in":"path","description":"ID of the order that needs to be deleted","required":true,"type":"integer","minimum":1,"format":"int64"}],"responses":{"400":{"description":"Invalid ID supplied"},"404":{"description":"Order not found"}}}},"/user":{"post":{"tags":["user"],"summary":"Create user","description":"This can only be done by the logged in user.","operationId":"createUser","produces":["application/xml","application/json"],"parameters":[{"in":"body","name":"body","description":"Created user object","required":true,"schema":{"$ref":"#/definitions/User"}}],"responses":{"default":{"description":"successful operation"}}}},"/user/createWithArray":{"post":{"tags":["user"],"summary":"Creates list of users with given input array","description":"","operationId":"createUsersWithArrayInput","produces":["application/xml","application/json"],"parameters":[{"in":"body","name":"body","description":"List of user object","required":true,"schema":{"type":"array","items":{"$ref":"#/definitions/User"}}}],"responses":{"default":{"description":"successful operation"}}}},"/user/createWithList":{"post":{"tags":["user"],"summary":"Creates list of users with given input array","description":"","operationId":"createUsersWithListInput","produces":["application/xml","application/json"],"parameters":[{"in":"body","name":"body","description":"List of user object","required":true,"schema":{"type":"array","items":{"$ref":"#/definitions/User"}}}],"responses":{"default":{"description":"successful operation"}}}},"/user/login":{"get":{"tags":["user"],"summary":"Logs user into the system","description":"","operationId":"loginUser","produces":["application/xml","application/json"],"parameters":[{"name":"username","in":"query","description":"The user name for login","required":true,"type":"string"},{"name":"password","in":"query","description":"The password for login in clear text","required":true,"type":"string"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"headers":{"X-Rate-Limit":{"type":"integer","format":"int32","description":"calls per hour allowed by the user"},"X-Expires-After":{"type":"string","format":"date-time","description":"date in UTC when token expires"}}},"400":{"description":"Invalid username/password supplied"}}}},"/user/logout":{"get":{"tags":["user"],"summary":"Logs out current logged in user session","description":"","operationId":"logoutUser","produces":["application/xml","application/json"],"parameters":[],"responses":{"default":{"description":"successful operation"}}}},"/user/{username}":{"get":{"tags":["user"],"summary":"Get user by user name","description":"","operationId":"getUserByName","produces":["application/xml","application/json"],"parameters":[{"name":"username","in":"path","description":"The name that needs to be fetched. Use user1 for testing. ","required":true,"type":"string"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/User"}},"400":{"description":"Invalid username supplied"},"404":{"description":"User not found"}}},"put":{"tags":["user"],"summary":"Updated user","description":"This can only be done by the logged in user.","operationId":"updateUser","produces":["application/xml","application/json"],"parameters":[{"name":"username","in":"path","description":"name that need to be updated","required":true,"type":"string"},{"in":"body","name":"body","description":"Updated user object","required":true,"schema":{"$ref":"#/definitions/User"}}],"responses":{"400":{"description":"Invalid user supplied"},"404":{"description":"User not found"}}},"delete":{"tags":["user"],"summary":"Delete user","description":"This can only be done by the logged in user.","operationId":"deleteUser","produces":["application/xml","application/json"],"parameters":[{"name":"username","in":"path","description":"The name that needs to be deleted","required":true,"type":"string"}],"responses":{"400":{"description":"Invalid username supplied"},"404":{"description":"User not found"}}}}},"securityDefinitions":{"petstore_auth":{"type":"oauth2","authorizationUrl":"http://petstore.swagger.io/oauth/dialog","flow":"implicit","scopes":{"write:pets":"modify pets in your account","read:pets":"read your pets"}},"api_key":{"type":"apiKey","name":"api_key","in":"header"}},"definitions":{"Order":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"petId":{"type":"integer","format":"int64"},"quantity":{"type":"integer","format":"int32"},"shipDate":{"type":"string","format":"date-time"},"status":{"type":"string","description":"Order Status","enum":["placed","approved","delivered"]},"complete":{"type":"boolean","default":false}},"xml":{"name":"Order"}},"Category":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Category"}},"User":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"phone":{"type":"string"},"userStatus":{"type":"integer","format":"int32","description":"User Status"}},"xml":{"name":"User"}},"Tag":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Tag"}},"Pet":{"type":"object","required":["name","photoUrls"],"properties":{"id":{"type":"integer","format":"int64"},"category":{"$ref":"#/definitions/Category"},"name":{"type":"string","example":"doggie"},"photoUrls":{"type":"array","xml":{"name":"photoUrl","wrapped":true},"items":{"type":"string"}},"tags":{"type":"array","xml":{"name":"tag","wrapped":true},"items":{"$ref":"#/definitions/Tag"}},"status":{"type":"string","description":"pet status in the store","enum":["available","pending","sold"]}},"xml":{"name":"Pet"}},"ApiResponse":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"type":{"type":"string"},"message":{"type":"string"}}}},"externalDocs":{"description":"Find out more about Swagger","url":"http://swagger.io"}}
);



local.swaggerErrorTypeDict = {
    arrayMaxItems: '{{type2}} {{prefix0}} must have <= {{schema.maxItems}} items',
    arrayMinItems: '{{type2}} {{prefix0}} must have >= {{schema.minItems}} items',
    arrayUniqueItems: '{{type2}} {{prefix0}} must have unique items (has duplicate item {{tmp jsonStringify}})',
    itemEnum: '{{type2}} {{prefix0}} can only have items from the list {{schema.enum jsonStringify}}',
    itemAnyOf: '{{tmp}} (from schama.anyOf {{schema2}})',
    itemNot: '{{type2}} {{prefix0}} must not validate against schama.not {{schema2}}',
    itemOneOf: '{{type2}} {{prefix0}} did not validate against exactly one schema (validated {{tmp}}) in schema.oneOf {{schema2}}',
    itemType: 'value {{prefix0}} is not a valid {{type2}}',
    numberMultipleOf: '{{type2}} {{prefix0}} must be a multiple of {{schema.multipleOf}}',
    numberExclusiveMaximum: '{{type2}} {{prefix0}} must be < {{schema.maximum}}',
    numberExclusiveMinimum: '{{type2}} {{prefix0}} must be > {{schema.minimum}}',
    numberMaximum: '{{type2}} {{prefix0}} must be <= {{schema.maximum}}',
    numberMinimum: '{{type2}} {{prefix0}} must be >= {{schema.minimum}}',
    objectAdditionalProperties: '{{type2}} {{prefix0}} cannot have additional property {{key jsonStringify}}',
    objectDependencies: '{{type2}} {{prefix0}} with item {{key jsonStringify}} must have dependency {{key2 jsonStringify}}',
    objectMaxProperties: '{{type2}} {{prefix0}} must have <= {{schema.maxProperties}} properties',
    objectMinProperties: '{{type2}} {{prefix0}} must have >= {{schema.minProperties}} properties',
    objectRequired: '{{type2}} {{prefix0}} is required',
    schemaDereferenceCircular: 'cannot dereference circular-reference schema {{schema2}}',
    schemaDereference: 'cannot dereference schema {{schema2}}',
    // https://github.com/swagger-api/swagger-editor/tree/v3.1.20/src/plugins/validation/semantic-validators/validators
    // shGrep swagger-editor/src/plugins/validation/semantic-validators/validators 'message:'
    // form-data.js:90: "Parameter \"in: formdata\" is invalid, did you mean \"in: formData\" ( camelCase )?",
    semanticFormData1: "Parameter {{prefix0}} is invalid, did you mean \"in: formData\" ( camelCase )?",
    // form-data.js:109: "Parameters cannot have both a \"in: body\" and \"in: formData\", as \"formData\" _will_ be the body"
    semanticFormData2: "Parameters cannot have both a \"in: body\" and \"in: formData\", as \"formData\" _will_ be the body",
    // form-data.js:131: "Parameters with \"type: file\" must have \"in: formData\"",
    semanticFormData3: "Parameter {{prefix0}} with \"type: file\" must have \"in: formData\"",
    // form-data.js:140: "Operations with Parameters of \"type: file\" must include \"multipart/form-data\" in their \"consumes\" property",
    semanticFormData4: "Operation {{prefix0}} with Parameters of \"type: file\" must include \"multipart/form-data\" in their \"consumes\" property",
    // form-data.js:163: "Operations with Parameters of \"in: formData\" must include \"application/x-www-form-urlencoded\" or \"multipart/form-data\" in their \"consumes\" property",
    semanticFormData5: "Operation {{prefix0}} with Parameters of \"in: formData\" must include \"application/x-www-form-urlencoded\" or \"multipart/form-data\" in their \"consumes\" property",
    // items-required-for-array-objects.js:27: "Schema objects with 'array' type require an 'items' property"
    semanticItemsRequiredForArrayObjects1: "Schema {{schema2}} with 'array' type require an 'items' property",
    // items-required-for-array-objects.js:38: "Schema properties specified as 'required' must be defined"
    semanticItemsRequiredForArrayObjects2: "{{type2}} {{prefix0}} must have property {{key jsonStringify}}",
    // items-required-for-array-objects.js:50: "Headers with 'array' type require an 'items' property"
    semanticItemsRequiredForArrayObjects3: "Headers with 'array' type require an 'items' property",
    // items-required-for-array-objects.js:59: "Model properties with 'array' type require an 'items' property"
    semanticItemsRequiredForArrayObjects4: "Model properties with 'array' type require an 'items' property",
    // operation-ids.js:40: "operationIds must be unique"
    semanticOperationIds1: 'operationId {{prefix0}} must be unique',
    // operations.js:30: "Operations cannot have both a \"body\" parameter and \"formData\" parameter"
    semanticOperations1: "Operation {{prefix0}} cannot have both a \"body\" parameter and \"formData\" parameter",
    // operations.js:38: "Operations must have no more than one body parameter"
    semanticOperations2: "Operation {{prefix0}} must have no more than one body parameter",
    // operations.js:53: "Operation parameters must have unique 'name' + 'in' properties"
    semanticOperations3: "Operation parameters {{prefix0}} must have unique 'name' + 'in' properties",
    // parameters.js:18: "Parameters with 'array' type require an 'items' property."
    semanticParameters1: "Parameters with 'array' type require an 'items' property.",
    // parameters.js:24: "Non-body parameters require a 'type' property."
    semanticParameters2: "Non-body parameter {{prefix0}} require a 'type' property.",
    // paths.js:48: "Query strings in paths are not allowed."
    semanticPaths1: "Query strings in path {{prefix2 jsonStringify}} are not allowed",
    // paths.js:79: "Equivalent paths are not allowed."
    semanticPaths2: 'Equivalent paths {{pathList jsonStringify}} are not allowed',
    // paths.js:94: "Path parameters must have unique 'name' + 'in' properties"
    semanticPaths3: "Path parameter ${parameterDefinition.name jsonStringify} must be unique",
    // paths.js:107: `Path parameter ${parameterDefinition.name} was defined but never used`
    semanticPaths4: 'Path parameter ${parameterDefinition.name} was defined but never used',
    // paths.js:119: "Empty path parameter declarations are not valid"
    semanticPaths5: "Empty path parameter declarations are not valid - {{prefix2 jsonStringify}}",
    // paths.js:131: `Declared path parameter "${parameter}" needs to be defined as a path parameter at either the path or operation level`
    semanticPaths6: 'Declared path parameter {{name jsonStringify}} needs to be defined as a path parameter {{prefix2 jsonStringify}} at either the path or operation level',
    // paths.js:141: `Path parameter ${parameterDefinition.name} was defined but never used`
    semanticPaths7: 'Path parameter {{prefix0}} was defined but never used',
    // refs.js:37: "Definition was declared but never used in document"
    semanticRefs1: 'Definition was declared but never used in document',
    // schema.js:61: "Read only properties cannot marked as required by a schema."
    semanticSchema1: "Read only property {{prefix0}} cannot be marked as required by a schema.",
    // security-definitions.js:33: `${path} must have required string 'type' param`,
    semanticSecurityDefinitions1: '${path} must have required string "type" param',
    // security-definitions.js:44: "apiKey authorization must have required 'in' param, valid values are 'query' or 'header'.",
    semanticSecurityDefinitions2: 'apiKey authorization must have required "in" param, valid values are "query" or "header".',
    // security-definitions.js:52: "apiKey authorization must have required 'name' string param. The name of the header or query parameter to be used.",
    semanticSecurityDefinitions3: "apiKey authorization must have required 'name' string param. The name of the header or query parameter to be used.",
    // security-definitions.js:66: "oauth2 authorization must have required 'flow' string param. Valid values are 'implicit', 'password', 'application' or 'accessCode'",
    semanticSecurityDefinitions4: "oauth2 authorization must have required 'flow' string param. Valid values are 'implicit', 'password', 'application' or 'accessCode'",
    // security-definitions.js:73: "oauth2 authorization implicit flow must have required 'authorizationUrl' parameter.",
    semanticSecurityDefinitions5: "oauth2 authorization implicit flow must have required 'authorizationUrl' parameter.",
    // security-definitions.js:81: "oauth2 authorization accessCode flow must have required 'authorizationUrl' and 'tokenUrl' string parameters.",
    semanticSecurityDefinitions6: "oauth2 authorization accessCode flow must have required 'authorizationUrl' and 'tokenUrl' string parameters.",
    // security-definitions.js:89: "oauth2 authorization password flow must have required 'tokenUrl' string parameter.",
    semanticSecurityDefinitions7: "oauth2 authorization password flow must have required 'tokenUrl' string parameter.",
    // security-definitions.js:97: "oauth2 authorization application flow must have required 'tokenUrl' string parameter.",
    semanticSecurityDefinitions8: "oauth2 authorization application flow must have required 'tokenUrl' string parameter.",
    // security-definitions.js:106: "'scopes' is required property type object. The available scopes for the OAuth2 security scheme.",
    semanticSecurityDefinitions9: "'scopes' is required property type object. The available scopes for the OAuth2 security scheme.",
    // security.js:23: "security requirements must match a security definition",
    semanticSecurity1: "security requirements must match a security definition",
    // security.js:37: `Security scope definition ${scope} could not be resolved`,
    semanticSecurity2: 'Security scope definition ${scope} could not be resolved',
    // walker.js:27: "\"type\" should be a string"
    semanticWalker1: "type {{prefix0}} should be a string",
    // walker.js:39: "Minimum cannot be more than maximum"
    semanticWalker2: 'Minimum cannot be more than maximum - {{prefix0}}',
    // walker.js:48: "minProperties cannot be more than maxProperties"
    semanticWalker3: 'minProperties cannot be more than maxProperties - {{prefix0}}',
    // walker.js:57: "minLength cannot be more than maxLength"
    semanticWalker4: 'minLength cannot be more than maxLength - {{prefix0}}',
    // walker.js:76: `${path[path.length - 2]} $refs cannot match any of the following: ${humanFriendlyRefBlacklist}`
    // semanticWalker5: '${path[path.length - 2]} $refs cannot match any of the following: ${humanFriendlyRefBlacklist}',
    // walker.js:89: "$ref paths must begin with `#/`"
    semanticWalker6: '$ref {{prefix0}} must begin with "#/"',
    // walker.js:108: "Values alongside a $ref will be ignored."
    semanticWalker7: 'Values alongside a $ref will be ignored.',
    stringMaxLength: '{{type2}} {{prefix0}} must have <= {{schema.maxLength}} characters',
    stringMinLength: '{{type2}} {{prefix0}} must have >= {{schema.minLength}} characters',
    stringPattern: '{{type2}} {{prefix0}} must match regexp pattern {{schema.pattern jsonStringify}}'
};



local.templateApiDict =
{
    "crudCountManyByQuery": {
        "_method": "GET",
        "_path": "/{{_tags0}}/crudCountManyByQuery",
        "parameters": [
            {
                "default": "{\"id\":{\"$exists\":true}}",
                "description": "query param",
                "format": "json",
                "in": "query",
                "name": "_queryWhere",
                "type": "string"
            }
        ],
        "summary": "count many {{_schemaName}} objects by query"
    },
    "crudErrorDelete": {
        "_method": "DELETE",
        "_path": "/{{_tags0}}/crudErrorDelete",
        "responses": {
            "500": {
                "description": "500 error - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return error response"
    },
    "crudErrorGet": {
        "_method": "GET",
        "_path": "/{{_tags0}}/crudErrorGet",
        "responses": {
            "500": {
                "description": "500 error - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return error response"
    },
    "crudErrorHead": {
        "_method": "HEAD",
        "_path": "/{{_tags0}}/crudErrorHead",
        "responses": {
            "500": {
                "description": "500 error - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return error response"
    },
    "crudErrorLogin": {
        "_method": "GET",
        "_path": "/{{_tags0}}/crudErrorLogin",
        "responses": {
            "500": {
                "description": "500 error - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "login by password"
    },
    "crudErrorOptions": {
        "_method": "OPTIONS",
        "_path": "/{{_tags0}}/crudErrorOptions",
        "responses": {
            "500": {
                "description": "500 error - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return error response"
    },
    "crudErrorPatch": {
        "_method": "PATCH",
        "_path": "/{{_tags0}}/crudErrorPatch",
        "responses": {
            "500": {
                "description": "500 error - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return error response"
    },
    "crudErrorPost": {
        "_method": "POST",
        "_path": "/{{_tags0}}/crudErrorPost",
        "responses": {
            "500": {
                "description": "500 error - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return error response"
    },
    "crudErrorPre": {
        "_method": "GET",
        "_path": "/{{_tags0}}/crudErrorPre",
        "responses": {
            "500": {
                "description": "500 error - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return error response"
    },
    "crudErrorPut": {
        "_method": "PUT",
        "_path": "/{{_tags0}}/crudErrorPut",
        "responses": {
            "500": {
                "description": "500 error - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return error response"
    },
    "crudGetManyByQuery": {
        "_method": "GET",
        "_path": "/{{_tags0}}/crudGetManyByQuery",
        "parameters": [
            {
                "default": "{\"id\":{\"$exists\":true}}",
                "description": "query param",
                "format": "json",
                "in": "query",
                "name": "_queryWhere",
                "required": true,
                "type": "string"
            },
            {
                "default": null,
                "description": "projection-fields param",
                "format": "json",
                "in": "query",
                "name": "_queryFields",
                "type": "string",
                "x-swgg-collectionFormat": "json",
                "x-swgg-items": {
                    "type": "string"
                },
                "x-swgg-type": "array"
            },
            {
                "default": 20,
                "description": "cursor-limit param",
                "in": "query",
                "name": "_queryLimit",
                "required": true,
                "type": "integer"
            },
            {
                "default": 0,
                "description": "cursor-skip param",
                "in": "query",
                "name": "_querySkip",
                "type": "integer"
            },
            {
                "default": [
                    {
                        "fieldName": "id"
                    },
                    {
                        "fieldName": "_timeUpdated",
                        "isDescending": true
                    }
                ],
                "description": "cursor-sort param",
                "format": "json",
                "in": "query",
                "name": "_querySort",
                "type": "string",
                "x-swgg-collectionFormat": "json",
                "x-swgg-items": {
                    "type": "object"
                },
                "x-swgg-type": "array"
            }
        ],
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "get many {{_schemaName}} objects by query"
    },
    "crudGetOneById": {
        "_idName": "{{_idName}}",
        "_method": "GET",
        "_path": "/{{_tags0}}/crudGetOneById.{{_idName}}.{{_idBackend}}",
        "parameters": [
            {
                "description": "{{_schemaName}} {{_idName}}",
                "in": "query",
                "name": "{{_idName}}",
                "required": true,
                "type": "string"
            }
        ],
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "get one {{_schemaName}} object by {{_idName}}"
    },
    "crudGetOneByQuery": {
        "_method": "GET",
        "_path": "/{{_tags0}}/crudGetOneByQuery",
        "parameters": [
            {
                "default": "{\"id\":{\"$exists\":true}}",
                "description": "query param",
                "format": "json",
                "in": "query",
                "name": "_queryWhere",
                "required": true,
                "type": "string"
            }
        ],
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "get one {{_schemaName}} object by query"
    },
    "crudNullDelete": {
        "_method": "DELETE",
        "_path": "/{{_tags0}}/crudNullDelete",
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return null response"
    },
    "crudNullGet": {
        "_method": "GET",
        "_path": "/{{_tags0}}/crudNullGet",
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return null response"
    },
    "crudNullHead": {
        "_method": "HEAD",
        "_path": "/{{_tags0}}/crudNullHead",
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return null response"
    },
    "crudNullOptions": {
        "_method": "OPTIONS",
        "_path": "/{{_tags0}}/crudNullOptions",
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return null response"
    },
    "crudNullPatch": {
        "_method": "PATCH",
        "_path": "/{{_tags0}}/crudNullPatch",
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return null response"
    },
    "crudNullPost": {
        "_method": "POST",
        "_path": "/{{_tags0}}/crudNullPost",
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return null response"
    },
    "crudNullPut": {
        "_method": "PUT",
        "_path": "/{{_tags0}}/crudNullPut",
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "return null response"
    },
    "crudRemoveManyByQuery": {
        "_method": "DELETE",
        "_path": "/{{_tags0}}/crudRemoveManyByQuery",
        "parameters": [
            {
                "default": "{\"id\":\"undefined\"}",
                "description": "query param",
                "format": "json",
                "in": "query",
                "name": "_queryWhere",
                "required": true,
                "type": "string"
            }
        ],
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "remove many {{_schemaName}} objects by query"
    },
    "crudRemoveOneById": {
        "_idName": "{{_idName}}",
        "_method": "DELETE",
        "_path": "/{{_tags0}}/crudRemoveOneById.{{_idName}}.{{_idBackend}}",
        "parameters": [
            {
                "description": "{{_schemaName}} {{_idName}}",
                "in": "query",
                "name": "{{_idName}}",
                "required": true,
                "type": "string"
            }
        ],
        "summary": "remove one {{_schemaName}} object by {{_idName}}"
    },
    "crudSetManyById": {
        "_method": "PUT",
        "_path": "/{{_tags0}}/crudSetManyById",
        "parameters": [
            {
                "description": "{{_schemaName}} object",
                "in": "body",
                "name": "body",
                "required": true,
                "schema": {
                    "items": {
                        "$ref": "#/definitions/{{_schemaName}}"
                    },
                    "type": "array"
                }
            }
        ],
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "create or replace many {{_schemaName}} objects"
    },
    "crudSetOneById": {
        "_idName": "{{_idName}}",
        "_method": "PUT",
        "_path": "/{{_tags0}}/crudSetOneById.{{_idName}}.{{_idBackend}}",
        "parameters": [
            {
                "description": "{{_schemaName}} {{_idName}}",
                "in": "query",
                "name": "{{_idName}}",
                "type": "string"
            },
            {
                "description": "{{_schemaName}} object",
                "in": "body",
                "name": "body",
                "required": true,
                "schema": {
                    "$ref": "#/definitions/{{_schemaName}}"
                }
            }
        ],
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "create or replace one {{_schemaName}} object by {{_idName}}"
    },
    "crudUpdateOneById": {
        "_idName": "{{_idName}}",
        "_method": "PATCH",
        "_path": "/{{_tags0}}/crudUpdateOneById.{{_idName}}.{{_idBackend}}",
        "parameters": [
            {
                "description": "{{_schemaName}} {{_idName}}",
                "in": "query",
                "name": "{{_idName}}",
                "type": "string"
            },
            {
                "description": "{{_schemaName}} object",
                "in": "body",
                "name": "body",
                "required": true,
                "schema": {
                    "$ref": "#/definitions/{{_schemaName}}"
                },
                "x-swgg-notRequired": true
            }
        ],
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "create or update one {{_schemaName}} object by {{_idName}}"
    },
    "fileGetOneById": {
        "_idName": "{{_idName}}",
        "_method": "GET",
        "_path": "/{{_tags0}}/fileGetOneById.{{_idName}}.{{_idBackend}}",
        "parameters": [
            {
                "description": "{{_schemaName}} {{_idName}}",
                "in": "query",
                "name": "{{_idName}}",
                "required": true,
                "type": "string"
            }
        ],
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "type": "file"
                }
            }
        },
        "summary": "get one {{_schemaName}} file by {{_idName}}",
        "x-swgg-consumes0": "application/octet-stream"
    },
    "fileUploadManyByForm": {
        "_fileUploadNumber": "{{_fileUploadNumber}}",
        "_method": "POST",
        "_path": "/{{_tags0}}/fileUploadManyByForm.{{_fileUploadNumber}}",
        "consumes": [
            "multipart/form-data"
        ],
        "parameters": [
            {
                "description": "{{_schemaName}} file description",
                "in": "formData",
                "name": "fileDescription",
                "type": "string"
            },
            {
                "description": "{{_schemaName}} file to upload by form",
                "in": "formData",
                "name": "file1",
                "type": "file"
            }
        ],
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "upload many {{_schemaName}} files by form",
        "x-swgg-consumes0": "multipart/form-data"
    },
    "userLoginByPassword": {
        "_method": "GET",
        "_path": "/{{_tags0}}/userLoginByPassword",
        "parameters": [
            {
                "description": "The user name for login",
                "in": "query",
                "name": "username",
                "required": true,
                "type": "string"
            },
            {
                "description": "The password for login in clear text",
                "in": "query",
                "name": "password",
                "required": true,
                "type": "string"
            }
        ],
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "login by password"
    },
    "userLogout": {
        "_method": "GET",
        "_path": "/{{_tags0}}/userLogout",
        "responses": {
            "200": {
                "description": "200 ok - http://jsonapi.org/format/#document-structure-top-level",
                "schema": {
                    "$ref": "#/definitions/BuiltinJsonapiResponse"
                }
            }
        },
        "summary": "logout"
    }
}
;
// JSON.stringify templateApiDict items to prevent side-effects
Object.keys(local.templateApiDict).forEach(function (key) {
    local.templateApiDict[key] = JSON.stringify(local.templateApiDict[key]);
});



// https://swaggerhub.com/wp-content/uploads/2017/10/Swagger-Icon.svg
local.templateSwaggerUiLogoMediumBase64 = '\
iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAC6FBMVEUAAABqn0BqmUBumUBtmj9tmUBt\
mT9tmkBtmj9tmT9tmUBsmkBsmUBtmj9smkBsmUBsmT9tm0BtmkFvmTxsnEFtmT9smT9smUBtmT9tmkBs\
mkBtmkBsmj9tmz+AgABqmj9smT9tmUBtmkBsmkBsmj9tm0BVqlVgn0BtmkBsmj9tmUBxnDltkkltmD5s\
mT9tmj9smkBtmUFsmEBsmUBtmkBtmT9vnUEA/wBsmj5smkBsmkBmmTNtmj5smj9smT9rmz9smT9smj9t\
mj9um0Fvmz1tmj9qmz5wmT1smj9smkBtmj9mmTNsmT9tmkBrmj9tmEFtmT9smkBtmUBsmUBtmD9roUNt\
mT9smkCAv0Bsm0Bqnj5tmz5smUBrmUBtmkBsmj9smkBtmT9smUBtmkBsmUBtmUBsmkFsnTttmkBwl0Bt\
mkBtmT9tmUCRs2+kwIe2zZ92oEyauXttmkBrmkDj7Nv///+/0qt/p1htmj+JrWTa5s/I2bdtmT9pljxt\
mkCkwIj2+fObunxsmEB0okZsmUBtmT9Vqittmj9rmkGtx5TS4MRumj7b5tDt8+j2+fSStHBrmEFsmT/k\
7Ny2zKBtmT5um0Ftmj9umD5smj9tmj9tmkBsmT9tmkBsmj9smT9tmj9smT5tnD5smj9tmT9smUBtmUJs\
mEDI2bhrmD/R38Nsmj+sxpNtmz9/pljt8ue1zJ+IrWSauXyjv4dsmT5tmT9rmj+txpS/06xrmj9sm0Bs\
mT+Rs3C2zaBsmkBtmUBsmUBtmkBrmUBsmkFinTttmUBsmkBtpDdqnEBsmkBsmT9smD9tmUBtmD1smT9t\
mUBtmUBolzpsmT9umj9smz5tmT9qlUBumT9tnj2txpNsmT9rmjxrnEJtmT9smj9rmUFsmUBtmT9smT9r\
mT1rmD5smkBxqjltmT9smUBtmT9tmkBtm0BsmUBsmUBmmURtmUBsmT9smkBsmj9unEBrmz5tmUBtmT9s\
m0Bvm0OD9tkQAAAA+HRSTlMAGDxkgYyWn6myvL+vnYt4ZlQ/Hjt6pcvx/9SwiT0CNXa39Pe9OAMIW7Zs\
EgdS9fmsSzSg6IonAU7EuAVi1sFFVd7KTy7JKRn+/I0KfeNRL9pv+PBNE7mQBEAdXntrk4anraODgGdH\
Gu8gzM6P//////+ITP/////y////5hG7////Vwvn4QZ+K///Vv////9Dzf//RjPFJZLqpJ5grqrtLTFt\
buwjXP85/0n/Wf///////1ppef//cn+Z//+Xm4d3X1MNw3QOJM/pYdwq7nOUFt1dIXUMQRX/xiYfkdk3\
UP36Mj6cCfYo1asc89cP6+Lg5SxKcL5jF9reEmcAAAc2SURBVHgB7NGDYQNAAAXQX9v8sW2ntt0Gtfdf\
oQOUl0Oqt8ID8O9fS2tbe0dnV3dPb1//wODQ8MjoGJprfGJyappvsFhtw3Y0gcPpcnv4Ia9vwh+AQcGQ\
dZpf4glHojAiFu9OUEAylQ5At0w2QWG5fAEaFUtlNmjGD01m5+YpYWEROiwtU9LKKlRbK1OB9Q2otJnd\
ohLbO7tQJbjnoTL7B1Dj8IhKhcegwPEJFTs9g6xKlRrU6pBynqMW6xeQcLlFYfojr6jRNRp0Q61u0YjA\
HTXLQlywSu3u6xDlpgHVXQgppmiE2wERXTTkAQIeacwTvuyZBoXwwrxdfbltxFEcnzLTU88tMzMzMzMz\
k7PaZhWvvG1ll+3KUrNhLjvMTOU2KTP/L0WtZGfvaH6Nxj77ee5Rv7EmI82MInT2JeigSx9SIg8/go7a\
71HRNPoYOuxxyTryCWgVhnX9B5BzCoXuru5CAXpPKqPh0BjW4yYAOXdAz4giuEuM2yiP9oLySq6bIyvW\
54B66mmV7RlQvuvayHLLFVC7q0zPgvLcvFkJH1Tmeui558EUy/ayXA/MCy8qvZtB9bgWs0qgXlJaL18K\
pujazNLcxutuUzqPgarazaqBOkZpvALBPQz+ATkEf6u7zRxQuslrN1COmwgjbCQ/dBMRqF0VdQq4iP8t\
EiJzTBXcq4oZCa6S3kDk0O8OGAVuW0WMhsYofj0hcpkaNMaQrLHm61XsZAXQuFcNchJ0avqxajnrknFq\
QydCJ+hYFsarDU1od5YvmI1P2Msw4O1nRYIsnK1aTRwaWZNUi8v3h5ZrJ8uRZPW2bpZMRtuzQLJMr4NT\
hkrWVNVsWgeyAklW78kq9Rr0nI5m4XWVekP2N6iIPGqirDdV6hhZFmBnmo+Eg2uaKCvsRNZbGY9p/iYf\
IJcKWWQQbydZR8rfk3KIZO9t78hOKwLD1eRkf777+QNRv+6p2MoqI8M9fH2on7Y85BOIZprzkqyjRa9J\
Iaxl+dB7RMVug56T3sMGcqrKBtfhcdZ06M1wrQ0tFGXX2jvOmgnAvAdYx//ndM8q0KVi2YPWDXHWbFrU\
1dVX4hstc2bNmFuaNx8tFvSVSjMWtkaN+LdgVvOEmugrQGNRnLWYz6Kt+jFgfrwJN6u5IL7ZJYcMyxlk\
0Gc8N3aOs5YIssJiU1VsKXk7KLFbtgyxYijIWh5n7WHOCj3yJy47yR0k93qBS/5DLzRnrYizVmqzyAbS\
fDbclrmJRvoDplaBdvGsHcmzh2b1O0gsdVOryZgJ2DhagIRTM2WtibPWmrJ6HL5Dvywrq0F/LaCPZNGT\
9SeMN7HsiW9ijfU75KmhzdqSnbXyIV9mQz6ckzXknZD834s95iH/bpz1njnLLacTRJg1QQTAoNbQSVLn\
uuasneKsO0H4QUh3+ZOucCkGD+TAGfzy0T8fzTc7UQ8aFRCL46z3wTmVgD98/EZQWz0HLRYsC4KGjxZz\
ljaCZT5dRIVVmB4+H0ArSn+yucgtvYX9RWgNF7zYeBZfbCrkUZZxbPAhMjTyLXz4parI8Kh+g5L9XGXk\
VBYtz49WAz5ChrqVnRH5scPIJGutbEejamux35B9dfNxvqsROU5DliRZM+W/vZWsKjKcn2R9ggyRlZlL\
fhryqUqsk81cyCUQZa2nR+eE/ayi8Duzq2RZXgf2Tj9TqcMxVHaacZvgmLrzWZ+rZncPlayVqtkXHcia\
K8k6VrVYNzQOV77cS7X4SnI5v+1ZX6tW31wiuNwoO1l1aB3IvyfrSFYAnW/Vhr5rd5bHswyf7J6+Hhqh\
naxI8Pb9vRrkB/N8E7T5EOMANdiPve3N8s2vWz8p4m5wo+y8cDWM099Yxfx8NCjfynzqlY0vIjMVtcZ4\
zlnuxsYp/JJWhdolD7fJUcJvIZfl+jawof/WgLvC9BIeC9rwJSV+VTovvgDGt5vlgLn0N6W1C6i6zaxR\
oC5TGc4CE1nMqoF6/mCV4aJLwPjWsvodULuoTHuAqlrKCjRVpymD80B5gYWsegXcfr8L/nkBFzXCPFlh\
sMx39PuSRkdCqxhVR40aVYkc2PWHEpiEv9qDZ4BcozAAwO+1zffatpndkq0p7UPTv+U929qz7bHlt5mx\
tscP55z4PIwlhgAH3jJkKj4OOKkcR5bsgSP5R2SnHDhTeCArncBDEzJyCnhpQSY+/QR+viIDr4G3KKTu\
bgrw14WUnQRBwpVIkUcXCPRZhdSoroBg6lGkJEkDInhrkYr/gyCO8ziSl68DsY70IWH6BiDg57FiJOm/\
AcgIvOCBpOibXwIxNUYkw2QGkl40WVA8qwZIm4q+jeLE+74ACmw3plG4mUc2oERXNovCOGUCVaHaD8jX\
h7yjQJ2uSqJE7vzOZ+qAjbcNX+eQC0/JPxswNT8R9BS38vF35+cB2AnZC76TQY64zu1beTeuwk67VnNl\
8V7M0tkzp0+dPHF8+f4KHDoEq3MUjwHy2w4OAAAAAElFTkSuQmCC\
';



// https://github.com/swagger-api/swagger-ui/blob/v2.1.3/dist/images/logo_small.png
local.templateSwaggerUiLogoSmallBase64 = '\
iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFn\
ZVJlYWR5ccllPAAAAqRJREFUeNrEVz1s00AUfnGXii5maMXoEUEHVwIpEkPNgkBdMnQoU5ytiKHJwpp2\
Q2JIO8DCUDOxIJFIVOoWZyJSh3pp1Q2PVVlcCVBH3ufeVZZ9Zye1Ay86nXV+ue/9fO/lheg/Se02X1rv\
ksmbnTiKvuxQMBNgBnN4a/LCbmnUAP6JV58NCUsBC8CuAJxGPF47OgNqBaA93tolUhnx6jC4NxGwyOEw\
lccyAs+3kwdzKq0HDn2vEBTi8J2XpyMaywNDE157BhXUE3zJhlq8GKq+Zd2zaWHepPA8oN9XkfLmRdOi\
JV4XUUg/IyWncLjCYY/SHndV2u7zHr3bPKZtdxgboJOnthvrfGj/oMf3G0r7JVmNlLfKklmrt2MvvcNO\
7LFOhoFHfuAJI5o6ta10jpt5CQLgwXhXG2YIwvu+34qf78ybOjWTnWwkgR36d7JqJOrW0hHmNrKg9xhi\
S4+1jFmrxymh03B0w+6kURIAu3yHtOD5oaUNojMnGgbcctNvwdAnyxvxRR+/vaJnjzbpzcZX+nN1SdGv\
85i9eH8w3qPO+mdm/y4dnQ1iI8Fq6Nf4cxL6GWSjiFDSs0VRnxC5g0xSB2cgHpaseTxfqOv5uoHkNQ6H\
a/N1Yz9mNMppEkEkYKj79q6uCq4bCHcSX3fJ0Vk/k9siASjCm1N6gZH6Ec9IXt2WkFES2K/ixoIyktJP\
Au/ptOA1SgO5zqtr6KASJPF0nMV8dgMsRhRPOcMwqQAOoi0VAIMLAEWJ6YYC1c8ibj1GP51RqwzYwZVM\
HQuvOzMCBUtb2tGHx5NAdLKqp5AX7Ng4d+Zi8AGDI9z1ijx9yaCH04y3GCP2S+QcvaGl+pcxyUBvinFl\
awoDQjHSelX8hQEoIrAq8p/mgC88HOS1YCl/BRgAmiD/1gn6Nu8AAAAASUVORK5CYII=\
';



// https://github.com/swagger-api/swagger-ui/blob/v2.1.3/src/main/template/main.handlebars
local.templateUiMain = '\
<!-- <div class="swggUiContainer"> -->\n\
<h2 class="eventDelegateSubmit hXxx thead" data-onevent="onEventUiReload">\n\
    <a class="td td1" href="https://github.com/kaizhu256/node-swgg" target="_blank">swgg</a>\n\
    <input\n\
        class="td td2"\n\
        placeholder="http://petstore.swagger.io/v2/swagger.json"\n\
        type="text"\n\
        value="{{urlSwaggerJson}}"\n\
    >\n\
    <input\n\
        class="td td3"\n\
        id="swggApiKeyInput1"\n\
        placeholder="api-key"\n\
        type="text"\n\
        value="{{apiKeyValue}}"\n\
    >\n\
    <button class="button eventDelegateClick td td4" data-onevent="onEventUiReload">explore</button>\n\
    <button\n\
        class="button eventDelegateClick td td5" data-onevent="onEventUiReload"\n\
        id="swggApiKeyClearButton1"\n\
    >\n\
        clear api-keys\n\
    </button>\n\
</h2>\n\
<div\n\
    class="colorError"\n\
    id="swggUiReloadErrorDiv1"\n\
    style="background: none; border: 0;"\n\
></div>\n\
<div class="eventDelegateClick info reset">\n\
    {{#if info}}\n\
    {{#if info.x-swgg-homepage}}\n\
    <h2 class="hXxx">\n\
        <a href="{{info.x-swgg-homepage}}" target="_blank">{{info.title}} ({{info.version}})</a>\n\
    </h2>\n\
    {{#unless info.x-swgg-homepage}}\n\
    <h2 class="hXxx">{{info.title}} ({{info.version}})</h2>\n\
    {{/if info.x-swgg-homepage}}\n\
    {{#if info.x-swgg-description}}\n\
    <div class="markdown">{{info.x-swgg-description markdownToHtml}}</div>\n\
    {{/if info.x-swgg-description}}\n\
    {{#if info.description}}\n\
    <div class="description markdown">{{info.description markdownToHtml}}</div>\n\
    {{/if info.description}}\n\
    {{#if x-swgg-downloadStandaloneApp}}\n\
    <a class="button" download href="{{x-swgg-downloadStandaloneApp notHtmlSafe}}">\n\
        download standalone app\n\
    </a><br>\n\
    {{/if x-swgg-downloadStandaloneApp}}\n\
    {{#if x-swgg-onEventDomDb}}\n\
    <button class="button" data-onevent="onEventDomDb" data-on-event-dom-db="dbResetButton1">\n\
        reset database\n\
    </button><br>\n\
    <button class="button" data-onevent="onEventDomDb" data-on-event-dom-db="dbExportButton1">\n\
        export database -&gt; file\n\
    </button><br>\n\
    <button class="button" data-onevent="onEventDomDb" data-on-event-dom-db="dbImportButton1">\n\
        import database &lt;- file\n\
    </button><br>\n\
    {{/if x-swgg-onEventDomDb}}\n\
    <ul>\n\
        {{#if externalDocs.url}}\n\
        <li>\n\
            <a href="{{externalDocs.url}}" target="_blank">\n\
                {{#if externalDocs.description}}\n\
                {{externalDocs.description}}\n\
                {{#unless externalDocs.description}}\n\
                external url\n\
                {{/if externalDocs.description}}\n\
            </a>\n\
        </li>\n\
        {{/if externalDocs.url}}\n\
        {{#if info.termsOfService}}\n\
        <li><a target="_blank" href="{{info.termsOfService}}">terms of service</a></li>\n\
        {{/if info.termsOfService}}\n\
        {{#if info.contact.name}}\n\
        <li>created by {{info.contact.name}}</li>\n\
        {{/if info.contact.name}}\n\
        {{#if info.contact.url}}\n\
        <li>see more at <a href="{{info.contact.url}}">{{info.contact.url}}</a></li>\n\
        {{/if info.contact.url}}\n\
        {{#if info.contact.email}}\n\
        <li>\n\
            <a\n\
                target="_parent"\n\
                href="mailto:{{info.contact.email}}?subject={{info.title}}"\n\
            >\n\
                contact the developer\n\
            </a>\n\
        </li>\n\
        {{/if info.contact.email}}\n\
        {{#if info.license}}\n\
        <li><a target="_blank" href="{{info.license.url}}">{{info.license.name}}</a></li>\n\
        {{/if info.license}}\n\
    </ul>\n\
    {{/if info}}\n\
</div>\n\
{{#if urlSwaggerJson}}\n\
<h4 class="label">nodejs initialization</h4>\n\
<pre id="swggAjaxProgressPre1" tabIndex="0">\n\
/*\n\
 * initialize nodejs swgg-client\n\
 * 1. download currently-loaded apis to file swagger.json:\n\
 *     $ curl -L -o swagger.json "{{urlSwaggerJson}}"\n\
 * 2. npm install swgg\n\
 *     $ npm install swgg\n\
 * 3. run code below to initialize nodejs swgg-client\n\
 * 4. (optional) edit file swagger.json to suit your needs\n\
 */\n\
var swgg;\n\
swgg = require("swgg");\n\
swgg.apiUpdate(require("./swagger.json"));\n\
console.log("printing currently loaded apis ...");\n\
Object.keys(swgg.apiDict).sort().forEach(function (key) {\n\
    console.log("swgg.apiDict[" + JSON.stringify(key) + "].ajax");\n\
});\n\
console.log("initialized nodejs swgg-client");\n\
</pre>\n\
<div class="color777 reset">[ <span>base url</span>: {{basePath}} ]</div>\n\
{{/if urlSwaggerJson}}\n\
<div id="swggAjaxProgressDiv1" style="text-align: center;">\n\
    <span>{{ajaxProgressText}}</span>\n\
    <div class="uiAnimateSpin" style="animation: uiAnimateSpin 2s linear infinite; border: 5px solid #999; border-radius: 50%; border-top: 5px solid #7d7; display: inline-block; height: 25px; vertical-align: middle; width: 25px;"></div>\n\
</div>\n\
<ol class="reset resourceList" style="list-style-type: upper-roman;"></ol>\n\
<div class="utility2FooterDiv">\n\
    [ this document was created with\n\
    <a href="https://github.com/kaizhu256/node-swgg" target="_blank">swgg</a>\n\
    ]\n\
</div>\n\
<!-- </div> -->\n\
';



// https://github.com/swagger-api/swagger-ui/blob/v2.1.3/src/main/template/operation.handlebars
local.templateUiOperation = '\
<div class="operation" data-_method-path="{{_methodPath}}" id="{{id}}">\n\
<div class="thead" data-onevent="onEventOperationDisplayShow" tabindex="0">\n\
    <span class="td td1"></span>\n\
    <span class="method{{_method}} td td2">{{_method}}</span>\n\
    <span\n\
        class="td td3"\n\
        {{#if deprecated}}style="text-decoration: line-through;"{{/if deprecated}}\n\
    >\n\
        {{_path}}\n\
    </span>\n\
    <span class="color777 td td4 textOverflowEllipsis">{{summary}}</span>\n\
</div>\n\
<form accept-charset="UTF-8"\n\
    class="onEventInputValidateAndAjax uiAnimateSlide"\n\
    style="border-bottom: 0; border-top: 0; margin-bottom: 0; margin-top: 0; max-height: 0; padding-bottom: 0; padding-top: 0;"\n\
>\n\
    {{#if deprecated}}\n\
    <h4 class="colorError label">(warning: deprecated)</h4><br>\n\
    {{/if deprecated}}\n\
    <h4 class="label">description</h4>\n\
    <div class="description markdown">\n\
        {{description markdownToHtml}}\n\
    </div>\n\
    {{#if parameters.length}}\n\
    <h4 class="label">parameters</h4>\n\
    <div class="borderBottom1Px color777 schemaP thead">\n\
        <span class="td td1">name and description</span>\n\
        <span class="td td2">data type</span>\n\
        <span class="td td3">value</span>\n\
        <span class="td td4">schema</span>\n\
    </div>\n\
    {{#each parameters}}\n\
    {{innerHTML notHtmlSafe}}\n\
    {{/each parameters}}\n\
    {{/if parameters.length}}\n\
    <h4 class="label">response messages</h4>\n\
    <div class="borderBottom1Px color777 schemaResponse thead">\n\
        <span class="td td1">http status code</span>\n\
        <span class="td td2">reason</span>\n\
    </div>\n\
    {{#each responseList}}\n\
    <div class="schemaResponse tr">\n\
        <span class="td td1">{{key}}</span>\n\
        <span class="markdown td td2">{{value.description markdownToHtml}}</span>\n\
    </div>\n\
    {{/each responseList}}\n\
    <button class="button" data-onevent="onEventOperationAjax">try it out!</button>\n\
    <h4 class="label">nodejs request</h4>\n\
    <pre class="requestJavascript" tabIndex="0"></pre>\n\
    <h4 class="label">curl request</h4>\n\
    <pre class="requestCurl" tabIndex="0"></pre>\n\
    <h4 class="label">response status code</h4>\n\
    <pre class="responseStatusCode" tabindex="0"></pre>\n\
    <h4 class="label">response headers</h4>\n\
    <pre class="responseHeaders" tabIndex="0"></pre>\n\
    <h4 class="label">response body</h4>\n\
    <pre class="responseBody" tabIndex="0"></pre>\n\
    <div class="responseMedia"></div>\n\
</form>\n\
</div>\n\
';



// https://github.com/swagger-api/swagger-ui/blob/v2.1.3/src/main/template/param.handlebars
local.templateUiParameter = '\
<div class="schemaP tr" id="{{id}}" data-name="{{name}}">\n\
<span class="td td1">\n\
    {{name}}\n\
    {{#if required}}<br><span style="font-weight: bold;">(required)</span>{{/if required}}\n\
    {{#if description}}\n\
    <br>\n\
    <span class="color777 markdown">{{description markdownToHtml}}</span>\n\
    {{/if description}}\n\
</span>\n\
<span class="td td2">{{type2}}{{#if format2}}<br>({{format2}}){{/if format2}}</span>\n\
<span class="td td3" data-onevent="onEventInputValidateAndAjax">\n\
    {{#if isTextarea}}\n\
    <div class="multilinePlaceholderContainer">\n\
        <pre class="multilinePlaceholderPre">{{placeholder}}</pre>\n\
        <textarea\n\
            class="input multilinePlaceholderTextarea" data-onevent="onEventInputTextareaChange"\n\
            data-value-text="{{valueText encodeURIComponent notHtmlSafe}}"\n\
        ></textarea>\n\
    </div>\n\
    {{/if isTextarea}}\n\
    {{#if isFile}}<input class="input" type="file">{{/if isFile}}\n\
    {{#if enum2}}\n\
    <select class="input" {{#if isSelectMultiple}}multiple{{/if isSelectMultiple}}>\n\
        {{#each selectOptionList}}\n\
        <option\n\
            data-value-select-option=\n\
                "{{valueSelectOption jsonStringify encodeURIComponent notHtmlSafe}}"\n\
            id="{{id}}"\n\
            {{selected}}\n\
        >{{placeholder}}</option>\n\
        {{/each selectOptionList}}\n\
    </select>\n\
    {{/if enum2}}\n\
    {{#if isInputText}}\n\
    <input\n\
        class="input"\n\
        data-value-text="{{valueText encodeURIComponent notHtmlSafe}}"\n\
        placeholder="{{placeholder}}"\n\
        type="text"\n\
    >\n\
    {{/if isInputText}}\n\
    <div class="colorError"></div>\n\
</span>\n\
<span class="td td4">\n\
    {{#if schemaText}}<pre tabIndex="0">{{schemaText}}</pre>{{/if schemaText}}\n\
</span>\n\
</div>\n\
';



local.templateUiRequestJavascript = '\
/*\n\
 * reproduce api-call {{option.api._methodPath jsonStringify}}\n\
 * 1. initialize nodejs swgg-client from previous step\n\
 * 2. run code below to reproduce api-call\n\
 */\n\
swgg.apiDict[{{option.api._methodPath jsonStringify}}].ajax({{optionJson}}, \
function (error, data) {\n\
    if (error) {\n\
        console.error(error);\n\
        return;\n\
    }\n\
    console.log(data.responseJson || data.responseText);\n\
}\
);\n\
';



// https://github.com/swagger-api/swagger-ui/blob/v2.1.3/src/main/template/resource.handlebars
local.templateUiResource = '\
<li\n\
    class="eventDelegateChange eventDelegateClick eventDelegateKeyup eventDelegateSubmit resource"\n\
    data-name="{{name}}"\n\
    id="{{id}}"\n\
>\n\
<h3 class="thead">\n\
    <span class="td td1 textOverflowEllipsis" data-onevent="onEventResourceDisplayAction" tabindex="0">\n\
        {{name}}:&nbsp;&nbsp;{{summary}}\n\
    </span>\n\
    <span class="td td2" data-onevent="onEventResourceDisplayAction" tabindex="0">\n\
    expand / collapse operations\n\
    </span>\n\
</h3>\n\
<ol\n\
    class="operationList uiAnimateSlide"\n\
    style="border-bottom: 0; border-top: 0; margin-bottom: 0; margin-top: 0; max-height: 0; padding-bottom: 0; padding-top: 0;"\n\
>\n\
    <div class="description markdown">{{description markdownToHtml}}</div>\n\
</ol>\n\
</li>\n\
';



local.templateUiTitle = '\
{{#if info.title}}\n\
{{#if info.version}}\n\
{{info.title}} ({{info.version}})\n\
{{#unless info.version}}\n\
{{info.title}}\n\
{{/if info.version}}\n\
{{#unless info.title}}\n\
swgg\n\
{{/if info.title}}\n\
';



/* validateLineSortedReset */
local.assetsDict["/assets.swgg.html"] = local.assetsDict["/assets.utility2.template.html"]
    .replace("assets.utility2.template.html", "")
    .replace((/<title>.*?<\/title>/), "<title>swgg</title>")
    .replace("\n<!-- utility2-comment\n", "\n")
    .replace("\n</style>\n", '\
\n\
</style>\n\
<style>\n\
/* jslint utility2:true */\n\
/*csslint\n\
*/\n\
/* csslint ignore:start */\n\
.swggUiContainer,\n\
.swggUiContainer * {\n\
    border: 0;\n\
    border-radius: 0;\n\
    margin: 0;\n\
    max-width: 100%;\n\
    padding: 0;\n\
}\n\
.swggUiContainer pre,\n\
.swggUiContainer .operation > .thead:focus,\n\
.swggUiContainer .resource > .thead > .td:focus {\n\
    outline: none;\n\
}\n\
.swggUiContainer .description > * {\n\
    margin-top: 20px;\n\
}\n\
.swggUiContainer .description > *:first-child {\n\
    margin-top: 0;\n\
}\n\
/* csslint ignore:end */\n\
/* validateLineSortedReset */\n\
/* general */\n\
.swggUiContainer code,\n\
.swggUiContainer pre,\n\
.swggUiContainer textarea {\n\
    line-height: 1.25rem;\n\
    max-height: 50rem;\n\
    overflow: auto;\n\
}\n\
.swggUiContainer input,\n\
.swggUiContainer pre,\n\
.swggUiContainer textarea {\n\
    min-height: 1.5rem;\n\
}\n\
.swggUiContainer pre {\n\
    white-space: pre;\n\
}\n\
.swggUiContainer .button,\n\
.swggUiContainer .operation > .thead,\n\
.swggUiContainer .resource > .thead {\n\
    cursor: pointer;\n\
}\n\
.swggUiContainer .button,\n\
.swggUiContainer .operation > .thead > .td3,\n\
.swggUiContainer .resource > .thead > .td {\n\
    font-weight: bold;\n\
    text-decoration: underline;\n\
}\n\
.swggUiContainer .markdown pre {\n\
    max-height: none;\n\
}\n\
.swggUiContainer .multilinePlaceholderContainer {\n\
    min-height: 10rem;\n\
    position: relative;\n\
}\n\
.swggUiContainer .multilinePlaceholderPre {\n\
    position: absolute;\n\
    white-space: pre;\n\
}\n\
.swggUiContainer .multilinePlaceholderTextarea {\n\
    position: absolute;\n\
}\n\
.swggUiContainer .operation > .thead > .td1 {\n\
    text-align: left;\n\
    width: 2rem;\n\
}\n\
.swggUiContainer .operation > .thead > .td2 {\n\
    text-align: center;\n\
    width: 5rem;\n\
}\n\
.swggUiContainer .responseBody,\n\
.swggUiContainer .responseHeaders,\n\
.swggUiContainer .responseStatusCode {\n\
    font-weight: bold;\n\
}\n\
.swggUiContainer .schemaP pre,\n\
.swggUiContainer .schemaP select[multiple],\n\
.swggUiContainer .schemaP textarea,\n\
.swggUiContainer .schemaP .multilinePlaceholderContainer {\n\
    height: 10rem;\n\
}\n\
.swggUiContainer .schemaP > .td3 {\n\
    overflow: visible;\n\
}\n\
.swggUiContainer .td {\n\
    overflow: auto;\n\
    overflow-wrap: break-word;\n\
}\n\
.swggUiContainer .td input,\n\
.swggUiContainer .td pre,\n\
.swggUiContainer .td select,\n\
.swggUiContainer .td textarea {\n\
    width: 100%;\n\
}\n\
.swggUiContainer .zeroPixel {\n\
    border: 0;\n\
    height: 0;\n\
    margin: 0;\n\
    padding: 0;\n\
    width: 0;\n\
}\n\
/* validateLineSortedReset */\n\
/* background */\n\
.swggUiContainer code,\n\
.swggUiContainer pre {\n\
    background: #ddd;\n\
}\n\
.swggUiContainer .button {\n\
    background: #ddf;\n\
}\n\
.swggUiContainer .description {\n\
    background: #bdb;\n\
}\n\
.swggUiContainer .methodDELETE {\n\
    background: #b07;\n\
}\n\
.swggUiContainer .methodGET {\n\
    background: #373;\n\
}\n\
.swggUiContainer .methodHEAD {\n\
    background: #7b7;\n\
}\n\
.swggUiContainer .methodOPTIONS {\n\
    background: #777;\n\
}\n\
.swggUiContainer .methodPATCH {\n\
    background: #99f;\n\
}\n\
.swggUiContainer .methodPOST {\n\
    background: #33d;\n\
}\n\
.swggUiContainer .methodPUT {\n\
    background: #77d;\n\
}\n\
.swggUiContainer .multilinePlaceholderPre {\n\
    background: #fff;\n\
}\n\
.swggUiContainer .operation {\n\
    background: #dfd;\n\
}\n\
.swggUiContainer .resource > .thead,\n\
.swggUiContainer > .thead {\n\
    background: #7b7;\n\
}\n\
.swggUiContainer > .info > .button {\n\
    width: 20rem;\n\
}\n\
.swggUiContainer > .thead > .td1 {\n\
    background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAqRJREFUeNrEVz1s00AUfnGXii5maMXoEUEHVwIpEkPNgkBdMnQoU5ytiKHJwpp2Q2JIO8DCUDOxIJFIVOoWZyJSh3pp1Q2PVVlcCVBH3ufeVZZ9Zye1Ay86nXV+ue/9fO/lheg/Se02X1rvksmbnTiKvuxQMBNgBnN4a/LCbmnUAP6JV58NCUsBC8CuAJxGPF47OgNqBaA93tolUhnx6jC4NxGwyOEwlccyAs+3kwdzKq0HDn2vEBTi8J2XpyMaywNDE157BhXUE3zJhlq8GKq+Zd2zaWHepPA8oN9XkfLmRdOiJV4XUUg/IyWncLjCYY/SHndV2u7zHr3bPKZtdxgboJOnthvrfGj/oMf3G0r7JVmNlLfKklmrt2MvvcNO7LFOhoFHfuAJI5o6ta10jpt5CQLgwXhXG2YIwvu+34qf78ybOjWTnWwkgR36d7JqJOrW0hHmNrKg9xhiS4+1jFmrxymh03B0w+6kURIAu3yHtOD5oaUNojMnGgbcctNvwdAnyxvxRR+/vaJnjzbpzcZX+nN1SdGv85i9eH8w3qPO+mdm/y4dnQ1iI8Fq6Nf4cxL6GWSjiFDSs0VRnxC5g0xSB2cgHpaseTxfqOv5uoHkNQ6Ha/N1Yz9mNMppEkEkYKj79q6uCq4bCHcSX3fJ0Vk/k9siASjCm1N6gZH6Ec9IXt2WkFES2K/ixoIyktJPAu/ptOA1SgO5zqtr6KASJPF0nMV8dgMsRhRPOcMwqQAOoi0VAIMLAEWJ6YYC1c8ibj1GP51RqwzYwZVMHQuvOzMCBUtb2tGHx5NAdLKqp5AX7Ng4d+Zi8AGDI9z1ijx9yaCH04y3GCP2S+QcvaGl+pcxyUBvinFlawoDQjHSelX8hQEoIrAq8p/mgC88HOS1YCl/BRgAmiD/1gn6Nu8AAAAASUVORK5CYII=) no-repeat left center;\n\
}\n\
/* validateLineSortedReset */\n\
/* border */\n\
.swggUiContainer input,\n\
.swggUiContainer pre,\n\
.swggUiContainer select,\n\
.swggUiContainer textarea {\n\
    border: 1px solid #999;\n\
}\n\
.swggUiContainer .borderBottom1Px {\n\
    border-bottom: 1px solid #777;\n\
}\n\
.swggUiContainer .button {\n\
    border: 1px solid #35b;\n\
    border-radius: 5px;\n\
}\n\
.swggUiContainer .resource > .thead > .td2 {\n\
    border-left: 1px solid #333;\n\
}\n\
/* validateLineSortedReset */\n\
/* color */\n\
.swggUiContainer a,\n\
.swggUiContainer .button,\n\
.swggUiContainer .operation > .thead,\n\
.swggUiContainer .resource > .thead {\n\
    color: #35b;\n\
}\n\
.swggUiContainer code {\n\
    color: #333;\n\
}\n\
.swggUiContainer .color777 {\n\
    color: #777;\n\
}\n\
.swggUiContainer .label {\n\
    color: #373;\n\
}\n\
.swggUiContainer .multilinePlaceholderPre {\n\
    color: #999;\n\
}\n\
.swggUiContainer .operation > .thead > .td2,\n\
.swggUiContainer .resource > .thead,\n\
.swggUiContainer > .thead > .td1 {\n\
    color: #fff;\n\
}\n\
.swggUiContainer .thead,\n\
.swggUiContainer .tr {\n\
    display: flex;\n\
}\n\
/* validateLineSortedReset */\n\
/* flex */\n\
.swggUiContainer .operation > .thead > .td3 {\n\
    flex: 1;\n\
}\n\
.swggUiContainer .operation > .thead > .td4 {\n\
    flex: 1;\n\
}\n\
.swggUiContainer .resource > .thead > .td1 {\n\
    flex: 1;\n\
}\n\
.swggUiContainer .schemaP > .td1 {\n\
    flex: 2;\n\
}\n\
.swggUiContainer .schemaP > .td2 {\n\
    flex: 1;\n\
}\n\
.swggUiContainer .schemaP > .td3 {\n\
    flex: 4;\n\
}\n\
.swggUiContainer .schemaP > .td4 {\n\
    flex: 3;\n\
}\n\
.swggUiContainer .schemaResponse > .td1 {\n\
    flex: 1;\n\
}\n\
.swggUiContainer .schemaResponse > .td2 {\n\
    flex: 4;\n\
}\n\
.swggUiContainer > .thead > .td2 {\n\
    flex: 4;\n\
}\n\
.swggUiContainer > .thead > .td3 {\n\
    flex: 1;\n\
}\n\
/* validateLineSortedReset */\n\
/* margin */\n\
.swggUiContainer li {\n\
    margin-top: 10px;\n\
}\n\
.swggUiContainer ol,\n\
.swggUiContainer ul,\n\
.swggUiContainer .td {\n\
    margin-left: 20px;\n\
}\n\
.swggUiContainer .description,\n\
.swggUiContainer .label,\n\
.swggUiContainer .operation,\n\
.swggUiContainer .operation > form > div,\n\
.swggUiContainer .operation > form > pre,\n\
.swggUiContainer .resource,\n\
.swggUiContainer > div,\n\
.swggUiContainer > ol,\n\
.swggUiContainer > pre,\n\
.swggUiContainer > .info > div,\n\
.swggUiContainer > .info > ul,\n\
.swggUiContainer > .info > .button,\n\
.swggUiContainer > .info > .hXxx {\n\
    margin-top: 20px;\n\
}\n\
.swggUiContainer .label {\n\
    margin-bottom: -19px;\n\
}\n\
.swggUiContainer .operation > form > .button {\n\
    margin: 40px 0 20px 0;\n\
}\n\
.swggUiContainer .resource > ol,\n\
.swggUiContainer .resource > .thead > .td,\n\
.swggUiContainer .td:first-child,\n\
.swggUiContainer > ol {\n\
    margin-left: 0;\n\
}\n\
.swggUiContainer .resource > ol > .description {\n\
    margin-top: 0;\n\
}\n\
/* validateLineSortedReset */\n\
/* padding */\n\
.swggUiContainer code {\n\
    padding: 2px;\n\
}\n\
.swggUiContainer input {\n\
    padding: 0 5px;\n\
}\n\
.swggUiContainer pre,\n\
.swggUiContainer textarea {\n\
    padding: 5px;\n\
}\n\
.swggUiContainer .button,\n\
.swggUiContainer .resource > .thead > .td,\n\
.swggUiContainer > .thead {\n\
    padding: 10px 20px;\n\
}\n\
.swggUiContainer .description {\n\
    padding: 20px;\n\
}\n\
.swggUiContainer .operation > form {\n\
    padding: 0 20px;\n\
}\n\
.swggUiContainer .operation > form .td1 {\n\
    padding-left: 0;\n\
}\n\
.swggUiContainer .operation > .thead {\n\
    padding: 0 20px;\n\
}\n\
.swggUiContainer .operation > .thead > .td {\n\
    padding: 10px 0;\n\
}\n\
.swggUiContainer > .thead > .td1 {\n\
    padding-left: 40px;\n\
    padding-top: 4px;\n\
}\n\
/* validateLineSortedReset */\n\
/* .textOverflowEllipsis */\n\
.swggUiContainer .textOverflowEllipsis {\n\
    overflow: hidden;\n\
    text-overflow: ellipsis;\n\
    white-space: nowrap;\n\
}\n\
/* validateLineSortedReset */\n\
/* @media */\n\
@media screen and (max-width: 640px) {\n\
    .swggUiContainer .operation {\n\
        font-size: small;\n\
    }\n\
    .swggUiContainer .resource > .thead > .td {\n\
        flex: 1;\n\
    }\n\
    .swggUiContainer > .thead {\n\
        display: block;\n\
        padding: 0;\n\
    }\n\
    .swggUiContainer > .thead > .td {\n\
        display: block;\n\
        margin: 0;\n\
        width: 100%;\n\
    }\n\
}\n\
/* validateLineSortedReset */\n\
/* hover */\n\
.swggUiContainer a:hover,\n\
.swggUiContainer .resource > .thead > .td:hover,\n\
.swggUiContainer > .thead > .td1:hover {\n\
    color: #037;\n\
}\n\
.swggUiContainer .button:hover,\n\
.swggUiContainer .operation > .thead:hover {\n\
    background: #bbf;\n\
}\n\
/* validateLineSortedReset */\n\
/* error */\n\
.swggUiContainer button.hasError,\n\
.swggUiContainer pre.hasError,\n\
.swggUiContainer textarea.hasError {\n\
    background: #fbb;\n\
}\n\
.swggUiContainer input.hasError,\n\
.swggUiContainer select.hasError {\n\
    border: 5px solid #d00;\n\
}\n\
</style>\n\
')
    .replace((/\n<\/script>\n[\S\s]*\n<\/html>\n/), '\
\n\
</script>\n\
<div class="swggUiContainer" style="margin: 0 auto; max-width: 1200px;">\n\
' + local.templateRender(local.templateUiMain, {
    ajaxProgressText: "loading script",
    apiKeyValue: "",
    urlSwaggerJson: ""
}) + '\
</div>\n\
<script>\n\
/* jslint utility2:true */\n\
// init domOnEventMediaHotkeys\n\
(function () {\n\
/*\n\
 * this function will add media-hotkeys to elements\n\
 * with class=".domOnEventMediaHotkeysInit"\n\
 */\n\
    "use strict";\n\
    var currentTarget;\n\
    var identity;\n\
    var input;\n\
    var onEvent;\n\
    if (window.domOnEventMediaHotkeys) {\n\
        return;\n\
    }\n\
    identity = function (value) {\n\
    /*\n\
     * this function will return <value>\n\
     */\n\
        return value;\n\
    };\n\
    window.domOnEventMediaHotkeys = function (event) {\n\
        var media;\n\
        if (event === "init") {\n\
            Array.from(document.querySelectorAll(\n\
                ".domOnEventMediaHotkeysInit"\n\
            )).forEach(function (media) {\n\
                media.classList.remove("domOnEventMediaHotkeysInit");\n\
                media.classList.add("domOnEventMediaHotkeys");\n\
                ["play", "pause", "seeking"].forEach(function (event) {\n\
                    media.addEventListener(event, onEvent);\n\
                });\n\
            });\n\
            return;\n\
        }\n\
        if (event.currentTarget.classList.contains("domOnEventMediaHotkeys")) {\n\
            currentTarget = event.currentTarget;\n\
            input.focus();\n\
            return;\n\
        }\n\
        media = currentTarget;\n\
        try {\n\
            switch (event.key || event.type) {\n\
            case ",":\n\
            case ".":\n\
                media.currentTime += (\n\
                    event.key === "," && identity(-0.03125)\n\
                ) || 0.03125;\n\
                break;\n\
            case "<":\n\
            case ">":\n\
                media.playbackRate *= (\n\
                    event.key === "<" && identity(0.5)\n\
                ) || 2;\n\
                break;\n\
            case "ArrowDown":\n\
            case "ArrowUp":\n\
                media.volume += (\n\
                    event.key === "ArrowDown" && identity(-0.05)\n\
                ) || 0.05;\n\
                break;\n\
            case "ArrowLeft":\n\
            case "ArrowRight":\n\
                media.currentTime += (\n\
                    event.key === "ArrowLeft" && identity(-5)\n\
                ) || 5;\n\
                break;\n\
            case "j":\n\
            case "l":\n\
                media.currentTime += (event.key === "j" && identity(-10)) || 10;\n\
                break;\n\
            case "k":\n\
            case " ":\n\
                if (media.paused) {\n\
                    media.play();\n\
                } else {\n\
                    media.pause();\n\
                }\n\
                break;\n\
            case "m":\n\
                media.muted = !media.muted;\n\
                break;\n\
            default:\n\
                if (event.key >= 0) {\n\
                    media.currentTime = 0.1 * event.key * media.duration;\n\
                    break;\n\
                }\n\
                return;\n\
            }\n\
        } catch (ignore) {}\n\
        event.preventDefault();\n\
    };\n\
    onEvent = window.domOnEventMediaHotkeys;\n\
    input = document.createElement("button");\n\
    input.style = (\n\
        "border:0;height:0;margin:0;padding:0;position:fixed;width:0;"\n\
        + "z-index:-1;"\n\
    );\n\
    input.addEventListener("click", onEvent);\n\
    input.addEventListener("keydown", onEvent);\n\
    document.body.appendChild(input);\n\
    onEvent("init");\n\
}());\n\
\n\
\n\
\n\
document.querySelector(\n\
    ".swggUiContainer > .thead > .td2"\n\
).value = ((\n\
    /\\bmodeSwaggerJsonUrl=([^&]+)|$/gm\n\
).exec(location.search)[1] || "assets.swgg.swagger.json");\n\
</script>\n\
<script src="assets.utility2.rollup.js"></script>\n\
<script>\n\
/* jslint utility2:true */\n\
window.local = window.local || window.swgg;\n\
window.swgg.uiEventListenerDict.onEventUiReload({\n\
    swggInit: true\n\
});\n\
</script>\n\
<!-- swgg-script-extra-begin -->\n\
<!-- swgg-script-extra-end -->\n\
</body>\n\
</html>\n\
');
/* jslint ignore:end */
local.assetsDict["/assets.swgg.swagger.schema.json"] = local.jsonStringifyOrdered(
    local.objectSetOverride(
        JSON.parse(local.assetsDict["/assets.swgg.json-schema.json"].replace((
            /"\$ref":".*?#/g
        ), "\"$ref\":\"http://json-schema.org/draft-04/schema#")),
        JSON.parse(local.assetsDict["/assets.swgg.schema.json"].replace((
            /"\$ref":".*?#/g
        ), "\"$ref\":\"http://json-schema.org/draft-04/schema#")),
        2
    )
);
local.swaggerSchemaJson = JSON.parse(local.assetsDict["/assets.swgg.swagger.schema.json"]);
}());



// run shared js-env code - function
(function () {
local.apiAjax = function (that, option, onError) {
/*
 * this function will send a swagger-api ajax-request with the operation that
 */
    var tmp;
    local.objectSetDefault(option, {
        data: "",
        operation: that,
        paramDict: {},
        url: ""
    });
    if (option.modeDefault) {
        local.normalizeSwaggerParamDict(option);
    }
    // try to validate paramDict
    option.error = local.swaggerValidateDataParameters({
        // normalize paramDict
        data: local.normalizeSwaggerParamDict({
            modeNoDefault: option.modeNoDefault,
            operation: that,
            paramDict: local.jsonCopy(option.paramDict)
        }).paramDict,
        dataReadonlyRemove: option.paramDict,
        prefix: ["operation", that._methodPath],
        parameters: that.parameters,
        swaggerJson: local.swaggerJson
    })[0];
    // init option-defaults
    local.objectSetDefault(option, {
        inForm: (
            // ternary-condition
            that._consumes0 === "multipart/form-data"
            ? new local.FormData()
            : ""
        ),
        inHeader: {},
        inPath: that._path.replace((
            /#.*?$/
        ), ""),
        inQuery: "",
        headers: {},
        method: that._method,
        responseType: (
            // ternary-condition
            that._consumes0.indexOf("application/octet-stream") === 0
            ? "arraybuffer"
            : ""
        )
    });
    // init paramDict
    that.parameters.forEach(function (schemaP) {
        tmp = option.paramDict[schemaP.name];
        if (local.isNullOrUndefined(tmp)) {
            return;
        }
        // serialize array
        if (Array.isArray(tmp) && schemaP.in !== "body") {
            switch (schemaP.collectionFormat || schemaP["x-swgg-collectionFormat"]) {
            case "json":
                tmp = JSON.stringify(tmp);
                break;
            case "multi":
                tmp.forEach(function (value) {
                    option[(
                        // ternary-condition
                        schemaP.in === "formData"
                        ? "inForm"
                        : "inQuery"
                    )] += (
                        "&" + encodeURIComponent(schemaP.name) + "="
                        + encodeURIComponent(
                            local.schemaPItemsType(schemaP) === "string"
                            ? value
                            : JSON.stringify(value)
                        )
                    );
                });
                return;
            case "pipes":
                tmp = tmp.join("|");
                break;
            case "ssv":
                tmp = tmp.join(" ");
                break;
            case "tsv":
                tmp = tmp.join("\t");
                break;
            // default to csv
            default:
                tmp = tmp.join(",");
            }
        } else if (typeof tmp !== "string" && !(tmp && tmp.constructor === local.Blob)) {
            tmp = JSON.stringify(tmp);
        }
        switch (schemaP.in) {
        case "body":
            option.inBody = tmp;
            break;
        case "formData":
            switch (that._consumes0) {
            case "application/xml":
                // init xml header
                if (!option.inForm) {
                    option.inForm += "<?xml version=\"1.0\"?>";
                }
                option.inForm += (
                    "\n<" + schemaP.name + ">" + "<![CDATA["
                    + tmp.replace((
                        /\]\]>/g
                    ), "]]&#x3e;") + "]]></" + schemaP.name + ">"
                );
                break;
            case "multipart/form-data":
                option.inForm.append(schemaP.name, tmp, tmp && tmp.name);
                break;
            default:
                if (option.inForm) {
                    option.inForm += "&";
                }
                option.inForm += (
                    encodeURIComponent(schemaP.name) + "="
                    + encodeURIComponent(tmp)
                );
            }
            break;
        case "header":
            option.inHeader[encodeURIComponent(schemaP.name.toLowerCase())] = tmp;
            break;
        case "path":
            option.inPath = option.inPath
            .replace("{" + schemaP.name + "}", encodeURIComponent(tmp));
            break;
        case "query":
            option.inQuery += (
                "&" + encodeURIComponent(schemaP.name) + "="
                + encodeURIComponent(tmp)
            );
            break;
        }
    });
    // init data
    option.data = option.inBody || option.inForm;
    // init headers
    local.objectSetOverride(option.headers, option.inHeader);
    // init headers - Content-Type
    option.headers["Content-Type"] = that._consumes0;
    // init headers - Authorization
    option.jwtEncrypted = option.jwtEncrypted || local.userJwtEncrypted;
    if (option.jwtEncrypted) {
        option.headers.Authorization = (
            option.headers.Authorization
            || "Bearer " + option.jwtEncrypted
        );
    }
    // init url
    option.url = "";
    option.url += (
        local.identity(that["x-swgg-schemes"] || local.swaggerJson.schemes || [])[0]
        || local.urlParse("").protocol.slice(0, -1)
    );
    option.url += "://";
    option.url += that["x-swgg-host"] || local.swaggerJson.host || local.urlParse("").host;
    option.url += local.swaggerJsonBasePath;
    option.url += option.inPath + "?" + option.inQuery.slice(1);
    option.url = option.url.replace((
        /\?$/
    ), "");
    if (option.modeAjax === "validate" || (option.error && option.modeAjax !== "ajax")) {
        onError(option.error);
        return;
    }
    option.error = null;
    // send ajax-request
    return local.ajax(option, function (error, xhr) {
        // try to init responseJson
        local.tryCatchOnError(function () {
            xhr.responseJson = JSON.parse(xhr.responseText);
        }, local.nop);
        // init userJwtEncrypted
        local.userJwtEncrypted = (
            xhr.responseHeaders["swgg-jwt-encrypted"]
            || local.userJwtEncrypted
        );
        onError(error, xhr);
    });
};

local.apiUpdate = function (swaggerJson) {
/*
 * this function will update the swagger-api dict of api-calls
 */
    var tmp;
    swaggerJson = swaggerJson || {};
    // normalize swaggerJson
    swaggerJson = local.normalizeSwaggerJson(swaggerJson, {
        objectSetDescription: function (dict) {
            if (typeof dict === "object" && dict && !dict.$ref) {
                if (Array.isArray(dict["x-swgg-descriptionLineList"])) {
                    dict.description = dict["x-swgg-descriptionLineList"].join("\n");
                }
                if (!(dict === swaggerJson.externalDocs || dict === swaggerJson.info)) {
                    dict.description = dict.description || "no description";
                }
            }
        }
    });
    // init apiDict
    local.apiDict = local.apiDict || {};
    // init swaggerJson
    local.swaggerJson = local.swaggerJson || {
        "basePath": "/api/v0",
        "definitions": {
            "BuiltinFile": {
                "properties": {
                    "_id": {
                        "readOnly": true,
                        "type": "string"
                    },
                    "_timeCreated": {
                        "format": "date-time",
                        "readOnly": true,
                        "type": "string"
                    },
                    "_timeUpdated": {
                        "format": "date-time",
                        "readOnly": true,
                        "type": "string"
                    },
                    "fileBlob": {
                        "format": "byte",
                        "type": "string"
                    },
                    "fileContentType": {
                        "type": "string"
                    },
                    "fileDescription": {
                        "type": "string"
                    },
                    "fileFilename": {
                        "type": "string"
                    },
                    "fileInputName": {
                        "type": "string"
                    },
                    "fileSize": {
                        "minimum": 0,
                        "type": "integer"
                    },
                    "fileUrl": {
                        "type": "string"
                    },
                    "id": {
                        "type": "string"
                    }
                }
            },
            "BuiltinJsonapiResponse": {
                "properties": {
                    "data": {
                        "items": {
                            "type": "object"
                        },
                        "type": "array"
                    },
                    "errors": {
                        "items": {
                            "type": "object"
                        },
                        "type": "array"
                    },
                    "meta": {
                        "type": "object"
                    }
                }
            },
            "BuiltinUser": {
                "properties": {
                    "_id": {
                        "readOnly": true,
                        "type": "string"
                    },
                    "_timeCreated": {
                        "format": "date-time",
                        "readOnly": true,
                        "type": "string"
                    },
                    "_timeUpdated": {
                        "format": "date-time",
                        "readOnly": true,
                        "type": "string"
                    },
                    "id": {
                        "type": "string"
                    },
                    "jwtEncrypted": {
                        "type": "string"
                    },
                    "password": {
                        "format": "password",
                        "type": "string"
                    },
                    "username": {
                        "type": "string"
                    }
                }
            }
        },
        "info": {
            "title": "swgg api",
            "version": "0.0.1"
        },
        "paths": {},
        "securityDefinitions": {},
        "swagger": "2.0",
        "tags": []
    };
    // save tags
    tmp = {};
    [local.swaggerJson.tags, swaggerJson.tags].forEach(function (tagList) {
        tagList.forEach(function (tag) {
            tmp[tag.name] = local.objectSetOverride(tmp[tag.name], tag);
        });
    });
    local.swaggerJson["x-swgg-tagNameList"] = Object.keys(tmp).sort();
    tmp = local.swaggerJson["x-swgg-tagNameList"].map(function (key) {
        return tmp[key];
    });
    // merge swaggerJson into local.swaggerJson
    swaggerJson = local.objectSetOverride(local.swaggerJson, swaggerJson, 10);
    // restore tags
    local.swaggerJson.tags = tmp;
    // init swaggerJsonBasePath
    local.swaggerJsonBasePath = (
        local.swaggerJson.basePath === "/"
        ? ""
        : local.swaggerJson.basePath
    );
    Object.keys(swaggerJson.definitions).forEach(function (schemaName) {
        swaggerJson.definitions[schemaName] = local.jsonCopy(
            local.swaggerValidateDataSchema({
                // dereference definition
                modeDereference: true,
                prefix: ["swaggerJson", "definitions", schemaName],
                schema: swaggerJson.definitions[schemaName],
                swaggerJson: local.swaggerJson
            })
        );
        tmp = swaggerJson.definitions[schemaName];
        (tmp.allOf || []).forEach(function (element) {
            local.objectSetDefault(tmp, local.jsonCopy(local.swaggerValidateDataSchema({
                // dereference definition.allOf
                modeDereference: true,
                prefix: ["swaggerJson", "definitions", schemaName, "allOf"],
                schema: element,
                swaggerJson: local.swaggerJson
            })), 2);
        });
        delete tmp.allOf;
    });
    // init apiDict from paths
    Object.keys(swaggerJson.paths).forEach(function (path) {
        Object.keys(swaggerJson.paths[path]).forEach(function (method) {
            var that;
            that = local.jsonCopy(swaggerJson.paths[path][method]);
            that._method = method.toUpperCase();
            that._path = path;
            tmp = "operationId." + that.operationId;
            local.apiDict[tmp] = local.objectSetOverride(local.apiDict[tmp], that);
        });
    });
    // init apiDict from x-swgg-apiDict
    Object.keys(swaggerJson["x-swgg-apiDict"] || {}).forEach(function (key) {
        local.apiDict[key] = local.objectSetOverride(
            local.apiDict[key],
            local.jsonCopy(swaggerJson["x-swgg-apiDict"][key])
        );
    });
    // init apiDict
    Object.keys(local.apiDict).forEach(function (key) {
        var that;
        if (key.indexOf("operationId.") !== 0) {
            return;
        }
        key = key.split(".");
        that = local.apiDict[key.join(".")];
        // init operationId
        that.operationId = that.operationId || key.slice(1).join(".");
        // init _crudType
        that._crudType = that._crudType || key.slice(2);
        that._crudType[0] = that._crudType[0] || that.operationId;
        // init _fileUploadNumber
        that._fileUploadNumber = Number(
            that._crudType[0] === "fileUploadManyByForm" && that._crudType[1]
        ) || 1;
        // init _idBackend and _idName
        tmp = local.idNameInit({
            crudType: that._crudType
        });
        that._idBackend = tmp.idBackend;
        that._idName = tmp.idName;
        // init tags
        that.tags = that.tags || [];
        that.tags[0] = that.tags[0] || key[1];
        // init templateApiDict
        if (local.templateApiDict[that._crudType[0]]) {
            local.objectSetDefault(
                that,
                JSON.parse(local.templateApiDict[that._crudType[0]]
                .replace((
                    /\{\{_fileUploadNumber\}\}/g
                ), that._fileUploadNumber)
                .replace((
                    /\{\{_idBackend\}\}/g
                ), that._idBackend)
                .replace((
                    /\{\{_idName\}\}/g
                ), that._idName)
                .replace((
                    /\{\{_operationId\}\}/g
                ), that.operationId)
                .replace((
                    /\{\{_schemaName\}\}/g
                ), that._schemaName)
                .replace((
                    /\{\{_tags0\}\}/g
                ), that.tags[0]))
            );
        }
        // init default
        local.objectSetDefault(that, {
            _schemaPDict: {},
            consumes: [],
            parameters: [],
            responses: {
                "200": {
                    description: "ok - " + "http://jsonapi.org/format/#document-top-level",
                    schema: {
                        $ref: "#/definitions/BuiltinJsonapiResponse"
                    }
                }
            },
            tags: []
        });
        // init _consumes0
        tmp = that["x-swgg-consumes0"] || (that.consumes && that.consumes[0]);
        that.parameters.some(function (schemaP) {
            tmp = tmp || (
                schemaP.in === "body"
                && schemaP.schema.type === "string"
                && local.identity("text/plain")
            );
            return tmp;
        });
        that._consumes0 = tmp || "application/json";
        // init _methodPath
        that._methodPath = that._method + " " + that._path.replace((
            /\{.*?\}/g
        ), "{}");
        that.parameters.forEach(function (schemaP) {
            // dereference schemaP
            String(schemaP["x-swgg-$ref"] || schemaP.$ref).replace((
                /#\/parameters\/(.+?$)/m
            ), function (ignore, match1) {
                local.objectSetDefault(
                    schemaP,
                    local.jsonCopy(swaggerJson.parameters[match1])
                );
                delete schemaP.$ref;
            });
            // init _idName.format and _idName.type
            if (that._schemaName && schemaP.name === that._idName) {
                schemaP.format = swaggerJson.definitions[that._schemaName]
                .properties[that._idBackend].format;
                schemaP.type = local.schemaPType(swaggerJson.definitions[that._schemaName]
                .properties[that._idBackend]);
            }
            // init _schemaPDict
            that._schemaPDict[schemaP.name] = schemaP;
        });
        // init required
        [
            that["x-swgg-notRequired"],
            that["x-swgg-required"]
        ].forEach(function (element, ii) {
            (element || []).forEach(function (name) {
                that._schemaPDict[name].required = Boolean(ii);
            });
        });
        switch (that._crudType[0]) {
        // add extra file-upload forms
        case "fileUploadManyByForm":
            tmp = 1;
            while (tmp <= that._fileUploadNumber) {
                that.parameters[tmp] = local.jsonCopy(that.parameters[1]);
                that.parameters[tmp].name = "file" + tmp;
                tmp += 1;
            }
            break;
        }
        // update apiDict
        that = local.jsonCopy(that);
        local.apiDict[key.join(".")] = that;
        local.apiDict[that._methodPath] = that;
        // init ajax
        that.ajax = function (swaggerJson, onError) {
            return local.apiAjax(that, swaggerJson, onError);
        };
        that._ajaxToString = (
            that.ajax.toString()
            .replace("{", (
                "{\n"
                + "/*\n"
                + " * this function will run the api-call "
                + JSON.stringify(that._methodPath) + "\n"
                + " * example usage:" + (
                    "\n"
                    + "swgg.apiDict[" + JSON.stringify(key.join(".")) + "].ajax("
                    + JSON.stringify(local.normalizeSwaggerParamDict({
                        modeDefault: true,
                        operation: that,
                        paramDict: {}
                    }).paramDict, null, 4)
                    + ", function (error, data) {\n"
                    + "    if (error) {\n"
                    + "        console.error(error);\n"
                    + "        return;\n"
                    + "    }\n"
                    + "    console.log(data.responseJson || data.responseText);\n"
                    + "});"
                ).replace((
                    /\n/g
                ), "\n    ") + "\n */"
            )
                .replace((
                /\n/g
            ), "\n                "))
        );
        that.ajax.toString = function () {
            return that._ajaxToString;
        };
        // remove underscored keys from that
        tmp = local.jsonCopy(that);
        Object.keys(tmp).forEach(function (key) {
            if (key[0] === "_") {
                tmp[key] = undefined;
            }
        });
        // update paths
        local.objectSetOverride(swaggerJson, local.objectLiteralize({
            paths: {
                "$[]": [that._path, {
                    "$[]": [that._method.toLowerCase(), tmp]
                }]
            }
        }), 3);
    });
    // normalize swaggerJson
    local.swaggerJson = JSON.parse(local.jsonStringifyOrdered(swaggerJson));
    // try to validate swaggerJson
    local.tryCatchOnError(function () {
        local.swaggerValidate(local.swaggerJson);
    }, local.onErrorDefault);
    // init corsForwardProxyHost
    local.corsForwardProxyHost = (
        local.corsForwardProxyHost
        || local.swaggerJson["x-swgg-corsForwardProxyHost"]
    );
    // init assets.swgg.swagger.server.json
    local.assetsDict["/assets.swgg.swagger.server.json"] = JSON.stringify(
        local.swaggerJson
    );
};

local.dbFieldRandomCreate = function (option) {
/*
 * this function will create a random dbField from <option>.schemaP
 */
    var depth;
    var ii;
    var max;
    var min;
    var schemaP;
    var value;
    depth = (
        Number.isFinite(option.depth)
        ? option.depth
        : 3
    );
    schemaP = option.schemaP;
    schemaP = schemaP.schema || schemaP;
    if (schemaP.readOnly) {
        return;
    }
    // init default-value
    if (option.modeNotRandom && !local.isNullOrUndefined(schemaP.default)) {
        return local.jsonCopy(schemaP.default);
    }
    // init enum-value
    if (schemaP.enum) {
        value = (
            option.modeNotRandom
            ? schemaP.enum[0]
            : local.listGetElementRandom(schemaP.enum)
        );
        return (
            local.schemaPType(schemaP) === "array"
            ? [value]
            : value
        );
    }
    // init default-value
    value = null;
    switch (local.schemaPType(schemaP)) {
    // 5.3. Validation keywords for arrays
    case "array":
        if (depth <= 0) {
            break;
        }
        value = [];
        ii = 0;
        while (ii < Math.min(
            // 5.3.2. maxItems
            schemaP.maxItems || 2,
            // 5.3.3. minItems
            schemaP.minItems || 2,
            // 5.3.4. uniqueItems
            schemaP.uniqueItems
            ? 2
            : 1
        )) {
            // recurse dbFieldRandomCreate
            value.push(local.dbFieldRandomCreate({
                depth: depth - 1,
                modeNotRandom: option.modeNotRandom,
                schemaP: local.schemaPItems(schemaP)
            }));
            ii += 1;
        }
        break;
    case "boolean":
        value = (
            option.modeNotRandom
            ? false
            : Boolean(Math.random() > 0.5)
        );
        break;
    // 5.1. Validation keywords for numeric instances (number and integer)
    case "integer":
    case "number":
        max = schemaP.maximum;
        min = schemaP.minimum;
        if (option.modeNotRandom) {
            value = (
                !(0 < min || max < 0)
                ? 0
                : min || max
            );
        } else {
            if (!(Number.isFinite(max) && Number.isFinite(min))) {
                if (!Number.isFinite(max) && !Number.isFinite(min)) {
                    max = 1000;
                    min = 0;
                } else if (Number.isFinite(max)) {
                    min = max - 1000;
                } else {
                    max = min + 1000;
                }
            }
            // exclusiveMaximum and exclusiveMinimum for float
            value = min + (max - min) * Math.max(Math.random(), min * 0.000000000000001);
            if (local.schemaPType(schemaP) === "integer") {
                value = Math.round(value);
            }
        }
        max = schemaP.maximum;
        min = schemaP.minimum;
        // exclusiveMaximum for integer
        if (schemaP.exclusiveMaximum && value === max) {
            value -= 1;
        }
        // exclusiveMinimum for integer
        if (schemaP.exclusiveMaximum && value === min) {
            value += 1;
        }
        // multipleOf
        if (schemaP.multipleOf > 0) {
            value = schemaP.multipleOf * Math.floor(value / schemaP.multipleOf);
            if (value < min || (schemaP.exclusiveMinimum && value <= min)) {
                value += schemaP.multipleOf;
            }
        }
        break;
    // 5.2. Validation keywords for strings
    case "string":
        value = (
            option.modeNotRandom
            ? "abcd1234"
            : ((1 + Math.random()) * 0x10000000000000).toString(36).slice(1)
        );
        switch (schemaP.format) {
        case "byte":
            value = local.base64FromBuffer(value);
            break;
        case "date":
        case "date-time":
            value = new Date().toISOString();
            break;
        case "email":
            value = value + "@example.com";
            break;
        case "json":
            value = JSON.stringify({
                foo: value
            });
            break;
        case "phone":
            value = (
                option.modeNotRandom
                ? "+123 (1234) 1234-1234"
                : "+" + Math.random().toString().slice(-3)
                + " (" + Math.random().toString().slice(-4) + ") "
                + Math.random().toString().slice(-4) + "-"
                + Math.random().toString().slice(-4)
            );
            break;
        }
        while (value.length < schemaP.minLength) {
            value += value;
        }
        value = value.slice(0, schemaP.maxLength || Infinity);
        break;
    // 5.4. Validation keywords for objects
    default:
        if (depth <= 0) {
            break;
        }
        // recurse dbRowRandomCreate
        value = local.dbRowRandomCreate({
            depth: depth - 1,
            modeNotRandom: option.modeNotRandom,
            prefix: ["schema<" + JSON.stringify(schemaP) + ">"],
            schema: schemaP
        });
    }
    return value;
};

local.dbRowListRandomCreate = function (option) {
/*
 * this function will create a dbRowList of option.length random dbRow's
 */
    var ii;
    ii = 0;
    while (ii < option.length) {
        option.dbRowList.push(local.dbRowRandomCreate(option));
        ii += 1;
    }
    return option.dbRowList;
};

local.dbRowRandomCreate = function (option) {
/*
 * this function will create a random dbRow from option.properties
 */
    var dbRow;
    var ii;
    var properties;
    dbRow = {};
    option = local.objectSetDefault(option, {
        override: local.nop,
        prefix: ["dbRow"]
    });
    properties = local.swaggerValidateDataSchema({
        // dereference property
        modeDereference: true,
        prefix: option.prefix,
        schema: option.schema,
        swaggerJson: local.swaggerJson
    });
    properties = local.jsonCopy((properties && properties.properties) || {});
    ii = Object.keys(properties).length;
    while (ii < (option.schema && option.schema.minProperties)) {
        properties["property" + ii] = {
            type: "string"
        };
        ii += 1;
    }
    Object.keys(properties).forEach(function (key) {
        dbRow[key] = local.dbFieldRandomCreate({
            depth: option.depth,
            modeNotRandom: option.modeNotRandom,
            schemaP: local.swaggerValidateDataSchema({
                // dereference property
                modeDereference: true,
                prefix: option.prefix.concat([key]),
                schema: properties[key],
                swaggerJson: local.swaggerJson
            })
        });
    });
    dbRow = local.jsonCopy(local.objectSetOverride(dbRow, option.override(option)));
    // try to validate data
    local.tryCatchOnError(function () {
        local.swaggerValidateDataSchema({
            data: dbRow,
            prefix: option.prefix,
            schema: option.schema,
            swaggerJson: local.swaggerJson
        });
    }, local.onErrorDefault);
    return dbRow;
};

local.idDomElementCreate = function (seed) {
/*
 * this function will create a deterministic and unique dom-element id from the seed,
 * that is both dom-selector and url friendly
 */
    local.idDomElementDict[seed] = (local.idDomElementDict[seed] || 0) + 1;
    return encodeURIComponent(
        seed + "_" + local.idDomElementDict[seed]
    ).replace((
        /\W/g
    ), "_");
};

local.idNameInit = function (option) {
/*
 * this function will init option.idBackend, option.idName, and option.queryById
 */
    var idBackend;
    var idName;
    // init idName
    idName = option.crudType[1] || "id";
    option.idName = idName;
    // init idBackend
    idBackend = option.crudType[2] || option.idName;
    option.idBackend = idBackend;
    // invert queryById
    if (option.modeQueryByIdInvert) {
        idBackend = option.idName;
        idName = option.idBackend;
    }
    // init queryById
    option.idValue = (option.data && option.data[idBackend]) || option.idValue;
    option.queryById = {};
    option.queryById[idName] = option.idValue;
    return option;
};

local.middlewareBodyParse = function (request, response, nextMiddleware) {
/*
 * this function will run the middleware that will parse request.bodyRaw
 */
    var boundary;
    var crlf;
    var data;
    var headerParse;
    var ii;
    var jj;
    var name;
    // if request is already parsed, then goto nextMiddleware
    if (!request.swgg.operation || !local.isNullOrUndefined(request.swgg.bodyParsed)) {
        nextMiddleware();
        return;
    }
    headerParse = function () {
        local.bufferToUtf8(request.bodyRaw.slice(ii, ii + 1024)).replace((
            /^content-disposition:\u0020?form-data;(.+?)\r\n(?:content-type:\u0020?(.*?)$)?/im
        ), function (ignore, match1, match2) {
            data = {
                contentType: match2,
                name: ""
            };
            match1.replace((
                /(\w+)="([^"]+)/g
            ), function (ignore, match1, match2) {
                data[match1.toLowerCase()] = match2;
            });
            name = data.name;
            request.swgg.bodyMeta[name] = data;
        });
    };
    switch (request.swgg.operation._consumes0) {
    // parse application/x-www-form-urlencoded, e.g.
    // aa=hello%20world&bb=bye%20world
    case "application/x-www-form-urlencoded":
        request.swgg.bodyParsed = local.bufferToUtf8(request.bodyRaw);
        request.swgg.bodyParsed = local.urlParse("?" + request.swgg.bodyParsed, true).query;
        break;
    case "application/xml":
        request.swgg.bodyParsed = {};
        local.bufferToUtf8(request.bodyRaw).replace((
            /<(.+?)><!\[CDATA\[([\S\s]+?)\]\]>/g
        ), function (name, match1, value) {
            name = match1;
            name = decodeURIComponent(name);
            request.swgg.bodyParsed[name] = (
                local.schemaPType(request.swgg.operation._schemaPDict[name]) === "string"
                ? value
                : JSON.parse(value)
            );
        });
        break;
    /*
     * parse multipart/form-data, e.g.
     * --Boundary\r\n
     * Content-Disposition: form-data; name="key"\r\n
     * \r\n
     * value\r\n
     * --Boundary\r\n
     * Content-Disposition: form-data; name="input1"; filename="file1.png"\r\n
     * Content-Type: image/jpeg\r\n
     * \r\n
     * <data1>\r\n
     * --Boundary\r\n
     * Content-Disposition: form-data; name="input2"; filename="file2.png"\r\n
     * Content-Type: image/jpeg\r\n
     * \r\n
     * <data2>\r\n
     * --Boundary--\r\n
     * https://tools.ietf.org/html/rfc7578
     */
    case "multipart/form-data":
        request.swgg.bodyParsed = {};
        request.swgg.bodyMeta = {};
        crlf = new Uint8Array([0x0d, 0x0a]);
        // init boundary
        ii = 0;
        jj = local.bufferIndexOfSubBuffer(request.bodyRaw, crlf, ii);
        if (jj <= 0) {
            break;
        }
        boundary = local.bufferConcat([crlf, request.bodyRaw.slice(ii, jj)]);
        ii = jj + 2;
        while (true) {
            jj = local.bufferIndexOfSubBuffer(
                request.bodyRaw,
                boundary,
                ii
            );
            if (jj < 0) {
                break;
            }
            headerParse();
            ii = local.bufferIndexOfSubBuffer(
                request.bodyRaw,
                [0x0d, 0x0a, 0x0d, 0x0a],
                ii + 2
            ) + 4;
            data = request.bodyRaw.slice(ii, jj);
            request.swgg.bodyParsed[name] = data;
            ii = jj + boundary.length + 2;
        }
        break;
    default:
        request.swgg.bodyParsed = local.bufferToUtf8(request.bodyRaw);
        // try to JSON.parse the string
        local.tryCatchOnError(function () {
            request.swgg.bodyParsed = JSON.parse(request.swgg.bodyParsed);
        }, local.nop);
    }
    nextMiddleware(null, request, response);
};

local.middlewareCrudBuiltin = function (request, response, nextMiddleware) {
/*
 * this function will run the middleware that will
 * run the builtin crud-operations backed by db-lite
 */
    var crud;
    var onParallel;
    var option;
    var tmp;
    var user;
    option = {};
    local.onNext(option, function (error, data, meta) {
        switch (option.modeNext) {
        case 1:
            crud = request.swgg.crud;
            user = request.swgg.user;
            switch (crud.crudType[0]) {
            case "crudCountManyByQuery":
                crud.dbTable.crudCountManyByQuery(crud.queryWhere, option.onNext);
                break;
            case "crudSetManyById":
                crud.dbTable.crudSetManyById(crud.body, option.onNext);
                break;
            case "crudSetOneById":
                // replace idName with idBackend in body
                delete crud.body.id;
                delete crud.body[crud.idName];
                crud.body[crud.idBackend] = crud.data[crud.idName];
                crud.dbTable.crudSetOneById(crud.body, option.onNext);
                break;
            case "crudUpdateOneById":
                // replace idName with idBackend in body
                delete crud.body.id;
                delete crud.body[crud.idName];
                crud.body[crud.idBackend] = crud.data[crud.idName];
                crud.dbTable.crudUpdateOneById(crud.body, option.onNext);
                break;
            // coverage-hack - test error handling-behavior
            case "crudErrorDelete":
            case "crudErrorGet":
            case "crudErrorHead":
            case "crudErrorOptions":
            case "crudErrorPatch":
            case "crudErrorPost":
            case "crudErrorPut":
                option.onNext(local.errorDefault);
                break;
            case "crudGetManyByQuery":
                onParallel = local.onParallel(option.onNext);
                onParallel.counter += 1;
                crud.dbTable.crudGetManyByQuery({
                    fieldList: crud.queryFields,
                    limit: crud.queryLimit,
                    query: crud.queryWhere,
                    skip: crud.querySkip,
                    sort: crud.querySort
                }, function (error, data) {
                    crud.queryData = data;
                    onParallel(error);
                });
                onParallel.counter += 1;
                crud.dbTable.crudCountAll(function (error, data) {
                    crud.paginationCountTotal = data;
                    onParallel(error);
                });
                break;
            case "crudGetOneById":
                crud.dbTable.crudGetOneById(crud.queryById, option.onNext);
                break;
            case "crudGetOneByQuery":
                crud.dbTable.crudGetOneByQuery({
                    query: crud.queryWhere
                }, option.onNext);
                break;
            case "crudNullDelete":
            case "crudNullGet":
            case "crudNullHead":
            case "crudNullOptions":
            case "crudNullPatch":
            case "crudNullPost":
            case "crudNullPut":
                option.onNext();
                break;
            case "crudRemoveManyByQuery":
                crud.dbTable.crudRemoveManyByQuery(crud.queryWhere, option.onNext);
                break;
            case "crudRemoveOneById":
                crud.dbTable.crudRemoveOneById(crud.queryById, option.onNext);
                break;
            case "fileGetOneById":
                local.dbTableFile = local.db.dbTableCreateOne({
                    name: "File"
                });
                crud.dbTable.crudGetOneById(crud.queryById, option.onNext);
                break;
            case "fileUploadManyByForm":
                local.dbTableFile = local.db.dbTableCreateOne({
                    name: "File"
                });
                request.swgg.paramDict = {};
                Object.keys(request.swgg.bodyMeta).forEach(function (key) {
                    if (typeof request.swgg.bodyMeta[key].filename !== "string") {
                        request.swgg.paramDict[key] = local.bufferToUtf8(
                            request.swgg.bodyParsed[key]
                        );
                    }
                });
                crud.body = Object.keys(request.swgg.bodyMeta)
                .filter(function (key) {
                    return typeof request.swgg.bodyMeta[key].filename === "string";
                })
                .map(function (key) {
                    tmp = local.jsonCopy(request.swgg.paramDict);
                    tmp.id = tmp.id || ((1 + Math.random()) * 0x10000000000000)
                    .toString(36).slice(1);
                    local.objectSetOverride(tmp, {
                        fileBlob: local.base64FromBuffer(request.swgg.bodyParsed[key]),
                        fileContentType: request.swgg.bodyMeta[key].contentType,
                        fileFilename: request.swgg.bodyMeta[key].filename,
                        fileInputName: request.swgg.bodyMeta[key].name,
                        fileSize: request.swgg.bodyParsed[key].length,
                        fileUrl: (
                            local.swaggerJsonBasePath
                            + "/" + request.swgg.operation.tags[0]
                            + "/fileGetOneById/" + tmp.id
                        )
                    });
                    return tmp;
                });
                local.dbTableFile.crudSetManyById(crud.body, option.onNext);
                break;
            case "userLoginByPassword":
            case "userLogout":
                // respond with 401 Unauthorized
                if (!user.isAuthenticated) {
                    local.serverRespondHeadSet(request, response, 401, {});
                    request.swgg.crud.endArgList = [request, response];
                    option.modeNext = Infinity;
                    option.onNext();
                    return;
                }
                option.onNext();
                break;
            default:
                option.modeNext = Infinity;
                option.onNext();
            }
            break;
        case 2:
            switch (crud.crudType[0]) {
            case "crudSetOneById":
            case "crudUpdateOneById":
                option.onNext(null, data);
                break;
            case "crudGetManyByQuery":
                option.onNext(null, crud.queryData, {
                    paginationCountTotal: crud.paginationCountTotal
                });
                break;
            case "fileUploadManyByForm":
                option.onNext(null, data.map(function (element) {
                    delete element.fileBlob;
                    return element;
                }));
                break;
            case "userLoginByPassword":
                option.onNext(null, {
                    jwtEncrypted: user.jwtEncrypted
                });
                break;
            case "userLogout":
                crud.dbTable.crudUpdateOneById({
                    jwtEncrypted: null,
                    username: user.username
                }, option.onNext);
                break;
            default:
                option.onNext(null, data, meta);
            }
            break;
        case 3:
            switch (crud.crudType[0]) {
            case "fileGetOneById":
                if (!data) {
                    local.serverRespondDefault(request, response, 404);
                    return;
                }
                local.serverRespondHeadSet(request, response, null, {
                    "Content-Type": data.fileContentType
                });
                response.end(local.base64ToBuffer(data.fileBlob));
                break;
            case "userLogout":
                option.onNext();
                break;
            default:
                option.onNext(null, data, meta);
            }
            break;
        case 4:
            request.swgg.crud.endArgList = [request, response, null, data, meta];
            option.onNext();
            break;
        default:
            nextMiddleware(error);
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.middlewareCrudEnd = function (request, response, nextMiddleware) {
/*
 * this function will run the middleware that will end the builtin crud-operations
 */
    if (request.swgg.crud.endArgList) {
        local.serverRespondJsonapi.apply(null, request.swgg.crud.endArgList);
        return;
    }
    nextMiddleware(null, request, response);
};

local.middlewareRouter = function (request, response, nextMiddleware) {
/*
 * this function will run the middleware that will
 * map the request's method-path to swagger's tags[0]-crudType
 */
    var tmp;
    // init swgg object
    local.objectSetDefault(request, {
        swgg: {
            crud: {
                crudType: []
            },
            user: {}
        }
    }, 3);
    // if request.url is not prefixed with swaggerJsonBasePath,
    // then default to nextMiddleware
    if (request.urlParsed.pathname.indexOf(local.swaggerJsonBasePath) !== 0) {
        nextMiddleware();
        return;
    }
    // init methodPath
    request.swgg.methodPath = (
        request.method + " "
        + request.urlParsed.pathname.replace(local.swaggerJsonBasePath, "")
    );
    // init operation
    while (request.swgg.methodPath !== tmp) {
        request.swgg.operation = (
            local.apiDict[request.swgg.methodPath]
            // handle /foo/{id}/bar case
            || local.apiDict[request.swgg.methodPath.replace((
                /\/[^\/]+\/([^\/]*?)$/
            ), "/{}/$1")]
        );
        // if operation exists, then break
        if (request.swgg.operation) {
            request.swgg.operation = local.jsonCopy(request.swgg.operation);
            // init crud.crudType
            request.swgg.crud.crudType = request.swgg.operation._crudType;
            break;
        }
        tmp = request.swgg.methodPath;
        // handle /foo/{id} case
        request.swgg.methodPath = request.swgg.methodPath.replace((
            /\/[^\/]+?(\/*?)$/
        ), "/$1{}");
    }
    nextMiddleware(null, request, response);
};

local.middlewareUserLogin = function (request, response, nextMiddleware) {
/*
 * this function will run the middleware that will handle user login
 */
    var crud;
    var option;
    var user;
    option = {};
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            local.dbTableUser = local.db.dbTableCreateOne({
                name: "User"
            });
            crud = request.swgg.crud;
            user = {};
            request.swgg.user = user;
            user.jwtEncrypted = (
                request.headers.authorization
                && request.headers.authorization.replace("Bearer ", "")
            );
            user.jwtDecrypted = local.jwtAes256GcmDecrypt(user.jwtEncrypted);
            switch (crud.crudType[0]) {
            // coverage-hack - test error handling-behavior
            case "crudErrorLogin":
                option.onNext(local.errorDefault);
                return;
            case "userLoginByPassword":
                user.password = request.urlParsed.query.password;
                user.username = request.urlParsed.query.username;
                if (user.password && user.username) {
                    local.dbTableUser.crudGetOneById({
                        username: user.username
                    }, option.onNext);
                    return;
                }
                break;
            default:
                if (user.jwtDecrypted.sub) {
                    // init username
                    user.username = user.jwtDecrypted.sub;
                    local.dbTableUser.crudGetOneById({
                        username: user.username
                    }, option.onNext);
                    return;
                }
            }
            option.modeNext = Infinity;
            option.onNext();
            break;
        case 2:
            switch (crud.crudType[0]) {
            case "userLoginByPassword":
                user.data = data;
                if (!local.sjclHashScryptValidate(
                    user.password,
                    user.data && user.data.password
                )) {
                    option.modeNext = Infinity;
                    option.onNext();
                    return;
                }
                // init isAuthenticated
                user.isAuthenticated = true;
                // create JSON Web Token (JWT)
                // https://tools.ietf.org/html/rfc7519
                user.jwtDecrypted = {};
                user.jwtDecrypted.sub = user.data.username;
                // update jwtEncrypted in client
                user.jwtEncrypted = local.jwtAes256GcmEncrypt(user.jwtDecrypted);
                local.serverRespondHeadSet(request, response, null, {
                    "swgg-jwt-encrypted": user.jwtEncrypted
                });
                // update jwtEncrypted in dbTableUser
                local.dbTableUser.crudUpdateOneById({
                    jwtEncrypted: user.jwtEncrypted,
                    username: user.jwtDecrypted.sub
                }, option.onNext);
                return;
            default:
                data = data || {};
                user.data = data;
                if (data.jwtEncrypted) {
                    // init isAuthenticated
                    user.isAuthenticated = true;
                    // update jwtEncrypted in client
                    if (data.jwtEncrypted !== user.jwtEncrypted) {
                        user.jwtEncrypted = data.jwtEncrypted;
                        user.jwtDecrypted = local.jwtAes256GcmDecrypt(user.jwtEncrypted);
                        local.serverRespondHeadSet(request, response, null, {
                            "swgg-jwt-encrypted": user.jwtEncrypted
                        });
                    }
                }
            }
            option.onNext();
            break;
        default:
            nextMiddleware(error);
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.middlewareValidate = function (request, response, nextMiddleware) {
/*
 * this function will run the middleware that will validate the swagger-request
 */
    var crud;
    var option;
    var tmp;
    option = {};
    local.onNext(option, function (error) {
        switch (option.modeNext) {
        case 1:
            if (!request.swgg.operation) {
                option.modeNext = Infinity;
                option.onNext();
                return;
            }
            // init paramDict
            request.swgg.paramDict = {};
            // parse path param
            tmp = request.urlParsed.pathname
            .replace(local.swaggerJsonBasePath, "")
            .split("/");
            request.swgg.operation._path.split("/").forEach(function (key, ii) {
                if ((
                    /^\{\S*?\}$/
                ).test(key)) {
                    request.swgg.paramDict[key.slice(1, -1)] = decodeURIComponent(tmp[ii]);
                }
            });
            request.swgg.operation.parameters.forEach(function (schemaP) {
                switch (schemaP.in) {
                // parse body param
                case "body":
                    request.swgg.paramDict[schemaP.name] = (
                        request.swgg.bodyParsed
                        || undefined
                    );
                    break;
                // parse formData param
                case "formData":
                    switch (request.swgg.operation._consumes0) {
                    case "application/x-www-form-urlencoded":
                    case "application/xml":
                        request.swgg.paramDict[schemaP.name] = (
                            request.swgg.bodyParsed[schemaP.name]
                        );
                        break;
                    }
                    break;
                // parse header param
                case "header":
                    request.swgg.paramDict[schemaP.name] = (
                        request.headers[schemaP.name.toLowerCase()]
                    );
                    break;
                // parse query param
                case "query":
                    request.swgg.paramDict[schemaP.name] = (
                        request.urlParsed.query[schemaP.name]
                    );
                    break;
                }
                // parse array-multi
                tmp = request.swgg.paramDict[schemaP.name];
                if (
                    tmp
                    && local.schemaPType(schemaP) === "array"
                    && schemaP.collectionFormat === "multi"
                ) {
                    request.swgg.paramDict[schemaP.name] = (
                        encodeURIComponent(schemaP.name)
                        + "=" + (
                            Array.isArray(tmp)
                            ? tmp
                            : [tmp]
                        ).join("&" + encodeURIComponent(schemaP.name) + "=")
                    );
                }
                // init default param
                if (
                    local.isNullOrUndefined(request.swgg.paramDict[schemaP.name])
                    && schemaP.default !== undefined
                ) {
                    request.swgg.paramDict[schemaP.name] = local.jsonCopy(
                        schemaP.default
                    );
                }
            });
            // normalize paramDict
            local.normalizeSwaggerParamDict(request.swgg);
            // validate paramDict
            error = local.swaggerValidateDataParameters({
                data: request.swgg.paramDict,
                prefix: ["operation", request.swgg.methodPath],
                parameters: request.swgg.operation.parameters,
                swaggerJson: local.swaggerJson
            })[0];
            option.onNext(error);
            break;
        case 2:
            // init crud
            crud = request.swgg.crud;
            // init crud.dbTable
            crud.dbTable = (
                request.swgg.operation
                && request.swgg.operation._schemaName
                && local.db.dbTableCreateOne({
                    name: request.swgg.operation._schemaName
                })
            );
            if (!crud.dbTable) {
                nextMiddleware();
                return;
            }
            // init crud.body
            if (request.swgg.operation._consumes0 !== "multipart/form-data") {
                crud.body = local.jsonCopy(request.swgg.bodyParsed);
            }
            // init crud.data
            crud.data = local.jsonCopy(request.swgg.paramDict);
            request.swgg.operation.parameters.forEach(function (schemaP) {
                // JSON.parse json-string
                if (
                    schemaP.format === "json"
                    && local.schemaPType(schemaP) === "string"
                    && crud.data[schemaP.name]
                ) {
                    crud.data[schemaP.name] = JSON.parse(crud.data[schemaP.name]);
                }
            });
            // init crud.query*
            [{
                key: "queryFields",
                value: {}
            }, {
                key: "queryLimit",
                value: 100
            }, {
                key: "querySkip",
                value: 0
            }, {
                key: "querySort",
                value: [{
                    fieldName: "id"
                }, {
                    fieldName: "_timeUpdated",
                    isDescending: true
                }]
            }, {
                key: "queryWhere",
                value: {}
            }].forEach(function (element) {
                crud[element.key] = crud.data["_" + element.key] || JSON.parse(
                    local.templateRender(
                        request.swgg.operation["_" + element.key] || "null",
                        request.swgg.paramDict,
                        {
                            notHtmlSafe: true
                        }
                    )
                ) || element.value;
            });
            // init-before crud.idName
            crud.modeQueryByIdInvert = true;
            local.idNameInit(crud);
            // init crud.data.id
            switch (crud.crudType[0]) {
            case "crudSetOneById":
            case "crudUpdateOneById":
                if (!local.isNullOrUndefined(crud.data[crud.idName])) {
                    break;
                }
                crud.data[crud.idName] = (crud.body && crud.body[crud.idBackend]);
                break;
            }
            // init-after crud.idName
            crud.modeQueryByIdInvert = true;
            local.idNameInit(crud);
            nextMiddleware();
            break;
        default:
            nextMiddleware(error, request, response);
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.normalizeSwaggerJson = function (swaggerJson, option) {
/*
 * this function will normalize swaggerJson and filter $npm_package_swggTags0
 */
    var pathDict;
    var tmp;
    option = local.objectSetDefault(option, {
        objectSetDescription: function (dict) {
            if (
                dict
                && dict.description
                && Array.isArray(dict["x-swgg-descriptionLineList"])
            ) {
                delete dict.description;
            }
        }
    });
    local.objectSetDefault(swaggerJson, {
        paths: {},
        tags: []
    });
    // fix error - semanticPaths2
    pathDict = {};
    Object.keys(swaggerJson.paths).forEach(function (path) {
        tmp = path.replace((
            /\{.*?\}/g
        ), "{}");
        pathDict[tmp] = pathDict[tmp] || {};
        pathDict[tmp][path] = true;
    });
    Object.keys(pathDict).forEach(function (key) {
        Object.keys(pathDict[key]).sort().forEach(function (path, ii) {
            // fix error.semanticUniquePath
            if (ii && swaggerJson["x-swgg-fixErrorSemanticUniquePath"]) {
                swaggerJson.paths[path + "#" + ii] = swaggerJson.paths[path];
                delete swaggerJson.paths[path];
            }
        });
    });
    Object.keys(swaggerJson.paths).forEach(function (path) {
        Object.keys(swaggerJson.paths[path]).forEach(function (method) {
            tmp = swaggerJson.paths[path][method];
            // auto-create operationId from path
            if (
                swaggerJson["x-swgg-operationIdFromPath"]
                || tmp["x-swgg-operationIdFromPath"]
                || !tmp.operationId
            ) {
                tmp.operationId = local.operationIdFromAjax({
                    method: method,
                    url: path
                });
            }
            // normalize parameter.required
            (tmp.parameters || []).forEach(function (schemaP) {
                if (schemaP.required === false) {
                    delete schemaP.required;
                }
            });
        });
    });
    // override tag.description with x-swgg-tags0-override
    if (swaggerJson["x-swgg-tags0-override"]) {
        swaggerJson.tags.forEach(function (tag) {
            tmp = local.objectSetDefault(swaggerJson["x-swgg-tags0-override"][tag.name], {
                description: tag.description,
                "x-swgg-descriptionLineList": tag["x-swgg-descriptionLineList"]
            });
            tag.description = tmp.description;
            tag["x-swgg-descriptionLineList"] = tmp["x-swgg-descriptionLineList"];
            // objectSetDescription
            option.objectSetDescription(tmp);
            option.objectSetDescription(tag);
        });
    }
    // apply option.objectSetDescription
    [swaggerJson.externalDocs, swaggerJson.info].forEach(option.objectSetDescription);
    [
        swaggerJson.definitions,
        swaggerJson.parameters,
        swaggerJson.responses
    ].forEach(function (dict) {
        Object.keys(dict || {}).forEach(function (key) {
            tmp = dict[key];
            if (dict === swaggerJson.definitions) {
                tmp = tmp.properties || {};
                Object.keys(tmp).forEach(function (key) {
                    option.objectSetDescription(tmp[key]);
                });
                return;
            }
            option.objectSetDescription(tmp);
        });
    });
    Object.keys(swaggerJson.paths).forEach(function (path) {
        Object.keys(swaggerJson.paths[path]).forEach(function (method) {
            tmp = swaggerJson.paths[path][method];
            option.objectSetDescription(tmp);
            (tmp.parameters || []).forEach(option.objectSetDescription);
            Object.keys(tmp.responses || {}).forEach(function (key) {
                option.objectSetDescription(tmp.responses[key]);
            });
        });
    });
    if (
        !local.env.npm_package_swggTags0 || (
            /-all$/
        ).test(local.env.npm_package_swggTags0)
    ) {
        return swaggerJson;
    }
    // override swaggerJson with x-swgg-tags0-override
    local.objectSetOverride(
        swaggerJson,
        (
            swaggerJson["x-swgg-tags0-override"]
            && swaggerJson["x-swgg-tags0-override"][local.env.npm_package_swggTags0]
        ),
        10
    );
    // filter $npm_package_swggTags0 - definitions and parameters
    ["definitions", "parameters", "responses"].forEach(function (schema) {
        schema = swaggerJson[schema] || {};
        Object.keys(schema).forEach(function (key) {
            tmp = schema[key]["x-swgg-tags0"];
            if (tmp && tmp !== "all" && tmp !== local.env.npm_package_swggTags0) {
                delete schema[key];
            }
        });
    });
    // filter $npm_package_swggTags0 - paths
    Object.keys(swaggerJson.paths).forEach(function (path) {
        Object.keys(swaggerJson.paths[path]).forEach(function (method) {
            tmp = swaggerJson.paths[path][method]["x-swgg-tags0"];
            if (tmp && tmp !== "all" && tmp !== local.env.npm_package_swggTags0) {
                delete swaggerJson.paths[path][method];
                return;
            }
        });
        if (!Object.keys(swaggerJson.paths[path]).length) {
            delete swaggerJson.paths[path];
        }
    });
    // filter $npm_package_swggTags0 - tags
    swaggerJson.tags = swaggerJson.tags.filter(function (tag) {
        return (
            !tag["x-swgg-tags0"]
            || tmp["x-swgg-tags0"] === "all"
            || tag["x-swgg-tags0"] === local.env.npm_package_swggTags0
        );
    });
    return swaggerJson;
};

local.normalizeSwaggerParamDict = function (option) {
/*
 * this function will parse the option according to option.operation.parameters
 */
    var tmp;
    option.operation.parameters.forEach(function (schemaP) {
        tmp = option.paramDict[schemaP.name];
        // init default value
        if (
            !option.modeNoDefault
            && (option.modeDefault || schemaP.required)
            && local.isNullOrUndefined(tmp)
        ) {
            tmp = local.jsonCopy(schemaP.default);
        }
        if (option.modeDefault && local.isNullOrUndefined(tmp)) {
            tmp = local.dbFieldRandomCreate({
                modeNotRandom: true,
                schemaP: schemaP
            });
        }
        // parse array
        if (local.schemaPType(schemaP) === "array" && schemaP.in !== "body") {
            if (typeof tmp === "string") {
                switch (schemaP.collectionFormat || schemaP["x-swgg-collectionFormat"]) {
                case "json":
                    local.tryCatchOnError(function () {
                        tmp = JSON.parse(tmp);
                    }, local.nop);
                    option.paramDict[schemaP.name] = tmp;
                    return;
                case "multi":
                    tmp = local.urlParse("?" + tmp, true).query[schemaP.name];
                    if (!Array.isArray(tmp)) {
                        tmp = [tmp];
                    }
                    break;
                case "pipes":
                    tmp = tmp.split("|");
                    break;
                case "ssv":
                    tmp = tmp.split(" ");
                    break;
                case "tsv":
                    tmp = tmp.split("\t");
                    break;
                // default to csv
                default:
                    tmp = tmp.split(",");
                }
                if (local.schemaPItemsType(schemaP) !== "string") {
                    // try to JSON.parse the string
                    local.tryCatchOnError(function () {
                        tmp = tmp.map(function (element) {
                            return JSON.parse(element);
                        });
                    }, local.nop);
                }
            }
        // JSON.parse paramDict
        } else if (
            local.schemaPType(schemaP) !== "file"
            && local.schemaPType(schemaP) !== "string"
            && (
                typeof tmp === "string"
                || Object.prototype.toString.call(tmp) === "[object Uint8Array]"
            )
        ) {
            // try to JSON.parse the string
            local.tryCatchOnError(function () {
                tmp = JSON.parse(local.bufferToUtf8(tmp));
            }, local.nop);
        }
        option.paramDict[schemaP.name] = tmp;
    });
    return option;
};

local.onErrorJsonapi = function (onError) {
/*
 * this function will normalize the error and data to jsonapi format,
 * and pass them to onError
 * http://jsonapi.org/format/#errors
 * http://jsonapi.org/format/#document-structure-resource-objects
 */
    return function (error, data, meta) {
        data = [error, data].map(function (data, ii) {
            // if no error occurred, then return
            if (
                (ii === 0 && !data)
                // if data is already normalized, then return it
                || (data && data.meta && data.meta.isJsonapiResponse)
            ) {
                return data;
            }
            // normalize data-list
            if (!Array.isArray(data)) {
                data = [data];
            }
            // normalize error-list to contain non-null objects
            if (!ii) {
                data = data.errorList || data;
                // normalize error-list to be non-empty
                if (!data.length) {
                    data.push(null);
                }
                data = data.map(function (element) {
                    if (!(typeof element === "object" && element)) {
                        element = {
                            message: String(element)
                        };
                    }
                    // normalize error-object to plain json-object
                    return {
                        message: element.message,
                        name: element.name,
                        stack: element.stack,
                        statusCode: Number(element.statusCode) || 500
                    };
                });
                error = local.jsonCopy(data[0]);
                error.errors = data;
                return error;
            }
            return {
                data: data
            };
        });
        // init data.meta
        data.forEach(function (data, ii) {
            if (!data) {
                return;
            }
            data.meta = local.jsonCopy(meta || {});
            data.meta.isJsonapiResponse = true;
            if (ii) {
                data.meta.dataLength = data.data.length;
            } else {
                data.meta.errorsLength = data.errors.length;
            }
            data.meta.statusCode = (
                Number(data.meta.statusCode)
                || Number(data.statusCode)
                || 0
            );
        });
        onError(data[0], data[1]);
    };
};

local.operationIdFromAjax = function (option) {
/*
 * this function will create a sortable operationId
 * from given ajax-option
 */
    var urlParsed;
    urlParsed = local.urlParseWithBraket(option.url);
    return encodeURIComponent(
        urlParsed.pathname + urlParsed.hash + " " + option.method.toUpperCase()
    ).replace((
        /[^\w\-.]/g
    ), "_");
};

local.schemaPItems = function (schemaP) {
/*
 * this function will return schemaP.items
 */
    return schemaP["x-swgg-items"] || schemaP.items;
};

local.schemaPItemsType = function (schemaP) {
/*
 * this function will return schemaP.items.type
 */
    return local.schemaPType(local.schemaPItems(schemaP) || {});
};

local.schemaPType = function (schemaP) {
/*
 * this function will return schemaP.type
 */
    return schemaP && (schemaP["x-swgg-type"] || schemaP.type);
};

local.serverRespondJsonapi = function (request, response, error, data, meta) {
/*
 * this function will respond in jsonapi format
 * http://jsonapi.org/format/#errors
 * http://jsonapi.org/format/#document-structure-resource-objects
 */
    local.onErrorJsonapi(function (error, data) {
        local.serverRespondHeadSet(request, response, error && error.statusCode, {
            "Content-Type": "application/json"
        });
        if (error) {
            // debug statusCode / method / url
            local.errorMessagePrepend(
                error,
                response.statusCode + " " + request.method + " " + request.url + "\n"
            );
            // print error.stack to stderr
            local.onErrorDefault(error);
        }
        data = error || data;
        response.statusCode = data.meta.statusCode || response.statusCode;
        data.meta.statusCode = response.statusCode;
        response.end(JSON.stringify(data));
    })(error, data, meta);
};

local.swaggerJsonFromAjax = function (swaggerJson, option) {
/*
 * this function will update swaggerJson
 * with definitions and paths created from given ajax-option
 */
    var data;
    var isArray;
    var operation;
    var type;
    var upsertSchemaP;
    var urlParsed;
    upsertSchemaP = function (schemaP) {
        if (!operation.parameters.some(function (element) {
            if (element.in === schemaP.in && element.name === schemaP.name) {
                ["default", "items", "schema"].forEach(function (key) {
                    if (!local.isNullOrUndefined(schemaP[key])) {
                        element[key] = schemaP[key];
                    }
                });
                return true;
            }
        })) {
            operation.parameters.push(schemaP);
        }
    };
    // init swaggerJson
    swaggerJson = local.objectSetDefault(swaggerJson, {
        basePath: "/",
        definitions: {},
        info: {
            title: "",
            version: ""
        },
        paths: {},
        swagger: "2.0"
    });
    // init option
    option = local.objectSetDefault(option, {
        headers: {},
        method: "GET"
    });
    // init urlParsed
    urlParsed = local.urlParseWithBraket(option.url);
    // init operation
    operation = {
        operationId: option.operationId || local.operationIdFromAjax(option),
        parameters: [],
        responses: {
            default: {
                description: "default response"
            }
        },
        tags: option.tags || ["undefined"],
        "x-swgg-tags0": option["x-swgg-tags0"]
    };
    if ((
        /^(?:http|https):\/\//
    ).test(option.url)) {
        operation["x-swgg-host"] = urlParsed.host;
        operation["x-swgg-schemes"] = [urlParsed.protocol.slice(0, -1)];
    }
    local.objectSetDefault(swaggerJson, local.objectLiteralize({
        paths: {
            "$[]": [urlParsed.pathname + urlParsed.hash, {
                "$[]": [option.method.toLowerCase(), operation]
            }]
        }
    }), 4);
    // init param in header
    Object.keys(option.headers).forEach(function (key) {
        upsertSchemaP({
            default: option.headers[key],
            in: "header",
            name: key,
            type: "string"
        });
    });
    // init param in path
    urlParsed.pathname.replace((
        /\{[^}]+?\}/g
    ), function (match0) {
        match0 = match0.slice(1, -1);
        upsertSchemaP({
            default: match0,
            in: "path",
            name: match0,
            required: true,
            type: "string"
        });
    });
    // init param in query
    Object.keys(urlParsed.query).forEach(function (key) {
        upsertSchemaP({
            default: urlParsed.query[key],
            in: "query",
            name: key,
            type: "string"
        });
    });
    data = option.data;
    if (!data) {
        return swaggerJson;
    }
    // init param in body - text-data
    upsertSchemaP({
        in: "body",
        name: "body",
        schema: {
            type: "string"
        }
    });
    local.tryCatchOnError(function () {
        data = JSON.parse(data);
    }, local.nop);
    if (typeof data !== "object") {
        return swaggerJson;
    }
    // init param in body - json-data
    isArray = Array.isArray(data);
    type = local.swaggerJsonFromPostBody(swaggerJson, {
        data: (
            // ternary-condition
            isArray
            ? data[0]
            : data
        ),
        depth: 2,
        key: "body",
        prefix: operation.operationId,
        "x-swgg-tags0": option["x-swgg-tags0"]
    });
    upsertSchemaP({
        in: "body",
        name: "body",
        schema: (
            // ternary-condition
            isArray
            ? {
                items: type,
                type: "array"
            }
            : type
        )
    });
    return swaggerJson;
};

local.swaggerJsonFromCurl = function (swaggerJson, text) {
/*
 * this function will update swaggerJson
 * with definitions and paths created from given curl-command-text
 */
    var arg;
    var argList;
    var doubleBackslash;
    var option;
    var quote;
    arg = "";
    argList = [];
    doubleBackslash = local.stringUniqueKey(text);
    // parse doubleBackslash
    text = text.replace((
        /\\\\/g
    ), doubleBackslash);
    // parse line-continuation
    text = text.replace((
        /\\\n/g
    ), "");
    // parse quotes
    text.replace((
        /(\s*?)(\S+)/g
    ), function (match0, line, word) {
        line = match0;
        word.replace((
            /^(["']?).*?(?:\\")?(["']?)$/
        ), function (quote1, match1, quote2) {
            quote1 = match1;
            if (quote) {
                arg += line;
            } else {
                arg = word;
                quote = quote1;
            }
            if (!quote || quote === quote2) {
                switch (quote) {
                // parse escapes in single-quotes
                case "'":
                    arg = arg.replace((
                        /'"'"'/g
                    ), "'");
                    arg = arg.slice(1, -1);
                    break;
                // parse escapes in double-quotes
                // https://www.gnu.org/software/bash/manual/html_node/Double-Quotes.html
                case "\"":
                    arg = arg.replace((
                        /\\([$`"\n])/g
                    ), "$1");
                    arg = arg.slice(1, -1);
                    break;
                }
                argList.push(arg);
                arg = "";
                quote = "";
            }
        });
    });
    // un-parse doubleBackslash
    argList = argList.map(function (arg) {
        return arg.replace(new RegExp(doubleBackslash, "g"), "\\\\");
    });
    argList.push("curl");
    argList.forEach(function (arg, ii) {
        switch (argList[ii - 1]) {
        case "--data":
        case "--data-ascii":
        case "--data-binary":
        case "--data-raw":
        case "-d":
            option.data = arg;
            return;
        case "--header":
        case "-H":
            arg = arg.split(":");
            arg[1] = arg.slice(1).join(":").trim();
            option.headers[arg[0].toLowerCase()] = arg[1];
            return;
        case "--request":
        case "-X":
            option.method = arg;
            return;
        }
        if (arg === "curl") {
            if (option) {
                option.url = option.url || argList[ii - 1];
                swaggerJson = local.swaggerJsonFromAjax(swaggerJson, option);
            }
            option = {
                headers: {},
                method: "GET"
            };
        }
        if ((
            /^(?:http|https):\/\//
        ).test(arg)) {
            option.url = arg;
        }
    });
    return swaggerJson;
};

local.swaggerJsonFromPostBody = function (swaggerJson, option) {
/*
 * this function will update swaggerJson
 * with definitions created from the post-body-data
 */
    var definition;
    var isArray;
    var prefix;
    var schemaP;
    var type;
    var value;
    prefix = option.prefix + "." + encodeURIComponent(option.key);
    definition = {
        properties: {},
        "x-swgg-tags0": option["x-swgg-tags0"]
    };
    swaggerJson.definitions[prefix] = definition;
    Object.keys(option.data).forEach(function (key) {
        value = option.data[key];
        isArray = Array.isArray(value);
        if (isArray) {
            value = value[0];
        }
        type = (
            local.isNullOrUndefined(value)
            ? "string"
            : typeof value
        );
        schemaP = (
            isArray
            ? {
                default: option.data[key],
                items: {
                    type: type
                },
                type: "array"
            }
            : {
                default: value,
                type: type
            }
        );
        definition.properties[key] = schemaP;
        if (!(type === "object" && option.depth > 1)) {
            return;
        }
        // recurse
        type = local.swaggerJsonFromPostBody(swaggerJson, {
            data: value,
            depth: option.depth - 1,
            key: key,
            prefix: prefix,
            "x-swgg-tags0": option["x-swgg-tags0"]
        });
        if (isArray) {
            schemaP.items = type;
        } else {
            definition.properties[key] = type;
        }
    });
    return {
        $ref: "#/definitions/" + prefix
    };
};

local.swaggerValidate = function (swaggerJson) {
/*
 * this function will validate the json-object swaggerJson
 */
    var operation;
    var operationIdDict;
    var pathDict;
    var prefix;
    var test;
    var tmp;
    operationIdDict = {};
    swaggerJson = swaggerJson || {};
    local.swaggerValidateDataSchema({
        data: swaggerJson,
        modeSchema: true,
        prefix: ["swaggerJson"],
        schema: local.swaggerSchemaJson,
        swaggerJson: swaggerJson
    });
    pathDict = {};
    Object.keys(swaggerJson.paths).forEach(function (path) {
        prefix = ["swaggerJson", "paths", path];
        // validate semanticPaths1
        test = path.indexOf("?") < 0;
        local.throwSwaggerError(!test && {
            errorType: "semanticPaths1",
            prefix: prefix
        });
        tmp = path.replace((
            /\{.*?\}/g
        ), "{}");
        // validate semanticPaths2
        test = !pathDict[tmp];
        local.throwSwaggerError(!test && {
            errorType: "semanticPaths2",
            pathList: [pathDict[tmp], path],
            prefix: prefix
        });
        pathDict[tmp] = path;
        // validate semanticPaths3
        tmp = {};
        path.replace((
            /\{.*?\}/g
        ), function (match0) {
            test = !tmp[match0];
            local.throwSwaggerError(!test && {
                errorType: "semanticPaths3",
                name: match0,
                prefix: prefix
            });
            tmp[match0] = true;
        });
        // validate semanticPaths5
        test = path.indexOf("{}") < 0;
        local.throwSwaggerError(!test && {
            errorType: "semanticPaths5",
            prefix: prefix
        });
    });
    // validate swaggerJson.definitions[key].properties[ii].default
    Object.keys(swaggerJson.definitions || {}).forEach(function (schemaName) {
        tmp = local.swaggerValidateDataSchema({
            // dereference definition
            modeDereference: true,
            prefix: ["swaggerJson", "definitions", schemaName],
            schema: swaggerJson.definitions[schemaName],
            swaggerJson: swaggerJson
        });
        Object.keys(tmp.properties || {}).forEach(function (key) {
            local.swaggerValidateDataSchema({
                modeDefault: true,
                prefix: ["swaggerJson", "definitions", schemaName, "properties", key],
                schema: tmp.properties[key],
                swaggerJson: swaggerJson
            });
        });
    });
    // validate swaggerJson.parameters[key].default
    Object.keys(swaggerJson.parameters || []).forEach(function (key) {
        local.swaggerValidateDataSchema({
            modeDefault: true,
            prefix: ["swaggerJson", "parameters", key],
            schema: swaggerJson.parameters[key],
            swaggerJson: swaggerJson
        });
    });
    // validate swaggerJson.paths[key][key].parameters[ii].default
    Object.keys(swaggerJson.paths).forEach(function (path) {
        Object.keys(swaggerJson.paths[path]).forEach(function (method) {
            prefix = ["swaggerJson", "paths", path, method];
            operation = local.swaggerValidateDataSchema({
                // dereference operation
                modeDereference: true,
                prefix: prefix,
                schema: swaggerJson.paths[path][method],
                swaggerJson: swaggerJson
            });
            // validate semanticOperationIds1
            test = !operationIdDict[operation.operationId];
            local.throwSwaggerError(!test && {
                data: operation.operationId,
                errorType: "semanticOperationIds1",
                prefix: prefix.concat(["operationId"])
            });
            operationIdDict[operation.operationId] = true;
            tmp = {
                in: {},
                name: {},
                path: {},
                type: {}
            };
            path.replace((
                /\{.*?\}/g
            ), function (match0) {
                match0 = match0.slice(1, -1);
                tmp.path[match0] = tmp.path[match0] || [];
                tmp.path[match0][0] = true;
            });
            (operation.parameters || []).forEach(function (schemaP, ii) {
                // dereference schemaP
                String(schemaP["x-swgg-$ref"] || schemaP.$ref).replace((
                    /#\/parameters\/(.+?$)/m
                ), function (ignore, match1) {
                    schemaP = local.objectSetDefault(
                        local.jsonCopy(schemaP),
                        local.jsonCopy(swaggerJson.parameters[match1])
                    );
                    delete schemaP.$ref;
                });
                // validate semanticOperations2
                test = !(tmp.in.body && schemaP.in === "body");
                local.throwSwaggerError(!test && {
                    data: operation,
                    errorType: "semanticOperations2",
                    prefix: prefix,
                    schema: operation
                });
                // validate semanticOperations3
                test = (
                    schemaP.name === undefined
                    || schemaP.in === undefined
                    || !tmp.name[schemaP.name + " " + schemaP.in]
                );
                local.throwSwaggerError(!test && {
                    data: operation.parameters,
                    errorType: "semanticOperations3",
                    prefix: prefix.concat(["parameters"])
                });
                tmp.in[schemaP.in] = true;
                tmp.name[schemaP.name + " " + schemaP.in] = true;
                tmp.type[schemaP.type] = true;
                // validate semanticOperations1
                test = !(tmp.in.body && tmp.in.formData);
                local.throwSwaggerError(!test && {
                    data: operation,
                    errorType: "semanticOperations1",
                    prefix: prefix
                });
                // validate schemaP
                local.swaggerValidateDataSchema({
                    modeDefault: true,
                    prefix: prefix.concat(["parameters", schemaP.name]),
                    schema: schemaP,
                    swaggerJson: swaggerJson
                });
                if (schemaP.in === "path") {
                    tmp.path[schemaP.name] = tmp.path[schemaP.name] || [];
                    tmp.path[schemaP.name][1] = true;
                    // validate semanticPaths7
                    test = tmp.path[schemaP.name][0];
                    local.throwSwaggerError(!test && {
                        data: schemaP,
                        errorType: "semanticPaths7",
                        prefix: prefix.concat(["parameters", ii])
                    });
                }
            });
            Object.keys(tmp.path).forEach(function (name) {
                // validate semanticPaths6
                test = tmp.path[name][1];
                local.throwSwaggerError(!test && {
                    errorType: "semanticPaths6",
                    name: name,
                    prefix: prefix.concat(["parameters", "ii"])
                });
            });
            // validate semanticFormData4
            test = (
                !tmp.type.file
                || (operation.consumes || []).indexOf("multipart/form-data") >= 0
            );
            local.throwSwaggerError(!test && {
                data: operation,
                errorType: "semanticFormData4",
                prefix: prefix
            });
            // validate semanticFormData5
            test = (
                !tmp.in.formData
                || (operation.consumes || []).indexOf(
                    "application/x-www-form-urlencoded"
                ) >= 0
                || (operation.consumes || []).indexOf("multipart/form-data") >= 0
            );
            local.throwSwaggerError(!test && {
                data: operation,
                errorType: "semanticFormData5",
                prefix: prefix,
                schema: operation
            });
        });
    });
};

local.swaggerValidateDataParameters = function (option) {
/*
 * this function will validate the items in option.paramDict
 * against the schemaP's in option.parameters
 */
    var errorList;
    errorList = [];
    option.parameters.forEach(function (schemaP) {
        local.tryCatchOnError(function () {
            local.swaggerValidateDataSchema({
                data: option.data[schemaP.name],
                dataReadonlyRemove: [
                    option.dataReadonlyRemove || {},
                    schemaP.name,
                    option.dataReadonlyRemove && option.dataReadonlyRemove[schemaP.name]
                ],
                prefix: option.prefix.concat([schemaP.name]),
                schema: schemaP,
                swaggerJson: local.swaggerJson
            });
        }, function (errorCaught) {
            console.error(errorCaught.message);
            errorList.push(errorCaught);
            errorCaught.errorList = errorList;
        });
    });
    return errorList;
};

local.swaggerValidateDataSchema = function (option) {
/*
 * this function will validate option.data against the swagger option.schema
 * http://json-schema.org/draft-04/json-schema-validation.html#rfc.section.5
 */
    var $ref;
    var circularList;
    var data;
    var dataReadonlyRemove2;
    var ii;
    var list;
    var oneOf;
    var schema;
    var test;
    var tmp;
    if (!option.schema) {
        return;
    }
    data = option.data;
    option.dataReadonlyRemove = option.dataReadonlyRemove || [{}, "", null];
    dataReadonlyRemove2 = option.dataReadonlyRemove[2] || {};
    schema = option.schema;
    circularList = [];
    while (true) {
        // dereference schema.schema
        while (schema.schema) {
            schema = schema.schema;
        }
        // dereference schema.oneOf
        oneOf = (data && schema.oneOf) || [];
        ii = 0;
        while (ii < oneOf.length) {
            tmp = String(oneOf[ii] && oneOf[ii].$ref)
            .replace("http://json-schema.org/draft-04/schema#", "#");
            switch (tmp + " " + (!local.isNullOrUndefined(data.$ref) || data.in)) {
            case "#/definitions/bodyParameter body":
            case "#/definitions/formDataParameterSubSchema formData":
            case "#/definitions/headerParameterSubSchema header":
            case "#/definitions/jsonReference true":
            case "#/definitions/pathParameterSubSchema path":
            case "#/definitions/queryParameterSubSchema query":
                schema = local.swaggerSchemaJson.definitions[tmp.split("/")[2]];
                break;
            default:
                switch (tmp) {
                case "#/definitions/bodyParameter":
                case "#/definitions/jsonReference":
                    schema = oneOf[ii ^ 1];
                    break;
                }
            }
            if (!schema.oneOf) {
                break;
            }
            ii += 1;
        }
        // dereference schema.$ref
        $ref = schema && schema.$ref;
        if (!$ref) {
            break;
        }
        test = circularList.indexOf($ref) < 0;
        local.throwSwaggerError(!test && {
            data: data,
            errorType: "schemaDereferenceCircular",
            prefix: option.prefix,
            schema: schema
        });
        circularList.push($ref);
        // validate semanticWalker6
        test = (
            $ref.indexOf("#/") === 0
            || $ref.indexOf("http://json-schema.org/draft-04/schema#/") === 0
        );
        local.throwSwaggerError(!test && {
            data: $ref,
            errorType: "semanticWalker6",
            prefix: option.prefix.concat(["$ref"])
        });
        switch (option.modeSchema && $ref) {
        case "http://json-schema.org/draft-04/schema#/definitions/parameter":
            // validate semanticFormData1
            test = data.in !== "formdata";
            local.throwSwaggerError(!test && {
                data: data.in,
                errorType: "semanticFormData1",
                prefix: option.prefix.concat(["in"])
            });
            // validate semanticFormData3
            test = data.type !== "file" || data.in === "formData";
            local.throwSwaggerError(!test && {
                data: data,
                errorType: "semanticFormData3",
                prefix: option.prefix
            });
            // validate semanticParameters2
            test = data.in === "body" || !local.isNullOrUndefined(data.type);
            local.throwSwaggerError(!test && {
                data: data,
                errorType: "semanticParameters2",
                prefix: option.prefix
            });
            break;
        case "http://json-schema.org/draft-04/schema#/definitions/schema":
            list = data.required || [];
            ii = 0;
            while (ii < list.length) {
                tmp = list[ii];
                // validate semanticSchema1
                test = !(
                    data.properties
                    && data.properties[tmp]
                    && data.properties[tmp].readOnly
                );
                local.throwSwaggerError(!test && {
                    data: data.properties[tmp],
                    errorType: "semanticSchema1",
                    prefix: option.prefix.concat(["properties", tmp])
                });
                ii += 1;
            }
            // validate semanticWalker1
            test = local.isNullOrUndefined(data.type) || typeof data.type === "string";
            local.throwSwaggerError(!test && {
                data: data.type,
                errorType: "semanticWalker1",
                prefix: option.prefix.concat(["type"])
            });
            // validate semanticWalker2
            test = !(data.maximum < data.minimum);
            local.throwSwaggerError(!test && {
                data: data,
                errorType: "semanticWalker2",
                prefix: option.prefix
            });
            // validate semanticWalker3
            test = !(data.maxProperties < data.minProperties);
            local.throwSwaggerError(!test && {
                data: data,
                errorType: "semanticWalker3",
                prefix: option.prefix
            });
            // validate semanticWalker4
            test = !(data.maxLength < data.minLength);
            local.throwSwaggerError(!test && {
                data: data,
                errorType: "semanticWalker4",
                prefix: option.prefix,
                schema: schema
            });
            break;
        }
        tmp = $ref.split("/").slice(-2);
        schema = (
            $ref.indexOf("http://json-schema.org/draft-04/schema#/") === 0
            ? local.swaggerSchemaJson[tmp[0]]
            : option.swaggerJson[tmp[0]]
        );
        schema = schema && schema[tmp[1]];
        test = schema;
        local.throwSwaggerError(!test && {
            data: data,
            errorType: "schemaDereference",
            prefix: option.prefix,
            schema: option.schema
        });
    }
    if (option.modeDereference) {
        if (option.modeDereferenceDepth > 1) {
            schema = local.jsonCopy(schema);
            Object.keys(schema.properties || {}).forEach(function (key) {
                schema.properties[key] = local.swaggerValidateDataSchema({
                    // dereference property
                    modeDereference: true,
                    modeDereferenceDepth: option.modeDereferenceDepth - 1,
                    prefix: option.prefix.concat(["properties", key]),
                    schema: schema.properties[key],
                    swaggerJson: option.swaggerJson
                });
            });
        }
        return schema;
    }
    // validate schema.default
    if (option.modeDefault) {
        data = schema.default;
    }
    // validate schema.required
    test = (
        option.modeDefault
        || !local.isNullOrUndefined(data)
        || schema.required !== true
        || schema["x-swgg-notRequired"]
    );
    local.throwSwaggerError(!test && {
        data: data,
        errorType: "objectRequired",
        prefix: option.prefix,
        schema: schema
    });
    if (local.isNullOrUndefined(data)) {
        return;
    }
    // validate semanticItemsRequiredForArrayObjects1
    test = (
        !option.modeSchema || local.schemaPType(data) !== "array"
        || (typeof local.schemaPItems(data) === "object" && local.schemaPItems(data))
    );
    local.throwSwaggerError(!test && {
        errorType: "semanticItemsRequiredForArrayObjects1",
        prefix: option.prefix,
        schema: data
    });
    // remove readOnly property
    if (schema.readOnly) {
        delete option.dataReadonlyRemove[0][option.dataReadonlyRemove[1]];
    }
    // optimization - validate schema.type first
    // 5.5.2. type
    // https://swagger.io/docs/specification/data-models/data-types/
    // https://github.com/swagger-api/swagger-spec/blob/master/versions/2.0.md#data-types
    switch (local.schemaPType(schema)) {
    case "array":
        test = Array.isArray(data);
        break;
    case "boolean":
        test = typeof data === "boolean";
        break;
    case "file":
        test = !option.modeSchema;
        break;
    case "integer":
        test = Number.isInteger(data);
        switch (schema.format) {
        case "int32":
            break;
        case "int64":
            break;
        }
        break;
    case "number":
        test = Number.isFinite(data);
        switch (schema.format) {
        case "double":
            break;
        case "float":
            break;
        }
        break;
    case "string":
        test = (
            typeof data === "string"
            || (!option.modeSchema && schema.format === "binary")
        );
        switch (test && !option.modeSchema && schema.format) {
        // Clarify 'byte' format #50
        // https://github.com/swagger-api/swagger-spec/issues/50
        case "byte":
            test = !(
                /[^\n\r+\/0-9=A-Za-z]/
            ).test(data);
            break;
        case "date":
        case "date-time":
            test = JSON.stringify(new Date(data)) !== "null";
            break;
        case "email":
            test = local.regexpValidateEmail.test(data);
            break;
        case "json":
            test = local.tryCatchOnError(function () {
                JSON.parse(data);
                return true;
            }, local.nop);
            break;
        case "phone":
            test = local.regexpValidatePhone.test(data);
            break;
        }
        break;
    default:
        test = option.modeSchema || typeof data === "object";
    }
    local.throwSwaggerError(!test && {
        data: data,
        errorType: "itemType",
        prefix: option.prefix,
        schema: schema,
        typeof: typeof data
    });
    tmp = typeof data;
    if (tmp === "object" && Array.isArray(data)) {
        tmp = "array";
    }
    switch (tmp) {
    // 5.3. Validation keywords for arrays
    case "array":
        // 5.3.1. additionalItems and items
        // swagger disallows array items
        data.forEach(function (element, ii) {
            // recurse - schema.additionalItems and schema.items
            local.swaggerValidateDataSchema({
                data: element,
                dataReadonlyRemove: [dataReadonlyRemove2, ii, dataReadonlyRemove2[ii]],
                modeSchema: option.modeSchema,
                prefix: option.prefix.concat([ii]),
                schema: local.schemaPItems(schema) || schema.additionalItems,
                swaggerJson: option.swaggerJson
            });
        });
        // 5.3.2. maxItems
        test = typeof schema.maxItems !== "number" || data.length <= schema.maxItems;
        local.throwSwaggerError(!test && {
            data: data,
            errorType: "arrayMaxItems",
            prefix: option.prefix,
            schema: schema
        });
        // 5.3.3. minItems
        test = typeof schema.minItems !== "number" || data.length >= schema.minItems;
        local.throwSwaggerError(!test && {
            data: data,
            errorType: "arrayMinItems",
            prefix: option.prefix,
            schema: schema
        });
        // 5.3.4. uniqueItems
        test = !schema.uniqueItems || data.every(function (element) {
            tmp = element;
            return data.indexOf(element) === data.lastIndexOf(element);
        });
        local.throwSwaggerError(!test && {
            data: data,
            errorType: "arrayUniqueItems",
            prefix: option.prefix,
            schema: schema,
            tmp: tmp
        });
        break;
    // 5.1. Validation keywords for numeric instances (number and integer)
    case "number":
        // 5.1.1. multipleOf
        test = typeof schema.multipleOf !== "number" || data % schema.multipleOf === 0;
        local.throwSwaggerError(!test && {
            data: data,
            errorType: "numberMultipleOf",
            prefix: option.prefix,
            schema: schema
        });
        // 5.1.2. maximum and exclusiveMaximum
        test = typeof schema.maximum !== "number" || (
            schema.exclusiveMaximum
            ? data < schema.maximum
            : data <= schema.maximum
        );
        local.throwSwaggerError(!test && {
            data: data,
            errorType: (
                // ternary-condition
                schema.exclusiveMaximum
                ? "numberExclusiveMaximum"
                : "numberMaximum"
            ),
            prefix: option.prefix,
            schema: schema
        });
        // 5.1.3. minimum and exclusiveMinimum
        test = typeof schema.minimum !== "number" || (
            schema.exclusiveMinimum
            ? data > schema.minimum
            : data >= schema.minimum
        );
        local.throwSwaggerError(!test && {
            data: data,
            errorType: (
                // ternary-condition
                schema.exclusiveMinimum
                ? "numberExclusiveMinimum"
                : "numberMinimum"
            ),
            prefix: option.prefix,
            schema: schema
        });
        break;
    // 5.4. Validation keywords for objects
    case "object":
        // 5.4.1. maxProperties
        test = (
            typeof schema.maxProperties !== "number"
            || Object.keys(data).length <= schema.maxProperties
        );
        local.throwSwaggerError(!test && {
            data: data,
            errorType: "objectMaxProperties",
            prefix: option.prefix,
            schema: schema
        });
        // 5.4.2. minProperties
        test = (
            typeof schema.minProperties !== "number"
            || Object.keys(data).length >= schema.minProperties
        );
        local.throwSwaggerError(!test && {
            data: data,
            errorType: "objectMinProperties",
            prefix: option.prefix,
            schema: schema
        });
        // 5.4.3. required
        (schema.required || []).forEach(function (key) {
            // validate semanticItemsRequiredForArrayObjects2
            test = !local.isNullOrUndefined(data[key]);
            local.throwSwaggerError(!test && {
                data: data,
                errorType: "semanticItemsRequiredForArrayObjects2",
                key: key,
                prefix: option.prefix,
                schema: schema
            });
        });
        // 5.4.4. additionalProperties, properties and patternProperties
        Object.keys(data).forEach(function (key) {
            tmp = null;
            if (schema.properties && schema.properties[key]) {
                tmp = true;
                // recurse - schema.properties
                local.swaggerValidateDataSchema({
                    data: data[key],
                    dataReadonlyRemove: [
                        dataReadonlyRemove2,
                        key,
                        dataReadonlyRemove2[key]
                    ],
                    modeSchema: option.modeSchema,
                    prefix: option.prefix.concat([key]),
                    schema: schema.properties[key],
                    swaggerJson: option.swaggerJson
                });
            }
            Object.keys(schema.patternProperties || {}).forEach(function (rgx) {
                if (new RegExp(rgx).test(key)) {
                    tmp = true;
                    // recurse - schema.patternProperties
                    local.swaggerValidateDataSchema({
                        data: data[key],
                        modeSchema: option.modeSchema,
                        prefix: option.prefix.concat([key]),
                        schema: schema.patternProperties[rgx],
                        swaggerJson: option.swaggerJson
                    });
                }
            });
/*
* validate
* 5.4.4.4. If "additionalProperties" has boolean value false
*
* In this case, validation of the instance depends on the property set of
* "properties" and "patternProperties". In this section, the property names of
* "patternProperties" will be called regexes for convenience.
*
* The first step is to collect the following sets:
*
* s
* The property set of the instance to validate.
* p
* The property set from "properties".
* pp
* The property set from "patternProperties".
* Having collected these three sets, the process is as follows:
*
* remove from "s" all elements of "p", if any;
* for each regex in "pp", remove all elements of "s" which this regex matches.
* Validation of the instance succeeds if, after these two steps, set "s" is empty.
*/
            test = tmp || schema.additionalProperties !== false;
            local.throwSwaggerError(!test && {
                data: data,
                errorType: "objectAdditionalProperties",
                key: key,
                prefix: option.prefix,
                schema: schema
            });
            // recurse - schema.additionalProperties
            local.swaggerValidateDataSchema({
                data: data[key],
                modeSchema: option.modeSchema,
                prefix: option.prefix.concat([key]),
                schema: schema.additionalProperties,
                swaggerJson: option.swaggerJson
            });
        });
        // 5.4.5. dependencies
        Object.keys(schema.dependencies || {}).forEach(function (key) {
            if (local.isNullOrUndefined(data[key])) {
                return;
            }
            // 5.4.5.2.1. Schema dependencies
            // recurse - schema.dependencies
            local.swaggerValidateDataSchema({
                data: data[key],
                modeSchema: option.modeSchema,
                prefix: option.prefix.concat([key]),
                schema: schema.dependencies[key],
                swaggerJson: option.swaggerJson
            });
            // 5.4.5.2.2. Property dependencies
            schema.dependencies[key].every(function (key2) {
                test = !local.isNullOrUndefined(data[key2]);
                local.throwSwaggerError(!test && {
                    data: data,
                    errorType: "objectDependencies",
                    key: key,
                    key2: key2,
                    prefix: option.prefix,
                    schema: schema
                });
            });
        });
        break;
    // 5.2. Validation keywords for strings
    case "string":
        // 5.2.1. maxLength
        test = typeof schema.maxLength !== "number" || data.length <= schema.maxLength;
        local.throwSwaggerError(!test && {
            data: data,
            errorType: "stringMaxLength",
            prefix: option.prefix,
            schema: schema
        });
        // 5.2.2. minLength
        test = typeof schema.minLength !== "number" || data.length >= schema.minLength;
        local.throwSwaggerError(!test && {
            data: data,
            errorType: "stringMinLength",
            prefix: option.prefix,
            schema: schema
        });
        // 5.2.3. pattern
        test = !schema.pattern || new RegExp(schema.pattern).test(data);
        local.throwSwaggerError(!test && {
            data: data,
            errorType: "stringPattern",
            prefix: option.prefix,
            schema: schema
        });
        break;
    }
    // 5.5. Validation keywords for any instance type
    // 5.5.1. enum
    tmp = schema.enum || (!option.modeSchema && (local.schemaPItems(schema) || {}).enum);
    test = !tmp || (
        Array.isArray(data)
        ? data
        : [data]
    ).every(function (element) {
        return tmp.indexOf(element) >= 0;
    });
    local.throwSwaggerError(!test && {
        data: data,
        errorType: "itemEnum",
        prefix: option.prefix,
        schema: schema,
        tmp: tmp
    });
    // 5.5.2. type
    local.nop();
    // 5.5.3. allOf
    (schema.allOf || []).forEach(function (element) {
        // recurse - schema.allOf
        local.swaggerValidateDataSchema({
            data: data,
            prefix: option.prefix,
            modeSchema: option.modeSchema,
            schema: element,
            swaggerJson: option.swaggerJson
        });
    });
    // 5.5.4. anyOf
    tmp = null;
    test = !schema.anyOf || schema.anyOf.some(function (element) {
        local.tryCatchOnError(function () {
            // recurse - schema.anyOf
            local.swaggerValidateDataSchema({
                data: data,
                modeSchema: option.modeSchema,
                prefix: option.prefix,
                schema: element,
                swaggerJson: option.swaggerJson
            });
            return true;
        }, local.nop);
        tmp = tmp || local.utility2._debugTryCatchError;
        return !tmp;
    });
    local.throwSwaggerError(!test && {
        data: data,
        errorType: "itemOneOf",
        prefix: option.prefix,
        schema: schema,
        tmp: tmp
    });
    // 5.5.5. oneOf
    tmp = (
        !schema.oneOf
        ? 1
        : 0
    );
    (schema.oneOf || []).some(function (element) {
        local.tryCatchOnError(function () {
            // recurse - schema.oneOf
            local.swaggerValidateDataSchema({
                data: data,
                modeSchema: option.modeSchema,
                prefix: option.prefix,
                schema: element,
                swaggerJson: option.swaggerJson
            });
            tmp += 1;
        }, local.nop);
        return tmp > 1;
    });
    test = tmp === 1;
    local.throwSwaggerError(!test && {
        data: data,
        errorType: "itemOneOf",
        prefix: option.prefix,
        schema: schema,
        tmp: tmp
    });
    // 5.5.6. not
    test = !schema.not || !local.tryCatchOnError(function () {
        // recurse - schema.not
        local.swaggerValidateDataSchema({
            data: data,
            modeSchema: option.modeSchema,
            prefix: option.prefix,
            schema: schema.not,
            swaggerJson: option.swaggerJson
        });
        return true;
    }, local.nop);
    local.throwSwaggerError(!test && {
        data: data,
        errorType: "itemNot",
        prefix: option.prefix,
        schema: schema
    });
    // 5.5.7. definitions
    local.nop();
    // validate data.$ref
    if (schema === local.swaggerSchemaJson.definitions.jsonReference) {
        local.swaggerValidateDataSchema({
            modeDereference: true,
            modeSchema: option.modeSchema,
            prefix: option.prefix,
            schema: data,
            swaggerJson: option.swaggerJson
        });
    }
    return schema;
};

local.swaggerValidateFile = function (option, onError) {
/*
 * this function will validate the json-file option.file
 */
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            if (typeof option.data === "string") {
                option.onNext(null, option.data);
                return;
            }
            // fetch url
            if ((
                /^(?:http|https):\/\//
            ).test(option.file)) {
                local.ajax({
                    url: option.file
                }, function (error, xhr) {
                    option.onNext(error, xhr && xhr.responseText);
                });
                return;
            }
            // read file
            local.fs.readFile(option.file, "utf8", option.onNext);
            break;
        case 2:
            // jslint
            local.jslint.jslintAndPrint(data, option.file);
            local.assertThrow(
                !local.jslint.jslintResult.errorText,
                local.jslint.jslintResult.errorText.replace((
                    /\u001b\[\d*m/g
                ), "")
            );
            // validate
            local.swgg.swaggerValidate(JSON.parse(data));
            option.onNext();
            break;
        default:
            console.error(
                error
                ? "\u001b[31mswagger-validate - failed - " + option.file + "\n"
                + error.message + "\u001b[39m"
                : "swagger-validate - passed - " + option.file
            );
            onError(error);
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.throwSwaggerError = function (option) {
/*
 * this function will throw a swaggerError with given option.errorType
 */
    var error;
    if (!option) {
        return;
    }
    [0, 2].forEach(function (ii) {
        option["prefix" + ii] = option.prefix[ii] + option.prefix.slice(
            ii + 1
        ).map(function (element) {
            return "[" + JSON.stringify(element) + "]";
        }).join("");
    });
    option.prefix0 += " = " + local.stringTruncate(
        JSON.stringify(option.data) || "undefined",
        100
    );
    option.schema2 = local.stringTruncate(
        JSON.stringify(option.schema) || "undefined",
        500
    );
    option.type2 = (option.schema && local.schemaPType(option.schema)) || "object";
    if (option.schema && option.schema.format) {
        option.type2 += " (" + option.schema.format + ")";
    }
    error = new Error("error." + option.errorType + " - " + local.templateRender(
        local.swaggerErrorTypeDict[option.errorType],
        option,
        {
            notHtmlSafe: true
        }
    ));
    error.messageShort = local.templateRender(
        local.swaggerErrorTypeDict[option.errorType].replace("{{prefix0}}", "{{prefix2}}"),
        option,
        {
            notHtmlSafe: true
        }
    );
    error.option = option;
    error.statusCode = 400;
    throw error;
};

local.uiEventDelegate = function (event) {
    // filter non-input keyup-event
    event.targetOnEvent = event.target.closest("[data-onevent]");
    if (!event.targetOnEvent) {
        return;
    }
    // rate-limit keyup
    if (event.type === "keyup") {
        local.uiEventDelegateKeyupEvent = event;
        if (local.uiEventDelegateKeyupTimerTimeout !== 2) {
            local.uiEventDelegateKeyupTimerTimeout = (
                local.uiEventDelegateKeyupTimerTimeout
                || setTimeout(function () {
                    local.uiEventDelegateKeyupTimerTimeout = 2;
                    local.uiEventDelegate(local.uiEventDelegateKeyupEvent);
                }, 100)
            );
            return;
        }
        local.uiEventDelegateKeyupTimerTimeout = null;
        if (!event.target.closest("input, option, select, textarea")) {
            return;
        }
    }
    switch (event.targetOnEvent.tagName) {
    case "BUTTON":
    case "FORM":
        event.preventDefault();
        break;
    }
    event.stopPropagation();
    local.uiEventListenerDict[event.targetOnEvent.dataset.onevent](event);
};

local.uiEventListenerDict = {};

local.uiEventListenerDict.onEventDomDb = local.db.onEventDomDb;

local.uiEventListenerDict.onEventInputTextareaChange = function (event) {
/*
 * this function will show/hide the textarea's multiline placeholder
 */
    var isTransparent;
    var value;
    isTransparent = event.targetOnEvent.style.background.indexOf("transparent") >= 0;
    value = event.targetOnEvent.value;
    if (value && isTransparent) {
        event.targetOnEvent.style.background = "";
    }
    if (!value && !isTransparent) {
        event.targetOnEvent.style.background = "transparent";
    }
    local.uiEventListenerDict.onEventInputValidateAndAjax({
        targetOnEvent: event.targetOnEvent
    });
};

local.uiEventListenerDict.onEventInputValidateAndAjax = function (option, onError) {
/*
 * this function will validate the input parameters
 * against the schemas in option.parameters
 */
    var errorDict;
    var jsonParse;
    var tmp;
    jsonParse = function (text) {
    /*
     * this function will try to JSON.parse(text)
     */
        return local.tryCatchOnError(function () {
            return JSON.parse(text);
        }, function () {
            return text;
        });
    };
    // jslint-hack
    option.targetOnEvent = option.targetOnEvent.closest(".operation");
    option.api = local.apiDict[option.targetOnEvent.dataset._methodPath];
    option.headers = {};
    option.modeAjax = option.modeAjax || "validate";
    option.modeNoDefault = true;
    option.paramDict = {};
    option.url = "";
    option.api.parameters.forEach(function (schemaP) {
        tmp = option.targetOnEvent.querySelector(
            ".schemaP[data-name=" + JSON.stringify(schemaP.name) + "] .input"
        );
        switch (tmp.tagName) {
        case "INPUT":
            // parse file
            if (local.schemaPType(tmp) === "file") {
                tmp = tmp.files && tmp.files[0];
                break;
            }
            tmp = tmp.value;
            if (!tmp) {
                return;
            }
            // parse string
            if (local.schemaPType(schemaP) !== "string") {
                tmp = jsonParse(tmp);
            }
            break;
        case "SELECT":
            tmp = Array.from(tmp.options)
            .filter(function (element) {
                return element.selected;
            })
            .map(function (element) {
                return jsonParse(decodeURIComponent(
                    element.dataset.valueSelectOption
                ));
            });
            if (!tmp.length || tmp[0] === "$swggUndefined") {
                return;
            }
            if (local.schemaPType(schemaP) !== "array") {
                tmp = tmp[0];
            }
            break;
        case "TEXTAREA":
            tmp = tmp.value;
            if (!tmp) {
                return;
            }
            // ignore string (json)
            if (schemaP.format === "json" && local.schemaPType(schemaP) === "string") {
                break;
            }
            if (
                schemaP.schema
                && local.schemaPType(schemaP.schema) === "string"
                && typeof tmp === "string"
            ) {
                break;
            }
            // parse schema
            if (schemaP.in === "body") {
                tmp = jsonParse(tmp);
                break;
            }
            // parse array
            tmp = tmp.split("\n").map(function (element) {
                return (
                    local.schemaPItemsType(schemaP) === "string"
                    ? element
                    : jsonParse(element)
                );
            });
            break;
        }
        option.paramDict[schemaP.name] = tmp;
    });
    option.api.ajax(option, onError || local.nop);
    // init errorDict
    errorDict = {};
    ((option.error && option.error.errorList) || []).forEach(function (error) {
        errorDict[error.option.prefix[2]] = error;
    });
    // shake input on error
    Array.from(option.targetOnEvent.querySelectorAll(
        ".schemaP[data-name]"
    )).forEach(function (element) {
        tmp = errorDict[element.dataset.name];
        local.uiAnimateShakeIfError(tmp, element.querySelector(
            ".input"
        ));
        element.querySelector(
            ".colorError"
        ).textContent = (
            tmp
            ? tmp.messageShort
            : ""
        );
    });
    // shake submit-button on error
    local.uiAnimateShakeIfError(
        option.error,
        option.targetOnEvent.querySelector(
            ".onEventOperationAjax"
        )
    );
    // init requestCurl
    tmp = option.data;
    local.tryCatchOnError(function () {
        tmp = JSON.stringify(JSON.parse(option.data), null, 4);
    }, local.nop);
    tmp = (
        "curl \\\n" + "--request " + option.api._method + " \\\n"
        + Object.keys(option.headers).map(function (key) {
            return "--header '" + key + ": " + option.headers[key] + "' \\\n";
        }).join("") + "--data-binary " + (
            typeof tmp === "string"
            ? "'" + tmp.replace((
                /'/g
            ), "'\"'\"'") + "'"
            : "<blob>"
        ) + " \\\n\"" + option.url.replace((
            /&/g
        ), "&\\\n") + "\""
    );
    option.targetOnEvent.querySelector(
        ".requestCurl"
    ).textContent = tmp;
    // init requestJavascript
    option.targetOnEvent.querySelector(
        ".requestJavascript"
    ).textContent = local.templateRender(
        local.templateUiRequestJavascript,
        {
            option: option,
            optionJson: JSON.stringify({
                paramDict: option.paramDict
            }, null, 4)
        },
        {
            notHtmlSafe: true
        }
    );
};

local.uiEventListenerDict.onEventOperationAjax = function (option) {
/*
 * this function will submit the operation to the backend
 */
    // ensure option is stateless
    option = {
        targetOnEvent: option.targetOnEvent.closest(".operation")
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            // force ajax
            option.modeAjax = "ajax";
            // validate input
            local.uiEventListenerDict.onEventInputValidateAndAjax(
                option,
                option.onNext
            );
            // reset response output
            Array.from(option.targetOnEvent.querySelectorAll(
                ".responseBody, .responseHeaders, .responseStatusCode"
            )).forEach(function (element) {
                element.classList.remove("hasError");
                element.textContent = "loading ...";
            });
            option.targetOnEvent.querySelector(
                ".responseMedia"
            ).innerHTML = "";
            // scrollTo response
            option.targetOnEvent.querySelector(
                ".responseStatusCode"
            ).focus();
            break;
        default:
            local.onErrorDefault(error);
            data = local.objectSetDefault(data, {
                contentType: "undefined",
                statusCode: "undefined"
            });
            // init responseStatusCode
            option.targetOnEvent.querySelector(
                ".responseStatusCode"
            ).textContent = (
                data.statusCode
            );
            // init responseHeaders
            option.targetOnEvent.querySelector(
                ".responseHeaders"
            ).textContent = Object.keys(
                data.responseHeaders
            ).map(function (key) {
                return key + ": " + data.responseHeaders[key] + "\r\n";
            }).join("");
            // init responseBody
            option.targetOnEvent.querySelector(
                ".responseHeaders"
            ).textContent.replace((
                /^content-type:(.*?)$/im
            ), function (ignore, match1) {
                data.contentType = match1.trim();
            });
            data.mediaType = data.contentType.split("/")[0].replace("image", "img");
            switch (data.mediaType) {
            case "audio":
            case "img":
            case "video":
                option.targetOnEvent.querySelector(
                    ".responseBody"
                ).textContent = (
                    data.contentType
                );
                option.targetOnEvent.querySelector(
                    ".responseMedia"
                ).innerHTML = (
                    "<" + data.mediaType
                    + " class=\"domOnEventMediaHotkeysInit\" controls src=\"data:"
                    + data.contentType
                    + ";base64," + local.base64FromBuffer(data.responseBuffer) + "\"></"
                    + data.mediaType + ">"
                );
                globalThis.domOnEventMediaHotkeys("init");
                break;
            default:
                option.targetOnEvent.querySelector(
                    ".responseBody"
                ).textContent = (
                    data.responseJson
                    ? JSON.stringify(data.responseJson, null, 4)
                    : data.response
                );
            }
            // shake response on error
            Array.from(option.targetOnEvent.querySelectorAll(
                ".responseBody, .responseHeaders, .responseStatusCode"
            )).forEach(function (element) {
                local.uiAnimateShakeIfError(data.statusCode >= 400, element);
            });
        }
    });
    option.modeNext = 0;
    option.onNext();
};

local.uiEventListenerDict.onEventOperationDisplayShow = function (event, onError) {
/*
 * this function will toggle the display of the operation
 */
    var element;
    element = event.targetOnEvent;
    element = element.querySelector(
        ".operation"
    ) || element.closest(".operation");
    location.hash = "!" + element.id;
    element.closest(".resource").classList.remove("expanded");
    // show parent resource
    local.uiAnimateSlideDown(element.closest(".resource").querySelector(
        ".operationList"
    ));
    // show the operation, but hide all other operations
    local.uiAnimateSlideAccordian(
        element.querySelector(
            ".operation > form"
        ),
        Array.from(element.closest(".operationList").querySelectorAll(
            ".operation > form"
        )),
        function () {
            // scrollTo operation
            element.querySelector(
                "[tabIndex]"
            ).blur();
            element.querySelector(
                "[tabIndex]"
            ).focus();
            // validate input
            local.uiEventListenerDict.onEventInputValidateAndAjax({
                targetOnEvent: element
            });
            local.setTimeoutOnError(onError, 0, null, element);
        }
    );
};

local.uiEventListenerDict.onEventResourceDisplayAction = function (event) {
/*
 * this function will toggle the display of the resource
 */
    location.hash = "!" + event.currentTarget.id;
    event.targetOnEvent.className.split(" ").some(function (className) {
        switch (className) {
        case "td1":
            // show the resource, but hide all other resources
            local.uiAnimateSlideAccordian(
                event.currentTarget.querySelector(
                    ".operationList"
                ),
                Array.from(document.querySelectorAll(
                    ".swggUiContainer .operationList"
                ))
            );
            // show at least one operation in the resource
            local.uiEventListenerDict.onEventOperationDisplayShow({
                targetOnEvent: event.currentTarget.querySelector(
                    ".operation .uiAnimateSlide[style*=\"max-height: 100%\"]"
                ) || event.currentTarget.querySelector(
                    ".operation"
                )
            });
            return true;
        case "td2":
            // show the resource, but hide all other resources
            local.uiAnimateSlideAccordian(
                event.currentTarget.querySelector(
                    ".operationList"
                ),
                Array.from(document.querySelectorAll(
                    ".swggUiContainer .operationList"
                ))
            );
            // collapse all operations in the resource
            if (event.currentTarget.classList.contains("expanded")) {
                event.currentTarget.classList.remove("expanded");
                Array.from(event.currentTarget.querySelectorAll(
                    ".operation > form"
                )).forEach(function (element) {
                    local.uiAnimateSlideUp(element);
                });
            // expand all operations in the resource
            } else {
                event.currentTarget.classList.add("expanded");
                Array.from(event.currentTarget.querySelectorAll(
                    ".operation > form"
                )).forEach(function (element) {
                    local.uiAnimateSlideDown(element);
                    // validate input
                    local.uiEventListenerDict.onEventInputValidateAndAjax({
                        targetOnEvent: element
                    });
                });
            }
            return true;
        }
    });
};

local.uiEventListenerDict.onEventUiReload = function (option, onError) {
/*
 * this function will reload the ui
 */
    var resource;
    var swaggerJson;
    option = option || {};
    swaggerJson = option;
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            option.inputUrl = document.querySelector(
                ".swggUiContainer > .thead > .td2"
            );
            // clear all apiKeyValue's from localStorage
            if (
                option.targetOnEvent
                && option.targetOnEvent.id === "swggApiKeyClearButton1"
            ) {
                local.apiKeyValue = "";
                Object.keys(localStorage).forEach(function (key) {
                    if (key.indexOf("utility2_swgg_apiKeyKey_") === 0) {
                        localStorage.removeItem(key);
                    }
                });
            // restore apiKeyValue
            } else if (option.swggInit) {
                local.apiKeyKey = "utility2_swgg_apiKeyKey_" + encodeURIComponent(
                    local.urlParse(option.inputUrl.value.replace((
                        /^\//
                    ), "")).href
                );
                local.apiKeyValue = localStorage.getItem(local.apiKeyKey) || "";
            // save apiKeyValue
            } else {
                local.apiKeyValue = document.querySelector(
                    "#swggApiKeyInput1"
                ).value;
                local.localStorageSetItemOrClear(local.apiKeyKey, local.apiKeyValue);
            }
            // if keyup-event is not return-key, then return
            if (
                (option.type === "keyup" && option.code !== "Enter")
                // do not reload ui during test
                || globalThis.utility2_modeTest >= 4
            ) {
                option.modeNext = Infinity;
                option.onNext();
                return;
            }
            // reset ui
            document.querySelector(
                "#swggUiReloadErrorDiv1"
            ).textContent = "";
            Array.from(document.querySelectorAll(
                ".swggUiContainer > .reset"
            )).forEach(function (element) {
                element.remove();
            });
            // normalize swaggerJsonUrl
            option.inputUrl.value = local.urlParse(
                option.inputUrl.value.replace((
                    /^\//
                ), "")
            ).href;
            document.querySelector(
                "#swggAjaxProgressDiv1 span"
            ).innerHTML = (
                "loading swagger.json"
            );
            option.onNext();
            break;
        case 2:
            // fetch swagger.json file
            local.ajax({
                url: option.inputUrl.value
            }, option.onNext);
            break;
        case 3:
            // JSON.parse swagger.json string
            local.tryCatchOnError(function () {
                option.onNext(null, JSON.parse(data.responseText));
            }, option.onNext);
            break;
        case 4:
            // reset state
            local.apiDict = null;
            local.swaggerJson = null;
            // apiUpdate swagger.json object
            local.apiUpdate(data);
            swaggerJson = local.jsonCopy(local.swaggerJson);
            local.uiState = swaggerJson;
            // init ajaxProgressText
            swaggerJson.ajaxProgressText = "rendering swagger.json";
            // init apiKeyValue
            swaggerJson.apiKeyValue = local.apiKeyValue;
            // templateRender title
            document.querySelector(
                "head > title"
            ).textContent = local.templateRender(
                local.templateUiTitle,
                swaggerJson
            ).trim();
            // init urlSwaggerJson
            swaggerJson.urlSwaggerJson = option.inputUrl.value;
            // templateRender main
            document.querySelector(
                ".swggUiContainer"
            ).innerHTML = local.templateRender(
                local.templateUiMain,
                swaggerJson
            );
            setTimeout(function () {
                // recurse - render .resourceList
                local.uiEventListenerDict.onEventUiReload(swaggerJson, option.onNext);
            }, 100);
            break;
        default:
            local.onErrorDefault(error);
            // debug error
            local._debugOnEventUiReload = error || local._debugOnEventUiReload;
            document.querySelector(
                "#swggUiReloadErrorDiv1"
            ).textContent = (
                (error || {
                    message: ""
                }).message
            );
            local.setTimeoutOnError(onError, 0, error);
        }
    });
    // optimization - render .swggUiContainer first
    if (!swaggerJson.swagger) {
        option.modeNext = 0;
        option.onNext();
        return;
    }
    // optimization - render .resourceList in separate event-loop
    // reset state
    local.idDomElementDict = {};
    local.objectSetDefault(swaggerJson, {
        resourceDict: {},
        operationDict: {},
        tagDict: {}
    });
    // init tagDict
    swaggerJson.tags.forEach(function (tag) {
        swaggerJson.tagDict[tag.name] = tag;
    });
    // init operationDict
    Object.keys(local.apiDict).sort().forEach(function (operation) {
        // init operation
        operation = local.jsonCopy(local.apiDict[operation]);
        operation.tags.forEach(function (tag) {
            swaggerJson.operationDict[operation._methodPath] = operation;
            // init resource
            swaggerJson.resourceDict[tag] = local.objectSetDefault(
                swaggerJson.resourceDict[tag] || swaggerJson.tagDict[tag],
                {
                    description: "no description",
                    name: tag
                }
            );
            resource = swaggerJson.resourceDict[tag];
            resource.id = resource.id || local.idDomElementCreate("swgg_id_" + tag);
            resource.summary = resource.summary || String(resource.description)
            .replace((
                /\bhttps?:\/\/[^\s<]+[^<.,:;"')\]\s]/g
            ), "");
        });
    });
    // init uiFragment
    swaggerJson.uiFragment = document.createDocumentFragment();
    // init resourceDict
    Object.keys(swaggerJson.resourceDict).sort().forEach(function (key) {
        // templateRender resource
        swaggerJson.uiFragment.appendChild(
            local.domElementRender(local.templateUiResource, swaggerJson.resourceDict[key])
        );
    });
    Object.keys(swaggerJson.operationDict).sort(function (aa, bb) {
        aa = swaggerJson.operationDict[aa];
        aa = aa["x-swgg-sortValue"] || (aa._path + " " + aa._method);
        bb = swaggerJson.operationDict[bb];
        bb = bb["x-swgg-sortValue"] || (bb._path + " " + bb._method);
        return (
            aa < bb
            ? -1
            : 1
        );
    }).forEach(function (operation) {
        operation = swaggerJson.operationDict[operation];
        operation.id = local.idDomElementCreate("swgg_id_" + operation.operationId);
        operation.tags.forEach(function (tag) {
            // create new operation for each tag
            operation = local.jsonCopy(operation);
            resource = swaggerJson.resourceDict[tag];
            local.objectSetDefault(operation, {
                description: "no description",
                responseList: Object.keys(operation.responses).sort().map(function (key) {
                    return {
                        key: key,
                        value: operation.responses[key]
                    };
                })
            });
            operation.summary = operation.summary || operation.description
            .replace((
                /\bhttps?:\/\/[^\s<]+[^<.,:;"')\]\s]/g
            ), "");
            operation.parameters.forEach(local.uiRenderSchemaP);
            // templateRender operation
            swaggerJson.uiFragment.querySelector(
                "#" + resource.id + " .operationList"
            )
            .appendChild(local.domElementRender(local.templateUiOperation, operation));
        });
    });
    // emulate <ol></ol> for operations
    Array.from(swaggerJson.uiFragment.querySelectorAll(
        ".operationList"
    )).forEach(function (element) {
        Array.from(element.querySelectorAll(
            ".operation > .thead > .td1"
        )).forEach(function (element, ii) {
            element.textContent = ii + 1 + ".";
        });
    });
    // append uiFragment to swggUiContainer
    document.querySelector(
        "#swggAjaxProgressDiv1"
    ).style.display = "none";
    document.querySelector(
        ".swggUiContainer .resourceList"
    ).appendChild(
        swaggerJson.uiFragment
    );
    Array.from(document.querySelectorAll(
        ".swggUiContainer [data-value-text]"
    )).forEach(function (element) {
        // render valueText
        element.value = decodeURIComponent(element.dataset.valueText);
        delete element.dataset.valueText;
        // init textarea's multiline placeholder
        if (element.tagName === "TEXTAREA") {
            local.uiEventListenerDict.onEventInputTextareaChange({
                targetOnEvent: element
            });
        }
    });
    // init event-handling
    ["Change", "Click", "Keyup", "Submit"].forEach(function (eventType) {
        Array.from(document.querySelectorAll(
            ".eventDelegate" + eventType
        )).forEach(function (element) {
            element.addEventListener(eventType.toLowerCase(), local.uiEventDelegate);
        });
    });
    // scrollTo location.hash
    local.uiEventListenerDict.onEventOperationDisplayShow({
        targetOnEvent: (
            document.querySelector(
                "#" + (location.hash.slice(2) || "undefined")
            )
            || document.querySelector(
                ".swggUiContainer .operation"
            )
        )
    });
    local.setTimeoutOnError(onError);
};

local.uiRenderSchemaP = function (schemaP) {
/*
 * this function will render schemaP
 */
    // init schemaP.id
    schemaP.id = local.idDomElementCreate("swgg_id_" + schemaP.name);
    // init enum
    schemaP.enum2 = (
        schemaP.enum
        || (local.schemaPItems(schemaP) || {}).enum
        || (local.schemaPType(schemaP) === "boolean" && [false, true])
    );
    // init input - file
    if (local.schemaPType(schemaP) === "file") {
        schemaP.isFile = true;
    // init input - textarea
    } else if (schemaP.in === "body") {
        schemaP.isTextarea = true;
    // init input - select
    } else if (schemaP.enum2) {
        // init enumDefault
        schemaP.enumDefault = [];
        if (schemaP.required && schemaP.default !== undefined) {
            schemaP.enumDefault = (
                local.schemaPType(schemaP) === "array"
                ? schemaP.default
                : [schemaP.default]
            );
        }
        schemaP.isSelectMultiple = local.schemaPType(schemaP) === "array";
        schemaP.selectOptionList = schemaP.enum2.map(function (element) {
            // init hasDefault
            schemaP.hasDefault = (
                schemaP.hasDefault
                || schemaP.enumDefault.indexOf(element) >= 0
            );
            return {
                id: local.idDomElementCreate("swgg_id_" + schemaP.name),
                selected: (
                    // ternary-condition
                    schemaP.enumDefault.indexOf(element) >= 0
                    ? "selected"
                    : ""
                ),
                type: (
                    local.schemaPItemsType(schemaP)
                    || local.schemaPType(schemaP)
                ),
                placeholder: (
                    // ternary-condition
                    typeof element === "string"
                    ? element
                    : JSON.stringify(element)
                ),
                valueSelectOption: element
            };
        });
        // init 'undefined' value
        if (!schemaP.required && !schemaP.hasDefault) {
            schemaP.selectOptionList.unshift({
                id: local.idDomElementCreate("swgg_id_" + schemaP.name),
                selected: "selected",
                type: local.schemaPType(schemaP),
                placeholder: "<none>",
                valueSelectOption: "$swggUndefined"
            });
        }
        // select at least one value
        schemaP.selectOptionList.some(function (element, ii) {
            if (ii === 0 || element.selected) {
                element.selected = "selected";
                if (ii !== 0) {
                    schemaP.selectOptionList[0].selected = "";
                    return true;
                }
            }
        });
    // init input - textarea
    } else if (local.schemaPType(schemaP) === "array" || (
        schemaP.format === "json"
        && local.schemaPType(schemaP) === "string"
    )) {
        schemaP.isTextarea = true;
    // init input - text
    } else {
        schemaP.isInputText = true;
    }
    // init format2 / type2
    ([schemaP, schemaP.schema || {}]).some(function (element) {
        local.objectSetDefault(schemaP, {
            format2: local.schemaPItemsType(element) || element.format,
            type2: local.schemaPType(element)
        });
        return schemaP.type2;
    });
    schemaP.type2 = schemaP.type2 || "object";
    // init schema2
    ([
        schemaP,
        local.schemaPItems(schemaP),
        schemaP.schema,
        schemaP.schema && local.schemaPItems(schemaP.schema)
    ]).some(function (element) {
        schemaP.schema2 = (local.swaggerValidateDataSchema({
            // dereference schemaP
            modeDereference: true,
            modeDereferenceDepth: 2,
            prefix: ["parameters", schemaP.name],
            schema: element,
            swaggerJson: local.swaggerJson
        }) || {});
        return schemaP.schema2.properties;
    });
    if (schemaP.schema2.properties) {
        schemaP.schemaText = JSON.stringify((
            // ternary-condition
            schemaP.type2 === "array"
            ? [schemaP.schema2.properties]
            : schemaP.schema2.properties
        ), null, 4);
    }
    // init placeholder
    schemaP.placeholder = (
        !local.isNullOrUndefined(schemaP.default)
        ? schemaP.default
        : local.dbFieldRandomCreate({
            modeNotRandom: true,
            schemaP: schemaP
        })
    );
    if (typeof schemaP.placeholder !== "string") {
        if (schemaP.in === "body") {
            schemaP.placeholder = JSON.stringify(schemaP.placeholder, null, 4);
        } else if (Array.isArray(schemaP.placeholder)) {
            schemaP.placeholder = schemaP.placeholder.map(function (element) {
                return (
                    typeof element === "string"
                    ? element
                    : JSON.stringify(element)
                );
            }).join("\n");
        } else {
            schemaP.placeholder = JSON.stringify(schemaP.placeholder);
        }
    } else if (schemaP.format === "json") {
        schemaP.placeholder = JSON.stringify(JSON.parse(schemaP.placeholder), null, 4);
    }
    // init valueText
    schemaP.valueText = (
        schemaP["x-swgg-apiKey"]
        ? local.apiKeyValue
        : schemaP.default === null
        ? ""
        : (schemaP.required || schemaP.isTextarea)
        ? schemaP.placeholder
        : ""
    );
    // templateRender schemaP
    schemaP.innerHTML = local.templateRender(local.templateUiParameter, schemaP);
};

local.urlParseWithBraket = function (url) {
/*
 * this function will urlParse the url with curly-brackets preserved
 */
    var tmp;
    tmp = local.stringUniqueKey(url);
    return JSON.parse(JSON.stringify(
        local.urlParse(url.replace((
            /\{/g
        ), tmp + 1).replace((
            /\}/g
        ), tmp + 2))
    ).replace(new RegExp(tmp + 1, "g"), "{").replace(new RegExp(tmp + 2, "g"), "}"));
};

local.userLoginByPassword = function (option, onError) {
/*
 * this function will send a login-by-password request
 */
    local.apiDict["GET /user/userLoginByPassword"].ajax({
        paramDict: {
            password: option.password,
            username: option.username
        }
    }, onError);
};

local.userLogout = function (option, onError) {
/*
 * this function will send a logout request
 */
    local.apiDict["GET /user/userLogout"].ajax(option, onError);
};
}());



// run node js-env code - init-after
/* istanbul ignore next */
(function () {
if (local.isBrowser) {
    return;
}
local.assetsDict["/assets.swagger-ui.logo.medium.png"] = Buffer.from(
    local.templateSwaggerUiLogoMediumBase64,
    "base64"
);
local.assetsDict["/assets.swagger-ui.logo.small.png"] = Buffer.from(
    local.templateSwaggerUiLogoSmallBase64,
    "base64"
);
local.swgg.apiUpdate(
    local.fsReadFileOrEmptyStringSync(local.__dirname + "/assets.swgg.swagger.json", "json")
);
}());



}());
/* script-end /assets.swgg.js */



/* script-begin /assets.utility2.example.js */
(function (local) {
    "use strict";
/* jslint ignore:start */
local.assetsDict["/assets.utility2.example.js"] = "/*\n\
example.js\n\
\n\
this script will demo automated browser-tests with coverage (via electron and istanbul)\n\
\n\
instruction\n\
    1. save this script as example.js\n\
    2. run the shell-command:\n\
        $ npm install utility2 electron-lite && \\\n\
            PATH=\"$(pwd)/node_modules/.bin:$PATH\" \\\n\
            PORT=8081 \\\n\
            npm_config_mode_coverage=utility2 \\\n\
            node_modules/.bin/utility2 test example.js\n\
    3. view test-report in ./tmp/build/test-report.html\n\
    4. view coverage in ./tmp/build/coverage.html/index.html\n\
*/\n\
\n\
\n\
\n\
/* istanbul instrument in package utility2 */\n\
/* istanbul ignore next */\n\
/* jslint utility2:true */\n\
(function (globalThis) {\n\
    \"use strict\";\n\
    var consoleError;\n\
    var local;\n\
    // init globalThis\n\
    (function () {\n\
        try {\n\
            globalThis = Function(\"return this\")(); // jslint ignore:line\n\
        } catch (ignore) {}\n\
    }());\n\
    globalThis.globalThis = globalThis;\n\
    // init debug_inline\n\
    if (!globalThis[\"debug\\u0049nline\"]) {\n\
        consoleError = console.error;\n\
        globalThis[\"debug\\u0049nline\"] = function () {\n\
        /*\n\
         * this function will both print <arguments> to stderr\n\
         * and return <arguments>[0]\n\
         */\n\
            var argList;\n\
            argList = Array.from(arguments); // jslint ignore:line\n\
            // debug arguments\n\
            globalThis[\"debug\\u0049nlineArguments\"] = argList;\n\
            consoleError(\"\\n\\ndebug\\u0049nline\");\n\
            consoleError.apply(console, argList);\n\
            consoleError(\"\\n\");\n\
            // return arg0 for inspection\n\
            return argList[0];\n\
        };\n\
    }\n\
    // init local\n\
    local = {};\n\
    local.local = local;\n\
    globalThis.globalLocal = local;\n\
    // init isBrowser\n\
    local.isBrowser = (\n\
        typeof window === \"object\"\n\
        && window === globalThis\n\
        && typeof window.XMLHttpRequest === \"function\"\n\
        && window.document\n\
        && typeof window.document.querySelector === \"function\"\n\
    );\n\
    // init function\n\
    local.assertThrow = function (passed, message) {\n\
    /*\n\
     * this function will throw the error <message> if <passed> is falsy\n\
     */\n\
        var error;\n\
        if (passed) {\n\
            return;\n\
        }\n\
        error = (\n\
            // ternary-condition\n\
            (\n\
                message\n\
                && typeof message.message === \"string\"\n\
                && typeof message.stack === \"string\"\n\
            )\n\
            // if message is an error-object, then leave it as is\n\
            ? message\n\
            : new Error(\n\
                typeof message === \"string\"\n\
                // if message is a string, then leave it as is\n\
                ? message\n\
                // else JSON.stringify message\n\
                : JSON.stringify(message, null, 4)\n\
            )\n\
        );\n\
        throw error;\n\
    };\n\
    local.functionOrNop = function (fnc) {\n\
    /*\n\
     * this function will if <fnc> exists,\n\
     * them return <fnc>,\n\
     * else return <nop>\n\
     */\n\
        return fnc || local.nop;\n\
    };\n\
    local.identity = function (value) {\n\
    /*\n\
     * this function will return <value>\n\
     */\n\
        return value;\n\
    };\n\
    local.nop = function () {\n\
    /*\n\
     * this function will do nothing\n\
     */\n\
        return;\n\
    };\n\
    local.objectAssignDefault = function (target, source) {\n\
    /*\n\
     * this function will if items from <target> are\n\
     * null, undefined, or empty-string,\n\
     * then overwrite them with items from <source>\n\
     */\n\
        Object.keys(source).forEach(function (key) {\n\
            if (\n\
                target[key] === null\n\
                || target[key] === undefined\n\
                || target[key] === \"\"\n\
            ) {\n\
                target[key] = target[key] || source[key];\n\
            }\n\
        });\n\
    };\n\
    // require builtin\n\
    if (!local.isBrowser) {\n\
        local.assert = require(\"assert\");\n\
        local.buffer = require(\"buffer\");\n\
        local.child_process = require(\"child_process\");\n\
        local.cluster = require(\"cluster\");\n\
        local.crypto = require(\"crypto\");\n\
        local.dgram = require(\"dgram\");\n\
        local.dns = require(\"dns\");\n\
        local.domain = require(\"domain\");\n\
        local.events = require(\"events\");\n\
        local.fs = require(\"fs\");\n\
        local.http = require(\"http\");\n\
        local.https = require(\"https\");\n\
        local.net = require(\"net\");\n\
        local.os = require(\"os\");\n\
        local.path = require(\"path\");\n\
        local.querystring = require(\"querystring\");\n\
        local.readline = require(\"readline\");\n\
        local.repl = require(\"repl\");\n\
        local.stream = require(\"stream\");\n\
        local.string_decoder = require(\"string_decoder\");\n\
        local.timers = require(\"timers\");\n\
        local.tls = require(\"tls\");\n\
        local.tty = require(\"tty\");\n\
        local.url = require(\"url\");\n\
        local.util = require(\"util\");\n\
        local.vm = require(\"vm\");\n\
        local.zlib = require(\"zlib\");\n\
    }\n\
}(this));\n\
\n\
\n\
\n\
(function (local) {\n\
\"use strict\";\n\
\n\
\n\
\n\
// run shared js-env code - init-before\n\
(function () {\n\
// init local\n\
local = (\n\
    globalThis.utility2_rollup\n\
    || globalThis.utility2_utility2\n\
    || require(\"utility2\")\n\
);\n\
// init exports\n\
globalThis.local = local;\n\
// run test-server\n\
local.testRunServer(local);\n\
// init assets\n\
local.assetsDict[\"/assets.hello.txt\"] = \"hello \\ud83d\\ude01\\n\";\n\
local.assetsDict[\"/assets.index.template.html\"] = \"\";\n\
}());\n\
\n\
\n\
\n\
// run shared js-env code - function\n\
(function () {\n\
local.testCase_ajax_200 = function (option, onError) {\n\
/*\n\
 * this function will test ajax's \"200 ok\" handling-behavior\n\
 */\n\
    if (!local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    option = {};\n\
    // test ajax-path \"assets.hello.txt\"\n\
    local.ajax({\n\
        url: \"assets.hello.txt\"\n\
    }, function (error, xhr) {\n\
        local.tryCatchOnError(function () {\n\
            // validate no error occurred\n\
            local.assertThrow(!error, error);\n\
            // validate data\n\
            option.data = xhr.responseText;\n\
            local.assertThrow(option.data === \"hello \\ud83d\\ude01\\n\", option.data);\n\
            onError();\n\
        }, onError);\n\
    });\n\
};\n\
\n\
local.testCase_ajax_404 = function (option, onError) {\n\
/*\n\
 * this function will test ajax's \"404 not found\" handling-behavior\n\
 */\n\
    if (!local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    option = {};\n\
    // test ajax-path \"/undefined\"\n\
    local.ajax({\n\
        url: \"/undefined\"\n\
    }, function (error) {\n\
        local.tryCatchOnError(function () {\n\
            // validate error occurred\n\
            local.assertThrow(error, error);\n\
            option.statusCode = error.statusCode;\n\
            // validate 404 http statusCode\n\
            local.assertThrow(option.statusCode === 404, option.statusCode);\n\
            onError();\n\
        }, onError);\n\
    });\n\
};\n\
\n\
local.testCase_webpage_default = function (option, onError) {\n\
/*\n\
 * this function will test webpage's default handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    option = {\n\
        modeCoverageMerge: true,\n\
        url: local.serverLocalHost + \"?modeTest=1\"\n\
    };\n\
    local.browserTest(option, onError);\n\
};\n\
}());\n\
\n\
\n\
\n\
/* istanbul ignore next */\n\
// run browser js-env code - init-test\n\
(function () {\n\
if (!local.isBrowser) {\n\
    return;\n\
}\n\
local.testRunBrowser = function (event) {\n\
    if (!event || (\n\
        event\n\
        && event.currentTarget\n\
        && event.currentTarget.className\n\
        && event.currentTarget.className.includes\n\
        && event.currentTarget.className.includes(\"onreset\")\n\
    )) {\n\
        // reset output\n\
        Array.from(document.querySelectorAll(\n\
            \"body > .resettable\"\n\
        )).forEach(function (element) {\n\
            switch (element.tagName) {\n\
            case \"INPUT\":\n\
            case \"TEXTAREA\":\n\
                element.value = \"\";\n\
                break;\n\
            default:\n\
                element.textContent = \"\";\n\
            }\n\
        });\n\
    }\n\
    switch (event && event.currentTarget && event.currentTarget.id) {\n\
    case \"testRunButton1\":\n\
        // show tests\n\
        if (document.querySelector(\n\
            \"#testReportDiv1\"\n\
        ).style.maxHeight === \"0px\") {\n\
            local.uiAnimateSlideDown(document.querySelector(\n\
                \"#testReportDiv1\"\n\
            ));\n\
            document.querySelector(\n\
                \"#testRunButton1\"\n\
            ).textContent = \"hide internal test\";\n\
            local.modeTest = 1;\n\
            local.testRunDefault(local);\n\
        // hide tests\n\
        } else {\n\
            local.uiAnimateSlideUp(document.querySelector(\n\
                \"#testReportDiv1\"\n\
            ));\n\
            document.querySelector(\n\
                \"#testRunButton1\"\n\
            ).textContent = \"run internal test\";\n\
        }\n\
        break;\n\
    /* validateLineSortedReset */\n\
    // custom-case\n\
    case \"testRunButton2\":\n\
        // run tests\n\
        local.modeTest = 1;\n\
        local.testRunDefault(local);\n\
        break;\n\
    default:\n\
        if (location.href.indexOf(\"modeTest=\") >= 0) {\n\
            return;\n\
        }\n\
        // jslint #inputTextareaEval1\n\
        local.jslint.jslintAndPrint(\n\
            document.querySelector(\n\
                \"#inputTextareaEval1\"\n\
            ).value,\n\
            \"inputTextareaEval1.js\",\n\
            {\n\
                autofix: (\n\
                    event\n\
                    && event.currentTarget\n\
                    && event.currentTarget.id === \"jslintAutofixButton1\"\n\
                ),\n\
                conditional: true\n\
            }\n\
        );\n\
        if (local.jslint.jslintResult.autofix) {\n\
            document.querySelector(\n\
                \"#inputTextareaEval1\"\n\
            ).value = (\n\
                local.jslint.jslintResult.code\n\
            );\n\
        }\n\
        document.querySelector(\n\
            \"#outputJslintPre1\"\n\
        ).textContent = (\n\
            local.jslint.jslintResult.errorText\n\
        ).replace((\n\
            /\\u001b\\[\\d*m/g\n\
        ), \"\").trim();\n\
        // try to cleanup __coverage__\n\
        try {\n\
            delete globalThis.__coverage__[\"/inputTextareaEval1.js\"];\n\
        } catch (ignore) {}\n\
        // try to cover and eval input-code\n\
        try {\n\
            document.querySelector(\n\
                \"#outputTextarea1\"\n\
            ).value = (\n\
                local.istanbul.instrumentSync(\n\
                    document.querySelector(\n\
                        \"#inputTextareaEval1\"\n\
                    ).value,\n\
                    \"/inputTextareaEval1.js\"\n\
                )\n\
            );\n\
            eval( // jslint ignore:line\n\
                document.querySelector(\n\
                    \"#outputTextarea1\"\n\
                ).value.replace((\n\
                    /^#!\\//\n\
                ), \"// \")\n\
            );\n\
            document.querySelector(\n\
                \"#coverageReportDiv1\"\n\
            ).innerHTML = (\n\
                local.istanbul.coverageReportCreate({\n\
                    coverage: window.__coverage__\n\
                })\n\
            );\n\
        } catch (errorCaught2) {\n\
            console.error(errorCaught2);\n\
        }\n\
    }\n\
};\n\
\n\
local.uiEventDelegate = local.uiEventDelegate || function (event) {\n\
    // filter non-input keyup-event\n\
    event.targetOnEvent = event.target.closest(\"[data-onevent]\");\n\
    if (!event.targetOnEvent) {\n\
        return;\n\
    }\n\
    // rate-limit keyup\n\
    if (event.type === \"keyup\") {\n\
        local.uiEventDelegateKeyupEvent = event;\n\
        if (local.uiEventDelegateKeyupTimerTimeout !== 2) {\n\
            local.uiEventDelegateKeyupTimerTimeout = (\n\
                local.uiEventDelegateKeyupTimerTimeout\n\
                || setTimeout(function () {\n\
                    local.uiEventDelegateKeyupTimerTimeout = 2;\n\
                    local.uiEventDelegate(local.uiEventDelegateKeyupEvent);\n\
                }, 100)\n\
            );\n\
            return;\n\
        }\n\
        local.uiEventDelegateKeyupTimerTimeout = null;\n\
        if (!event.target.closest(\"input, option, select, textarea\")) {\n\
            return;\n\
        }\n\
    }\n\
    switch (event.targetOnEvent.tagName) {\n\
    case \"BUTTON\":\n\
    case \"FORM\":\n\
        event.preventDefault();\n\
        break;\n\
    }\n\
    event.stopPropagation();\n\
    local.uiEventListenerDict[event.targetOnEvent.dataset.onevent](event);\n\
};\n\
\n\
local.uiEventListenerDict = local.uiEventListenerDict || {};\n\
\n\
local.uiEventListenerDict.testRunBrowser = local.testRunBrowser;\n\
\n\
// log stderr and stdout to #outputStdoutTextarea1\n\
[\"error\", \"log\"].forEach(function (key) {\n\
    console[key + \"_original\"] = console[key + \"_original\"] || console[key];\n\
    console[key] = function () {\n\
        var argList;\n\
        var element;\n\
        argList = Array.from(arguments); // jslint ignore:line\n\
        console[key + \"_original\"].apply(console, argList);\n\
        element = document.querySelector(\n\
            \"#outputStdoutTextarea1\"\n\
        );\n\
        if (!element) {\n\
            return;\n\
        }\n\
        // append text to #outputStdoutTextarea1\n\
        element.value += argList.map(function (arg) {\n\
            return (\n\
                typeof arg === \"string\"\n\
                ? arg\n\
                : JSON.stringify(arg, null, 4)\n\
            );\n\
        }).join(\" \").replace((\n\
            /\\u001b\\[\\d*m/g\n\
        ), \"\") + \"\\n\";\n\
        // scroll textarea to bottom\n\
        element.scrollTop = element.scrollHeight;\n\
    };\n\
});\n\
// init event-handling\n\
[\"Change\", \"Click\", \"Keyup\", \"Submit\"].forEach(function (eventType) {\n\
    Array.from(document.querySelectorAll(\n\
        \".eventDelegate\" + eventType\n\
    )).forEach(function (element) {\n\
        element.addEventListener(eventType.toLowerCase(), local.uiEventDelegate);\n\
    });\n\
});\n\
// run tests\n\
local.testRunBrowser();\n\
}());\n\
\n\
\n\
\n\
/* istanbul ignore next */\n\
// run node js-env code - init-test\n\
(function () {\n\
if (local.isBrowser) {\n\
    return;\n\
}\n\
// init exports\n\
module.exports = local;\n\
/* validateLineSortedReset */\n\
// init assets\n\
local.assetsDict = local.assetsDict || {};\n\
[\n\
    \"assets.index.template.html\",\n\
    \"assets.swgg.swagger.json\",\n\
    \"assets.swgg.swagger.server.json\"\n\
].forEach(function (file) {\n\
    file = \"/\" + file;\n\
    local.assetsDict[file] = local.assetsDict[file] || \"\";\n\
    if (local.fs.existsSync(local.__dirname + file)) {\n\
        local.assetsDict[file] = local.fs.readFileSync(\n\
            local.__dirname + file,\n\
            \"utf8\"\n\
        );\n\
    }\n\
});\n\
/* jslint ignore:start */\n\
local.assetsDict[\"/assets.index.template.html\"] = '\\\n\
<!doctype html>\\n\\\n\
<html lang=\"en\">\\n\\\n\
<head>\\n\\\n\
<meta charset=\"utf-8\">\\n\\\n\
<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\\n\
<!-- \"assets.utility2.template.html\" -->\\n\\\n\
<title>{{env.npm_package_name}} ({{env.npm_package_version}})</title>\\n\\\n\
<style>\\n\\\n\
/* jslint utility2:true */\\n\\\n\
/*csslint\\n\\\n\
*/\\n\\\n\
/* csslint ignore:start */\\n\\\n\
*,\\n\\\n\
*:after,\\n\\\n\
*:before {\\n\\\n\
    box-sizing: border-box;\\n\\\n\
}\\n\\\n\
/* csslint ignore:end */\\n\\\n\
@keyframes uiAnimateShake {\\n\\\n\
    0%, 50% {\\n\\\n\
        transform: translateX(10px);\\n\\\n\
    }\\n\\\n\
    25%, 75% {\\n\\\n\
        transform: translateX(-10px);\\n\\\n\
    }\\n\\\n\
    100% {\\n\\\n\
        transform: translateX(0);\\n\\\n\
    }\\n\\\n\
}\\n\\\n\
@keyframes uiAnimateSpin {\\n\\\n\
    0% {\\n\\\n\
        transform: rotate(0deg);\\n\\\n\
    }\\n\\\n\
    100% {\\n\\\n\
        transform: rotate(360deg);\\n\\\n\
    }\\n\\\n\
}\\n\\\n\
a {\\n\\\n\
    overflow-wrap: break-word;\\n\\\n\
}\\n\\\n\
body {\\n\\\n\
    background: #eef;\\n\\\n\
    font-family: Arial, Helvetica, sans-serif;\\n\\\n\
    margin: 0 40px;\\n\\\n\
}\\n\\\n\
body > div,\\n\\\n\
body > form > div,\\n\\\n\
body > form > input,\\n\\\n\
body > form > pre,\\n\\\n\
body > form > textarea,\\n\\\n\
body > form > .button,\\n\\\n\
body > input,\\n\\\n\
body > pre,\\n\\\n\
body > textarea,\\n\\\n\
body > .button {\\n\\\n\
    margin-bottom: 20px;\\n\\\n\
}\\n\\\n\
body > form > input,\\n\\\n\
body > form > .button,\\n\\\n\
body > input,\\n\\\n\
body > .button {\\n\\\n\
    width: 20rem;\\n\\\n\
}\\n\\\n\
body > form > textarea,\\n\\\n\
body > textarea {\\n\\\n\
    height: 10rem;\\n\\\n\
    width: 100%;\\n\\\n\
}\\n\\\n\
body > textarea[readonly] {\\n\\\n\
    background: #ddd;\\n\\\n\
}\\n\\\n\
code,\\n\\\n\
pre,\\n\\\n\
textarea {\\n\\\n\
    font-family: Consolas, Menlo, monospace;\\n\\\n\
    font-size: small;\\n\\\n\
}\\n\\\n\
pre {\\n\\\n\
    overflow-wrap: break-word;\\n\\\n\
    white-space: pre-wrap;\\n\\\n\
}\\n\\\n\
textarea {\\n\\\n\
    overflow: auto;\\n\\\n\
    white-space: pre;\\n\\\n\
}\\n\\\n\
.button {\\n\\\n\
    background-color: #fff;\\n\\\n\
    border: 1px solid;\\n\\\n\
    border-bottom-color: rgb(186, 186, 186);\\n\\\n\
    border-left-color: rgb(209, 209, 209);\\n\\\n\
    border-radius: 4px;\\n\\\n\
    border-right-color: rgb(209, 209, 209);\\n\\\n\
    border-top-color: rgb(216, 216, 216);\\n\\\n\
    color: #00d;\\n\\\n\
    cursor: pointer;\\n\\\n\
    display: inline-block;\\n\\\n\
    font-family: Arial, Helvetica, sans-serif;\\n\\\n\
    font-size: 12px;\\n\\\n\
    font-style: normal;\\n\\\n\
    font-weight: normal;\\n\\\n\
    margin: 0;\\n\\\n\
    padding: 2px 7px 3px 7px;\\n\\\n\
    text-align: center;\\n\\\n\
    text-decoration: underline;\\n\\\n\
}\\n\\\n\
.colorError {\\n\\\n\
    color: #d00;\\n\\\n\
}\\n\\\n\
.uiAnimateShake {\\n\\\n\
    animation-duration: 500ms;\\n\\\n\
    animation-name: uiAnimateShake;\\n\\\n\
}\\n\\\n\
.uiAnimateSlide {\\n\\\n\
    overflow-y: hidden;\\n\\\n\
    transition: max-height ease-in 250ms, min-height ease-in 250ms, padding-bottom ease-in 250ms, padding-top ease-in 250ms;\\n\\\n\
}\\n\\\n\
.utility2FooterDiv {\\n\\\n\
    text-align: center;\\n\\\n\
}\\n\\\n\
.zeroPixel {\\n\\\n\
    border: 0;\\n\\\n\
    height: 0;\\n\\\n\
    margin: 0;\\n\\\n\
    padding: 0;\\n\\\n\
    width: 0;\\n\\\n\
}\\n\\\n\
</style>\\n\\\n\
</head>\\n\\\n\
<body>\\n\\\n\
<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 500ms, width 1500ms; width: 0%; z-index: 1;\"></div>\\n\\\n\
<div class=\"uiAnimateSpin\" style=\"animation: uiAnimateSpin 2s linear infinite; border: 5px solid #999; border-radius: 50%; border-top: 5px solid #7d7; display: none; height: 25px; vertical-align: middle; width: 25px;\"></div>\\n\\\n\
<a class=\"zeroPixel\" download=\"db.persistence.json\" href=\"\" id=\"dbExportA1\"></a>\\n\\\n\
<input class=\"zeroPixel\" id=\"dbImportInput1\" type=\"file\">\\n\\\n\
<script>\\n\\\n\
/* jslint utility2:true */\\n\\\n\
// init domOnEventWindowOnloadTimeElapsed\\n\\\n\
(function () {\\n\\\n\
/*\\n\\\n\
 * this function will measure and print the time-elapsed for window.onload\\n\\\n\
 */\\n\\\n\
    \"use strict\";\\n\\\n\
    if (window.domOnEventWindowOnloadTimeElapsed) {\\n\\\n\
        return;\\n\\\n\
    }\\n\\\n\
    window.domOnEventWindowOnloadTimeElapsed = Date.now() + 100;\\n\\\n\
    window.addEventListener(\"load\", function () {\\n\\\n\
        setTimeout(function () {\\n\\\n\
            window.domOnEventWindowOnloadTimeElapsed = (\\n\\\n\
                Date.now()\\n\\\n\
                - window.domOnEventWindowOnloadTimeElapsed\\n\\\n\
            );\\n\\\n\
            console.error(\\n\\\n\
                \"domOnEventWindowOnloadTimeElapsed = \"\\n\\\n\
                + window.domOnEventWindowOnloadTimeElapsed\\n\\\n\
            );\\n\\\n\
        }, 100);\\n\\\n\
    });\\n\\\n\
}());\\n\\\n\
\\n\\\n\
\\n\\\n\
\\n\\\n\
// init timerIntervalAjaxProgressUpdate\\n\\\n\
(function () {\\n\\\n\
/*\\n\\\n\
 * this function will increment the ajax-progress-bar\\n\\\n\
 * until the webpage has loaded\\n\\\n\
 */\\n\\\n\
    \"use strict\";\\n\\\n\
    var ajaxProgressDiv1;\\n\\\n\
    var ajaxProgressState;\\n\\\n\
    var ajaxProgressUpdate;\\n\\\n\
    if (\\n\\\n\
        window.timerIntervalAjaxProgressUpdate\\n\\\n\
        || !document.querySelector(\\n\\\n\
            \"#ajaxProgressDiv1\"\\n\\\n\
        )\\n\\\n\
    ) {\\n\\\n\
        return;\\n\\\n\
    }\\n\\\n\
    ajaxProgressDiv1 = document.querySelector(\\n\\\n\
        \"#ajaxProgressDiv1\"\\n\\\n\
    );\\n\\\n\
    setTimeout(function () {\\n\\\n\
        ajaxProgressDiv1.style.width = \"25%\";\\n\\\n\
    });\\n\\\n\
    ajaxProgressState = 0;\\n\\\n\
    ajaxProgressUpdate = (\\n\\\n\
        window.local\\n\\\n\
        && window.local.ajaxProgressUpdate\\n\\\n\
    ) || function () {\\n\\\n\
        ajaxProgressDiv1.style.width = \"100%\";\\n\\\n\
        setTimeout(function () {\\n\\\n\
            ajaxProgressDiv1.style.background = \"transparent\";\\n\\\n\
            setTimeout(function () {\\n\\\n\
                ajaxProgressDiv1.style.width = \"0%\";\\n\\\n\
            }, 500);\\n\\\n\
        }, 1000);\\n\\\n\
    };\\n\\\n\
    window.timerIntervalAjaxProgressUpdate = setInterval(function () {\\n\\\n\
        ajaxProgressState += 1;\\n\\\n\
        ajaxProgressDiv1.style.width = Math.max(\\n\\\n\
            100 - 75 * Math.exp(-0.125 * ajaxProgressState),\\n\\\n\
            ajaxProgressDiv1.style.width.slice(0, -1) | 0\\n\\\n\
        ) + \"%\";\\n\\\n\
    }, 1000);\\n\\\n\
    window.addEventListener(\"load\", function () {\\n\\\n\
        clearInterval(window.timerIntervalAjaxProgressUpdate);\\n\\\n\
        ajaxProgressUpdate();\\n\\\n\
    });\\n\\\n\
}());\\n\\\n\
\\n\\\n\
\\n\\\n\
\\n\\\n\
// init domOnEventSelectAllWithinPre\\n\\\n\
(function () {\\n\\\n\
/*\\n\\\n\
 * this function will limit select-all within <pre tabIndex=\"0\"> elements\\n\\\n\
 * https://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse\\n\\\n\
 */\\n\\\n\
    \"use strict\";\\n\\\n\
    if (window.domOnEventSelectAllWithinPre) {\\n\\\n\
        return;\\n\\\n\
    }\\n\\\n\
    window.domOnEventSelectAllWithinPre = function (event) {\\n\\\n\
        var range;\\n\\\n\
        var selection;\\n\\\n\
        if (\\n\\\n\
            event\\n\\\n\
            && event.key === \"a\"\\n\\\n\
            && (event.ctrlKey || event.metaKey)\\n\\\n\
            && event.target.closest(\"pre\")\\n\\\n\
        ) {\\n\\\n\
            range = document.createRange();\\n\\\n\
            range.selectNodeContents(event.target.closest(\"pre\"));\\n\\\n\
            selection = window.getSelection();\\n\\\n\
            selection.removeAllRanges();\\n\\\n\
            selection.addRange(range);\\n\\\n\
            event.preventDefault();\\n\\\n\
        }\\n\\\n\
    };\\n\\\n\
    // init event-handling\\n\\\n\
    document.addEventListener(\\n\\\n\
        \"keydown\",\\n\\\n\
        window.domOnEventSelectAllWithinPre\\n\\\n\
    );\\n\\\n\
}());\\n\\\n\
</script>\\n\\\n\
<h1>\\n\\\n\
<!-- utility2-comment\\n\\\n\
    <a\\n\\\n\
        {{#if env.npm_package_homepage}}\\n\\\n\
        href=\"{{env.npm_package_homepage}}\"\\n\\\n\
        {{/if env.npm_package_homepage}}\\n\\\n\
        target=\"_blank\"\\n\\\n\
    >\\n\\\n\
utility2-comment -->\\n\\\n\
        {{env.npm_package_name}} ({{env.npm_package_version}})\\n\\\n\
<!-- utility2-comment\\n\\\n\
    </a>\\n\\\n\
utility2-comment -->\\n\\\n\
</h1>\\n\\\n\
<h3>{{env.npm_package_description}}</h3>\\n\\\n\
<!-- utility2-comment\\n\\\n\
<a class=\"button\" download href=\"assets.app.js\">download standalone app</a><br>\\n\\\n\
<button id=\"testRunButton1\" style=\"display: none;\"></button>\\n\\\n\
<button class=\"button eventDelegateClick onreset\" data-onevent=\"testRunBrowser\" id=\"testRunButton2\">run internal test</button><br>\\n\\\n\
utility2-comment -->\\n\\\n\
\\n\\\n\
\\n\\\n\
\\n\\\n\
<label>edit or paste script below to cover and test</label>\\n\\\n\
<textarea class=\"eventDelegateKeyup onreset\" data-onevent=\"testRunBrowser\" id=\"inputTextareaEval1\">\\n\\\n\
// remove comment below to disable jslint\\n\\\n\
/*jslint browser, devel*/\\n\\\n\
/*global window*/\\n\\\n\
(function () {\\n\\\n\
    \"use strict\";\\n\\\n\
    var testCaseDict;\\n\\\n\
    testCaseDict = {};\\n\\\n\
    testCaseDict.modeTest = 1;\\n\\\n\
\\n\\\n\
    // comment this testCase to disable the failed error demo\\n\\\n\
    testCaseDict.testCase_failed_error_demo = function (option, onError) {\\n\\\n\
    /*\\n\\\n\
     * this function will demo a failed error test\\n\\\n\
     */\\n\\\n\
        // jslint-hack\\n\\\n\
        window.utility2.nop(option);\\n\\\n\
        onError(new Error(\"this is a failed error demo\"));\\n\\\n\
    };\\n\\\n\
\\n\\\n\
    testCaseDict.testCase_passed_ajax_demo = function (option, onError) {\\n\\\n\
    /*\\n\\\n\
     * this function will demo a passed ajax test\\n\\\n\
     */\\n\\\n\
        var data;\\n\\\n\
        option = {url: \"/\"};\\n\\\n\
        // test ajax request for main-page \"/\"\\n\\\n\
        window.utility2.ajax(option, function (error, xhr) {\\n\\\n\
            try {\\n\\\n\
                // validate no error occurred\\n\\\n\
                console.assert(!error, error);\\n\\\n\
                // validate \"200 ok\" status\\n\\\n\
                console.assert(xhr.statusCode === 200, xhr.statusCode);\\n\\\n\
                // validate non-empty data\\n\\\n\
                data = xhr.responseText;\\n\\\n\
                console.assert(data && data.length > 0, data);\\n\\\n\
                onError();\\n\\\n\
            } catch (errorCaught) {\\n\\\n\
                onError(errorCaught);\\n\\\n\
            }\\n\\\n\
        });\\n\\\n\
    };\\n\\\n\
\\n\\\n\
    window.utility2.testRunDefault(testCaseDict);\\n\\\n\
}());\\n\\\n\
</textarea>\\n\\\n\
<button class=\"button eventDelegateClick onreset\" data-onevent=\"testRunBrowser\" id=\"jslintAutofixButton1\">jslint autofix</button><br>\\n\\\n\
<pre class= \"colorError\" id=\"outputJslintPre1\" tabindex=\"0\"></pre>\\n\\\n\
<label>instrumented-code</label>\\n\\\n\
<textarea class=\"resettable\" id=\"outputTextarea1\" readonly></textarea>\\n\\\n\
<label>stderr and stdout</label>\\n\\\n\
<textarea class=\"resettable\" id=\"outputStdoutTextarea1\" readonly></textarea>\\n\\\n\
<div class=\"resettable\" id=\"testReportDiv1\"></div>\\n\\\n\
<div class=\"resettable\" id=\"coverageReportDiv1\"></div>\\n\\\n\
<!-- utility2-comment\\n\\\n\
{{#if isRollup}}\\n\\\n\
<script src=\"assets.app.js\"></script>\\n\\\n\
{{#unless isRollup}}\\n\\\n\
utility2-comment -->\\n\\\n\
<script src=\"assets.utility2.lib.istanbul.js\"></script>\\n\\\n\
<script src=\"assets.utility2.lib.jslint.js\"></script>\\n\\\n\
<script src=\"assets.utility2.lib.jslint2.js\"></script>\\n\\\n\
<script src=\"assets.utility2.lib.db.js\"></script>\\n\\\n\
<script src=\"assets.utility2.lib.marked.js\"></script>\\n\\\n\
<script src=\"assets.utility2.lib.sjcl.js\"></script>\\n\\\n\
<script src=\"assets.utility2.lib.uglifyjs.js\"></script>\\n\\\n\
<script src=\"assets.utility2.js\"></script>\\n\\\n\
<script>window.utility2_onReadyBefore.counter += 1;</script>\\n\\\n\
<script src=\"jsonp.utility2.stateInit?callback=window.utility2.stateInit\"></script>\\n\\\n\
<script src=\"assets.example.js\"></script>\\n\\\n\
<script src=\"assets.test.js\"></script>\\n\\\n\
<script>window.utility2_onReadyBefore();</script>\\n\\\n\
<!-- utility2-comment\\n\\\n\
{{/if isRollup}}\\n\\\n\
utility2-comment -->\\n\\\n\
<div class=\"utility2FooterDiv\">\\n\\\n\
    [ this app was created with\\n\\\n\
    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\\n\
    ]\\n\\\n\
</div>\\n\\\n\
</body>\\n\\\n\
</html>\\n\\\n\
';\n\
/* jslint ignore:end */\n\
/* validateLineSortedReset */\n\
/* jslint ignore:start */\n\
local.assetsDict[\"/assets.utility2.js\"] =\n\
    local.assetsDict[\"/assets.utility2.js\"] ||\n\
    local.fs.readFileSync(local.__dirname + \"/lib.utility2.js\", \"utf8\"\n\
).replace((/^#!\\//), \"// \");\n\
/* jslint ignore:end */\n\
/* validateLineSortedReset */\n\
local.assetsDict[\"/\"] = local.assetsDict[\"/assets.index.template.html\"]\n\
.replace((\n\
    /\\{\\{env\\.(\\w+?)\\}\\}/g\n\
), function (match0, match1) {\n\
    switch (match1) {\n\
    case \"npm_package_description\":\n\
        return \"the greatest app in the world!\";\n\
    case \"npm_package_name\":\n\
        return \"utility2\";\n\
    case \"npm_package_nameLib\":\n\
        return \"utility2\";\n\
    case \"npm_package_version\":\n\
        return \"0.0.1\";\n\
    default:\n\
        return match0;\n\
    }\n\
});\n\
local.assetsDict[\"/assets.example.html\"] = local.assetsDict[\"/\"];\n\
local.assetsDict[\"/index.html\"] = local.assetsDict[\"/\"];\n\
// init cli\n\
if (module !== require.main || globalThis.utility2_rollup) {\n\
    return;\n\
}\n\
/* validateLineSortedReset */\n\
local.assetsDict[\"/assets.example.js\"] = (\n\
    local.assetsDict[\"/assets.example.js\"]\n\
    || local.fs.readFileSync(__filename, \"utf8\")\n\
);\n\
local.assetsDict[\"/favicon.ico\"] = local.assetsDict[\"/favicon.ico\"] || \"\";\n\
// if $npm_config_timeout_exit exists,\n\
// then exit this process after $npm_config_timeout_exit ms\n\
if (Number(process.env.npm_config_timeout_exit)) {\n\
    setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n\
}\n\
// start server\n\
if (globalThis.utility2_serverHttp1) {\n\
    return;\n\
}\n\
process.env.PORT = process.env.PORT || \"8081\";\n\
console.error(\"server starting on port \" + process.env.PORT);\n\
local.http.createServer(function (request, response) {\n\
    request.urlParsed = local.url.parse(request.url);\n\
    if (local.assetsDict[request.urlParsed.pathname] !== undefined) {\n\
        response.end(local.assetsDict[request.urlParsed.pathname]);\n\
        return;\n\
    }\n\
    response.statusCode = 404;\n\
    response.end();\n\
}).listen(process.env.PORT);\n\
}());\n\
\n\
\n\
\n\
}());\n\
"
/* jslint ignore:end */
    return local;
}(globalThis.utility2_rollup));
/* script-end /assets.utility2.example.js */



/* script-begin /assets.utility2.html */
(function (local) {
    "use strict";
/* jslint ignore:start */
local.assetsDict["/assets.utility2.html"] = "<!doctype html>\n\
<html lang=\"en\">\n\
<head>\n\
<meta charset=\"utf-8\">\n\
<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\
<!-- \"assets.utility2.template.html\" -->\n\
<title>utility2 (0.0.1)</title>\n\
<style>\n\
/* jslint utility2:true */\n\
/*csslint\n\
*/\n\
/* csslint ignore:start */\n\
*,\n\
*:after,\n\
*:before {\n\
    box-sizing: border-box;\n\
}\n\
/* csslint ignore:end */\n\
@keyframes uiAnimateShake {\n\
    0%, 50% {\n\
        transform: translateX(10px);\n\
    }\n\
    25%, 75% {\n\
        transform: translateX(-10px);\n\
    }\n\
    100% {\n\
        transform: translateX(0);\n\
    }\n\
}\n\
@keyframes uiAnimateSpin {\n\
    0% {\n\
        transform: rotate(0deg);\n\
    }\n\
    100% {\n\
        transform: rotate(360deg);\n\
    }\n\
}\n\
a {\n\
    overflow-wrap: break-word;\n\
}\n\
body {\n\
    background: #eef;\n\
    font-family: Arial, Helvetica, sans-serif;\n\
    margin: 0 40px;\n\
}\n\
body > div,\n\
body > form > div,\n\
body > form > input,\n\
body > form > pre,\n\
body > form > textarea,\n\
body > form > .button,\n\
body > input,\n\
body > pre,\n\
body > textarea,\n\
body > .button {\n\
    margin-bottom: 20px;\n\
}\n\
body > form > input,\n\
body > form > .button,\n\
body > input,\n\
body > .button {\n\
    width: 20rem;\n\
}\n\
body > form > textarea,\n\
body > textarea {\n\
    height: 10rem;\n\
    width: 100%;\n\
}\n\
body > textarea[readonly] {\n\
    background: #ddd;\n\
}\n\
code,\n\
pre,\n\
textarea {\n\
    font-family: Consolas, Menlo, monospace;\n\
    font-size: small;\n\
}\n\
pre {\n\
    overflow-wrap: break-word;\n\
    white-space: pre-wrap;\n\
}\n\
textarea {\n\
    overflow: auto;\n\
    white-space: pre;\n\
}\n\
.button {\n\
    background-color: #fff;\n\
    border: 1px solid;\n\
    border-bottom-color: rgb(186, 186, 186);\n\
    border-left-color: rgb(209, 209, 209);\n\
    border-radius: 4px;\n\
    border-right-color: rgb(209, 209, 209);\n\
    border-top-color: rgb(216, 216, 216);\n\
    color: #00d;\n\
    cursor: pointer;\n\
    display: inline-block;\n\
    font-family: Arial, Helvetica, sans-serif;\n\
    font-size: 12px;\n\
    font-style: normal;\n\
    font-weight: normal;\n\
    margin: 0;\n\
    padding: 2px 7px 3px 7px;\n\
    text-align: center;\n\
    text-decoration: underline;\n\
}\n\
.colorError {\n\
    color: #d00;\n\
}\n\
.uiAnimateShake {\n\
    animation-duration: 500ms;\n\
    animation-name: uiAnimateShake;\n\
}\n\
.uiAnimateSlide {\n\
    overflow-y: hidden;\n\
    transition: max-height ease-in 250ms, min-height ease-in 250ms, padding-bottom ease-in 250ms, padding-top ease-in 250ms;\n\
}\n\
.utility2FooterDiv {\n\
    text-align: center;\n\
}\n\
.zeroPixel {\n\
    border: 0;\n\
    height: 0;\n\
    margin: 0;\n\
    padding: 0;\n\
    width: 0;\n\
}\n\
</style>\n\
</head>\n\
<body>\n\
<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 500ms, width 1500ms; width: 0%; z-index: 1;\"></div>\n\
<div class=\"uiAnimateSpin\" style=\"animation: uiAnimateSpin 2s linear infinite; border: 5px solid #999; border-radius: 50%; border-top: 5px solid #7d7; display: none; height: 25px; vertical-align: middle; width: 25px;\"></div>\n\
<a class=\"zeroPixel\" download=\"db.persistence.json\" href=\"\" id=\"dbExportA1\"></a>\n\
<input class=\"zeroPixel\" id=\"dbImportInput1\" type=\"file\">\n\
<script>\n\
/* jslint utility2:true */\n\
// init domOnEventWindowOnloadTimeElapsed\n\
(function () {\n\
/*\n\
 * this function will measure and print the time-elapsed for window.onload\n\
 */\n\
    \"use strict\";\n\
    if (window.domOnEventWindowOnloadTimeElapsed) {\n\
        return;\n\
    }\n\
    window.domOnEventWindowOnloadTimeElapsed = Date.now() + 100;\n\
    window.addEventListener(\"load\", function () {\n\
        setTimeout(function () {\n\
            window.domOnEventWindowOnloadTimeElapsed = (\n\
                Date.now()\n\
                - window.domOnEventWindowOnloadTimeElapsed\n\
            );\n\
            console.error(\n\
                \"domOnEventWindowOnloadTimeElapsed = \"\n\
                + window.domOnEventWindowOnloadTimeElapsed\n\
            );\n\
        }, 100);\n\
    });\n\
}());\n\
\n\
\n\
\n\
// init timerIntervalAjaxProgressUpdate\n\
(function () {\n\
/*\n\
 * this function will increment the ajax-progress-bar\n\
 * until the webpage has loaded\n\
 */\n\
    \"use strict\";\n\
    var ajaxProgressDiv1;\n\
    var ajaxProgressState;\n\
    var ajaxProgressUpdate;\n\
    if (\n\
        window.timerIntervalAjaxProgressUpdate\n\
        || !document.querySelector(\n\
            \"#ajaxProgressDiv1\"\n\
        )\n\
    ) {\n\
        return;\n\
    }\n\
    ajaxProgressDiv1 = document.querySelector(\n\
        \"#ajaxProgressDiv1\"\n\
    );\n\
    setTimeout(function () {\n\
        ajaxProgressDiv1.style.width = \"25%\";\n\
    });\n\
    ajaxProgressState = 0;\n\
    ajaxProgressUpdate = (\n\
        window.local\n\
        && window.local.ajaxProgressUpdate\n\
    ) || function () {\n\
        ajaxProgressDiv1.style.width = \"100%\";\n\
        setTimeout(function () {\n\
            ajaxProgressDiv1.style.background = \"transparent\";\n\
            setTimeout(function () {\n\
                ajaxProgressDiv1.style.width = \"0%\";\n\
            }, 500);\n\
        }, 1000);\n\
    };\n\
    window.timerIntervalAjaxProgressUpdate = setInterval(function () {\n\
        ajaxProgressState += 1;\n\
        ajaxProgressDiv1.style.width = Math.max(\n\
            100 - 75 * Math.exp(-0.125 * ajaxProgressState),\n\
            ajaxProgressDiv1.style.width.slice(0, -1) | 0\n\
        ) + \"%\";\n\
    }, 1000);\n\
    window.addEventListener(\"load\", function () {\n\
        clearInterval(window.timerIntervalAjaxProgressUpdate);\n\
        ajaxProgressUpdate();\n\
    });\n\
}());\n\
\n\
\n\
\n\
// init domOnEventSelectAllWithinPre\n\
(function () {\n\
/*\n\
 * this function will limit select-all within <pre tabIndex=\"0\"> elements\n\
 * https://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse\n\
 */\n\
    \"use strict\";\n\
    if (window.domOnEventSelectAllWithinPre) {\n\
        return;\n\
    }\n\
    window.domOnEventSelectAllWithinPre = function (event) {\n\
        var range;\n\
        var selection;\n\
        if (\n\
            event\n\
            && event.key === \"a\"\n\
            && (event.ctrlKey || event.metaKey)\n\
            && event.target.closest(\"pre\")\n\
        ) {\n\
            range = document.createRange();\n\
            range.selectNodeContents(event.target.closest(\"pre\"));\n\
            selection = window.getSelection();\n\
            selection.removeAllRanges();\n\
            selection.addRange(range);\n\
            event.preventDefault();\n\
        }\n\
    };\n\
    // init event-handling\n\
    document.addEventListener(\n\
        \"keydown\",\n\
        window.domOnEventSelectAllWithinPre\n\
    );\n\
}());\n\
</script>\n\
<h1>\n\
\n\
    <a\n\
        \n\
        href=\"https://github.com/kaizhu256/node-utility2\"\n\
        \n\
        target=\"_blank\"\n\
    >\n\
\n\
        utility2 (0.0.1)\n\
\n\
    </a>\n\
\n\
</h1>\n\
<h3>the zero-dependency, swiss-army-knife utility for building, testing, and deploying webapps</h3>\n\
\n\
<a class=\"button\" download href=\"assets.app.js\">download standalone app</a><br>\n\
<button id=\"testRunButton1\" style=\"display: none;\"></button>\n\
<button class=\"button eventDelegateClick onreset\" data-onevent=\"testRunBrowser\" id=\"testRunButton2\">run internal test</button><br>\n\
\n\
\n\
\n\
\n\
<label>edit or paste script below to cover and test</label>\n\
<textarea class=\"eventDelegateKeyup onreset\" data-onevent=\"testRunBrowser\" id=\"inputTextareaEval1\">\n\
// remove comment below to disable jslint\n\
/*jslint browser, devel*/\n\
/*global window*/\n\
(function () {\n\
    \"use strict\";\n\
    var testCaseDict;\n\
    testCaseDict = {};\n\
    testCaseDict.modeTest = 1;\n\
\n\
    // comment this testCase to disable the failed error demo\n\
    testCaseDict.testCase_failed_error_demo = function (option, onError) {\n\
    /*\n\
     * this function will demo a failed error test\n\
     */\n\
        // jslint-hack\n\
        window.utility2.nop(option);\n\
        onError(new Error(\"this is a failed error demo\"));\n\
    };\n\
\n\
    testCaseDict.testCase_passed_ajax_demo = function (option, onError) {\n\
    /*\n\
     * this function will demo a passed ajax test\n\
     */\n\
        var data;\n\
        option = {url: \"/\"};\n\
        // test ajax request for main-page \"/\"\n\
        window.utility2.ajax(option, function (error, xhr) {\n\
            try {\n\
                // validate no error occurred\n\
                console.assert(!error, error);\n\
                // validate \"200 ok\" status\n\
                console.assert(xhr.statusCode === 200, xhr.statusCode);\n\
                // validate non-empty data\n\
                data = xhr.responseText;\n\
                console.assert(data && data.length > 0, data);\n\
                onError();\n\
            } catch (errorCaught) {\n\
                onError(errorCaught);\n\
            }\n\
        });\n\
    };\n\
\n\
    window.utility2.testRunDefault(testCaseDict);\n\
}());\n\
</textarea>\n\
<button class=\"button eventDelegateClick onreset\" data-onevent=\"testRunBrowser\" id=\"jslintAutofixButton1\">jslint autofix</button><br>\n\
<pre class= \"colorError\" id=\"outputJslintPre1\" tabindex=\"0\"></pre>\n\
<label>instrumented-code</label>\n\
<textarea class=\"resettable\" id=\"outputTextarea1\" readonly></textarea>\n\
<label>stderr and stdout</label>\n\
<textarea class=\"resettable\" id=\"outputStdoutTextarea1\" readonly></textarea>\n\
<div class=\"resettable\" id=\"testReportDiv1\"></div>\n\
<div class=\"resettable\" id=\"coverageReportDiv1\"></div>\n\
\n\
\n\
<script src=\"assets.utility2.rollup.js\"></script>\n\
<script src=\"assets.utility2.example.js\"></script>\n\
<script src=\"assets.utility2.test.js\"></script>\n\
\n\
\n\
<div class=\"utility2FooterDiv\">\n\
    [ this app was created with\n\
    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\n\
    ]\n\
</div>\n\
</body>\n\
</html>\n\
"
/* jslint ignore:end */
    return local;
}(globalThis.utility2_rollup));
/* script-end /assets.utility2.html */



/* script-begin /assets.utility2.test.js */
(function (local) {
    "use strict";
/* jslint ignore:start */
local.assetsDict["/assets.utility2.test.js"] = "/* istanbul instrument in package utility2 */\n\
/* istanbul ignore next */\n\
/* jslint utility2:true */\n\
(function (globalThis) {\n\
    \"use strict\";\n\
    var consoleError;\n\
    var local;\n\
    // init globalThis\n\
    (function () {\n\
        try {\n\
            globalThis = Function(\"return this\")(); // jslint ignore:line\n\
        } catch (ignore) {}\n\
    }());\n\
    globalThis.globalThis = globalThis;\n\
    // init debug_inline\n\
    if (!globalThis[\"debug\\u0049nline\"]) {\n\
        consoleError = console.error;\n\
        globalThis[\"debug\\u0049nline\"] = function () {\n\
        /*\n\
         * this function will both print <arguments> to stderr\n\
         * and return <arguments>[0]\n\
         */\n\
            var argList;\n\
            argList = Array.from(arguments); // jslint ignore:line\n\
            // debug arguments\n\
            globalThis[\"debug\\u0049nlineArguments\"] = argList;\n\
            consoleError(\"\\n\\ndebug\\u0049nline\");\n\
            consoleError.apply(console, argList);\n\
            consoleError(\"\\n\");\n\
            // return arg0 for inspection\n\
            return argList[0];\n\
        };\n\
    }\n\
    // init local\n\
    local = {};\n\
    local.local = local;\n\
    globalThis.globalLocal = local;\n\
    // init isBrowser\n\
    local.isBrowser = (\n\
        typeof window === \"object\"\n\
        && window === globalThis\n\
        && typeof window.XMLHttpRequest === \"function\"\n\
        && window.document\n\
        && typeof window.document.querySelector === \"function\"\n\
    );\n\
    // init function\n\
    local.assertThrow = function (passed, message) {\n\
    /*\n\
     * this function will throw the error <message> if <passed> is falsy\n\
     */\n\
        var error;\n\
        if (passed) {\n\
            return;\n\
        }\n\
        error = (\n\
            // ternary-condition\n\
            (\n\
                message\n\
                && typeof message.message === \"string\"\n\
                && typeof message.stack === \"string\"\n\
            )\n\
            // if message is an error-object, then leave it as is\n\
            ? message\n\
            : new Error(\n\
                typeof message === \"string\"\n\
                // if message is a string, then leave it as is\n\
                ? message\n\
                // else JSON.stringify message\n\
                : JSON.stringify(message, null, 4)\n\
            )\n\
        );\n\
        throw error;\n\
    };\n\
    local.functionOrNop = function (fnc) {\n\
    /*\n\
     * this function will if <fnc> exists,\n\
     * them return <fnc>,\n\
     * else return <nop>\n\
     */\n\
        return fnc || local.nop;\n\
    };\n\
    local.identity = function (value) {\n\
    /*\n\
     * this function will return <value>\n\
     */\n\
        return value;\n\
    };\n\
    local.nop = function () {\n\
    /*\n\
     * this function will do nothing\n\
     */\n\
        return;\n\
    };\n\
    local.objectAssignDefault = function (target, source) {\n\
    /*\n\
     * this function will if items from <target> are\n\
     * null, undefined, or empty-string,\n\
     * then overwrite them with items from <source>\n\
     */\n\
        Object.keys(source).forEach(function (key) {\n\
            if (\n\
                target[key] === null\n\
                || target[key] === undefined\n\
                || target[key] === \"\"\n\
            ) {\n\
                target[key] = target[key] || source[key];\n\
            }\n\
        });\n\
    };\n\
    // require builtin\n\
    if (!local.isBrowser) {\n\
        local.assert = require(\"assert\");\n\
        local.buffer = require(\"buffer\");\n\
        local.child_process = require(\"child_process\");\n\
        local.cluster = require(\"cluster\");\n\
        local.crypto = require(\"crypto\");\n\
        local.dgram = require(\"dgram\");\n\
        local.dns = require(\"dns\");\n\
        local.domain = require(\"domain\");\n\
        local.events = require(\"events\");\n\
        local.fs = require(\"fs\");\n\
        local.http = require(\"http\");\n\
        local.https = require(\"https\");\n\
        local.net = require(\"net\");\n\
        local.os = require(\"os\");\n\
        local.path = require(\"path\");\n\
        local.querystring = require(\"querystring\");\n\
        local.readline = require(\"readline\");\n\
        local.repl = require(\"repl\");\n\
        local.stream = require(\"stream\");\n\
        local.string_decoder = require(\"string_decoder\");\n\
        local.timers = require(\"timers\");\n\
        local.tls = require(\"tls\");\n\
        local.tty = require(\"tty\");\n\
        local.url = require(\"url\");\n\
        local.util = require(\"util\");\n\
        local.vm = require(\"vm\");\n\
        local.zlib = require(\"zlib\");\n\
    }\n\
}(this));\n\
\n\
\n\
\n\
(function (local) {\n\
\"use strict\";\n\
\n\
\n\
\n\
// run shared js-env code - init-before\n\
(function () {\n\
// init local\n\
local = (globalThis.utility2 || require(\"./lib.utility2.js\")).requireReadme();\n\
globalThis.local = local;\n\
// init test\n\
local.testRunDefault(local);\n\
}());\n\
\n\
\n\
\n\
// run shared js-env code - function\n\
(function () {\n\
local._testCase_testRunDefault_failure = function (option, onError) {\n\
/*\n\
 * this function will test testRunDefault's failure handling-behavior\n\
 */\n\
    // test failure from callback handling-behavior\n\
    onError(local.errorDefault);\n\
    // test failure from multiple-callback handling-behavior\n\
    onError(null, option);\n\
    // test failure from ajax handling-behavior\n\
    local.ajax({\n\
        url: \"/undefined\"\n\
    }, onError);\n\
    // test failure from uncaught-uncaughtexception handling-behavior\n\
    setTimeout(local.throwError);\n\
    // test console.error handling-behavior\n\
    local.testMock([\n\
        [globalThis, {\n\
            __coverage__: null\n\
        }]\n\
    ], function (onError) {\n\
        console.error();\n\
        onError(null, option);\n\
    }, local.onErrorThrow);\n\
    // test failure from thrown error handling-behavior\n\
    throw local.errorDefault;\n\
};\n\
\n\
local.testCase_FormData_default = function (option, onError) {\n\
/*\n\
 * this function will test FormData's default handling-behavior\n\
 */\n\
    option = {};\n\
    option.blob1 = new local.Blob([\"aa\", \"bb\", local.stringHelloEmoji, 0]);\n\
    option.blob2 = new local.Blob([\"aa\", \"bb\", local.stringHelloEmoji, 0], {\n\
        type: \"text/plain; charset=utf-8\"\n\
    });\n\
    option.data = new local.FormData();\n\
    option.data.append(\"text1\", \"aabb\" + local.stringHelloEmoji + \"0\");\n\
    // test file-upload handling-behavior\n\
    option.data.append(\"file1\", option.blob1);\n\
    // test file-upload and filename handling-behavior\n\
    option.data.append(\"file2\", option.blob2, \"filename2.txt\");\n\
    option.method = \"POST\";\n\
    option.url = \"/test.echo\";\n\
    local.ajax(option, function (error, xhr) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        // validate responseText\n\
        local.assertThrow(xhr.responseText.indexOf(\n\
            \"\\r\\nContent-Disposition: form-data; \"\n\
            + \"name=\\\"text1\\\"\\r\\n\\r\\naabbhello \\ud83d\\ude01\\n0\\r\\n\"\n\
        ) >= 0, xhr.responseText);\n\
        local.assertThrow(xhr.responseText.indexOf(\n\
            \"\\r\\nContent-Disposition: form-data; \"\n\
            + \"name=\\\"file1\\\"\\r\\n\\r\\naabbhello \\ud83d\\ude01\\n0\\r\\n\"\n\
        ) >= 0, xhr.responseText);\n\
        local.assertThrow(xhr.responseText.indexOf(\n\
            \"\\r\\nContent-Disposition: form-data; name=\\\"file2\\\"; \"\n\
            + \"filename=\\\"filename2.txt\\\"\\r\\nContent-Type: text/plain; \"\n\
            + \"charset=utf-8\\r\\n\\r\\naabbhello \\ud83d\\ude01\\n0\\r\\n\"\n\
        ) >= 0, xhr.responseText);\n\
        onError(null, option);\n\
    });\n\
};\n\
\n\
local.testCase_FormData_error = function (option, onError) {\n\
/*\n\
 * this function will test FormData's error handling-behavior\n\
 */\n\
    local.testMock([\n\
        [local.FormData.prototype, {\n\
            read: function (onError) {\n\
                onError(local.errorDefault);\n\
            }\n\
        }]\n\
    ], function (onError) {\n\
        local.ajax({\n\
            data: new local.FormData(),\n\
            method: \"POST\",\n\
            url: \"/test.echo\"\n\
        }, function (error) {\n\
            // validate error occurred\n\
            local.assertThrow(error, error);\n\
            onError(null, option);\n\
        });\n\
    }, onError);\n\
};\n\
\n\
local.testCase_FormData_nullCase = function (option, onError) {\n\
/*\n\
 * this function will test FormData's null-case handling-behavior\n\
 */\n\
    local.ajax({\n\
        data: new local.FormData(),\n\
        method: \"POST\",\n\
        url: \"/test.echo\"\n\
    }, function (error, xhr) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        // validate responseText\n\
        local.assertThrow((\n\
            /\\r\\n\\r\\n$/\n\
        ).test(xhr.responseText), xhr.responseText);\n\
        onError(null, option);\n\
    });\n\
};\n\
\n\
local.testCase_ajaxProgressUpdate_default = function (option, onError) {\n\
/*\n\
 * this function will test ajaxProgressUpdate's default handling-behavior\n\
 */\n\
    option = 0;\n\
    local.testMock([\n\
        [local, {\n\
            ajaxProgressCounter: 0,\n\
            ajaxProgressState: 0\n\
        }],\n\
        [globalThis, {\n\
            setTimeout: function (fnc) {\n\
                option += 1;\n\
                local.ajaxProgressState = option % 3;\n\
                fnc();\n\
            }\n\
        }]\n\
    ], function (onError) {\n\
        // update ajax-progress\n\
        local.ajaxProgressUpdate();\n\
        // validate data\n\
        local.assertJsonEqual(local.ajaxProgressCounter, 0);\n\
        local.assertJsonEqual(local.ajaxProgressState, 2);\n\
        // update ajax-progress\n\
        local.ajaxProgressUpdate();\n\
        // validate data\n\
        local.assertJsonEqual(local.ajaxProgressCounter, 0);\n\
        local.assertJsonEqual(local.ajaxProgressState, 1);\n\
        // update ajax-progress\n\
        local.ajaxProgressUpdate();\n\
        // validate data\n\
        local.assertJsonEqual(local.ajaxProgressCounter, 0);\n\
        local.assertJsonEqual(local.ajaxProgressState, 0);\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_ajax_cache = function (option, onError) {\n\
/*\n\
 * this function will test ajax's cache handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    option = {};\n\
    local.onNext(option, function (error, data) {\n\
        switch (option.modeNext) {\n\
        case 1:\n\
            // test http GET handling-behavior\n\
            local.ajax({\n\
                url: \"assets.hello.txt\"\n\
            }, option.onNext);\n\
            break;\n\
        case 2:\n\
            // validate responseText\n\
            local.assertJsonEqual(data.responseText, local.stringHelloEmoji);\n\
            // test http GET 304 cache handling-behavior\n\
            local.ajax({\n\
                headers: {\n\
                    \"If-Modified-Since\": new Date(Date.now() + 0xffff).toUTCString()\n\
                },\n\
                url: \"assets.hello.txt\"\n\
            }, option.onNext);\n\
            break;\n\
        case 3:\n\
            // validate statusCode\n\
            local.assertJsonEqual(data.statusCode, 304);\n\
            option.onNext();\n\
            break;\n\
        default:\n\
            onError(error, option);\n\
        }\n\
    });\n\
    option.modeNext = 0;\n\
    option.onNext();\n\
};\n\
\n\
local.testCase_ajax_default = function (option, onError) {\n\
/*\n\
 * this function will test ajax's default handling-behavior\n\
 */\n\
    var onParallel;\n\
    onParallel = local.onParallel(onError);\n\
    onParallel.counter += 1;\n\
\n\
    // test ajax's abort handling-behavior\n\
    onParallel.counter += 1;\n\
    local.onParallelList({\n\
        list: [\n\
            \"\",\n\
            \"arraybuffer\",\n\
            \"blob\",\n\
            \"text\"\n\
        ]\n\
    }, function (responseType, onParallel) {\n\
        responseType = responseType.element;\n\
        onParallel.counter += 1;\n\
        local.ajax({\n\
            data: (\n\
                responseType === \"arraybuffer\"\n\
                // test POST buffer-data handling-behavior\n\
                ? new TextEncoder().encode(local.stringHelloEmoji)\n\
                : responseType === \"blob\"\n\
                // test POST blob-data handling-behavior\n\
                ? new local.Blob([\n\
                    \"\",\n\
                    new Uint8Array(0),\n\
                    local.stringHelloEmoji\n\
                ])\n\
                // test POST string-data handling-behavior\n\
                : local.stringHelloEmoji\n\
            ),\n\
            method: \"POST\",\n\
            // test nodejs response handling-behavior\n\
            responseType: responseType.replace(\"blob\", \"arraybuffer\"),\n\
            url: \"/test.body\"\n\
        }, function (error, xhr) {\n\
            // validate no error occurred\n\
            local.assertThrow(!error, error);\n\
            // validate statusCode\n\
            local.assertJsonEqual(xhr.statusCode, 200);\n\
            // validate responseText\n\
            switch (responseType) {\n\
            case \"arraybuffer\":\n\
            case \"blob\":\n\
                local.assertJsonEqual(xhr.responseBuffer.byteLength, 11);\n\
                local.assertJsonEqual(Array.from(xhr.responseBuffer), [\n\
                    0x68,\n\
                    0x65,\n\
                    0x6c,\n\
                    0x6c,\n\
                    0x6f,\n\
                    0x20,\n\
                    0xf0,\n\
                    0x9f,\n\
                    0x98,\n\
                    0x81,\n\
                    0x0a\n\
                ]);\n\
                break;\n\
            default:\n\
                local.assertJsonEqual(xhr.responseText, local.stringHelloEmoji);\n\
            }\n\
            onParallel(null, option);\n\
        });\n\
    }, onParallel);\n\
\n\
    // test ajax's data handling-behavior\n\
    onParallel.counter += 1;\n\
    option = local.ajax({\n\
        url: \"/test.timeout\"\n\
    }, function (error, xhr) {\n\
        // validate error occurred\n\
        local.assertThrow(error, error);\n\
        // validate statusCode\n\
        local.assertJsonEqual(xhr.statusCode, 500);\n\
        onParallel(null, option);\n\
    });\n\
    // test multiple-callback handling-behavior\n\
    option.onEvent({\n\
        type: \"abort\"\n\
    });\n\
    option.abort();\n\
    option.abort();\n\
\n\
    // test ajax's echo handling-behavior\n\
    onParallel.counter += 1;\n\
    local.ajax({\n\
        _aa: \"aa\",\n\
        aa: \"aa\",\n\
        data: local.stringHelloEmoji,\n\
        // test request-header handling-behavior\n\
        headers: {\n\
            \"X-Request-Header-Test\": \"aa\"\n\
        },\n\
        method: \"POST\",\n\
        // test modeDebug handling-behavior\n\
        modeDebug: true,\n\
        url: \"/test.echo\"\n\
    }, function (error, xhr) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        // validate statusCode\n\
        local.assertJsonEqual(xhr.statusCode, 200);\n\
        // validate responseHeaders\n\
        local.assertJsonEqual(\n\
            xhr.responseHeaders[\"x-response-header-test\"],\n\
            \"bb\"\n\
        );\n\
        // validate responseText\n\
        local.assertThrow((\n\
            /\\r\\nhello\\u0020\\ud83d\\ude01\\n$/\n\
        ).test(xhr.responseText), xhr.responseText);\n\
        local.assertThrow((\n\
            /\\r\\nx-request-header-test:\\u0020aa\\r\\n/\n\
        ).test(xhr.responseText), xhr.responseText);\n\
        // validate properties\n\
        local.assertJsonEqual(xhr._aa, undefined);\n\
        local.assertJsonEqual(xhr.aa, \"aa\");\n\
        onParallel(null, option);\n\
    });\n\
\n\
    // test ajax's error handling-behavior\n\
    onParallel.counter += 1;\n\
    local.onParallelList({\n\
        list: [{\n\
            // test 404-not-found-error handling-behavior\n\
            url: \"/test.error-404\"\n\
        }, {\n\
            // test 500-internal-server-error handling-behavior\n\
            url: \"/test.error-500\"\n\
        }, {\n\
            // test undefined-error handling-behavior\n\
            url: \"/test.error-undefined\"\n\
        }, {\n\
            // test corsForwardProxyHost handling-behavior\n\
            corsForwardProxyHost: \"https://undefined:0\",\n\
            location: {\n\
                host: \"undefined.github.io\"\n\
            },\n\
            timeout: 1,\n\
            // test undefined-https-url handling-behavior\n\
            url: \"https://undefined:0\"\n\
        }]\n\
    }, function (option2, onParallel) {\n\
        onParallel.counter += 1;\n\
        local.ajax(option2.element, function (error) {\n\
            // validate error occurred\n\
            local.assertThrow(error, error);\n\
            onParallel(null, option);\n\
        });\n\
    }, onParallel);\n\
\n\
    // test ajax's file handling-behavior\n\
    onParallel.counter += 1;\n\
    local.ajax({\n\
        url: \"LICENSE\"\n\
    }, function (error, xhr) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        // validate statusCode\n\
        local.assertJsonEqual(xhr.statusCode, 200);\n\
        // validate responseText\n\
        local.assertThrow(xhr.responseText.indexOf(\n\
            \"MIT License (https://opensource.org/licenses/MIT)\\n\\n\"\n\
        ) === 0, xhr.data);\n\
        onParallel(null, option);\n\
    });\n\
\n\
    // test ajax's standalone handling-behavior\n\
    onParallel.counter += 1;\n\
    local.testMock([\n\
        [local, {\n\
            utility2: null\n\
        }]\n\
    ], function (onError) {\n\
        [\"\", \"arraybuffer\"].forEach(function (responseType) {\n\
            // test default handling-behavior\n\
            onParallel.counter += 1;\n\
            local.ajax({\n\
                responseType: responseType,\n\
                url: (\n\
                    local.isBrowser\n\
                    ? location.href\n\
                    : local.serverLocalHost\n\
                )\n\
            }, function (error, xhr) {\n\
                // validate no error occurred\n\
                local.assertThrow(!error, error);\n\
                // validate statusCode\n\
                local.assertJsonEqual(xhr.statusCode, 200);\n\
                onParallel();\n\
            });\n\
            // test error handling-behavior\n\
            onParallel.counter += 1;\n\
            local.ajax({\n\
                responseType: responseType,\n\
                undefined: undefined,\n\
                url: (\n\
                    local.isBrowser\n\
                    ? location.href.replace((\n\
                        /\\?.*$/\n\
                    ), \"\")\n\
                    : local.serverLocalHost\n\
                ) + \"/undefined\"\n\
            }, function (error, xhr) {\n\
                // validate error occurred\n\
                local.assertThrow(error, error);\n\
                // validate statusCode\n\
                local.assertJsonEqual(xhr.statusCode, 404);\n\
                onParallel();\n\
            });\n\
        });\n\
        onError(null, option);\n\
    }, onParallel);\n\
    onParallel();\n\
\n\
    // test ajax's timeout handling-behavior\n\
    onParallel.counter += 1;\n\
    setTimeout(function () {\n\
        local.ajax({\n\
            timeout: 1,\n\
            url: \"/test.timeout\"\n\
        }, function (error, xhr) {\n\
            // validate error occurred\n\
            local.assertThrow(error, error);\n\
            // validate statusCode\n\
            local.assertJsonEqual(xhr.statusCode, 500);\n\
            onParallel(null, option);\n\
        });\n\
    }, 1000);\n\
};\n\
\n\
local.testCase_assertXxx_default = function (option, onError) {\n\
/*\n\
 * this function will test assertXxx's default handling-behavior\n\
 */\n\
    // test assertion passed\n\
    local.assertThrow(true, true);\n\
    // test assertion failed with undefined message\n\
    local.tryCatchOnError(function () {\n\
        local.assertThrow(null);\n\
    }, function (error) {\n\
        // validate error occurred\n\
        local.assertThrow(error, error);\n\
        // validate error-message\n\
        local.assertJsonEqual(error.message, \"\");\n\
    });\n\
    // test assertion failed with string message\n\
    local.tryCatchOnError(function () {\n\
        local.assertThrow(null, \"aa\");\n\
    }, function (error) {\n\
        // validate error occurred\n\
        local.assertThrow(error, error);\n\
        // validate error-message\n\
        local.assertJsonEqual(error.message, \"aa\");\n\
    });\n\
    // test assertion failed with error object\n\
    local.tryCatchOnError(function () {\n\
        local.assertThrow(null, local.errorDefault);\n\
    }, function (error) {\n\
        // validate error occurred\n\
        local.assertThrow(error, error);\n\
    });\n\
    // test assertion failed with json object\n\
    local.tryCatchOnError(function () {\n\
        local.assertThrow(null, {\n\
            aa: 1\n\
        });\n\
    }, function (error) {\n\
        // validate error occurred\n\
        local.assertThrow(error, error);\n\
        // validate error-message\n\
        local.assertJsonEqual(error.message, \"{\\n    \\\"aa\\\": 1\\n}\");\n\
    });\n\
    [\"\", 0, false, null, undefined].forEach(function (aa, ii) {\n\
        [\"\", 0, false, null, undefined].forEach(function (bb, jj) {\n\
            if (ii === jj) {\n\
                // test assertJsonEqual's handling-behavior\n\
                local.assertJsonEqual(aa, bb);\n\
            } else {\n\
                // test assertJsonNotEqual's handling-behavior\n\
                local.assertJsonNotEqual(aa, bb);\n\
            }\n\
        });\n\
    });\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_base64Xxx_default = function (option, onError) {\n\
/*\n\
 * this function will test base64Xxx's default handling-behavior\n\
 */\n\
    option = {};\n\
    option.base64 = local.base64FromBuffer(\n\
        local.stringCharsetAscii + local.stringHelloEmoji\n\
    );\n\
    // test null-case handling-behavior\n\
    local.assertJsonEqual(local.base64FromBuffer(), \"\");\n\
    local.assertJsonEqual(local.bufferToUtf8(local.base64ToBuffer()), \"\");\n\
    local.assertJsonEqual(local.base64ToUtf8(), \"\");\n\
    local.assertJsonEqual(local.base64FromBuffer(local.base64ToBuffer()), \"\");\n\
    local.assertJsonEqual(local.base64FromBuffer(local.base64ToUtf8()), \"\");\n\
    // test identity handling-behavior\n\
    local.assertJsonEqual(\n\
        local.base64FromBuffer(local.base64ToBuffer(option.base64)),\n\
        option.base64\n\
    );\n\
    local.assertJsonEqual(\n\
        local.base64FromBuffer(local.base64ToUtf8(option.base64)),\n\
        option.base64\n\
    );\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_blobRead_default = function (option, onError) {\n\
/*\n\
 * this function will test blobRead's default handling-behavior\n\
 */\n\
    var onParallel;\n\
    onParallel = local.onParallel(onError);\n\
    onParallel.counter += 1;\n\
    // test data handling-behavior\n\
    onParallel.counter += 1;\n\
    local.blobRead(new local.Blob([\n\
        \"\",\n\
        \"aa\",\n\
        \"bb\",\n\
        new Uint8Array(0),\n\
        local.stringHelloEmoji\n\
    ]), function (error, data) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        // validate data\n\
        local.assertJsonEqual(\n\
            local.bufferToUtf8(data),\n\
            \"aabbhello \\ud83d\\ude01\\n\"\n\
        );\n\
        onParallel(null, option);\n\
    });\n\
    if (!local.isBrowser) {\n\
        onParallel(null, option);\n\
        return;\n\
    }\n\
    // test error handling-behavior\n\
    onParallel.counter += 1;\n\
    local.testMock([\n\
        [FileReader.prototype, {\n\
            readAsArrayBuffer: function () {\n\
                this.onabort({\n\
                    type: \"abort\"\n\
                });\n\
                this.onerror({\n\
                    type: \"error\"\n\
                });\n\
            }\n\
        }]\n\
    ], function (onError) {\n\
        local.blobRead(null, function (error) {\n\
            // validate error occurred\n\
            local.assertThrow(error, error);\n\
        });\n\
        onError(null, option);\n\
    }, onParallel);\n\
    onParallel();\n\
};\n\
\n\
local.testCase_browserTest_electron = function (option, onError) {\n\
/*\n\
 * this function will test browserTest's electron handling-behavior\n\
 */\n\
    option = function (aa, bb, cc) {\n\
        [aa, bb, cc].forEach(function (fnc, ii) {\n\
            if (typeof fnc === \"function\") {\n\
                fnc(ii && option);\n\
                option.onNext(null, option);\n\
                option.utility2_testReportSave();\n\
            }\n\
        });\n\
        return option;\n\
    };\n\
    [\n\
        \"BrowserWindow\",\n\
        \"addEventListener\",\n\
        \"app\",\n\
        \"browserWindow\",\n\
        \"capturePage\",\n\
        \"document\",\n\
        \"documentElement\",\n\
        \"electron\",\n\
        \"fileCoverage\",\n\
        \"fileElectronHtml\",\n\
        \"fileScreenshot\",\n\
        \"fileTestReport\",\n\
        \"fs\",\n\
        \"ipcRenderer\",\n\
        \"loadURL\",\n\
        \"modeCoverageMerge\",\n\
        \"on\",\n\
        \"once\",\n\
        \"process\",\n\
        \"prototype\",\n\
        \"rename\",\n\
        \"send\",\n\
        \"toPNG\",\n\
        \"unref\",\n\
        \"window\",\n\
        \"writeFile\"\n\
    ].forEach(function (key) {\n\
        option[key] = (\n\
            key.indexOf(\"file\") === 0\n\
            ? \"undefined\"\n\
            : option\n\
        );\n\
    });\n\
    option.ipcMain = {\n\
        on: function (_, fnc) {\n\
            [\"html\", \"testReport\", \"undefined\"].forEach(function (type) {\n\
                [\n\
                    \"<div></div>\",\n\
                    null,\n\
                    {}, {\n\
                        testPlatformList: [{}]\n\
                    }, {\n\
                        coverage: {},\n\
                        testPlatformList: [{}]\n\
                    }\n\
                ].forEach(function (data) {\n\
                    option.isDoneTestReport = null;\n\
                    fnc(_, type, data);\n\
                });\n\
            });\n\
        }\n\
    };\n\
    option.utility2_testReportSave = local.nop;\n\
    local.testMock([\n\
        [globalThis, {\n\
            setTimeout: option,\n\
            utility2_testReport: null\n\
        }],\n\
        [local, {\n\
            fs: option,\n\
            fsReadFileOrEmptyStringSync: function () {\n\
                return \"\";\n\
            },\n\
            fsWriteFileWithMkdirpSync: option,\n\
            onParallel: option\n\
        }]\n\
    ], function (onError) {\n\
        [\"test\", \"undefined\"].forEach(function (modeBrowserTest) {\n\
            [1, 10, 11, 20, 100].forEach(function (modeNext) {\n\
                option.modeBrowserTest = modeBrowserTest;\n\
                option.modeNext = modeNext;\n\
                switch (modeNext) {\n\
                case 100:\n\
                    local.tryCatchOnError(function () {\n\
                        local.browserTest({\n\
                            modeNext: modeNext\n\
                        }, option);\n\
                    }, local.nop);\n\
                    break;\n\
                default:\n\
                    local.browserTest(option, option);\n\
                }\n\
            });\n\
        });\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_browserTest_screenshot = function (option, onError) {\n\
/*\n\
 * this function will test browserTest's screenshot handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.browserTest({\n\
        modeBrowserTest: \"screenshot\",\n\
        timeoutDefault: 10000,\n\
        url: \"tmp/build/test-report.html\"\n\
    }, onError);\n\
};\n\
\n\
local.testCase_bufferIndexOfSubBuffer_default = function (option, onError) {\n\
/*\n\
 * this function will test bufferIndexOfSubBuffer's default handling-behavior\n\
 */\n\
    [{\n\
        buffer: \"\",\n\
        subBuffer: \"\",\n\
        validate: 0\n\
    }, {\n\
        buffer: \"\",\n\
        subBuffer: \"aa\",\n\
        validate: -1\n\
    }, {\n\
        buffer: \"aa\",\n\
        subBuffer: \"\",\n\
        validate: 0\n\
    }, {\n\
        buffer: \"aa\",\n\
        subBuffer: \"aa\",\n\
        validate: 0\n\
    }, {\n\
        buffer: \"aa\",\n\
        subBuffer: \"bb\",\n\
        validate: -1\n\
    }, {\n\
        buffer: \"aaaa\",\n\
        subBuffer: \"aa\",\n\
        validate: 0\n\
    }, {\n\
        buffer: \"aabb\",\n\
        subBuffer: \"aa\",\n\
        validate: 0\n\
    }, {\n\
        buffer: \"aabb\",\n\
        subBuffer: \"bb\",\n\
        validate: 2\n\
    }, {\n\
        buffer: \"aabbaa\",\n\
        subBuffer: \"aa\",\n\
        validate: 0\n\
    }, {\n\
        buffer: \"aabbaa\",\n\
        subBuffer: \"bb\",\n\
        validate: 2\n\
    }, {\n\
        buffer: \"aabbaa\",\n\
        subBuffer: \"ba\",\n\
        validate: 3\n\
    }].forEach(function (option) {\n\
        local.assertJsonEqual(local.bufferIndexOfSubBuffer(\n\
            new TextEncoder().encode(option.buffer),\n\
            new TextEncoder().encode(option.subBuffer),\n\
            option.fromIndex\n\
        ), option.validate);\n\
    });\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_bufferValidateAndCoerce_error = function (option, onError) {\n\
/*\n\
 * this function will test bufferValidateAndCoerce's error handling-behavior\n\
 */\n\
    [[], 0, {}].forEach(function (element) {\n\
        option = null;\n\
        try {\n\
            local.bufferValidateAndCoerce(element);\n\
        } catch (errorCaught) {\n\
            option = errorCaught;\n\
        }\n\
        // validate error occurred\n\
        local.assertThrow(option, element);\n\
    });\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_buildApidoc_default = function (option, onError) {\n\
/*\n\
 * this function will test buildApidoc's default handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    // test $npm_config_mode_coverage=all handling-behavior\n\
    local.testMock([\n\
        [local.env, {\n\
            npm_config_mode_coverage: \"all\"\n\
        }]\n\
    ], function (onError) {\n\
        local.buildApidoc(null, onError);\n\
    }, local.onErrorThrow);\n\
    local.buildApidoc({\n\
        blacklistDict: {}\n\
    }, onError);\n\
};\n\
\n\
local.testCase_buildApp_default = function (option, onError) {\n\
/*\n\
 * this function will test buildApp's default handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.testCase_buildReadme_default(option, local.onErrorThrow);\n\
    local.testCase_buildLib_default(option, local.onErrorThrow);\n\
    local.testCase_buildTest_default(option, local.onErrorThrow);\n\
    local.buildApp({\n\
        assetsList: [{\n\
            file: \"/assets.hello.txt\",\n\
            url: \"/assets.hello.txt\"\n\
        }, {\n\
            file: \"/assets.script_only.html\",\n\
            url: \"/assets.script_only.html\"\n\
        }, {\n\
            file: \"/assets.utility2.lib.db.js\",\n\
            url: \"/assets.utility2.lib.db.js\"\n\
        }, {\n\
            file: \"/assets.utility2.lib.istanbul.js\",\n\
            url: \"/assets.utility2.lib.istanbul.js\"\n\
        }, {\n\
            file: \"/assets.utility2.lib.jslint.js\",\n\
            url: \"/assets.utility2.lib.jslint.js\"\n\
        }, {\n\
            file: \"/assets.utility2.lib.marked.js\",\n\
            url: \"/assets.utility2.lib.marked.js\"\n\
        }, {\n\
            file: \"/assets.utility2.lib.sjcl.js\",\n\
            url: \"/assets.utility2.lib.sjcl.js\"\n\
        }, {\n\
            file: \"/assets.utility2.lib.uglifyjs.js\",\n\
            url: \"/assets.utility2.lib.uglifyjs.js\"\n\
        }, {\n\
            file: \"/assets.utility2.rollup.js\",\n\
            url: \"/assets.utility2.rollup.js\"\n\
        }]\n\
    }, onError);\n\
};\n\
\n\
local.testCase_buildLib_default = function (option, onError) {\n\
/*\n\
 * this function will test buildLib's default handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.testMock([\n\
        [local, {\n\
            // test duplicate local function handling-behavior\n\
            fsReadFileOrEmptyStringSync: function () {\n\
                return (\n\
                    \"local.nop = function () {\\n\"\n\
                    + \"/*\\n\"\n\
                    + \" * this function will do nothing\\n\"\n\
                    + \" */\\n\"\n\
                    + \"    return;\\n\"\n\
                    + \"};\\n\"\n\
                    + \"local.nop = function () {\\n\"\n\
                    + \"/*\\n\"\n\
                    + \" * this function will do nothing\\n\"\n\
                    + \" */\\n\"\n\
                    + \"    return;\\n\"\n\
                    + \"};\\n\"\n\
                );\n\
            },\n\
            templateRenderMyApp: function () {\n\
                return local.assetsDict[\"/assets.my_app.template.js\"];\n\
            }\n\
        }],\n\
        [local.fs, {\n\
            // test customize-local handling-behavior\n\
            existsSync: function () {\n\
                return true;\n\
            },\n\
            writeFileSync: local.nop\n\
        }]\n\
    ], function (onError) {\n\
        local.buildLib({}, onError);\n\
    }, local.onErrorThrow);\n\
    local.buildLib({}, onError);\n\
};\n\
\n\
local.testCase_buildReadme_default = function (option, onError) {\n\
/*\n\
 * this function will test buildReadme's default handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    option = {};\n\
    // test shNpmTestPublished handling-behavior\n\
    option.dataFrom = local.fs.readFileSync(\"README.md\", \"utf8\")\n\
    .replace(\"#\\u0021! shNpmTestPublished\", \"shNpmTestPublished\");\n\
    option = {};\n\
    option.customize = function () {\n\
        // search-and-replace - customize dataTo\n\
        [\n\
            // customize quickstart example.js\n\
            (\n\
                /#\\u0020quickstart\\u0020example.js[\\S\\s]*?istanbul\\u0020instrument\\u0020in\\u0020package/\n\
            ),\n\
            // customize quickstart-footer\n\
            (\n\
                />download\\u0020standalone\\u0020app<[^`]*?\"utility2FooterDiv\"/\n\
            ), (\n\
                /```[^`]*?\\n#\\u0020extra\\u0020screenshots/\n\
            ),\n\
            // customize build-script\n\
            (\n\
                /#\\u0020run\\u0020shBuildCi[^`]*?```/\n\
            )\n\
        ].forEach(function (rgx) {\n\
            option.dataFrom.replace(rgx, function (match0) {\n\
                option.dataTo = option.dataTo.replace(rgx, match0);\n\
            });\n\
        });\n\
    };\n\
    local.buildReadme(option, onError);\n\
};\n\
\n\
local.testCase_buildXxx_default = function (option, onError) {\n\
/*\n\
 * this function will test buildXxx's default handling-behavior\n\
 */\n\
    local.testMock([\n\
        [local, {\n\
            assetsDict: {\n\
                \"/\": \"\"\n\
            },\n\
            browserTest: local.nop,\n\
            buildApidoc: local.nop,\n\
            buildLib: local.nop,\n\
            buildReadme: local.nop,\n\
            buildTest: local.nop,\n\
            testCase_buildReadme_default: local.nop,\n\
            testCase_buildLib_default: local.nop,\n\
            testCase_buildTest_default: local.nop\n\
        }]\n\
    ], function (onError) {\n\
        local._testCase_buildApidoc_default(null, local.nop);\n\
        local._testCase_buildApp_default(null, local.nop);\n\
        local._testCase_buildLib_default(null, local.nop);\n\
        local._testCase_buildReadme_default(null, local.nop);\n\
        local._testCase_buildTest_default(null, local.nop);\n\
        local._testCase_webpage_default(null, local.nop);\n\
        local.assetsDict[\"/\"] = \"<script src=\\\"assets.test.js\\\"></script>\";\n\
        local._testCase_webpage_default(null, local.nop);\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_childProcessSpawnWithTimeout_default = function (option, onError) {\n\
/*\n\
 * this function will test childProcessSpawnWithTimeout's default handling-behavior\n\
 */\n\
    var onParallel;\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    option = {};\n\
    onParallel = local.onParallel(onError);\n\
    onParallel.counter += 1;\n\
    // test default handling-behavior\n\
    onParallel.counter += 1;\n\
    local.childProcessSpawnWithTimeout(\"ls\")\n\
    .on(\"error\", onParallel)\n\
    .on(\"exit\", function (exitCode, signal) {\n\
        // validate exitCode\n\
        local.assertJsonEqual(exitCode, 0);\n\
        // validate signal\n\
        local.assertJsonEqual(signal, null);\n\
        onParallel(null, option);\n\
    });\n\
    // test timeout handling-behavior\n\
    onParallel.counter += 1;\n\
    local.testMock([\n\
        [local, {\n\
            timeoutDefault: 1000\n\
        }]\n\
    ], function (onError) {\n\
        option.childProcess = local.childProcessSpawnWithTimeout(\"sleep\", [5000]);\n\
        onError(null, option);\n\
    }, local.onErrorThrow);\n\
    option.childProcess\n\
    .on(\"error\", onParallel)\n\
    .on(\"exit\", function (exitCode, signal) {\n\
        // validate exitCode\n\
        local.assertJsonEqual(exitCode, null);\n\
        // validate signal\n\
        local.assertJsonEqual(signal, \"SIGKILL\");\n\
        onParallel(null, option);\n\
    });\n\
    onParallel(null, option);\n\
};\n\
\n\
local.testCase_childProcessSpawnWithUtility2_error = function (option, onError) {\n\
/*\n\
 * this function will test childProcessSpawnWithTimeout's error handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.testMock([\n\
        // test __dirname handling-behavior\n\
        [process.env, {\n\
            npm_config_dir_utility2: \"\"\n\
        }]\n\
    ], function (onError) {\n\
        local.local.childProcessSpawnWithUtility2(\"undefined\", function (error) {\n\
            // validate error occurred\n\
            local.assertThrow(error, error);\n\
        });\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_cliRun_default = function (option, onError) {\n\
/*\n\
 * this function will test cliRun's default handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.testMock([\n\
        [local, {\n\
            replStart: null\n\
        }],\n\
        [local.cliDict, {\n\
            _default: local.nop,\n\
            _help: null\n\
        }],\n\
        [local.repl, {\n\
            start: local.nop\n\
        }],\n\
        [local.vm, {\n\
            runInThisContext: local.nop\n\
        }],\n\
        [process, {\n\
            argv: []\n\
        }]\n\
    ], function (onError) {\n\
        // test default handling-behavior\n\
        local.cliRun({\n\
            rgxComment: (\n\
                /^/\n\
            )\n\
        });\n\
        // test builtin handling-behavior\n\
        [\n\
            \"--eval\",\n\
            \"--help\",\n\
            \"--interactive\",\n\
            \"--version\",\n\
            \"undefined\"\n\
        ].forEach(function (key) {\n\
            process.argv[2] = key;\n\
            local.cliRun();\n\
        });\n\
        // test error handling-behavior\n\
        local.cliDict._default = null;\n\
        local.cliDict._help = null;\n\
        local.tryCatchOnError(local.cliRun, local.nop);\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_corsBackendHostInject_default = function (option, onError) {\n\
/*\n\
 * this function will corsBackendHostInject's default handling-behavior\n\
 */\n\
    // test null-case handling-behavior\n\
    local.assertJsonEqual(local.corsBackendHostInject(), undefined);\n\
    // test override-all handling-behavior\n\
    local.assertJsonEqual(local.corsBackendHostInject(\n\
        \"cc.com\",\n\
        \"aa-alpha.bb.com\",\n\
        null,\n\
        {\n\
            host: \"github.io\",\n\
            pathname: \"/build..beta..travis-ci.org/\"\n\
        }\n\
    ), \"aa-beta.bb.com\");\n\
    // test override-rgx handling-behavior\n\
    local.assertJsonEqual(local.corsBackendHostInject(\n\
        \"cc/dd\",\n\
        \"aa-alpha.bb.com/\",\n\
        (\n\
            /(^cc\\/)/m\n\
        ),\n\
        {\n\
            host: \"github.io\",\n\
            pathname: \"/build..beta..travis-ci.org/\"\n\
        }\n\
    ), \"aa-beta.bb.com/cc/dd\");\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_corsForwardProxyHostIfNeeded_default = function (option, onError) {\n\
/*\n\
 * this function will corsForwardProxyHostIfNeeded's default handling-behavior\n\
 */\n\
    if (!local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.assertThrow(local.corsForwardProxyHostIfNeeded({\n\
        location: {\n\
            host: \"undefined.github.io\"\n\
        },\n\
        url: \"https://example.com\"\n\
    }).indexOf(\".herokuapp.com\") >= 0);\n\
    onError(null, option);\n\
};\n\
\n\
/* istanbul ignore next */\n\
local.testCase_cryptoAesXxxCbcRawXxx_default = function (option, onError) {\n\
/*\n\
 * this function will cryptoAesXxxCbcRawXxx's default handling-behavior\n\
 */\n\
    if (!local.nop()) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    option = {};\n\
    local.onNext(option, function (error, data) {\n\
        switch (option.modeNext) {\n\
        case 1:\n\
            // encrypt data\n\
            option.data = new TextEncoder().encode(\"aa\");\n\
            option.key = \"0123456789abcdef0123456789abcdef\";\n\
            option.mode = null;\n\
            local.cryptoAesXxxCbcRawEncrypt(option, option.onNext);\n\
            break;\n\
        case 2:\n\
            // decrypt data\n\
            option.data = data.buffer;\n\
            local.cryptoAesXxxCbcRawDecrypt(option, option.onNext);\n\
            break;\n\
        case 3:\n\
            // validate data\n\
            local.assertJsonEqual(local.bufferToUtf8(data), \"aa\");\n\
            option.onNext();\n\
            break;\n\
        case 4:\n\
            // encrypt data - base64\n\
            option.data = new TextEncoder().encode(\"aa\");\n\
            option.key = (\n\
                \"0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef\"\n\
            );\n\
            option.mode = \"base64\";\n\
            local.cryptoAesXxxCbcRawEncrypt(option, option.onNext);\n\
            break;\n\
        case 5:\n\
            // decrypt data - base64\n\
            option.data = data;\n\
            local.cryptoAesXxxCbcRawDecrypt(option, option.onNext);\n\
            break;\n\
        case 6:\n\
            // validate data\n\
            local.assertJsonEqual(local.bufferToUtf8(data), \"aa\");\n\
            option.onNext();\n\
            break;\n\
        default:\n\
            onError(error, option);\n\
        }\n\
    });\n\
    option.modeNext = 0;\n\
    option.onNext();\n\
};\n\
\n\
local.testCase_domElementRender_default = function (option, onError) {\n\
/*\n\
 * this function will test domElementRender's default handling-behavior\n\
 */\n\
    if (!local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.assertJsonEqual(local.domElementRender(\"<div>{{value}}</div>\", {\n\
        value: \"aa\"\n\
    }).children[0].outerHTML, \"<div>aa</div>\");\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_exit_error = function (option, onError) {\n\
/*\n\
 * this function will exit's error handling-behavior\n\
 */\n\
    local.exit(\"invalid-exitCode\");\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_fsWriteFileWithMkdirpSync_default = function (option, onError) {\n\
/*\n\
 * this function will test fsWriteFileWithMkdirpSync's default handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.fsRmrSync(\"tmp/build/testCase_fsWriteFileWithMkdirpSync_default\");\n\
    // validate data\n\
    local.assertJsonEqual(local.fsReadFileOrEmptyStringSync(\n\
        \"tmp/build/testCase_fsWriteFileWithMkdirpSync_default/aa.txt\",\n\
        \"utf8\"\n\
    ), \"\");\n\
    local.fsWriteFileWithMkdirpSync(\n\
        \"tmp/build/testCase_fsWriteFileWithMkdirpSync_default/aa.txt\",\n\
        \"aa\"\n\
    );\n\
    // validate data\n\
    local.assertJsonEqual(local.fsReadFileOrEmptyStringSync(\n\
        \"tmp/build/testCase_fsWriteFileWithMkdirpSync_default/aa.txt\",\n\
        \"utf8\"\n\
    ), \"aa\");\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_isNullOrUndefined_default = function (option, onError) {\n\
/*\n\
 * this function will test isNullOrUndefined's default handling-behavior\n\
 */\n\
    // validate data\n\
    local.assertJsonEqual(local.isNullOrUndefined(null), true);\n\
    // validate data\n\
    local.assertJsonEqual(local.isNullOrUndefined(undefined), true);\n\
    // validate data\n\
    local.assertJsonEqual(local.isNullOrUndefined(false), false);\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_jsonCopy_default = function (option, onError) {\n\
/*\n\
 * this function will test jsonCopy's default handling-behavior\n\
 */\n\
    // test various data-type handling-behavior\n\
    [undefined, null, false, true, 0, 1, 1.5, \"a\"].forEach(function (element) {\n\
        local.assertJsonEqual(local.jsonCopy(element), element);\n\
    });\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_jsonStringifyOrdered_default = function (option, onError) {\n\
/*\n\
 * this function will test jsonStringifyOrdered's default handling-behavior\n\
 */\n\
    // test data-type handling-behavior\n\
    [undefined, null, false, true, 0, 1, 1.5, \"a\", {}, []].forEach(function (data) {\n\
        local.assertJsonEqual(local.jsonStringifyOrdered(data), JSON.stringify(data));\n\
    });\n\
    // test data-ordering handling-behavior\n\
    option = {\n\
        // test nested dict handling-behavior\n\
        ff: {\n\
            hh: 2,\n\
            gg: 1\n\
        },\n\
        // test nested array handling-behavior\n\
        ee: [1, null, undefined],\n\
        dd: local.nop,\n\
        cc: undefined,\n\
        bb: null,\n\
        aa: 1\n\
    };\n\
    // test circular-reference handling-behavior\n\
    option.zz = option;\n\
    local.assertJsonEqual(\n\
        option,\n\
        {\n\
            aa: 1,\n\
            bb: null,\n\
            ee: [1, null, null],\n\
            ff: {\n\
                gg: 1,\n\
                hh: 2\n\
            }\n\
        }\n\
    );\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_jwtAes256GcmXxx_default = function (option, onError) {\n\
/*\n\
 * this function will test jwtAes256GcmXxx's default handling-behavior\n\
 */\n\
    option = {};\n\
    option.key = local.jwtAes256KeyCreate();\n\
    // use canonical example at https://jwt.io/\n\
    option.data = JSON.parse(local.jsonStringifyOrdered(local.normalizeJwt({\n\
        sub: \"1234567890\",\n\
        name: \"John Doe\",\n\
        admin: true\n\
    })));\n\
    // encrypt token\n\
    option.token = local.jwtAes256GcmEncrypt(option.data, option.key);\n\
    // validate encrypted-token\n\
    local.assertJsonEqual(\n\
        local.jwtAes256GcmDecrypt(option.token, option.key),\n\
        option.data\n\
    );\n\
    // test decryption-failed handling-behavior\n\
    local.assertJsonEqual(local.jwtAes256GcmDecrypt(option.token, null), {});\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_jwtHs256Xxx_default = function (option, onError) {\n\
/*\n\
 * this function will test jwtHs256Xxx's default handling-behavior\n\
 */\n\
    option = {};\n\
    option.key = local.normalizeJwtBase64Url(local.base64FromBuffer(\"secret\"));\n\
    // use canonical example at https://jwt.io/\n\
    option.data = {\n\
        sub: \"1234567890\",\n\
        name: \"John Doe\",\n\
        admin: true\n\
    };\n\
    option.token = local.jwtHs256Encode(option.data, option.key);\n\
    // validate encoded-token\n\
    local.assertJsonEqual(\n\
        option.token,\n\
        (\n\
            \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\"\n\
            + \".eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9\"\n\
            + \".TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ\"\n\
        )\n\
    );\n\
    // validate decoded-data\n\
    local.assertJsonEqual(\n\
        local.jwtHs256Decode(option.token, option.key),\n\
        {\n\
            admin: true,\n\
            name: \"John Doe\",\n\
            sub: \"1234567890\"\n\
        }\n\
    );\n\
    // test decoding-failed handling-behavior\n\
    local.assertJsonEqual(local.jwtHs256Decode(option.token, \"undefined\"), {});\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_libUtility2Js_standalone = function (option, onError) {\n\
/*\n\
 * this function will test lib.utility2.js's standalone handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.fs.writeFileSync(\"tmp/lib.utility2.js\", local.fs.readFileSync(\n\
        \"lib.utility2.js\",\n\
        \"utf8\"\n\
    ).replace(\"/* istanbul instrument in package utility2 */\", \"\"));\n\
    require(\"./tmp/lib.utility2.js\");\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_listGetElementRandom_default = function (option, onError) {\n\
/*\n\
 * this function will test listGetRandom's default handling-behavior\n\
 */\n\
    option = {};\n\
    // init list\n\
    option.list = [\"aa\", \"bb\", \"cc\", \"dd\"];\n\
    option.elementDict = {};\n\
    // get 1000 random elements from list\n\
    option.ii = 0;\n\
    while (option.ii < 1000) {\n\
        option.elementDict[local.listGetElementRandom(option.list)] = true;\n\
        option.ii += 1;\n\
    }\n\
    // validate all elements were retrieved from list\n\
    local.assertJsonEqual(\n\
        Object.keys(option.elementDict).sort(),\n\
        [\"aa\", \"bb\", \"cc\", \"dd\"]\n\
    );\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_listShuffle_default = function (option, onError) {\n\
/*\n\
 * this function will test listShuffle's default handling-behavior\n\
 */\n\
    option = {};\n\
    // init list\n\
    option.list = \"[0,1]\";\n\
    // shuffle list 100 times\n\
    option.ii = 0;\n\
    while (option.ii < 100) {\n\
        option.listShuffled = JSON.stringify(local.listShuffle(JSON.parse(option.list)));\n\
        // validate shuffled list\n\
        local.assertJsonEqual(option.listShuffled.length, option.list.length);\n\
        option.changed = option.changed || option.listShuffled !== option.list;\n\
        option.ii += 1;\n\
    }\n\
    // validate list changed at least once during the shuffle\n\
    local.assertThrow(option.changed, option);\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_localStorageSetItemOrClear_default = function (option, onError) {\n\
/*\n\
 * this function will localStorageSetItemOrClear's default handling-behavior\n\
 */\n\
    if (!local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.localStorageSetItemOrClear(\n\
        \"testCase_localStorageSetItemOrClear_default\",\n\
        null\n\
    );\n\
    local.assertJsonEqual(\n\
        localStorage.testCase_localStorageSetItemOrClear_default,\n\
        \"null\"\n\
    );\n\
    local.testMock([\n\
        [localStorage, {\n\
            clear: null,\n\
            setItem: function () {\n\
                throw local.errorDefault;\n\
            }\n\
        }]\n\
    ], function (onError) {\n\
        localStorage.clear = onError;\n\
        local.localStorageSetItemOrClear(\n\
            \"testCase_localStorageSetItemOrClear_default\",\n\
            null\n\
        );\n\
    }, onError);\n\
};\n\
\n\
local.testCase_middlewareForwardProxy_default = function (option, onError) {\n\
/*\n\
 * this function will test middlewareForwardProxy's default handling-behavior\n\
 */\n\
    var onParallel;\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    onParallel = local.onParallel(onError);\n\
    onParallel.counter += 1;\n\
    // test preflight-cors handling-behavior\n\
    onParallel.counter += 1;\n\
    local.ajax({\n\
        headers: {\n\
            \"access-control-request-headers\": \"forward-proxy-headers,forward-proxy-url\"\n\
        },\n\
        method: \"OPTIONS\",\n\
        url: \"\"\n\
    }, onParallel);\n\
    // test forward-proxy-http handling-behavior\n\
    onParallel.counter += 1;\n\
    local.ajax({\n\
        headers: {\n\
            \"forward-proxy-url\": \"/assets.hello.txt\"\n\
        },\n\
        url: \"\"\n\
    }, function (error, xhr) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        // validate responseText\n\
        local.assertJsonEqual(xhr.responseText, local.stringHelloEmoji);\n\
        onParallel(null, option, xhr);\n\
    });\n\
    // test error handling-behavior\n\
    onParallel.counter += 1;\n\
    local.ajax({\n\
        headers: {\n\
            \"forward-proxy-url\": \"https://undefined:0\"\n\
        },\n\
        url: \"\"\n\
    }, function (error) {\n\
        // validate error occurred\n\
        local.assertThrow(error, error);\n\
        onParallel(null, option);\n\
    });\n\
    onParallel(null, option);\n\
};\n\
\n\
local.testCase_middlewareJsonpStateInit_assetsList = function (option, onError) {\n\
/*\n\
 * this function will middlewareJsonpStateInit's assetsList handling-behavior\n\
 */\n\
    local.testMock([\n\
        [local.env, {\n\
            npm_package_assetsList: \"undefined\"\n\
        }],\n\
        [local, {\n\
            assetsDict: {}\n\
        }]\n\
    ], function (onError) {\n\
        local.middlewareJsonpStateInit({\n\
            stateInit: true\n\
        });\n\
        // validate data\n\
        local.assertJsonEqual(local.assetsDict[\"/undefined\"], \"\");\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_moduleDirname_default = function (option, onError) {\n\
/*\n\
 * this function will test moduleDirname's default handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    // test null-case handling-behavior\n\
    local.assertJsonEqual(local.moduleDirname(null, module.paths), process.cwd());\n\
    // test path handling-behavior\n\
    local.assertJsonEqual(local.moduleDirname(\".\", module.paths), process.cwd());\n\
    local.assertJsonEqual(local.moduleDirname(\"./\", module.paths), process.cwd());\n\
    // test module-exists handling-behavior\n\
    option = local.moduleDirname(\"electron-lite\", module.paths);\n\
    local.assertThrow((\n\
        /\\/electron-lite$/\n\
    ).test(option), option);\n\
    // test module-does-not-exist handling-behavior\n\
    local.assertJsonEqual(local.moduleDirname(\"syntax error\", module.paths), \"\");\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_numberToRomanNumerals_default = function (option, onError) {\n\
/*\n\
 * this function will test numberToRomanNumerals's default handling-behavior\n\
 */\n\
    option = {};\n\
    option.list = [\n\
\"\",\"I\",\"II\",\"III\",\"IV\",\"V\",\"VI\",\"VII\",\"VIII\",\"IX\",\"X\",\"XI\",\"XII\",\"XIII\",\"XIV\",\"XV\",\"XVI\",\"XVII\",\"XVIII\",\"XIX\",\"XX\",\"XXI\",\"XXII\",\"XXIII\",\"XXIV\",\"XXV\",\"XXVI\",\"XXVII\",\"XXVIII\",\"XXIX\",\"XXX\",\"XXXI\",\"XXXII\",\"XXXIII\",\"XXXIV\",\"XXXV\",\"XXXVI\",\"XXXVII\",\"XXXVIII\",\"XXXIX\",\"XL\",\"XLI\",\"XLII\",\"XLIII\",\"XLIV\",\"XLV\",\"XLVI\",\"XLVII\",\"XLVIII\",\"XLIX\",\"L\",\"LI\",\"LII\",\"LIII\",\"LIV\",\"LV\",\"LVI\",\"LVII\",\"LVIII\",\"LIX\",\"LX\",\"LXI\",\"LXII\",\"LXIII\",\"LXIV\",\"LXV\",\"LXVI\",\"LXVII\",\"LXVIII\",\"LXIX\",\"LXX\",\"LXXI\",\"LXXII\",\"LXXIII\",\"LXXIV\",\"LXXV\",\"LXXVI\",\"LXXVII\",\"LXXVIII\",\"LXXIX\",\"LXXX\",\"LXXXI\",\"LXXXII\",\"LXXXIII\",\"LXXXIV\",\"LXXXV\",\"LXXXVI\",\"LXXXVII\",\"LXXXVIII\",\"LXXXIX\",\"XC\",\"XCI\",\"XCII\",\"XCIII\",\"XCIV\",\"XCV\",\"XCVI\",\"XCVII\",\"XCVIII\",\"XCIX\",\"C\" // jslint ignore:line\n\
    ];\n\
    option.ii = 0;\n\
    while (option.ii < 10) {\n\
        local.assertJsonEqual(\n\
            local.numberToRomanNumerals(option.ii),\n\
            option.list[option.ii]\n\
        );\n\
        option.ii += 1;\n\
    }\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_objectLiteralize_default = function (option, onError) {\n\
/*\n\
 * this function will test objectLiteralize's default handling-behavior\n\
 */\n\
    local.assertJsonEqual(local.objectLiteralize({\n\
        \"\": \"$[]\",\n\
        \"$[]1\": [1, {\n\
            \"$[]2\": [2, 3]\n\
        }]\n\
    }), {\n\
        \"1\": {\n\
            \"2\": 3\n\
        },\n\
        \"\": \"$[]\"\n\
    });\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_objectSetDefault_default = function (option, onError) {\n\
/*\n\
 * this function will test objectSetDefault's default handling-behavior\n\
 */\n\
    // test null-case handling-behavior\n\
    local.objectSetDefault();\n\
    local.objectSetDefault({});\n\
    // test falsy handling-behavior\n\
    [\"\", 0, false, null, undefined].forEach(function (aa) {\n\
        [\"\", 0, false, null, undefined].forEach(function (bb) {\n\
            local.assertJsonEqual(\n\
                local.objectSetDefault({\n\
                    data: aa\n\
                }, {\n\
                    data: bb\n\
                }).data,\n\
                (aa === 0 || aa === false || bb === undefined)\n\
                ? aa\n\
                : bb\n\
            );\n\
        });\n\
    });\n\
    // test non-recursive handling-behavior\n\
    local.assertJsonEqual(local.objectSetDefault({\n\
        aa: 0,\n\
        bb: {\n\
            cc: 1\n\
        },\n\
        cc: {\n\
            dd: {}\n\
        },\n\
        dd: [1, 1],\n\
        ee: [1, 1]\n\
    }, {\n\
        aa: 2,\n\
        bb: {\n\
            dd: 2\n\
        },\n\
        cc: {\n\
            dd: {\n\
                ee: 2\n\
            }\n\
        },\n\
        dd: [2, 2],\n\
        ee: {\n\
            ff: 2\n\
        }\n\
    // test default-depth handling-behavior\n\
    }, null), {\n\
        aa: 0,\n\
        bb: {\n\
            cc: 1\n\
        },\n\
        cc: {\n\
            dd: {}\n\
        },\n\
        dd: [1, 1],\n\
        ee: [1, 1]\n\
    });\n\
    // test recursive handling-behavior\n\
    local.assertJsonEqual(local.objectSetDefault({\n\
        aa: 0,\n\
        bb: {\n\
            cc: 1\n\
        },\n\
        cc: {\n\
            dd: {}\n\
        },\n\
        dd: [1, 1],\n\
        ee: [1, 1]\n\
    }, {\n\
        aa: 2,\n\
        bb: {\n\
            dd: 2\n\
        },\n\
        cc: {\n\
            dd: {\n\
                ee: 2\n\
            }\n\
        },\n\
        dd: [2, 2],\n\
        ee: {\n\
            ff: 2\n\
        }\n\
    // test depth handling-behavior\n\
    }, 2), {\n\
        aa: 0,\n\
        bb: {\n\
            cc: 1,\n\
            dd: 2\n\
        },\n\
        cc: {\n\
            dd: {}\n\
        },\n\
        dd: [1, 1],\n\
        ee: [1, 1]\n\
    });\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_objectSetOverride_default = function (option, onError) {\n\
/*\n\
 * this function will test objectSetOverride's default handling-behavior\n\
 */\n\
    // test null-case handling-behavior\n\
    local.objectSetOverride();\n\
    local.objectSetOverride({});\n\
    // test falsy handling-behavior\n\
    [\"\", 0, false, null, undefined].forEach(function (aa) {\n\
        [\"\", 0, false, null, undefined].forEach(function (bb) {\n\
            local.assertJsonEqual(\n\
                local.objectSetOverride({\n\
                    data: aa\n\
                }, {\n\
                    data: bb\n\
                }).data,\n\
                bb === undefined\n\
                ? aa\n\
                : bb\n\
            );\n\
        });\n\
    });\n\
    // test non-recursive handling-behavior\n\
    local.assertJsonEqual(local.objectSetOverride({\n\
        aa: 1,\n\
        bb: {\n\
            cc: 1\n\
        },\n\
        cc: {\n\
            dd: 1\n\
        },\n\
        dd: [1, 1],\n\
        ee: [1, 1]\n\
    }, {\n\
        aa: 2,\n\
        bb: {\n\
            dd: 2\n\
        },\n\
        cc: {\n\
            ee: 2\n\
        },\n\
        dd: [2, 2],\n\
        ee: {\n\
            ff: 2\n\
        }\n\
    // test default-depth handling-behavior\n\
    }, null), {\n\
        aa: 2,\n\
        bb: {\n\
            dd: 2\n\
        },\n\
        cc: {\n\
            ee: 2\n\
        },\n\
        dd: [2, 2],\n\
        ee: {\n\
            ff: 2\n\
        }\n\
    });\n\
    // test recursive handling-behavior\n\
    local.assertJsonEqual(local.objectSetOverride({\n\
        aa: 1,\n\
        bb: {\n\
            cc: 1\n\
        },\n\
        cc: {\n\
            dd: 1\n\
        },\n\
        dd: [1, 1],\n\
        ee: [1, 1]\n\
    }, {\n\
        aa: 2,\n\
        bb: {\n\
            dd: 2\n\
        },\n\
        cc: {\n\
            ee: 2\n\
        },\n\
        dd: [2, 2],\n\
        ee: {\n\
            ff: 2\n\
        }\n\
    // test depth handling-behavior\n\
    }, 2), {\n\
        aa: 2,\n\
        bb: {\n\
            cc: 1,\n\
            dd: 2\n\
        },\n\
        cc: {\n\
            dd: 1,\n\
            ee: 2\n\
        },\n\
        dd: [2, 2],\n\
        ee: {\n\
            ff: 2\n\
        }\n\
    });\n\
    // test env with empty-string handling-behavior\n\
    local.assertJsonEqual(local.objectSetOverride(\n\
        local.env,\n\
        {\n\
            \"emptyString\": null\n\
        },\n\
        // test default-depth handling-behavior\n\
        null,\n\
        local.env\n\
    ).emptyString, \"\");\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_objectTraverse_default = function (option, onError) {\n\
/*\n\
 * this function will test objectTraverse's default handling-behavior\n\
 */\n\
    option = {\n\
        aa: null,\n\
        bb: 2,\n\
        cc: {\n\
            dd: 4,\n\
            ee: [5, 6, 7]\n\
        }\n\
    };\n\
    // test circular-reference handling-behavior\n\
    option.data = option;\n\
    local.objectTraverse(option, function (element) {\n\
        if (typeof element === \"object\" && element && !Array.isArray(element)) {\n\
            element.zz = true;\n\
        }\n\
    });\n\
    // validate option\n\
    local.assertJsonEqual(\n\
        option,\n\
        {\n\
            aa: null,\n\
            bb: 2,\n\
            cc: {\n\
                dd: 4,\n\
                ee: [5, 6, 7],\n\
                zz: true\n\
            },\n\
            zz: true\n\
        }\n\
    );\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_onErrorDefault_default = function (option, onError) {\n\
/*\n\
 * this function will test onErrorDefault's default handling-behavior\n\
 */\n\
    local.testMock([\n\
        [console, {\n\
            error: function (arg) {\n\
                option = arg;\n\
            }\n\
        }],\n\
        [globalThis, {\n\
            __coverage__: null\n\
        }]\n\
    ], function (onError) {\n\
        // test no error handling-behavior\n\
        local.onErrorDefault();\n\
        // validate option\n\
        local.assertThrow(!option, option);\n\
        // test error handling-behavior\n\
        local.onErrorDefault(local.errorDefault);\n\
        // validate option\n\
        local.assertThrow(option, option);\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_onErrorThrow_error = function (option, onError) {\n\
/*\n\
 * this function will test onErrorThrow's error handling-behavior\n\
 */\n\
    local.tryCatchOnError(function () {\n\
        local.onErrorThrow(local.errorDefault);\n\
    }, function (error) {\n\
        // validate error occurred\n\
        local.assertThrow(error, error);\n\
        onError(null, option);\n\
    });\n\
};\n\
\n\
local.testCase_onErrorWithStack_toString = function (option, onError) {\n\
/*\n\
 * this function will test onErrorWithStack's toString handling-behavior\n\
 */\n\
    local.assertJsonEqual(String(local.onErrorWithStack(local.nop)), String(local.nop));\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_onFileModifiedRestart_watchFile = function (option, onError) {\n\
/*\n\
 * this function will test onFileModifiedRestart's watchFile handling-behavior\n\
 */\n\
    var onParallel;\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    onParallel = local.onParallel(onError);\n\
    onParallel.counter += 1;\n\
    local.fs.stat(__filename, function (error, stat) {\n\
        // test default watchFile handling-behavior\n\
        onParallel.counter += 1;\n\
        local.fs.utimes(__filename, stat.atime, new Date(), onParallel);\n\
        // test nop watchFile handling-behavior\n\
        onParallel.counter += 1;\n\
        setTimeout(function () {\n\
            local.fs.utimes(__filename, stat.atime, stat.mtime, onParallel);\n\
        }, 1000);\n\
        onParallel(error, option);\n\
    });\n\
};\n\
\n\
local.testCase_onNext_error = function (option, onError) {\n\
/*\n\
 * this function will test onNext's error handling-behavior\n\
 */\n\
\n\
    option = {};\n\
    option.modeDebug = true;\n\
    local.onNext(option, function () {\n\
        throw local.errorDefault;\n\
    });\n\
    option.modeNext = 0;\n\
    local.tryCatchOnError(function () {\n\
        option.onNext();\n\
    }, function (error) {\n\
        // validate error occurred\n\
        local.assertThrow(error, error);\n\
        onError(null, option);\n\
    });\n\
};\n\
\n\
local.testCase_onParallelList_default = function (option, onError) {\n\
/*\n\
 * this function will test onParallelList's default handling-behavior\n\
 */\n\
    option = {};\n\
    local.onNext(option, function (error) {\n\
        switch (option.modeNext) {\n\
        case 1:\n\
            // test null-case handling-behavior\n\
            local.onParallelList({}, local.onErrorThrow, option.onNext);\n\
            break;\n\
        case 2:\n\
            option.list = [null];\n\
            // test retryLimit handling-behavior\n\
            option.retryLimit = 1;\n\
            local.onParallelList(option, function (option2, onParallel) {\n\
                onParallel.counter += 1;\n\
                // test error handling-behavior\n\
                onParallel(local.errorDefault, option2);\n\
                // test multiple-callback handling-behavior\n\
                setTimeout(onParallel, 5000);\n\
            }, function (error) {\n\
                // validate error occurred\n\
                local.assertThrow(error, error);\n\
                option.onNext();\n\
            });\n\
            break;\n\
        case 3:\n\
            option.data = [];\n\
            // test rateLimit handling-behavior\n\
            option.rateLimit = 3;\n\
            option.rateMax = 0;\n\
            // test retryLimit handling-behavior\n\
            option.retryLimit = 1;\n\
            local.onParallelList({\n\
                list: [1, 2, 3, 4],\n\
                rateLimit: option.rateLimit\n\
            }, function (option2, onParallel) {\n\
                onParallel.counter += 1;\n\
                option.rateMax = Math.max(onParallel.counter - 1, option.rateMax);\n\
                // test async handling-behavior\n\
                setTimeout(function () {\n\
                    // test list-growth handling-behavior\n\
                    if (option2.ii === 3) {\n\
                        option2.list.push(5);\n\
                    }\n\
                    option.data[option2.ii] = option2.element;\n\
                    // test retry handling-behavior\n\
                    local.assertThrow(option2.retry < 1);\n\
                    onParallel(null, option2);\n\
                });\n\
            }, option.onNext, option.rateLimit);\n\
            break;\n\
        case 4:\n\
            // validate data\n\
            local.assertJsonEqual(option.data, [1, 2, 3, 4, 5]);\n\
            local.assertJsonEqual(option.rateMax, 3);\n\
            option.data = [];\n\
            option.rateLimit = \"syntax error\";\n\
            option.rateMax = 0;\n\
            local.onParallelList({\n\
                list: [1, 2, 3, 4, 5],\n\
                rateLimit: option.rateLimit\n\
            }, function (option2, onParallel) {\n\
                // test sync handling-behavior\n\
                onParallel.counter += 1;\n\
                option.rateMax = Math.max(onParallel.counter, option.rateMax);\n\
                option.data[option2.ii] = option2.element;\n\
                onParallel(null, option);\n\
            }, option.onNext);\n\
            break;\n\
        case 5:\n\
            // validate data\n\
            local.assertJsonEqual(option.data, [1, 2, 3, 4, 5]);\n\
            local.assertJsonEqual(option.rateMax, 2);\n\
            option.onNext();\n\
            break;\n\
        default:\n\
            onError(error, option);\n\
        }\n\
    });\n\
    option.modeNext = 0;\n\
    option.onNext();\n\
};\n\
\n\
local.testCase_onParallel_default = function (option, onError) {\n\
/*\n\
 * this function will test onParallel's default handling-behavior\n\
 */\n\
    var onParallel;\n\
    var onParallelError;\n\
    // test onEach handling-behavior\n\
    onParallel = local.onParallel(onError, function () {\n\
        // validate counter\n\
        local.assertThrow(onParallel.counter >= 0, onParallel);\n\
    });\n\
    onParallel.counter += 1;\n\
    // test multiple-task handling-behavior\n\
    onParallel.counter += 1;\n\
    setTimeout(function () {\n\
        onParallelError = local.onParallel(onParallel);\n\
        onParallelError.counter += 1;\n\
        onParallelError();\n\
        // test multiple-callback-error handling-behavior\n\
        onParallelError();\n\
        // validate error occurred\n\
        local.assertThrow(onParallelError.error, onParallelError.error);\n\
        // test error handling-behavior\n\
        onParallelError(local.errorDefault);\n\
        // validate error occurred\n\
        local.assertThrow(onParallelError.error, onParallelError.error);\n\
        // test ignore-after-error handling-behavior\n\
        onParallelError();\n\
    });\n\
    // test default handling-behavior\n\
    onParallel(null, option);\n\
};\n\
\n\
local.testCase_onTimeout_timeout = function (option, onError) {\n\
/*\n\
 * this function will test onTimeout's timeout handling-behavior\n\
 */\n\
    option = local.timeElapsedStart();\n\
    local.onTimeout(function (error) {\n\
        // validate error occurred\n\
        local.assertThrow(error, error);\n\
        // validate error message\n\
        local.assertThrow(\n\
            error.message.indexOf(\"testCase_onTimeout_timeout\") >= 0,\n\
            error\n\
        );\n\
        // poll timeElapsed\n\
        local.timeElapsedPoll(option);\n\
        // validate timeElapsed passed is greater than timeout\n\
        local.assertThrow(option.timeElapsed >= 1000, option);\n\
        onError(null, option);\n\
    }, 1000, \"testCase_onTimeout_timeout\");\n\
};\n\
\n\
local.testCase_profileXxx_default = function (option, onError) {\n\
/*\n\
 * this function will test profileXxx's default handling-behavior\n\
 */\n\
    option = {};\n\
    // test profileSync's handling-behavior\n\
    option.timeElapsed = local.profileSync(function () {\n\
        return;\n\
    });\n\
    // validate timeElapsed\n\
    local.assertThrow(\n\
        0 <= option.timeElapsed && option.timeElapsed < 1000,\n\
        option.timeElapsed\n\
    );\n\
    // test profile's async handling-behavior\n\
    local.profile(function (onError) {\n\
        setTimeout(onError);\n\
    }, function (error, timeElapsed) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        option.timeElapsed = timeElapsed;\n\
        // validate timeElapsed\n\
        local.assertThrow((\n\
            0 <= option.timeElapsed\n\
            && option.timeElapsed < local.timeoutDefault\n\
        ), option.timeElapsed);\n\
        onError(null, option);\n\
    });\n\
};\n\
\n\
local.testCase_replStart_default = function (option, onError) {\n\
/*\n\
 * this function will test replStart's default handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.replStart();\n\
    // coverage-hack - test replStart's muliple-call handling-behavior\n\
    local.replStart();\n\
    local.testMock([\n\
        [local.child_process, {\n\
            spawn: function () {\n\
                return {\n\
                    on: function (event, callback) {\n\
                        callback(null, event);\n\
                    }\n\
                };\n\
            }\n\
        }],\n\
        // suppress process.stdout\n\
        [process.stdout, {\n\
            write: local.nop\n\
        }]\n\
    ], function (onError) {\n\
        [\n\
            // test null-case handling-behavior\n\
            \"\",\n\
            // test shell handling-behavior\n\
            \"$ :\\n\",\n\
            // test git diff handling-behavior\n\
            \"$ git diff\\n\",\n\
            // test git log handling-behavior\n\
            \"$ git log\\n\",\n\
            // test charCode handling-behavior\n\
            \"charCode abcd\\n\",\n\
            // test charSort handling-behavior\n\
            \"charSort abcd\\n\",\n\
            // test grep handling-behavior\n\
            \"grep \\\\baa\\\\b\\n\",\n\
            // test keys handling-behavior\n\
            \"keys {}\\n\",\n\
            // test print handling-behavior\n\
            \"print abcd\\n\",\n\
            // test error handling-behavior\n\
            \"undefined()\\n\"\n\
        ].forEach(function (script) {\n\
            globalThis.utility2_serverRepl1.eval(script, null, \"repl\", local.nop);\n\
        });\n\
        // test error handling-behavior\n\
        globalThis.utility2_serverRepl1.onError(local.errorDefault);\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_replStart_tcp = function (option, onError) {\n\
/*\n\
 * this function will test replStart's tcp handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    option = {};\n\
    option.data = \"\";\n\
    option.input = Math.random();\n\
    option.socket = local.net.createConnection(local.env.PORT_REPL);\n\
    option.socket.on(\"data\", function (data) {\n\
    /*\n\
     * this function will concat data to option.data\n\
     */\n\
        option.data += data;\n\
    });\n\
    option.socket.setEncoding(\"utf8\");\n\
    option.socket.on(\"end\", function () {\n\
        // validate data\n\
        local.assertThrow(\n\
            option.data.indexOf(option.input) >= 0,\n\
            JSON.stringify([option.data, option.input])\n\
        );\n\
        onError(null, option);\n\
    });\n\
    option.socket.write(option.input + \"\\n\");\n\
    // test error handling-behavior\n\
    option.socket.end(\"undefined()\\n\");\n\
};\n\
\n\
local.testCase_requireReadme_start = function (option, onError) {\n\
/*\n\
 * this function will test requireReadme's start handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.testMock([\n\
        [local, {\n\
            assetsDict: {},\n\
            onFileModifiedRestart: local.nop\n\
        }],\n\
        [local.env, {\n\
            npm_config_mode_start: \"1\",\n\
            npm_package_nameLib: \"_testCase_requireReadme_start\"\n\
        }],\n\
        [local.fs, {\n\
            readFile: function (file, option, onError) {\n\
                onError(null, \"{}\", file, option);\n\
            },\n\
            readdirSync: function () {\n\
                // test jslintAndPrint.conditional handling-behavior\n\
                return [\n\
                    \"aa.css\",\n\
                    \"aa.html\",\n\
                    \"aa.js\",\n\
                    \"aa.json\",\n\
                    \"aa.rollup.js\",\n\
                    \"assets.swgg.swagger.json\"\n\
                ];\n\
            }\n\
        }]\n\
    ], function (onError) {\n\
        // validate data\n\
        local.requireReadme();\n\
        local.assertThrow(local._testCase_requireReadme_start === local);\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_semverCompare_default = function (option, onError) {\n\
/*\n\
 * this function will test semverCompare's default handling-behavior\n\
 */\n\
    var aa;\n\
    // test aa = bb\n\
    option = [\n\
        \"1.2.3\",\n\
        \"1.2.3-\",\n\
        \"1.2.3-alpha.beta\",\n\
        \"1.2.3-alpha.beta\"\n\
    ];\n\
    option.forEach(function (bb, ii) {\n\
        if (Boolean(ii & 1)) {\n\
            local.assertThrow(\n\
                local.semverCompare(aa, bb) === 0,\n\
                [local.semverCompare(aa, bb), aa, bb]\n\
            );\n\
        }\n\
        aa = bb;\n\
    });\n\
    option = [\n\
        \"1.2.3-a\",\n\
        \"1.2.3-a.2\",\n\
        \"1.2.3-a.10\",\n\
        \"1.2.3-b\",\n\
        \"1.2.3\",\n\
        \"1.2.10\"\n\
    ];\n\
    // test aa < bb\n\
    option.reduce(function (aa, bb) {\n\
        local.assertThrow(\n\
            local.semverCompare(aa, bb) === -1,\n\
            [local.semverCompare(aa, bb), aa, bb]\n\
        );\n\
        return bb;\n\
    });\n\
    // test aa > bb\n\
    option.reverse().reduce(function (aa, bb) {\n\
        local.assertThrow(\n\
            local.semverCompare(aa, bb) === 1,\n\
            [local.semverCompare(aa, bb), aa, bb]\n\
        );\n\
        return bb;\n\
    });\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_serverRespondTimeoutDefault_timeout = function (option, onError) {\n\
/*\n\
 * this function will test serverRespondTimeoutDefault's timeout handling-behavior\n\
 */\n\
    option = function (fnc1, fnc2) {\n\
        [fnc1, fnc2].forEach(function (fnc) {\n\
            if (typeof fnc === \"function\") {\n\
                fnc();\n\
            }\n\
        });\n\
    };\n\
    local.testMock([\n\
        [local, {\n\
            onTimeout: option,\n\
            serverRespondDefault: local.nop,\n\
            setTimeout: option\n\
        }]\n\
    ], function (onError) {\n\
        local.serverRespondTimeoutDefault({\n\
            headers: {}\n\
        }, {\n\
            on: option\n\
        });\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_setTimeoutOnError_default = function (option, onError) {\n\
/*\n\
 * this function will test setTimeoutOnError's default handling-behavior\n\
 */\n\
    // test null-case handling-behavior\n\
    local.assertJsonEqual(local.setTimeoutOnError(), undefined);\n\
    // test onError handling-behavior\n\
    local.assertJsonEqual(local.setTimeoutOnError(onError, 0, null, {}, option), {});\n\
};\n\
\n\
local.testCase_sjclHashScryptXxx_default = function (option, onError) {\n\
/*\n\
 * this function will test sjclHashScryptXxx's default handling-behavior\n\
 */\n\
    // test sjclHashScryptCreate's null-case handling-behavior\n\
    local.assertJsonEqual(local.sjclHashScryptCreate().slice(0, 10), \"$s0$10801$\");\n\
    // https://github.com/wg/scrypt\n\
    // test sjclHashScryptValidate's fail handling-behavior\n\
    local.assertJsonEqual(local.sjclHashScryptValidate(\n\
        \"password\",\n\
        (\n\
            \"$s0$80801$epIxT/h6HbbwHaehFnh/bw==\"\n\
            + \"$l/guDhz2Q0v/D93gq0K0qtSX6FWP8pH5maAJkbIcRaEA\"\n\
        )\n\
    ), false);\n\
    // https://github.com/wg/scrypt\n\
    // test sjclHashScryptValidate's pass handling-behavior\n\
    local.assertJsonEqual(local.sjclHashScryptValidate(\"password\", (\n\
        \"$s0$80801$epIxT/h6HbbwHaehFnh/bw==\"\n\
        + \"$l/guDhz2Q0v/D93gq0K0qtSX6FWP8pH5maAJkbIcRaE=\"\n\
    )), true);\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_sjclHashShaXxxCreate_default = function (option, onError) {\n\
/*\n\
 * this function will test sjclHashShaXxxCreate's default handling-behavior\n\
 */\n\
    local.assertJsonEqual(\n\
        local.sjclHashSha1Create(\"aa\"),\n\
        \"4MkDWJjdUvxlxBRUzsnE0mEb+zc=\"\n\
    );\n\
    local.assertJsonEqual(\n\
        local.sjclHashSha256Create(\"aa\"),\n\
        \"lhtt0+3jy47LqsvWjeBAzXjrLtWIkTDM60xJJo6k1QY=\"\n\
    );\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_sjclHmacShaXxx_default = function (option, onError) {\n\
/*\n\
 * this function will test sjclHmacShaXxx's default handling-behavior\n\
 */\n\
    local.assertJsonEqual(\n\
        local.sjclHmacSha1Create(\"aa\", \"bb\"),\n\
        \"15pOinCz63A+qZoxnv+mJB6UF1k=\"\n\
    );\n\
    local.assertJsonEqual(\n\
        local.sjclHmacSha256Create(\"aa\", \"bb\"),\n\
        \"94Xv3VdPHA+ohKyjkM1pb0W5ZVAuMVcmIAAI2AqNRCQ=\"\n\
    );\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_stringHtmlSafe_default = function (option, onError) {\n\
/*\n\
 * this function will test stringHtmlSafe's default handling-behavior\n\
 */\n\
    local.assertJsonEqual(\n\
        local.stringHtmlSafe(local.stringHtmlSafe(local.stringCharsetAscii).slice(32, -1)),\n\
        (\n\
            \" !&quot;#$%&amp;&apos;()*+,-./0123456789:;&lt;=&gt;?@\"\n\
            + \"ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n\
        )\n\
    );\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_stringQuotedToAscii_default = function (option, onError) {\n\
/*\n\
 * this function will test stringQuotedToAscii's default handling-behavior\n\
 */\n\
    local.assertJsonEqual(\n\
        local.stringQuotedToAscii(local.stringHelloEmoji),\n\
        \"hello \\\\ud83d\\\\ude01\\n\"\n\
    );\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_stringRegexpEscape_default = function (option, onError) {\n\
/*\n\
 * this function will test stringRegexpEscape's default handling-behavior\n\
 */\n\
    local.assertJsonEqual(\n\
        local.stringRegexpEscape(local.stringCharsetAscii),\n\
        (\n\
            \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\"\n\
            + \"\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\"\n\
            + \"\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\"\n\
            + \"\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f\"\n\
            + \" !\\\"#\\\\$%&'\\\\(\\\\)\\\\*\\\\+,\\\\-\\\\.\\\\/0123456789:;<=>\\\\?@\"\n\
            + \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\\\\[\\\\\\\\\\\\]\\\\^_`\"\n\
            + \"abcdefghijklmnopqrstuvwxyz\\\\{\\\\|\\\\}~\"\n\
            + \"\\u007f\"\n\
        )\n\
    );\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_stringTruncate_default = function (option, onError) {\n\
/*\n\
 * this function will test stringTruncate's default handling-behavior\n\
 */\n\
    local.assertJsonEqual(local.stringTruncate(\"aa\"), \"aa\");\n\
    local.assertJsonEqual(local.stringTruncate(\"aa\", 1), \"...\");\n\
    local.assertJsonEqual(local.stringTruncate(\"aa\", 2), \"aa\");\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_stringUniqueKey_default = function (option, onError) {\n\
/*\n\
 * this function will test stringUniqueKey's default handling-behavior\n\
 */\n\
    local.assertThrow((\"zqxj\").indexOf(local.stringUniqueKey(\"zqxj\") < 0));\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_taskCreateCached_default = function (option, onError) {\n\
/*\n\
 * this function will test taskCreateCached's default handling-behavior\n\
 */\n\
    var cacheValue;\n\
    var onTask;\n\
    var option2;\n\
    option = {};\n\
    local.onNext(option, function (error, data) {\n\
        switch (option.modeNext) {\n\
        // test no cache handling-behavior\n\
        case 1:\n\
            onTask = function (onError) {\n\
                onError(null, cacheValue);\n\
            };\n\
            option.cacheDict = \"testCase_taskCreateCached_default\";\n\
            option.key = \"memory\";\n\
            // cleanup memory-cache\n\
            local.cacheDict[option.cacheDict] = null;\n\
            cacheValue = \"aa\";\n\
            option2 = {\n\
                cacheDict: option.cacheDict,\n\
                key: option.key,\n\
                // test onCacheWrite handling-behavior\n\
                onCacheWrite: option.onNext\n\
            };\n\
            local.taskCreateCached(option2, onTask, option.onNext);\n\
            break;\n\
        case 2:\n\
            // validate data\n\
            local.assertJsonEqual(data, \"aa\");\n\
            // validate no cache-hit\n\
            local.assertThrow(!option2.modeCacheHit, option2.modeCacheHit);\n\
            break;\n\
        // test cache with update handling-behavior\n\
        case 3:\n\
            cacheValue = \"bb\";\n\
            option2 = {\n\
                cacheDict: option.cacheDict,\n\
                key: option.key,\n\
                // test modeCacheUpdate handling-behavior\n\
                modeCacheUpdate: true,\n\
                // test onCacheWrite handling-behavior\n\
                onCacheWrite: option.onNext\n\
            };\n\
            local.taskCreateCached(option2, onTask, option.onNext);\n\
            break;\n\
        case 4:\n\
            // validate data\n\
            local.assertJsonEqual(data, \"aa\");\n\
            // validate modeCacheHit\n\
            local.assertJsonEqual(option2.modeCacheHit, true);\n\
            break;\n\
        // test cache handling-behavior\n\
        case 5:\n\
            option2 = {\n\
                cacheDict: option.cacheDict,\n\
                key: option.key\n\
            };\n\
            local.taskCreateCached(option2, onTask, option.onNext);\n\
            break;\n\
        case 6:\n\
            // validate data\n\
            local.assertJsonEqual(data, \"bb\");\n\
            // validate modeCacheHit\n\
            local.assertJsonEqual(option2.modeCacheHit, true);\n\
            option.onNext();\n\
            break;\n\
        default:\n\
            onError(error, option);\n\
        }\n\
    });\n\
    option.modeNext = 0;\n\
    option.onNext();\n\
};\n\
\n\
local.testCase_taskCreate_multipleCallback = function (option, onError) {\n\
/*\n\
 * this function will test taskCreate's multiple-callback handling-behavior\n\
 */\n\
    option = {\n\
        counter: 0,\n\
        key: \"testCase_taskCreate_multiCallback\"\n\
    };\n\
    local.taskCreate(option, function (onError) {\n\
        onError(null, option);\n\
        // test multiple-callback handling-behavior\n\
        onError(null, option);\n\
    }, function () {\n\
        option.counter += 1;\n\
    });\n\
    // validate counter incremented once\n\
    local.assertJsonEqual(option.counter, 1);\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_taskCreate_upsert = function (option, onError) {\n\
/*\n\
 * this function will test taskCreate's upsert handling-behavior\n\
 */\n\
    option = {\n\
        counter: 0,\n\
        key: \"testCase_taskCreate_upsert\"\n\
    };\n\
    // test upsert handling-behavior\n\
    [null, null].forEach(function () {\n\
        local.taskCreate(option, function (onError) {\n\
            option.counter += 1;\n\
            setTimeout(onError);\n\
        });\n\
    });\n\
    // validate counter incremented once\n\
    setTimeout(function () {\n\
        local.assertJsonEqual(option.counter, 1);\n\
        onError(null, option);\n\
    });\n\
};\n\
\n\
local.testCase_templateRender_default = function (option, onError) {\n\
/*\n\
 * this function will test templateRender's default handling-behavior\n\
 */\n\
    // test null-case handling-behavior\n\
    local.assertJsonEqual(local.templateRender(), \"\");\n\
    // test undefined-value handling-behavior\n\
    local.assertJsonEqual(local.templateRender(\"{{aa}}\", {}), \"{{aa}}\");\n\
    // test basic handling-behavior\n\
    local.assertJsonEqual(local.templateRender(\"{{aa}}\", {\n\
        aa: \"```<aa\\nbb>```\"\n\
    }), \"```&lt;aa\\nbb&gt;```\");\n\
    // test markdownToHtml handling-behavior\n\
    local.assertJsonEqual(\n\
        local.templateRender(\"{{aa markdownToHtml}}\", {\n\
            aa: local.stringCharsetAscii.slice(32, -1)\n\
        }),\n\
        (\n\
            \"<p> !&quot;#$%&amp;&apos;()*+,-./0123456789:;&lt;=&gt;?@\"\n\
            + \"ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~</p>\\n\"\n\
        )\n\
    );\n\
    // test markdownSafe handling-behavior\n\
    local.assertJsonEqual(\n\
        local.templateRender(\"{{aa markdownSafe notHtmlSafe}}\", {\n\
            aa: local.stringCharsetAscii.slice(32, -1)\n\
        }),\n\
        (\n\
            \" !\\\"#$%&'()*+,-./0123456789:;<=>?@\"\n\
            + \"ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_'abcdefghijklmnopqrstuvwxyz{|}~\"\n\
        )\n\
    );\n\
    // test notHtmlSafe handling-behavior\n\
    local.assertJsonEqual(local.templateRender(\"{{aa notHtmlSafe}}\", {\n\
        aa: \"```<aa\\nbb>```\"\n\
    }), \"```<aa\\nbb>```\");\n\
    // test default handling-behavior\n\
    local.assertJsonEqual(local.templateRender((\n\
        \"{{aa alphanumeric}} \"\n\
        + \"{{aa truncate 4 truncate 4}} \"\n\
        + \"{{aa jsonStringify jsonStringify4 decodeURIComponent encodeURIComponent trim}} \"\n\
        + \"{{bb}} {{cc}} {{dd}} {{ee.ff}}\"\n\
    ), {\n\
        // test string value handling-behavior\n\
        aa: \"`<aa>`\",\n\
        // test non-string value handling-behavior\n\
        bb: 1,\n\
        // test null-value handling-behavior\n\
        cc: null,\n\
        // test undefined-value handling-behavior\n\
        dd: undefined,\n\
        // test nested value handling-behavior\n\
        ee: {\n\
            ff: \"gg\"\n\
        }\n\
    }), \"__aa__ `... %22%5C%22%60%3Caa%3E%60%5C%22%22 1 null {{dd}} gg\");\n\
    // test partial handling-behavior\n\
    local.assertJsonEqual(\n\
        local.templateRender((\n\
            \"{{#undefined aa}}\\n\"\n\
            + \"list1{{#each list1}}\\n\"\n\
            + \"    aa - {{aa}}\\n\"\n\
            + \"    list2{{#eachTrimRightComma list2}}\\n\"\n\
            + \"        {{#this/ notHtmlSafe jsonStringify}}\\n\"\n\
            + \"        bb - {{bb}}\\n\"\n\
            + \"        {{#if bb}}\\n\"\n\
            + \"        if\\n\"\n\
            + \"        {{#unless bb}}\\n\"\n\
            + \"        else\\n\"\n\
            + \"        {{/if bb}}\\n\"\n\
            + \"        {{#unless bb}}\\n\"\n\
            + \"        unless\\n\"\n\
            + \"        {{/unless bb}}\\n\"\n\
            + \"        ,\\n\"\n\
            + \"    {{/eachTrimRightComma list2}}\\n\"\n\
            + \"{{/each list1}}\\n\"\n\
            + \"{{/undefined aa}}\\n\"\n\
        ), {\n\
            list1: [\n\
                // test null-value handling-behavior\n\
                null, {\n\
                    aa: \"aa\",\n\
                    // test recursive-list handling-behavior\n\
                    list2: [{\n\
                        bb: \"bb\"\n\
                    }, {\n\
                        bb: null\n\
                    }]\n\
                }\n\
            ]\n\
        }),\n\
        (\n\
            \"{{#undefined aa}}\\n\"\n\
            + \"list1\\n\"\n\
            + \"    aa - {{aa}}\\n\"\n\
            + \"    list2\\n\"\n\
            + \"\\n\"\n\
            + \"    aa - aa\\n\"\n\
            + \"    list2\\n\"\n\
            + \"        {\\\"bb\\\":\\\"bb\\\"}\\n\"\n\
            + \"        bb - bb\\n\"\n\
            + \"        \\n\"\n\
            + \"        if\\n\"\n\
            + \"        \\n\"\n\
            + \"        \\n\"\n\
            + \"        ,\\n\"\n\
            + \"    \\n\"\n\
            + \"        {\\\"bb\\\":null}\\n\"\n\
            + \"        bb - null\\n\"\n\
            + \"        \\n\"\n\
            + \"        else\\n\"\n\
            + \"        \\n\"\n\
            + \"        \\n\"\n\
            + \"        unless\\n\"\n\
            + \"        \\n\"\n\
            + \"        \\n\"\n\
            + \"\\n\"\n\
            + \"{{/undefined aa}}\\n\"\n\
        )\n\
    );\n\
    // test error handling-behavior\n\
    local.tryCatchOnError(function () {\n\
        local.templateRender(\"{{aa bb}}\", {\n\
            aa: 1\n\
        });\n\
    }, local.nop);\n\
    // validate error occurred\n\
    local.assertThrow(local._debugTryCatchError, local._debugTryCatchError);\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_testReportCreate_default = function (option, onError) {\n\
/*\n\
 * this function will test testReport's default handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.testMock([], function (onError) {\n\
        // test null-case handling-behavior\n\
        local.testReportCreate();\n\
        // test testsFailed handling-behavior\n\
        local.testReportCreate({\n\
            testPlatformList: [{\n\
                testCaseList: [{\n\
                    status: \"failed\"\n\
                }, {\n\
                    status: \"passed\"\n\
                }]\n\
            }]\n\
        });\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_throwError_default = function (option, onError) {\n\
/*\n\
 * this function will test throwError's default handling-behavior\n\
 */\n\
    local.tryCatchOnError(function () {\n\
        local.throwError();\n\
    }, function (error) {\n\
        // validate error occurred\n\
        local.assertThrow(error, error);\n\
        onError(null, option);\n\
    });\n\
};\n\
\n\
local.testCase_uglify_default = function (option, onError) {\n\
/*\n\
 * this function will test uglify's default handling-behavior\n\
 */\n\
    // test css handling-behavior\n\
    local.assertJsonEqual(local.uglify(\"body { margin: 0; }\", \"aa.css\"), \"body{margin:0;}\");\n\
    // test js handling-behavior\n\
    local.assertJsonEqual(\n\
        local.uglify(\"aa = 'hello \\ud83d\\ude01\\\\n'\", \"aa.js\"),\n\
        \"aa=\\\"hello \\\\ud83d\\\\ude01\\\\n\\\"\"\n\
    );\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_uiAnimateXxx_default = function (option, onError) {\n\
/*\n\
 * this function will test uiAnimateXxx's default handling-behavior\n\
 */\n\
    if (!local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    option = document.createElement(\"div\");\n\
    // test uiAnimateShake handling-behavior\n\
    local.uiAnimateShake();\n\
    local.uiAnimateShake(option);\n\
    local.assertThrow(option.classList.contains(\"uiAnimateShake\"), option.classList);\n\
    local.uiAnimateShake(option);\n\
    local.assertThrow(option.classList.contains(\"uiAnimateShake\"), option.classList);\n\
    // test uiAnimateShakeIfError handling-behavior\n\
    local.uiAnimateShakeIfError();\n\
    local.uiAnimateShakeIfError(null, option);\n\
    local.assertThrow(!option.classList.contains(\"hasError\"), option.classList);\n\
    local.uiAnimateShakeIfError(true, option);\n\
    local.assertThrow(option.classList.contains(\"hasError\"), option.classList);\n\
    local.uiAnimateShakeIfError(null, option);\n\
    local.assertThrow(!option.classList.contains(\"hasError\"), option.classList);\n\
    // test uiAnimateSlideXxx handling-behavior\n\
    local.uiAnimateSlideDown();\n\
    local.uiAnimateSlideUp();\n\
    option.classList.add(\"uiAnimateSlide\");\n\
    local.uiAnimateSlideDown(option);\n\
    local.assertThrow(option.style.maxHeight.indexOf(\"px\") >= 0, option.style.maxHeight);\n\
    local.uiAnimateSlideUp(option);\n\
    local.assertJsonEqual(option.style.maxHeight, \"0px\");\n\
    // test uiAnimateSlideAccordian handling-behavior\n\
    local.uiAnimateSlideAccordian(option, [option, document.createElement(\"div\")]);\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_urlJoin_default = function (option, onError) {\n\
/*\n\
 * this function will test urlJoin's default handling-behavior\n\
 */\n\
    local.assertJsonEqual(local.urlJoin(\"\", \"\"), \"/\");\n\
    local.assertJsonEqual(local.urlJoin(\"http://aa/bb\", \"zz\"), \"http://aa/zz\");\n\
    local.assertJsonEqual(local.urlJoin(\"http://aa/bb/\", \"zz\"), \"http://aa/bb/zz\");\n\
    local.assertJsonEqual(local.urlJoin(\"http://aa/bb/\", \"/zz\"), \"http://aa/zz\");\n\
    local.assertJsonEqual(local.urlJoin(\"http://aa/bb/\", \"//zz\"), \"http://zz\");\n\
    local.assertJsonEqual(local.urlJoin(\"http://aa/bb/\", \"http://zz\"), \"http://zz\");\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_urlParse_default = function (option, onError) {\n\
/*\n\
 * this function will test urlParse's default handling-behavior\n\
 */\n\
    local.testMock([\n\
        [local, {\n\
            // test default PORT handling-behavior\n\
            env: {},\n\
            // test init-serverLocalHost handling-behavior\n\
            serverLocalHost: \"\"\n\
        }]\n\
    ], function (onError) {\n\
        // test default handling-behavior\n\
        local.assertJsonEqual(local.urlParse(\n\
            \"https://127.0.0.1:80/foo/bar?aa=1&bb%20cc=dd%20=ee&aa=2&aa#zz=1\"\n\
        ), {\n\
            basename: \"bar\",\n\
            hash: \"#zz=1\",\n\
            host: \"127.0.0.1:80\",\n\
            hostname: \"127.0.0.1\",\n\
            href: \"https://127.0.0.1:80/foo/bar?aa=1&bb%20cc=dd%20=ee&aa=2&aa#zz=1\",\n\
            path: \"/foo/bar?aa=1&bb%20cc=dd%20=ee&aa=2&aa\",\n\
            pathname: \"/foo/bar\",\n\
            port: \"80\",\n\
            protocol: \"https:\",\n\
            query: {\n\
                aa: [\"1\", \"2\", \"\"],\n\
                \"bb cc\": \"dd =ee\"\n\
            },\n\
            search: \"?aa=1&bb%20cc=dd%20=ee&aa=2&aa\"\n\
        });\n\
        // test error handling-behavior\n\
        local.assertJsonEqual(local.urlParse(null), {\n\
            basename: \"\",\n\
            hash: \"\",\n\
            host: \"\",\n\
            hostname: \"\",\n\
            href: \"\",\n\
            path: \"\",\n\
            pathname: \"\",\n\
            port: \"\",\n\
            protocol: \"\",\n\
            query: {},\n\
            search: \"\"\n\
        });\n\
        onError(null, option);\n\
    }, onError);\n\
};\n\
\n\
local.testCase_uuid4Create_default = function (option, onError) {\n\
/*\n\
 * this function will test uuid4Create's default handling-behavior\n\
 */\n\
    local.assertThrow((local.regexpValidateUuid).test(local.uuid4Create()), local.uuid4Create());\n\
    onError(null, option);\n\
};\n\
\n\
local.testCase_webpage_error = function (option, onError) {\n\
/*\n\
 * this function will test webpage's error handling-behavior\n\
 */\n\
    if (local.isBrowser) {\n\
        onError(null, option);\n\
        return;\n\
    }\n\
    local.browserTest({\n\
        modeCoverageMerge: true,\n\
        modeSilent: true,\n\
        timeoutDefault: local.timeoutDefault - 5000,\n\
        // https://localhost:8080/assets.script_only.html?modeTest=1&modeTestCase=_testCase_testRunDefault_failure&timeExit=\n\
        url: (\n\
            local.serverLocalHost\n\
            // test script_only handling-behavior\n\
            + \"/assets.script_only.html\"\n\
            // test electron-callback handling-behavior\n\
            + \"?modeTest=1&\"\n\
            // test specific testCase handling-behavior\n\
            // test testRunDefault's failure handling-behavior\n\
            + \"modeTestCase=_testCase_testRunDefault_failure&\"\n\
            // test timeExit handling-behavior\n\
            + \"timeExit={{timeExit}}\"\n\
        )\n\
    }, function (error) {\n\
        // validate error occurred\n\
        local.assertThrow(error, error);\n\
        onError(null, option);\n\
    });\n\
};\n\
\n\
local.utility2.serverLocalUrlTest = function (url) {\n\
/*\n\
 * this function will test if the url is local\n\
 */\n\
    url = local.urlParse(url).pathname;\n\
    return local.isBrowser && !local.env.npm_config_mode_backend && (\n\
        /^\\/test\\./\n\
    ).test(url);\n\
};\n\
}());\n\
\n\
\n\
\n\
// run shared js-env code - init-after\n\
(function () {\n\
// init assets\n\
local.assetsDict[\"/assets.swgg.swagger.json\"] = (\n\
    local.fsReadFileOrEmptyStringSync(\"assets.swgg.swagger.json\")\n\
    || local.assetsDict[\"/assets.swgg.swagger.json\"]\n\
    || local.assetsDict[\"/assets.swgg.swagger.petstore.json\"]\n\
);\n\
// coverage-hack - re-run test-server\n\
local.testRunServer(local);\n\
// coverage-hack - stateInit\n\
local.stateInit({});\n\
// init test-middleware\n\
local.middlewareList.push(function (request, response, nextMiddleware) {\n\
/*\n\
 * this function will run the test-middleware\n\
 */\n\
    switch (request.urlParsed.pathname) {\n\
    // test http POST handling-behavior\n\
    case \"/test.body\":\n\
        // test request-body-read handling-behavior\n\
        local.middlewareBodyRead(request, response, function () {\n\
            // test multiple request-body-read handling-behavior\n\
            local.middlewareBodyRead(request, response, function () {\n\
                response.write(request.bodyRaw);\n\
                response.end();\n\
            });\n\
        });\n\
        break;\n\
    // test http POST handling-behavior\n\
    case \"/test.echo\":\n\
        // test response header handling-behavior\n\
        local.serverRespondHeadSet(request, response, null, {\n\
            \"X-Response-Header-Test\": \"bb\"\n\
        });\n\
        local.serverRespondEcho(request, response);\n\
        break;\n\
    // test 500-internal-server-error handling-behavior\n\
    case \"/test.error-500\":\n\
        // test multiple-callback serverRespondHeadSet handling-behavior\n\
        local.serverRespondHeadSet(request, response, null, {});\n\
        nextMiddleware(local.errorDefault);\n\
        // test multiple-callback-error handling-behavior\n\
        nextMiddleware(local.errorDefault);\n\
        // test onErrorDefault handling-behavior\n\
        local.testMock([\n\
            [local, {\n\
                swgg: null\n\
            }]\n\
        ], function (onError) {\n\
            var error;\n\
            error = new Error(\"error\");\n\
            error.statusCode = 500;\n\
            local.middlewareError(error, request, response);\n\
            onError();\n\
        }, local.onErrorThrow);\n\
        break;\n\
    // test undefined-error handling-behavior\n\
    case \"/test.error-undefined\":\n\
        local.serverRespondDefault(request, response, 999);\n\
        break;\n\
    // test timeout handling-behavior\n\
    case \"/test.timeout\":\n\
        setTimeout(function () {\n\
            response.end();\n\
        }, 2000);\n\
        break;\n\
    // serve file\n\
    default:\n\
        local.middlewareFileServer(request, response, nextMiddleware);\n\
    }\n\
});\n\
}());\n\
\n\
\n\
\n\
// run node js-env code - init-after\n\
/* istanbul ignore next */\n\
(function () {\n\
if (local.isBrowser) {\n\
    return;\n\
}\n\
\n\
\n\
\n\
(function () {\n\
    switch (local.env.HEROKU_APP_NAME) {\n\
    case \"h1-cron1\":\n\
        // heroku-keepalive\n\
        setInterval(function () {\n\
            local.ajax({\n\
                url: \"https://h1-cron1.herokuapp.com\"\n\
            }, local.onErrorThrow);\n\
        }, 5 * 60 * 1000);\n\
        local.cronJob = local.nop;\n\
        // update cron\n\
        local.ajax({\n\
            url: \"https://kaizhu256.github.io/node-utility2/cronJob.js\"\n\
        }, function (error, xhr) {\n\
            if (!error && xhr.responseText !== local.cronScript) {\n\
                local.cronScript = xhr.responseText;\n\
                local.vm.runInThisContext(local.cronScript);\n\
            }\n\
        });\n\
        setInterval(function () {\n\
            var cronTime;\n\
            cronTime = new Date();\n\
            if (\n\
                cronTime.toISOString().slice(0, 16)\n\
                < (local.cronTime && local.cronTime.toISOString())\n\
            ) {\n\
                return;\n\
            }\n\
            local.cronTime = cronTime;\n\
            // cron every 5 minutes\n\
            if (local.cronTime.getUTCMinutes() % 5 === 0) {\n\
                // update cron\n\
                local.ajax({\n\
                    url: \"https://kaizhu256.github.io/node-utility2/cronJob.js\"\n\
                }, function (error, xhr) {\n\
                    if (!error && xhr.responseText !== local.cronScript) {\n\
                        local.cronScript = xhr.responseText;\n\
                        local.vm.runInThisContext(local.cronScript);\n\
                    }\n\
                });\n\
            }\n\
            local.cronJob();\n\
        }, 30000);\n\
        break;\n\
    case \"h1-proxy1\":\n\
        // heroku-keepalive\n\
        setInterval(function () {\n\
            local.ajax({\n\
                url: \"https://h1-proxy1.herokuapp.com\"\n\
            }, local.onErrorThrow);\n\
        }, 5 * 60 * 1000);\n\
        break;\n\
    }\n\
}());\n\
\n\
\n\
\n\
// init cli\n\
if (module !== require.main || globalThis.utility2_rollup) {\n\
    return;\n\
}\n\
local.assetsDict[\"/assets.script_only.html\"] = (\n\
    \"<h1>script_only_test</h1>\\n\"\n\
    + \"<script src=\\\"assets.utility2.js\\\"></script>\\n\"\n\
    + \"<script>window.utility2_onReadyBefore.counter += 1;</script>\\n\"\n\
    + \"<script src=\\\"assets.example.js\\\"></script>\\n\"\n\
    + \"<script src=\\\"assets.test.js\\\"></script>\\n\"\n\
    + \"<script>window.utility2_onReadyBefore();</script>\\n\"\n\
);\n\
if (process.argv[2]) {\n\
    // start with coverage\n\
    if (local.env.npm_config_mode_coverage) {\n\
        process.argv.splice(1, 1, __dirname + \"/lib.istanbul.js\", \"cover\");\n\
        local.istanbul.cliDict[process.argv[2]]();\n\
        return;\n\
    }\n\
    // start\n\
    process.argv.splice(1, 1);\n\
    process.argv[1] = local.path.resolve(process.cwd(), process.argv[1]);\n\
    local.Module.runMain();\n\
}\n\
}());\n\
\n\
\n\
\n\
}());\n\
"
/* jslint ignore:end */
    return local;
}(globalThis.utility2_rollup));
/* script-end /assets.utility2.test.js */



/* script-begin /assets.utility2.rollup.end.js */
(function () {
    "use strict";
    globalThis.utility2_rollup_old = globalThis.utility2_rollup;
    globalThis.utility2_rollup = null;
}());
/* utility2.rollup.js end */
/* script-end /assets.utility2.rollup.end.js */
/* script-end /assets.utility2.rollup.js */



/* script-begin /assets.utility2.rollup.begin.js */
/* utility2.rollup.js begin */
/* istanbul ignore all */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function () {
    "use strict";
    // init utility2_rollup
    globalThis.utility2_rollup = (
        globalThis.utility2_rollup_old
        || globalThis.globalLocal
    );
    globalThis.utility2_rollup.local = globalThis.utility2_rollup;
    globalThis.utility2_rollup_old = null;
}());
/* script-end /assets.utility2.rollup.begin.js */



/* script-begin local.stateInit */
(function (local) {
    "use strict";
/* jslint ignore:start */
local.stateInit({
    "utility2": {
        "assetsDict": {
            "/assets.example.html": "<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<!-- \"assets.utility2.template.html\" -->\n<title>db-lite (0.0.1)</title>\n<style>\n/* jslint utility2:true */\n/*csslint\n*/\n/* csslint ignore:start */\n*,\n*:after,\n*:before {\n    box-sizing: border-box;\n}\n/* csslint ignore:end */\n@keyframes uiAnimateShake {\n    0%, 50% {\n        transform: translateX(10px);\n    }\n    25%, 75% {\n        transform: translateX(-10px);\n    }\n    100% {\n        transform: translateX(0);\n    }\n}\n@keyframes uiAnimateSpin {\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(360deg);\n    }\n}\na {\n    overflow-wrap: break-word;\n}\nbody {\n    background: #eef;\n    font-family: Arial, Helvetica, sans-serif;\n    margin: 0 40px;\n}\nbody > div,\nbody > form > div,\nbody > form > input,\nbody > form > pre,\nbody > form > textarea,\nbody > form > .button,\nbody > input,\nbody > pre,\nbody > textarea,\nbody > .button {\n    margin-bottom: 20px;\n}\nbody > form > input,\nbody > form > .button,\nbody > input,\nbody > .button {\n    width: 20rem;\n}\nbody > form > textarea,\nbody > textarea {\n    height: 10rem;\n    width: 100%;\n}\nbody > textarea[readonly] {\n    background: #ddd;\n}\ncode,\npre,\ntextarea {\n    font-family: Consolas, Menlo, monospace;\n    font-size: small;\n}\npre {\n    overflow-wrap: break-word;\n    white-space: pre-wrap;\n}\ntextarea {\n    overflow: auto;\n    white-space: pre;\n}\n.button {\n    background-color: #fff;\n    border: 1px solid;\n    border-bottom-color: rgb(186, 186, 186);\n    border-left-color: rgb(209, 209, 209);\n    border-radius: 4px;\n    border-right-color: rgb(209, 209, 209);\n    border-top-color: rgb(216, 216, 216);\n    color: #00d;\n    cursor: pointer;\n    display: inline-block;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: normal;\n    margin: 0;\n    padding: 2px 7px 3px 7px;\n    text-align: center;\n    text-decoration: underline;\n}\n.colorError {\n    color: #d00;\n}\n.uiAnimateShake {\n    animation-duration: 500ms;\n    animation-name: uiAnimateShake;\n}\n.uiAnimateSlide {\n    overflow-y: hidden;\n    transition: max-height ease-in 250ms, min-height ease-in 250ms, padding-bottom ease-in 250ms, padding-top ease-in 250ms;\n}\n.utility2FooterDiv {\n    text-align: center;\n}\n.zeroPixel {\n    border: 0;\n    height: 0;\n    margin: 0;\n    padding: 0;\n    width: 0;\n}\n</style>\n</head>\n<body>\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 500ms, width 1500ms; width: 0%; z-index: 1;\"></div>\n<div class=\"uiAnimateSpin\" style=\"animation: uiAnimateSpin 2s linear infinite; border: 5px solid #999; border-radius: 50%; border-top: 5px solid #7d7; display: none; height: 25px; vertical-align: middle; width: 25px;\"></div>\n<a class=\"zeroPixel\" download=\"db.persistence.json\" href=\"\" id=\"dbExportA1\"></a>\n<input class=\"zeroPixel\" id=\"dbImportInput1\" type=\"file\">\n<script>\n/* jslint utility2:true */\n// init domOnEventWindowOnloadTimeElapsed\n(function () {\n/*\n * this function will measure and print the time-elapsed for window.onload\n */\n    \"use strict\";\n    if (window.domOnEventWindowOnloadTimeElapsed) {\n        return;\n    }\n    window.domOnEventWindowOnloadTimeElapsed = Date.now() + 100;\n    window.addEventListener(\"load\", function () {\n        setTimeout(function () {\n            window.domOnEventWindowOnloadTimeElapsed = (\n                Date.now()\n                - window.domOnEventWindowOnloadTimeElapsed\n            );\n            console.error(\n                \"domOnEventWindowOnloadTimeElapsed = \"\n                + window.domOnEventWindowOnloadTimeElapsed\n            );\n        }, 100);\n    });\n}());\n\n\n\n// init timerIntervalAjaxProgressUpdate\n(function () {\n/*\n * this function will increment the ajax-progress-bar\n * until the webpage has loaded\n */\n    \"use strict\";\n    var ajaxProgressDiv1;\n    var ajaxProgressState;\n    var ajaxProgressUpdate;\n    if (\n        window.timerIntervalAjaxProgressUpdate\n        || !document.querySelector(\n            \"#ajaxProgressDiv1\"\n        )\n    ) {\n        return;\n    }\n    ajaxProgressDiv1 = document.querySelector(\n        \"#ajaxProgressDiv1\"\n    );\n    setTimeout(function () {\n        ajaxProgressDiv1.style.width = \"25%\";\n    });\n    ajaxProgressState = 0;\n    ajaxProgressUpdate = (\n        window.local\n        && window.local.ajaxProgressUpdate\n    ) || function () {\n        ajaxProgressDiv1.style.width = \"100%\";\n        setTimeout(function () {\n            ajaxProgressDiv1.style.background = \"transparent\";\n            setTimeout(function () {\n                ajaxProgressDiv1.style.width = \"0%\";\n            }, 500);\n        }, 1000);\n    };\n    window.timerIntervalAjaxProgressUpdate = setInterval(function () {\n        ajaxProgressState += 1;\n        ajaxProgressDiv1.style.width = Math.max(\n            100 - 75 * Math.exp(-0.125 * ajaxProgressState),\n            ajaxProgressDiv1.style.width.slice(0, -1) | 0\n        ) + \"%\";\n    }, 1000);\n    window.addEventListener(\"load\", function () {\n        clearInterval(window.timerIntervalAjaxProgressUpdate);\n        ajaxProgressUpdate();\n    });\n}());\n\n\n\n// init domOnEventSelectAllWithinPre\n(function () {\n/*\n * this function will limit select-all within <pre tabIndex=\"0\"> elements\n * https://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse\n */\n    \"use strict\";\n    if (window.domOnEventSelectAllWithinPre) {\n        return;\n    }\n    window.domOnEventSelectAllWithinPre = function (event) {\n        var range;\n        var selection;\n        if (\n            event\n            && event.key === \"a\"\n            && (event.ctrlKey || event.metaKey)\n            && event.target.closest(\"pre\")\n        ) {\n            range = document.createRange();\n            range.selectNodeContents(event.target.closest(\"pre\"));\n            selection = window.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            event.preventDefault();\n        }\n    };\n    // init event-handling\n    document.addEventListener(\n        \"keydown\",\n        window.domOnEventSelectAllWithinPre\n    );\n}());\n</script>\n<h1>\n<!-- utility2-comment\n    <a\n        {{#if env.npm_package_homepage}}\n        href=\"{{env.npm_package_homepage}}\"\n        {{/if env.npm_package_homepage}}\n        target=\"_blank\"\n    >\nutility2-comment -->\n        db-lite (0.0.1)\n<!-- utility2-comment\n    </a>\nutility2-comment -->\n</h1>\n<h3>the greatest app in the world!</h3>\n<!-- utility2-comment\n<a class=\"button\" download href=\"assets.app.js\">download standalone app</a><br>\n<button class=\"button eventDelegateClick onreset\" data-onevent=\"testRunBrowser\" id=\"testRunButton1\">run internal test</button><br>\n<div class=\"uiAnimateSlide\" id=\"testReportDiv1\" style=\"border-bottom: 0; border-top: 0; margin-bottom: 0; margin-top: 0; max-height: 0; padding-bottom: 0; padding-top: 0;\"></div>\nutility2-comment -->\n\n\n\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbResetButton1\" id=\"dbResetButton1\">\n    reset database\n</button><br>\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbExportButton1\" id=\"dbExportButton1\">\n    export database -&gt; file\n</button><br>\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbImportButton1\" id=\"dbImportButton1\">\n    import database &lt;- file\n</button><br>\n<label>edit or paste script below to\n    <a\n        href=\"https://kaizhu256.github.io/node-db-lite/build..beta..travis-ci.org/apidoc.html\"\n        target=\"_blank\"\n    >eval</a>\n</label>\n<textarea id=\"inputTextareaEval1\">\n/*jslint browser: true, node: true*/\n\"use strict\";\nvar dbTable1, modeNext, onNext;\nmodeNext = 0;\nonNext = function (error, data) {\n    modeNext = error\n        ? Infinity\n        : modeNext + 1;\n    switch (modeNext) {\n    case 1:\n        dbTable1 = window.dbTable1 = window.utility2_db.dbTableCreateOne({\n            name: \"dbTable1\"\n        }, onNext);\n        break;\n    case 2:\n        dbTable1.idIndexCreate({ name: \"field1\" }, onNext);\n        break;\n    case 3:\n        dbTable1.crudSetOneById({ field1: \"aa\", field2: 1, field3: \"foo\" }, onNext);\n        break;\n    case 4:\n        dbTable1.crudSetOneById({ field1: \"bb\", field2: 2, field3: \"bar\" }, onNext);\n        break;\n    case 5:\n        dbTable1.crudSetOneById({ field1: \"cc\", field2: 3, field3: \"baz\" }, onNext);\n        break;\n    case 6:\n        dbTable1.crudRemoveOneById({ field1: \"aa\" }, onNext);\n        break;\n    case 7:\n        dbTable1.crudUpdateOneById({ field1: \"bb\", field2: -1 }, onNext);\n        break;\n    case 8:\n        dbTable1.crudSetOneById({ field2: Math.random() }, onNext);\n        break;\n    case 9:\n        dbTable1.crudGetManyByQuery({\n            limit: Infinity,\n            query: { field2: { $gte: -Infinity, $lte: Infinity } },\n            skip: 0,\n            sort: [{ fieldName: \"_timeUpdated\", idDescending: true }]\n        }, onNext);\n        break;\n    case 10:\n        console.error(data);\n        dbTable1.crudCountAll(onNext);\n        break;\n    case 11:\n        console.error(\"number of rows: \" + data);\n        break;\n    default:\n        console.error(error.stack);\n    }\n};\nonNext();\n</textarea>\n<button class=\"button eventDelegateClick oneval onreset\" data-onevent=\"testRunBrowser\" id=\"dbEvalButton1\">eval script</button><br>\n<label>stderr and stdout</label>\n<textarea class=\"resettable\" id=\"outputStdoutTextarea1\" readonly></textarea>\n<!-- utility2-comment\n{{#if isRollup}}\n<script src=\"assets.app.js\"></script>\n{{#unless isRollup}}\nutility2-comment -->\n<script src=\"assets.utility2.rollup.js\"></script>\n<script>window.utility2_onReadyBefore.counter += 1;</script>\n<script src=\"jsonp.utility2.stateInit?callback=window.utility2.stateInit\"></script>\n<script src=\"assets.db.js\"></script>\n<script src=\"assets.example.js\"></script>\n<script src=\"assets.test.js\"></script>\n<script>window.utility2_onReadyBefore();</script>\n<!-- utility2-comment\n{{/if isRollup}}\nutility2-comment -->\n<div class=\"utility2FooterDiv\">\n    [ this app was created with\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\n    ]\n</div>\n</body>\n</html>\n",
            "/assets.example.js": "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*\nexample.js\n\nthis script will run a web-demo of db-lite\n\ninstruction\n    1. save this script as example.js\n    2. run the shell-command:\n        $ npm install db-lite && PORT=8081 node example.js\n    3. open a browser to http://127.0.0.1:8081 and play with the web-demo\n    4. edit this script to suit your needs\n*/\n\n\n\n/* istanbul instrument in package db */\n/* istanbul ignore next */\n/* jslint utility2:true */\n(function (globalThis) {\n    \"use strict\";\n    var consoleError;\n    var local;\n    // init globalThis\n    (function () {\n        try {\n            globalThis = Function(\"return this\")(); // jslint ignore:line\n        } catch (ignore) {}\n    }());\n    globalThis.globalThis = globalThis;\n    // init debug_inline\n    if (!globalThis[\"debug\\u0049nline\"]) {\n        consoleError = console.error;\n        globalThis[\"debug\\u0049nline\"] = function () {\n        /*\n         * this function will both print <arguments> to stderr\n         * and return <arguments>[0]\n         */\n            var argList;\n            argList = Array.from(arguments); // jslint ignore:line\n            // debug arguments\n            globalThis[\"debug\\u0049nlineArguments\"] = argList;\n            consoleError(\"\\n\\ndebug\\u0049nline\");\n            consoleError.apply(console, argList);\n            consoleError(\"\\n\");\n            // return arg0 for inspection\n            return argList[0];\n        };\n    }\n    // init local\n    local = {};\n    local.local = local;\n    globalThis.globalLocal = local;\n    // init isBrowser\n    local.isBrowser = (\n        typeof window === \"object\"\n        && window === globalThis\n        && typeof window.XMLHttpRequest === \"function\"\n        && window.document\n        && typeof window.document.querySelector === \"function\"\n    );\n    // init function\n    local.assertThrow = function (passed, message) {\n    /*\n     * this function will throw the error <message> if <passed> is falsy\n     */\n        var error;\n        if (passed) {\n            return;\n        }\n        error = (\n            // ternary-condition\n            (\n                message\n                && typeof message.message === \"string\"\n                && typeof message.stack === \"string\"\n            )\n            // if message is an error-object, then leave it as is\n            ? message\n            : new Error(\n                typeof message === \"string\"\n                // if message is a string, then leave it as is\n                ? message\n                // else JSON.stringify message\n                : JSON.stringify(message, null, 4)\n            )\n        );\n        throw error;\n    };\n    local.functionOrNop = function (fnc) {\n    /*\n     * this function will if <fnc> exists,\n     * them return <fnc>,\n     * else return <nop>\n     */\n        return fnc || local.nop;\n    };\n    local.identity = function (value) {\n    /*\n     * this function will return <value>\n     */\n        return value;\n    };\n    local.nop = function () {\n    /*\n     * this function will do nothing\n     */\n        return;\n    };\n    local.objectAssignDefault = function (target, source) {\n    /*\n     * this function will if items from <target> are\n     * null, undefined, or empty-string,\n     * then overwrite them with items from <source>\n     */\n        Object.keys(source).forEach(function (key) {\n            if (\n                target[key] === null\n                || target[key] === undefined\n                || target[key] === \"\"\n            ) {\n                target[key] = target[key] || source[key];\n            }\n        });\n    };\n    // require builtin\n    if (!local.isBrowser) {\n        local.assert = require(\"assert\");\n        local.buffer = require(\"buffer\");\n        local.child_process = require(\"child_process\");\n        local.cluster = require(\"cluster\");\n        local.crypto = require(\"crypto\");\n        local.dgram = require(\"dgram\");\n        local.dns = require(\"dns\");\n        local.domain = require(\"domain\");\n        local.events = require(\"events\");\n        local.fs = require(\"fs\");\n        local.http = require(\"http\");\n        local.https = require(\"https\");\n        local.net = require(\"net\");\n        local.os = require(\"os\");\n        local.path = require(\"path\");\n        local.querystring = require(\"querystring\");\n        local.readline = require(\"readline\");\n        local.repl = require(\"repl\");\n        local.stream = require(\"stream\");\n        local.string_decoder = require(\"string_decoder\");\n        local.timers = require(\"timers\");\n        local.tls = require(\"tls\");\n        local.tty = require(\"tty\");\n        local.url = require(\"url\");\n        local.util = require(\"util\");\n        local.vm = require(\"vm\");\n        local.zlib = require(\"zlib\");\n    }\n}(this));\n\n\n\n(function (local) {\n\"use strict\";\n\n\n\n// run shared js-env code - init-before\n(function () {\n// init local\nlocal = (\n    globalThis.utility2_rollup\n    || globalThis.utility2_db\n    || globalThis.utility2_moduleExports\n);\n// init exports\nglobalThis.local = local;\n}());\n\n\n\n/* istanbul ignore next */\n// run browser js-env code - init-test\n(function () {\nif (!local.isBrowser) {\n    return;\n}\nlocal.testRunBrowser = function (event) {\n    if (!event || (\n        event\n        && event.currentTarget\n        && event.currentTarget.className\n        && event.currentTarget.className.includes\n        && event.currentTarget.className.includes(\"onreset\")\n    )) {\n        // reset output\n        Array.from(document.querySelectorAll(\n            \"body > .resettable\"\n        )).forEach(function (element) {\n            switch (element.tagName) {\n            case \"INPUT\":\n            case \"TEXTAREA\":\n                element.value = \"\";\n                break;\n            default:\n                element.textContent = \"\";\n            }\n        });\n    }\n    switch (event && event.currentTarget && event.currentTarget.id) {\n    case \"testRunButton1\":\n        // show tests\n        if (document.querySelector(\n            \"#testReportDiv1\"\n        ).style.maxHeight === \"0px\") {\n            local.uiAnimateSlideDown(document.querySelector(\n                \"#testReportDiv1\"\n            ));\n            document.querySelector(\n                \"#testRunButton1\"\n            ).textContent = \"hide internal test\";\n            local.modeTest = 1;\n            local.testRunDefault(local);\n        // hide tests\n        } else {\n            local.uiAnimateSlideUp(document.querySelector(\n                \"#testReportDiv1\"\n            ));\n            document.querySelector(\n                \"#testRunButton1\"\n            ).textContent = \"run internal test\";\n        }\n        break;\n    /* validateLineSortedReset */\n    // custom-case\n    case \"dbExportButton1\":\n    case \"dbImportButton1\":\n    case \"dbImportInput1\":\n    case \"dbResetButton1\":\n        local.db.onEventDomDb(event);\n        break;\n    }\n    if (document.querySelector(\n        \"#inputTextareaEval1\"\n    ) && (!event || (\n        event\n        && event.currentTarget\n        && event.currentTarget.className\n        && event.currentTarget.className.includes\n        && event.currentTarget.className.includes(\"oneval\")\n    ))) {\n        // try to eval input-code\n        try {\n            eval(document.querySelector( // jslint ignore:line\n                \"#inputTextareaEval1\"\n            ).value);\n        } catch (errorCaught) {\n            console.error(errorCaught);\n        }\n    }\n};\n\nlocal.uiEventDelegate = local.uiEventDelegate || function (event) {\n    // filter non-input keyup-event\n    event.targetOnEvent = event.target.closest(\"[data-onevent]\");\n    if (!event.targetOnEvent) {\n        return;\n    }\n    // rate-limit keyup\n    if (event.type === \"keyup\") {\n        local.uiEventDelegateKeyupEvent = event;\n        if (local.uiEventDelegateKeyupTimerTimeout !== 2) {\n            local.uiEventDelegateKeyupTimerTimeout = (\n                local.uiEventDelegateKeyupTimerTimeout\n                || setTimeout(function () {\n                    local.uiEventDelegateKeyupTimerTimeout = 2;\n                    local.uiEventDelegate(local.uiEventDelegateKeyupEvent);\n                }, 100)\n            );\n            return;\n        }\n        local.uiEventDelegateKeyupTimerTimeout = null;\n        if (!event.target.closest(\"input, option, select, textarea\")) {\n            return;\n        }\n    }\n    switch (event.targetOnEvent.tagName) {\n    case \"BUTTON\":\n    case \"FORM\":\n        event.preventDefault();\n        break;\n    }\n    event.stopPropagation();\n    local.uiEventListenerDict[event.targetOnEvent.dataset.onevent](event);\n};\n\nlocal.uiEventListenerDict = local.uiEventListenerDict || {};\n\nlocal.uiEventListenerDict.testRunBrowser = local.testRunBrowser;\n\n// log stderr and stdout to #outputStdoutTextarea1\n[\"error\", \"log\"].forEach(function (key) {\n    console[key + \"_original\"] = console[key + \"_original\"] || console[key];\n    console[key] = function () {\n        var argList;\n        var element;\n        argList = Array.from(arguments); // jslint ignore:line\n        console[key + \"_original\"].apply(console, argList);\n        element = document.querySelector(\n            \"#outputStdoutTextarea1\"\n        );\n        if (!element) {\n            return;\n        }\n        // append text to #outputStdoutTextarea1\n        element.value += argList.map(function (arg) {\n            return (\n                typeof arg === \"string\"\n                ? arg\n                : JSON.stringify(arg, null, 4)\n            );\n        }).join(\" \").replace((\n            /\\u001b\\[\\d*m/g\n        ), \"\") + \"\\n\";\n        // scroll textarea to bottom\n        element.scrollTop = element.scrollHeight;\n    };\n});\n// init event-handling\n[\"Change\", \"Click\", \"Keyup\", \"Submit\"].forEach(function (eventType) {\n    Array.from(document.querySelectorAll(\n        \".eventDelegate\" + eventType\n    )).forEach(function (element) {\n        element.addEventListener(eventType.toLowerCase(), local.uiEventDelegate);\n    });\n});\n// run tests\nlocal.testRunBrowser();\n}());\n\n\n\n/* istanbul ignore next */\n// run node js-env code - init-test\n(function () {\nif (local.isBrowser) {\n    return;\n}\n// init exports\nmodule.exports = local;\n/* validateLineSortedReset */\n// init assets\nlocal.assetsDict = local.assetsDict || {};\n[\n    \"assets.index.template.html\",\n    \"assets.swgg.swagger.json\",\n    \"assets.swgg.swagger.server.json\"\n].forEach(function (file) {\n    file = \"/\" + file;\n    local.assetsDict[file] = local.assetsDict[file] || \"\";\n    if (local.fs.existsSync(local.__dirname + file)) {\n        local.assetsDict[file] = local.fs.readFileSync(\n            local.__dirname + file,\n            \"utf8\"\n        );\n    }\n});\n/* jslint ignore:start */\nlocal.assetsDict[\"/assets.index.template.html\"] = '\\\n<!doctype html>\\n\\\n<html lang=\"en\">\\n\\\n<head>\\n\\\n<meta charset=\"utf-8\">\\n\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\\n<!-- \"assets.utility2.template.html\" -->\\n\\\n<title>{{env.npm_package_name}} ({{env.npm_package_version}})</title>\\n\\\n<style>\\n\\\n/* jslint utility2:true */\\n\\\n/*csslint\\n\\\n*/\\n\\\n/* csslint ignore:start */\\n\\\n*,\\n\\\n*:after,\\n\\\n*:before {\\n\\\n    box-sizing: border-box;\\n\\\n}\\n\\\n/* csslint ignore:end */\\n\\\n@keyframes uiAnimateShake {\\n\\\n    0%, 50% {\\n\\\n        transform: translateX(10px);\\n\\\n    }\\n\\\n    25%, 75% {\\n\\\n        transform: translateX(-10px);\\n\\\n    }\\n\\\n    100% {\\n\\\n        transform: translateX(0);\\n\\\n    }\\n\\\n}\\n\\\n@keyframes uiAnimateSpin {\\n\\\n    0% {\\n\\\n        transform: rotate(0deg);\\n\\\n    }\\n\\\n    100% {\\n\\\n        transform: rotate(360deg);\\n\\\n    }\\n\\\n}\\n\\\na {\\n\\\n    overflow-wrap: break-word;\\n\\\n}\\n\\\nbody {\\n\\\n    background: #eef;\\n\\\n    font-family: Arial, Helvetica, sans-serif;\\n\\\n    margin: 0 40px;\\n\\\n}\\n\\\nbody > div,\\n\\\nbody > form > div,\\n\\\nbody > form > input,\\n\\\nbody > form > pre,\\n\\\nbody > form > textarea,\\n\\\nbody > form > .button,\\n\\\nbody > input,\\n\\\nbody > pre,\\n\\\nbody > textarea,\\n\\\nbody > .button {\\n\\\n    margin-bottom: 20px;\\n\\\n}\\n\\\nbody > form > input,\\n\\\nbody > form > .button,\\n\\\nbody > input,\\n\\\nbody > .button {\\n\\\n    width: 20rem;\\n\\\n}\\n\\\nbody > form > textarea,\\n\\\nbody > textarea {\\n\\\n    height: 10rem;\\n\\\n    width: 100%;\\n\\\n}\\n\\\nbody > textarea[readonly] {\\n\\\n    background: #ddd;\\n\\\n}\\n\\\ncode,\\n\\\npre,\\n\\\ntextarea {\\n\\\n    font-family: Consolas, Menlo, monospace;\\n\\\n    font-size: small;\\n\\\n}\\n\\\npre {\\n\\\n    overflow-wrap: break-word;\\n\\\n    white-space: pre-wrap;\\n\\\n}\\n\\\ntextarea {\\n\\\n    overflow: auto;\\n\\\n    white-space: pre;\\n\\\n}\\n\\\n.button {\\n\\\n    background-color: #fff;\\n\\\n    border: 1px solid;\\n\\\n    border-bottom-color: rgb(186, 186, 186);\\n\\\n    border-left-color: rgb(209, 209, 209);\\n\\\n    border-radius: 4px;\\n\\\n    border-right-color: rgb(209, 209, 209);\\n\\\n    border-top-color: rgb(216, 216, 216);\\n\\\n    color: #00d;\\n\\\n    cursor: pointer;\\n\\\n    display: inline-block;\\n\\\n    font-family: Arial, Helvetica, sans-serif;\\n\\\n    font-size: 12px;\\n\\\n    font-style: normal;\\n\\\n    font-weight: normal;\\n\\\n    margin: 0;\\n\\\n    padding: 2px 7px 3px 7px;\\n\\\n    text-align: center;\\n\\\n    text-decoration: underline;\\n\\\n}\\n\\\n.colorError {\\n\\\n    color: #d00;\\n\\\n}\\n\\\n.uiAnimateShake {\\n\\\n    animation-duration: 500ms;\\n\\\n    animation-name: uiAnimateShake;\\n\\\n}\\n\\\n.uiAnimateSlide {\\n\\\n    overflow-y: hidden;\\n\\\n    transition: max-height ease-in 250ms, min-height ease-in 250ms, padding-bottom ease-in 250ms, padding-top ease-in 250ms;\\n\\\n}\\n\\\n.utility2FooterDiv {\\n\\\n    text-align: center;\\n\\\n}\\n\\\n.zeroPixel {\\n\\\n    border: 0;\\n\\\n    height: 0;\\n\\\n    margin: 0;\\n\\\n    padding: 0;\\n\\\n    width: 0;\\n\\\n}\\n\\\n</style>\\n\\\n</head>\\n\\\n<body>\\n\\\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 500ms, width 1500ms; width: 0%; z-index: 1;\"></div>\\n\\\n<div class=\"uiAnimateSpin\" style=\"animation: uiAnimateSpin 2s linear infinite; border: 5px solid #999; border-radius: 50%; border-top: 5px solid #7d7; display: none; height: 25px; vertical-align: middle; width: 25px;\"></div>\\n\\\n<a class=\"zeroPixel\" download=\"db.persistence.json\" href=\"\" id=\"dbExportA1\"></a>\\n\\\n<input class=\"zeroPixel\" id=\"dbImportInput1\" type=\"file\">\\n\\\n<script>\\n\\\n/* jslint utility2:true */\\n\\\n// init domOnEventWindowOnloadTimeElapsed\\n\\\n(function () {\\n\\\n/*\\n\\\n * this function will measure and print the time-elapsed for window.onload\\n\\\n */\\n\\\n    \"use strict\";\\n\\\n    if (window.domOnEventWindowOnloadTimeElapsed) {\\n\\\n        return;\\n\\\n    }\\n\\\n    window.domOnEventWindowOnloadTimeElapsed = Date.now() + 100;\\n\\\n    window.addEventListener(\"load\", function () {\\n\\\n        setTimeout(function () {\\n\\\n            window.domOnEventWindowOnloadTimeElapsed = (\\n\\\n                Date.now()\\n\\\n                - window.domOnEventWindowOnloadTimeElapsed\\n\\\n            );\\n\\\n            console.error(\\n\\\n                \"domOnEventWindowOnloadTimeElapsed = \"\\n\\\n                + window.domOnEventWindowOnloadTimeElapsed\\n\\\n            );\\n\\\n        }, 100);\\n\\\n    });\\n\\\n}());\\n\\\n\\n\\\n\\n\\\n\\n\\\n// init timerIntervalAjaxProgressUpdate\\n\\\n(function () {\\n\\\n/*\\n\\\n * this function will increment the ajax-progress-bar\\n\\\n * until the webpage has loaded\\n\\\n */\\n\\\n    \"use strict\";\\n\\\n    var ajaxProgressDiv1;\\n\\\n    var ajaxProgressState;\\n\\\n    var ajaxProgressUpdate;\\n\\\n    if (\\n\\\n        window.timerIntervalAjaxProgressUpdate\\n\\\n        || !document.querySelector(\\n\\\n            \"#ajaxProgressDiv1\"\\n\\\n        )\\n\\\n    ) {\\n\\\n        return;\\n\\\n    }\\n\\\n    ajaxProgressDiv1 = document.querySelector(\\n\\\n        \"#ajaxProgressDiv1\"\\n\\\n    );\\n\\\n    setTimeout(function () {\\n\\\n        ajaxProgressDiv1.style.width = \"25%\";\\n\\\n    });\\n\\\n    ajaxProgressState = 0;\\n\\\n    ajaxProgressUpdate = (\\n\\\n        window.local\\n\\\n        && window.local.ajaxProgressUpdate\\n\\\n    ) || function () {\\n\\\n        ajaxProgressDiv1.style.width = \"100%\";\\n\\\n        setTimeout(function () {\\n\\\n            ajaxProgressDiv1.style.background = \"transparent\";\\n\\\n            setTimeout(function () {\\n\\\n                ajaxProgressDiv1.style.width = \"0%\";\\n\\\n            }, 500);\\n\\\n        }, 1000);\\n\\\n    };\\n\\\n    window.timerIntervalAjaxProgressUpdate = setInterval(function () {\\n\\\n        ajaxProgressState += 1;\\n\\\n        ajaxProgressDiv1.style.width = Math.max(\\n\\\n            100 - 75 * Math.exp(-0.125 * ajaxProgressState),\\n\\\n            ajaxProgressDiv1.style.width.slice(0, -1) | 0\\n\\\n        ) + \"%\";\\n\\\n    }, 1000);\\n\\\n    window.addEventListener(\"load\", function () {\\n\\\n        clearInterval(window.timerIntervalAjaxProgressUpdate);\\n\\\n        ajaxProgressUpdate();\\n\\\n    });\\n\\\n}());\\n\\\n\\n\\\n\\n\\\n\\n\\\n// init domOnEventSelectAllWithinPre\\n\\\n(function () {\\n\\\n/*\\n\\\n * this function will limit select-all within <pre tabIndex=\"0\"> elements\\n\\\n * https://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse\\n\\\n */\\n\\\n    \"use strict\";\\n\\\n    if (window.domOnEventSelectAllWithinPre) {\\n\\\n        return;\\n\\\n    }\\n\\\n    window.domOnEventSelectAllWithinPre = function (event) {\\n\\\n        var range;\\n\\\n        var selection;\\n\\\n        if (\\n\\\n            event\\n\\\n            && event.key === \"a\"\\n\\\n            && (event.ctrlKey || event.metaKey)\\n\\\n            && event.target.closest(\"pre\")\\n\\\n        ) {\\n\\\n            range = document.createRange();\\n\\\n            range.selectNodeContents(event.target.closest(\"pre\"));\\n\\\n            selection = window.getSelection();\\n\\\n            selection.removeAllRanges();\\n\\\n            selection.addRange(range);\\n\\\n            event.preventDefault();\\n\\\n        }\\n\\\n    };\\n\\\n    // init event-handling\\n\\\n    document.addEventListener(\\n\\\n        \"keydown\",\\n\\\n        window.domOnEventSelectAllWithinPre\\n\\\n    );\\n\\\n}());\\n\\\n</script>\\n\\\n<h1>\\n\\\n<!-- utility2-comment\\n\\\n    <a\\n\\\n        {{#if env.npm_package_homepage}}\\n\\\n        href=\"{{env.npm_package_homepage}}\"\\n\\\n        {{/if env.npm_package_homepage}}\\n\\\n        target=\"_blank\"\\n\\\n    >\\n\\\nutility2-comment -->\\n\\\n        {{env.npm_package_name}} ({{env.npm_package_version}})\\n\\\n<!-- utility2-comment\\n\\\n    </a>\\n\\\nutility2-comment -->\\n\\\n</h1>\\n\\\n<h3>{{env.npm_package_description}}</h3>\\n\\\n<!-- utility2-comment\\n\\\n<a class=\"button\" download href=\"assets.app.js\">download standalone app</a><br>\\n\\\n<button class=\"button eventDelegateClick onreset\" data-onevent=\"testRunBrowser\" id=\"testRunButton1\">run internal test</button><br>\\n\\\n<div class=\"uiAnimateSlide\" id=\"testReportDiv1\" style=\"border-bottom: 0; border-top: 0; margin-bottom: 0; margin-top: 0; max-height: 0; padding-bottom: 0; padding-top: 0;\"></div>\\n\\\nutility2-comment -->\\n\\\n\\n\\\n\\n\\\n\\n\\\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbResetButton1\" id=\"dbResetButton1\">\\n\\\n    reset database\\n\\\n</button><br>\\n\\\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbExportButton1\" id=\"dbExportButton1\">\\n\\\n    export database -&gt; file\\n\\\n</button><br>\\n\\\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbImportButton1\" id=\"dbImportButton1\">\\n\\\n    import database &lt;- file\\n\\\n</button><br>\\n\\\n<label>edit or paste script below to\\n\\\n    <a\\n\\\n        href=\"https://kaizhu256.github.io/node-db-lite/build..beta..travis-ci.org/apidoc.html\"\\n\\\n        target=\"_blank\"\\n\\\n    >eval</a>\\n\\\n</label>\\n\\\n<textarea id=\"inputTextareaEval1\">\\n\\\n/*jslint browser: true, node: true*/\\n\\\n\"use strict\";\\n\\\nvar dbTable1, modeNext, onNext;\\n\\\nmodeNext = 0;\\n\\\nonNext = function (error, data) {\\n\\\n    modeNext = error\\n\\\n        ? Infinity\\n\\\n        : modeNext + 1;\\n\\\n    switch (modeNext) {\\n\\\n    case 1:\\n\\\n        dbTable1 = window.dbTable1 = window.utility2_db.dbTableCreateOne({\\n\\\n            name: \"dbTable1\"\\n\\\n        }, onNext);\\n\\\n        break;\\n\\\n    case 2:\\n\\\n        dbTable1.idIndexCreate({ name: \"field1\" }, onNext);\\n\\\n        break;\\n\\\n    case 3:\\n\\\n        dbTable1.crudSetOneById({ field1: \"aa\", field2: 1, field3: \"foo\" }, onNext);\\n\\\n        break;\\n\\\n    case 4:\\n\\\n        dbTable1.crudSetOneById({ field1: \"bb\", field2: 2, field3: \"bar\" }, onNext);\\n\\\n        break;\\n\\\n    case 5:\\n\\\n        dbTable1.crudSetOneById({ field1: \"cc\", field2: 3, field3: \"baz\" }, onNext);\\n\\\n        break;\\n\\\n    case 6:\\n\\\n        dbTable1.crudRemoveOneById({ field1: \"aa\" }, onNext);\\n\\\n        break;\\n\\\n    case 7:\\n\\\n        dbTable1.crudUpdateOneById({ field1: \"bb\", field2: -1 }, onNext);\\n\\\n        break;\\n\\\n    case 8:\\n\\\n        dbTable1.crudSetOneById({ field2: Math.random() }, onNext);\\n\\\n        break;\\n\\\n    case 9:\\n\\\n        dbTable1.crudGetManyByQuery({\\n\\\n            limit: Infinity,\\n\\\n            query: { field2: { $gte: -Infinity, $lte: Infinity } },\\n\\\n            skip: 0,\\n\\\n            sort: [{ fieldName: \"_timeUpdated\", idDescending: true }]\\n\\\n        }, onNext);\\n\\\n        break;\\n\\\n    case 10:\\n\\\n        console.error(data);\\n\\\n        dbTable1.crudCountAll(onNext);\\n\\\n        break;\\n\\\n    case 11:\\n\\\n        console.error(\"number of rows: \" + data);\\n\\\n        break;\\n\\\n    default:\\n\\\n        console.error(error.stack);\\n\\\n    }\\n\\\n};\\n\\\nonNext();\\n\\\n</textarea>\\n\\\n<button class=\"button eventDelegateClick oneval onreset\" data-onevent=\"testRunBrowser\" id=\"dbEvalButton1\">eval script</button><br>\\n\\\n<label>stderr and stdout</label>\\n\\\n<textarea class=\"resettable\" id=\"outputStdoutTextarea1\" readonly></textarea>\\n\\\n<!-- utility2-comment\\n\\\n{{#if isRollup}}\\n\\\n<script src=\"assets.app.js\"></script>\\n\\\n{{#unless isRollup}}\\n\\\nutility2-comment -->\\n\\\n<script src=\"assets.utility2.rollup.js\"></script>\\n\\\n<script>window.utility2_onReadyBefore.counter += 1;</script>\\n\\\n<script src=\"jsonp.utility2.stateInit?callback=window.utility2.stateInit\"></script>\\n\\\n<script src=\"assets.db.js\"></script>\\n\\\n<script src=\"assets.example.js\"></script>\\n\\\n<script src=\"assets.test.js\"></script>\\n\\\n<script>window.utility2_onReadyBefore();</script>\\n\\\n<!-- utility2-comment\\n\\\n{{/if isRollup}}\\n\\\nutility2-comment -->\\n\\\n<div class=\"utility2FooterDiv\">\\n\\\n    [ this app was created with\\n\\\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\\n    ]\\n\\\n</div>\\n\\\n</body>\\n\\\n</html>\\n\\\n';\n/* jslint ignore:end */\n/* validateLineSortedReset */\n/* jslint ignore:start */\nlocal.assetsDict[\"/assets.db.js\"] =\n    local.assetsDict[\"/assets.db.js\"] ||\n    local.fs.readFileSync(local.__dirname + \"/lib.db.js\", \"utf8\"\n).replace((/^#!\\//), \"// \");\n/* jslint ignore:end */\n/* validateLineSortedReset */\nlocal.assetsDict[\"/\"] = local.assetsDict[\"/assets.index.template.html\"]\n.replace((\n    /\\{\\{env\\.(\\w+?)\\}\\}/g\n), function (match0, match1) {\n    switch (match1) {\n    case \"npm_package_description\":\n        return \"the greatest app in the world!\";\n    case \"npm_package_name\":\n        return \"db-lite\";\n    case \"npm_package_nameLib\":\n        return \"db\";\n    case \"npm_package_version\":\n        return \"0.0.1\";\n    default:\n        return match0;\n    }\n});\nlocal.assetsDict[\"/assets.example.html\"] = local.assetsDict[\"/\"];\nlocal.assetsDict[\"/index.html\"] = local.assetsDict[\"/\"];\n// init cli\nif (module !== require.main || globalThis.utility2_rollup) {\n    return;\n}\n/* validateLineSortedReset */\nlocal.assetsDict[\"/assets.example.js\"] = (\n    local.assetsDict[\"/assets.example.js\"]\n    || local.fs.readFileSync(__filename, \"utf8\")\n);\nlocal.assetsDict[\"/favicon.ico\"] = local.assetsDict[\"/favicon.ico\"] || \"\";\n// if $npm_config_timeout_exit exists,\n// then exit this process after $npm_config_timeout_exit ms\nif (Number(process.env.npm_config_timeout_exit)) {\n    setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n}\n// start server\nif (globalThis.utility2_serverHttp1) {\n    return;\n}\nprocess.env.PORT = process.env.PORT || \"8081\";\nconsole.error(\"server starting on port \" + process.env.PORT);\nlocal.http.createServer(function (request, response) {\n    request.urlParsed = local.url.parse(request.url);\n    if (local.assetsDict[request.urlParsed.pathname] !== undefined) {\n        response.end(local.assetsDict[request.urlParsed.pathname]);\n        return;\n    }\n    response.statusCode = 404;\n    response.end();\n}).listen(process.env.PORT);\n}());\n\n\n\n}());",
            "/assets.swgg.swagger.json": "",
            "/assets.test.js": "/* istanbul instrument in package db */\n/* istanbul ignore next */\n/* jslint utility2:true */\n(function (globalThis) {\n    \"use strict\";\n    var consoleError;\n    var local;\n    // init globalThis\n    (function () {\n        try {\n            globalThis = Function(\"return this\")(); // jslint ignore:line\n        } catch (ignore) {}\n    }());\n    globalThis.globalThis = globalThis;\n    // init debug_inline\n    if (!globalThis[\"debug\\u0049nline\"]) {\n        consoleError = console.error;\n        globalThis[\"debug\\u0049nline\"] = function () {\n        /*\n         * this function will both print <arguments> to stderr\n         * and return <arguments>[0]\n         */\n            var argList;\n            argList = Array.from(arguments); // jslint ignore:line\n            // debug arguments\n            globalThis[\"debug\\u0049nlineArguments\"] = argList;\n            consoleError(\"\\n\\ndebug\\u0049nline\");\n            consoleError.apply(console, argList);\n            consoleError(\"\\n\");\n            // return arg0 for inspection\n            return argList[0];\n        };\n    }\n    // init local\n    local = {};\n    local.local = local;\n    globalThis.globalLocal = local;\n    // init isBrowser\n    local.isBrowser = (\n        typeof window === \"object\"\n        && window === globalThis\n        && typeof window.XMLHttpRequest === \"function\"\n        && window.document\n        && typeof window.document.querySelector === \"function\"\n    );\n    // init function\n    local.assertThrow = function (passed, message) {\n    /*\n     * this function will throw the error <message> if <passed> is falsy\n     */\n        var error;\n        if (passed) {\n            return;\n        }\n        error = (\n            // ternary-condition\n            (\n                message\n                && typeof message.message === \"string\"\n                && typeof message.stack === \"string\"\n            )\n            // if message is an error-object, then leave it as is\n            ? message\n            : new Error(\n                typeof message === \"string\"\n                // if message is a string, then leave it as is\n                ? message\n                // else JSON.stringify message\n                : JSON.stringify(message, null, 4)\n            )\n        );\n        throw error;\n    };\n    local.functionOrNop = function (fnc) {\n    /*\n     * this function will if <fnc> exists,\n     * them return <fnc>,\n     * else return <nop>\n     */\n        return fnc || local.nop;\n    };\n    local.identity = function (value) {\n    /*\n     * this function will return <value>\n     */\n        return value;\n    };\n    local.nop = function () {\n    /*\n     * this function will do nothing\n     */\n        return;\n    };\n    local.objectAssignDefault = function (target, source) {\n    /*\n     * this function will if items from <target> are\n     * null, undefined, or empty-string,\n     * then overwrite them with items from <source>\n     */\n        Object.keys(source).forEach(function (key) {\n            if (\n                target[key] === null\n                || target[key] === undefined\n                || target[key] === \"\"\n            ) {\n                target[key] = target[key] || source[key];\n            }\n        });\n    };\n    // require builtin\n    if (!local.isBrowser) {\n        local.assert = require(\"assert\");\n        local.buffer = require(\"buffer\");\n        local.child_process = require(\"child_process\");\n        local.cluster = require(\"cluster\");\n        local.crypto = require(\"crypto\");\n        local.dgram = require(\"dgram\");\n        local.dns = require(\"dns\");\n        local.domain = require(\"domain\");\n        local.events = require(\"events\");\n        local.fs = require(\"fs\");\n        local.http = require(\"http\");\n        local.https = require(\"https\");\n        local.net = require(\"net\");\n        local.os = require(\"os\");\n        local.path = require(\"path\");\n        local.querystring = require(\"querystring\");\n        local.readline = require(\"readline\");\n        local.repl = require(\"repl\");\n        local.stream = require(\"stream\");\n        local.string_decoder = require(\"string_decoder\");\n        local.timers = require(\"timers\");\n        local.tls = require(\"tls\");\n        local.tty = require(\"tty\");\n        local.url = require(\"url\");\n        local.util = require(\"util\");\n        local.vm = require(\"vm\");\n        local.zlib = require(\"zlib\");\n    }\n}(this));\n\n\n\n(function (local) {\n\"use strict\";\n\n\n\n// run shared js-env code - init-before\n(function () {\n// init local\nlocal = (globalThis.utility2 || require(\"utility2\")).requireReadme();\nglobalThis.local = local;\n// init test\nlocal.testRunDefault(local);\n}());\n\n\n\n// run shared js-env code - function\n(function () {\nlocal.testCase_dbLoad_error = function (options, onError) {\n/*\n * this function will test dbLoad's error handling-behavior\n */\n    local.testMock([\n        [local, {\n            storageKeys: function (fnc) {\n                fnc(local.errorDefault);\n            }\n        }]\n    ], function (onError) {\n        local.dbLoad(function (error) {\n            // validate error occurred\n            local.assertThrow(error, error);\n        });\n        onError(null, options);\n    }, onError);\n};\n\nlocal.testCase_dbTable_crudGetManyByQuery = function (options, onError) {\n/*\n * this function will test dbTable's crudGetManyByQuery handling-behavior\n */\n    options = {};\n    // test dbTableCreateOne's create handling-behavior\n    options.dbTable = local.dbTableCreateOne({\n        name: \"testCase_dbTable_crudGetManyByQuery\"\n    });\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // test isDirty handling-behavior\n    options.dbTable.crudRemoveOneById(options.dbTable.crudSetOneById({\n        field1: \"dirty\"\n    }));\n    // test null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        // test shuffle handling-behavior\n        shuffle: true\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    options.data = local.identity([\n        [],\n        [[], \"\", 0, {}, false, null, undefined],\n        -0.5,\n        -1,\n        -Infinity,\n        0,\n        0.5,\n        1,\n        Infinity,\n        NaN,\n        {},\n        false,\n        null,\n        true,\n        undefined\n    ]).sort().map(function (element) {\n        return {\n            field1: element\n        };\n    });\n    options.data = options.data.concat(options.data.map(function (dbRow) {\n        return {\n            field1: JSON.stringify(dbRow.field1)\n        };\n    }));\n    // test dbTableCreateOne's crudSetManyById handling-behavior\n    options.data = options.dbTable.crudSetManyById(options.data);\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 30);\n    // validate data\n    [\n        [],\n        [[], \"\", 0, {}, false, null, undefined],\n        -0.5,\n        -1,\n        undefined,\n        0,\n        0.5,\n        1,\n        undefined,\n        undefined,\n        {},\n        false,\n        undefined,\n        true,\n        undefined,\n        \"[]\",\n        \"[[],\\\"\\\",0,{},false,null,null]\",\n        \"-0.5\",\n        \"-1\",\n        \"null\",\n        \"0\",\n        \"0.5\",\n        \"1\",\n        \"null\",\n        \"null\",\n        \"{}\",\n        \"false\",\n        \"null\",\n        \"true\",\n        undefined\n    ].forEach(function (element, ii) {\n        local.assertJsonEqual(element, options.data[ii].field1);\n    });\n    // test null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: { $undefined: null}\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    // test null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $undefined: {}\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    // test $eq's boolean handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: true\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 1);\n    local.assertJsonEqual(options.data, [true]);\n    // test $eq's null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: null\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 7);\n    local.assertJsonEqual(\n        options.data.slice(0, -1),\n        [null, null, null, null, null, null]\n    );\n    // test $eq's number handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: 0\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 2);\n    local.assertJsonEqual(options.data.slice(0, -1), [0]);\n    // test $eq's string handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: \"{}\"\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 1);\n    local.assertJsonEqual(options.data, [\"{}\"]);\n    // test $exists's false handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: { $exists: false}\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 7);\n    // test $exists's null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $exists: null\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 7);\n    // test $exists's true handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $exists: true\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 23);\n    // test $gt's boolean handling-behavior\n    // test $lt's boolean handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: { $gt: false, $lt: true}\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    // test $gt's null-case handling-behavior\n    // test $lt's null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $gt: false,\n                $lt: true\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    // test $gt's number handling-behavior\n    // test $lt's number handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $gt: -1,\n                $lt: 1\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 4);\n    local.assertJsonEqual(options.data.slice(0, -1), [-0.5, 0, 0.5]);\n    // test $gt's string handling-behavior\n    // test $lt's string handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $gt: \"false\",\n                $lt: \"true\"\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 4);\n    local.assertJsonEqual(options.data, [\"null\", \"null\", \"null\", \"null\"]);\n    // test $gte's boolean handling-behavior\n    // test $lte's boolean handling-behavior\n    // test $ne's boolean handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: { $gte: false, $lte: true, $ne: false}\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 2);\n    local.assertJsonEqual(options.data.slice(0, -1), [true]);\n    // test $gte's null-case handling-behavior\n    // test $lte's null-case handling-behavior\n    // test $ne's null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $gte: null,\n                $lte: null,\n                $ne: null\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 1);\n    local.assertJsonEqual(options.data.slice(0, -1), []);\n    // test $gte's number handling-behavior\n    // test $lte's number handling-behavior\n    // test $ne's number handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $gte: -1,\n                $lte: 1,\n                $ne: 0\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 5);\n    local.assertJsonEqual(options.data.slice(0, -1), [-1, -0.5, 0.5, 1]);\n    // test $gte's number handling-behavior\n    // test $lte's number handling-behavior\n    // test $ne's number handling-behavior\n    // test fieldList handling-behavior\n    // test limit handling-behavior\n    // test skip handling-behavior\n    // test sort's isDescending handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        fieldList: [\"field1\"],\n        limit: 2,\n        query: {\n            field1: {\n                $gte: -1,\n                $lte: 1,\n                $ne: 0\n            }\n        },\n        skip: 2,\n        sort: [{\n            fieldName: \"field1\",\n            isDescending: true\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 2);\n    local.assertJsonEqual(options.data.slice(), [0.5, -0.5]);\n    // test $gte's string handling-behavior\n    // test $lte's string handling-behavior\n    // test $ne's string handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $gte: \"false\",\n                $lte: \"true\",\n                $ne: \"null\"\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 2);\n    local.assertJsonEqual(options.data, [\"false\", \"true\"]);\n    // test $in's list handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: { $in: [true, 1]}\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 2);\n    local.assertJsonEqual(options.data, [true, 1]);\n    // test $in's null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $in: null\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    // test $in's string handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $in: \"0.5\"\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 3);\n    local.assertJsonEqual(options.data.slice(0, -1), [\"0\", \"0.5\"]);\n    // test $nin's list handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: { $nin: [0, null]}\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 22);\n    // test $nin's null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $nin: null\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    // test $nin's string handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $nin: \"[[],\\\"\\\",0,1,{},false,null,true]\"\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 4);\n    local.assertJsonEqual(options.data.slice(0, -1), [\"-0.5\", \"-1\", \"0.5\"]);\n    // test $not's number handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n            $not: {\n                    $gte: 0\n                }\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 26);\n    local.assertJsonEqual(options.data.slice(0, 15), [\n        null,\n        null,\n        null,\n        null,\n        null,\n        null,\n        false,\n        true,\n        -1,\n        -0.5,\n        \"-0.5\",\n        \"-1\",\n        \"0\",\n        \"0.5\",\n        \"1\"\n    ]);\n    // test $not's string handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $not: {\n                    $gte: \"0\"\n                }\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 17);\n    local.assertJsonEqual(options.data.slice(0, -1), [\n        null,\n        null,\n        null,\n        null,\n        null,\n        null,\n        false,\n        true,\n        -1,\n        -0.5,\n        0,\n        0.5,\n        1,\n        \"-0.5\",\n        \"-1\",\n        {}\n    ]);\n    // test $or's null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: { $or: null},\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    // test $or's empty-list handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            $or: []\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    // test $or's list handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            $or: [{\n                field1: { $eq: -0.5}\n            }, {\n                field1: {\n                    $eq: 0\n                }\n            }, {\n                field1: {\n                    $eq: 0.5\n                }\n            }]\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 4);\n    local.assertJsonEqual(options.data.slice(0, -1), [-0.5, 0, 0.5]);\n    // test $regex's regex handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: { $regex: (\n                /1|true/\n            )}\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 6);\n    local.assertJsonEqual(options.data, [true, -1, 1, \"-1\", \"1\", \"true\"]);\n    // test $regex's null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $regex: null\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    // test $typeof's boolean handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: { $typeof: \"boolean\"}\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 3);\n    // test $typeof's null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $typeof: null\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    // test $typeof's number handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $typeof: \"number\"\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 6);\n    // test $typeof's object handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $typeof: \"object\"\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 8);\n    // test $typeof's string handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $typeof: \"string\"\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    }).map(function (dbRow) {\n        return dbRow.field1;\n    });\n    local.assertJsonEqual(options.data.length, 15);\n    // test $typeof's symbol handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $typeof: \"symbol\"\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    // test $typeof's undefined handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            field1: {\n                $typeof: \"undefined\"\n            }\n        },\n        sort: [{\n            fieldName: \"field1\"\n        }]\n    });\n    local.assertJsonEqual(options.data.length, 0);\n    local.assertJsonEqual(options.data, []);\n    onError();\n};\n\nlocal.testCase_dbTable_crudNullCase = function (options, onError) {\n/*\n * this function will test dbTable's crud null-case handling-behavior\n */\n    options = {};\n    // test dbTableCreateMany's null-case handling-behavior\n    local.dbTableCreateMany();\n    // test dbTableCreateOne's onError handling-behavior\n    options.dbTable = local.dbTableCreateOne({\n        name: \"testCase_dbTable_crudNullCase\"\n    }, local.onErrorDefault);\n    // test dbTableCreateOne's null-case handling-behavior\n    options.dbTable = local.dbTableCreateOne({\n        name: \"testCase_dbTable_crudNullCase\"\n    });\n    // test crudRemoveAll's null-case handling-behavior\n    options.dbTable.crudRemoveAll();\n    // test cancel-pending-save handling-behavior\n    options.dbTable.save(local.nop);\n    // test drop's null-case handling-behavior\n    options.dbTable.drop();\n    // test idIndexCreate's null-case handling-behavior\n    options.dbTable.idIndexCreate({\n        name: \"_id\"\n    });\n    // test idIndexRemove's null-case handling-behavior\n    options.dbTable.idIndexRemove({\n        name: \"_id\"\n    });\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // test crudCountManyByQuery's null-case handling-behavior\n    options.data = options.dbTable.crudCountManyByQuery();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, 0);\n    // test crudGetManyById's null-case handling-behavior\n    options.data = options.dbTable.crudGetManyById();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, []);\n    // test crudGetManyByQuery's null-case handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, []);\n    // test crudGetOneById's null-case handling-behavior\n    options.data = options.dbTable.crudGetOneById();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, null);\n    // test crudGetOneByRandom's null-case handling-behavior\n    options.data = options.dbTable.crudGetOneByRandom();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, null);\n    // test crudGetOneByQuery's null-case handling-behavior\n    options.data = options.dbTable.crudGetOneByQuery();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, null);\n    // test crudRemoveManyById's null-case handling-behavior\n    options.data = options.dbTable.crudRemoveManyById();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, []);\n    // test crudRemoveManyByQuery's null-case handling-behavior\n    options.data = options.dbTable.crudRemoveManyByQuery();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, []);\n    // test crudRemoveOneById's null-case handling-behavior\n    options.data = options.dbTable.crudRemoveOneById();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, null);\n    // test crudUpdateManyById's null-case handling-behavior\n    options.data = options.dbTable.crudUpdateManyById();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, []);\n    // test crudUpdateManyByQuery's null-case handling-behavior\n    options.data = options.dbTable.crudUpdateManyByQuery();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, []);\n    // test crudSetOneById's and crudUpdateOneById's null-case handling-behavior\n    [\"crudSetOneById\", \"crudUpdateOneById\"].forEach(function (operation) {\n        options.data = options.dbTable[operation]();\n        // validate dbRowCount\n        local.assertJsonEqual(options.dbTable.crudCountAll(), 1);\n        options._id = options.data._id;\n        // validate timestamp\n        local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);\n        // test crudRemoveOneById's soft-delete handling-behavior\n        options.data = options.dbTable.crudRemoveOneById(options);\n        // validate dbRowCount\n        local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n        // validate data\n        local.assertJsonEqual(options.data._id, options._id);\n    });\n    // test crudGetOneById's null-case handling-behavior\n    options.data = options.dbTable.crudGetOneById(options);\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, null);\n    // test crudRemoveOneById's null-case handling-behavior\n    options.data = options.dbTable.crudRemoveOneById(options);\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data, null);\n    onError();\n};\n\nlocal.testCase_dbTable_crudXxxById = function (options, onError) {\n/*\n * this function will test dbTable's crudXxxById handling-behavior\n */\n    options = {};\n    // test dbTableCreateMany's create handling-behavior\n    options.dbTable = local.dbTableCreateMany([{\n        idIndexCreateList: [null],\n        idIndexRemoveList: [null],\n        name: \"testCase_dbTable_crudXxxById\"\n    }])[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // test crudSetManyById's insert handling-behavior\n    options.data = options.dbTable.crudSetManyById([null, null]);\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);\n    // validate data\n    local.assertJsonEqual(options.data.length, 2);\n    // test crudRemoveManyById's soft-delete handling-behavior\n    options.data = options.dbTable.crudRemoveManyById(options.data);\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);\n    // validate data\n    local.assertJsonEqual(options.data.length, 2);\n    // test crudSetManyById's insert handling-behavior\n    options.data = options.dbTable.crudSetManyById([null, {\n        field1: 1,\n        field2: 2,\n        field3: 3\n    }])[1];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);\n    // validate timestamp\n    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);\n    // validate data\n    local.assertJsonNotEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, undefined);\n    local.assertJsonEqual(options.data.field1, 1);\n    local.assertJsonEqual(options.data.field2, 2);\n    local.assertJsonEqual(options.data.field3, 3);\n    // test idIndexCreate's create handling-behavior\n    // coverage-hack - $isRemoved\n    options.dbTable.crudSetOneById({\n        _id: \"undefined\"\n    });\n    options.dbTable.crudRemoveOneById({\n        _id: \"undefined\"\n    });\n    options._id = options.data._id;\n    options.dbTable.idIndexCreate({\n        isInteger: true,\n        name: \"id2\"\n    });\n    // test crudGetManyById's get handling-behavior\n    options.data = options.dbTable.crudGetManyById([{\n        _id: options._id\n    }])[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonNotEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, 1);\n    local.assertJsonEqual(options.data.field2, 2);\n    // test crudUpdateManyById's update handling-behavior\n    options.id2 = options.data.id2;\n    options.data = options.dbTable.crudUpdateManyById([{\n        id2: options.id2,\n        field2: NaN,\n        field3: [new Date(0)]\n    }])[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);\n    // validate timestamp\n    local.assertThrow(options.data._timeCreated <= options.data._timeUpdated, options.data);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, 1);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, [\"1970-01-01T00:00:00.000Z\"]);\n    // test crudSetManyById's replace handling-behavior\n    options.data = options.dbTable.crudSetManyById([{\n        id2: options.id2\n    }])[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);\n    // validate timestamp\n    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, undefined);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, undefined);\n    // test crudUpdateManyById's update handling-behavior\n    options.data = options.dbTable.crudUpdateManyById([{\n        id2: options.id2,\n        field1: 1\n    }])[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);\n    // validate timestamp\n    local.assertThrow(options.data._timeCreated <= options.data._timeUpdated, options.data);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, 1);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, undefined);\n    // test crudRemoveManyById's soft-delete handling-behavior\n    options.data = options.dbTable.crudRemoveManyById([options])[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 1);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, 1);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, undefined);\n    // test crudSetManyById's re-insert handling-behavior\n    options.data = options.dbTable.crudSetManyById([{\n        id2: options.id2\n    }])[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);\n    // validate timestamp\n    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);\n    // validate data\n    local.assertJsonNotEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, undefined);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, undefined);\n    // test crudRemoveManyById's soft-delete handling-behavior\n    options._id = options.data._id;\n    options.data = options.dbTable.crudRemoveManyById([options])[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 1);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, undefined);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, undefined);\n    onError();\n};\n\nlocal.testCase_dbTable_crudXxxByQuery = function (options, onError) {\n/*\n * this function will test dbTable's crudXxxByQuery handling-behavior\n */\n    options = {};\n    // test dbTableCreateMany's create handling-behavior\n    options.dbTable = local.dbTableCreateMany([{\n        idIndexCreateList: [null],\n        idIndexRemoveList: [null],\n        name: \"testCase_dbTable_crudXxxByQuery\"\n    }])[0];\n    // drop dbTable\n    options.dbTable.drop();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 0);\n    // test crudSetManyById's insert handling-behavior\n    options.data = options.dbTable.crudSetManyById([null, null]);\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);\n    // validate data\n    local.assertJsonEqual(options.data.length, 2);\n    // test crudRemoveManyByQuery's soft-delete handling-behavior\n    options.data = options.dbTable.crudRemoveManyByQuery();\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 0);\n    // validate data\n    local.assertJsonEqual(options.data.length, 2);\n    // test crudSetManyById's insert handling-behavior\n    options.data = options.dbTable.crudSetManyById([null, {\n        field1: 1,\n        field2: 2,\n        field3: 3\n    }])[1];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);\n    // validate timestamp\n    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);\n    // validate data\n    local.assertJsonNotEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, undefined);\n    local.assertJsonEqual(options.data.field1, 1);\n    local.assertJsonEqual(options.data.field2, 2);\n    local.assertJsonEqual(options.data.field3, 3);\n    // test idIndexCreate's create handling-behavior\n    options._id = options.data._id;\n    options.dbTable.idIndexCreate({\n        isInteger: true,\n        name: \"id2\"\n    });\n    // test crudGetManyByQuery's get handling-behavior\n    options.data = options.dbTable.crudGetManyByQuery({\n        query: {\n            _id: options._id\n        }\n    })[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonNotEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, 1);\n    local.assertJsonEqual(options.data.field2, 2);\n    // test crudGetOneByQuery's get handling-behavior\n    options.data = options.dbTable.crudGetOneByQuery({\n        _id: options._id\n    });\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonNotEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, 1);\n    local.assertJsonEqual(options.data.field2, 2);\n    // test crudUpdateManyByQuery's update handling-behavior\n    options.id2 = options.data.id2;\n    options.data = options.dbTable.crudUpdateManyByQuery({\n        id2: options.id2\n    }, {\n        id2: options.id2,\n        field2: NaN,\n        field3: [new Date(0)]\n    })[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);\n    // validate timestamp\n    local.assertThrow(options.data._timeCreated <= options.data._timeUpdated, options.data);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, 1);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, [\"1970-01-01T00:00:00.000Z\"]);\n    // test crudSetManyById's replace handling-behavior\n    options.data = options.dbTable.crudSetManyById([{\n        id2: options.id2\n    }])[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);\n    // validate timestamp\n    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, undefined);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, undefined);\n    // test crudUpdateManyByQuery's update handling-behavior\n    options.data = options.dbTable.crudUpdateManyByQuery({\n        id2: options.id2\n    }, {\n        id2: options.id2,\n        field1: 1\n    })[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);\n    // validate timestamp\n    local.assertThrow(options.data._timeCreated <= options.data._timeUpdated, options.data);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, 1);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, undefined);\n    // test crudRemoveManyByQuery's soft-delete handling-behavior\n    options.data = options.dbTable.crudRemoveManyByQuery({\n        _id: options._id\n    })[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 1);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, 1);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, undefined);\n    // test crudSetManyById's re-insert handling-behavior\n    options.data = options.dbTable.crudSetManyById([{\n        id2: options.id2\n    }])[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);\n    // validate timestamp\n    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);\n    // validate data\n    local.assertJsonNotEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, undefined);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, undefined);\n    // test crudRemoveManyByQuery's soft-delete handling-behavior\n    options._id = options.data._id;\n    options.data = options.dbTable.crudRemoveManyByQuery({\n        _id: options._id\n    })[0];\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 1);\n    // validate data\n    local.assertJsonEqual(options.data._id, options._id);\n    local.assertJsonEqual(options.data.id2, options.id2);\n    local.assertJsonEqual(options.data.field1, undefined);\n    local.assertJsonEqual(options.data.field2, undefined);\n    local.assertJsonEqual(options.data.field3, undefined);\n    onError();\n};\n\nlocal.testCase_dbTable_persistence = function (options, onError) {\n/*\n * this function will test dbTable's persistence handling-behavior\n */\n    options = {};\n    // remove all dbRow's from db\n    local.dbCrudRemoveAll();\n    // drop db\n    local.dbDrop();\n    // save db\n    local.dbSave();\n    // load db\n    local.dbLoad();\n    // import db\n    local.dbImport(\n        \"testCase_dbTable_persistence idIndexCreate {\\\"name\\\":\\\"_id\\\"}\\n\"\n        + \"testCase_dbTable_persistence idIndexCreate {\\\"name\\\":\\\"id2\\\"}\\n\"\n        + \"testCase_dbTable_persistence sizeLimit 0\\n\"\n        + \"testCase_dbTable_persistence sortDefault []\\n\"\n        + \"testCase_dbTable_persistence dbRowSet {\\\"_id\\\":\\\"id1\\\"}\\n\"\n        + \"undefined undefined undefined\"\n    );\n    options.dbTable = local.dbTableCreateOne({\n        name: \"testCase_dbTable_persistence\"\n    });\n    options.data = local.dbExport();\n    // validate dbTable has idIndex._id\n    local.assertThrow(options.data.indexOf(\n        \"testCase_dbTable_persistence idIndexCreate {\\\"isInteger\\\":false,\\\"name\\\":\\\"_id\\\"}\"\n    ) >= 0, options.data);\n    // validate dbTable has idIndex.id2\n    local.assertThrow(options.data.indexOf(\n        \"testCase_dbTable_persistence idIndexCreate {\\\"isInteger\\\":false,\\\"name\\\":\\\"id2\\\"}\"\n    ) >= 0, options.data);\n    // validate dbTable has dbRow1\n    local.assertThrow(options.data.indexOf(\n        \"testCase_dbTable_persistence dbRowSet {\\\"_id\\\":\\\"id1\\\",\"\n    ) >= 0, options.data);\n    // remove all dbRow's from dbTable\n    options.dbTable.crudRemoveAll();\n    options.data = options.dbTable.export();\n    // validate dbTable has idIndex._id\n    local.assertThrow(options.data.indexOf(\n        \"testCase_dbTable_persistence idIndexCreate {\\\"isInteger\\\":false,\\\"name\\\":\\\"_id\\\"}\"\n    ) >= 0, options.data);\n    // validate dbTable has idIndex.id2\n    local.assertThrow(options.data.indexOf(\n        \"testCase_dbTable_persistence idIndexCreate {\\\"isInteger\\\":false,\\\"name\\\":\\\"id2\\\"}\"\n    ) >= 0, options.data);\n    // validate dbTable has no dbRow1\n    local.assertThrow(options.data.indexOf(\n        \"testCase_dbTable_persistence dbRowSet {\\\"_id\\\":\\\"id1\\\",\"\n    ) < 0, options.data);\n    // drop dbTable\n    options.dbTable.drop();\n    options.data = options.dbTable.export();\n    // validate dbTable has idIndex._id\n    local.assertThrow(options.data.indexOf(\n        \"testCase_dbTable_persistence idIndexCreate {\\\"isInteger\\\":false,\\\"name\\\":\\\"_id\\\"}\"\n    ) >= 0, options.data);\n    // validate dbTable has no idIndex.id2\n    local.assertThrow(options.data.indexOf(\n        \"testCase_dbTable_persistence idIndexCreate {\\\"isInteger\\\":false,\\\"name\\\":\\\"id2\\\"}\"\n    ) < 0, options.data);\n    // validate dbTable has no dbRow1\n    local.assertThrow(options.data.indexOf(\n        \"testCase_dbTable_persistence dbRowSet {\\\"_id\\\":\\\"id1\\\",\"\n    ) < 0, options.data);\n    // save db\n    options.dbTable.save(function (error) {\n        // validate no error occurred\n        local.assertThrow(!error, error);\n        // load db\n        local.dbLoad(onError);\n    });\n};\n\nlocal.testCase_dbTable_sizeLimit = function (options, onError) {\n/*\n * this function will test dbTable's sizeLimit handling-behavior\n */\n    options = {};\n    options.dbTable = local.dbTableCreateOne({\n        name: \"testCase_dbTable_sizeLimit\",\n        sizeLimit: 2\n    });\n    options.dbTable.crudSetOneById({});\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 1);\n    options.dbTable.crudSetOneById({});\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);\n    options.dbTable.crudSetOneById({});\n    // validate dbRowCount\n    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);\n    onError();\n};\n\nlocal.testCase_onEventDomDb_default = function (options, onError) {\n/*\n * this function will test onEventDomDb's default handling-behavior\n */\n    if (!local.isBrowser) {\n        onError(null, options);\n        return;\n    }\n    options = {};\n    options.addEventListener = local.nop;\n    options.click = local.nop;\n    options.files = [];\n    local.testMock([\n        [document, {\n            querySelector: function () {\n                return options;\n            }\n        }],\n        [local, {\n            dbDrop: function (onError) {\n                onError();\n            },\n            dbExport: local.nop,\n            dbImport: local.nop\n        }],\n        [globalThis, {\n            FileReader: function () {\n                this.addEventListener = function (_, fnc) {\n                    fnc(_);\n                };\n                this.readAsText = local.nop;\n            },\n            setTimeout: function (fnc) {\n                fnc();\n            },\n            utility2: null,\n            utility2_dbSeedList: null,\n            utility2_onReadyAfter: null,\n            utility2_onReadyBefore: null\n        }]\n    ], function (onError) {\n        [\n            \"dbExportButton1\",\n            \"dbImportButton1\",\n            \"dbImportInput1\",\n            \"dbResetButton1\"\n        ].forEach(function (id) {\n            [\"change\", \"click\"].forEach(function (type) {\n                [0, 1].forEach(function (ii) {\n                    options.files[0] = ii;\n                    local.onEventDomDb({\n                        target: {\n                            dataset: {},\n                            id: id\n                        },\n                        type: type\n                    });\n                    globalThis.utility2_dbSeedList = ii && [{\n                        name: \"dbTable1\"\n                    }];\n                });\n            });\n        });\n        onError();\n    }, onError);\n};\n\nlocal.testCase_sortCompare_default = function (options, onError) {\n/*\n * this function will test sortCompare's default handling-behavior\n */\n    options = {};\n    options.data = local.identity([\n        undefined,\n        [],\n        \"\",\n        -1, -Infinity, 0, 0, 1, Infinity,\n        {},\n        \"a\", \"aa\",\n        false, false, null, null, true, true\n    ]).sort();\n    options.data = options.data.sort(local.sortCompare);\n    local.assertJsonEqual(options.data.slice(0, -3), [\n        null, null,\n        false, false, true, true,\n        -Infinity, -1, 0, 0, 1, Infinity,\n        \"\", \"a\", \"aa\"\n    ]);\n    options.data = options.data.reverse().sort(local.sortCompare);\n    local.assertJsonEqual(options.data.slice(0, -3), [\n        null, null,\n        false, false, true, true,\n        -Infinity, -1, 0, 0, 1, Infinity,\n        \"\", \"a\", \"aa\"\n    ]);\n    // coverage-hack\n    options.data.forEach(function (aa) {\n        [{}, null, Symbol()].forEach(function (bb) {\n            local.sortCompare(aa, bb);\n            local.sortCompare(bb, aa);\n        });\n    });\n    onError();\n};\n\nlocal.testCase_storageXxx_misc = function (options, onError) {\n/*\n * this function will test storageXxx's misc handling-behavior\n */\n    var onParallel;\n    // jslint-hack\n    local.nop(options);\n    onParallel = local.onParallel(onError);\n    onParallel.counter += 1;\n    // test storageInit's init handling-behavior\n    local.storageInit();\n    // test storageInit's re-init handling-behavior\n    local.storageInit();\n    // test crud handling-behavior\n    onParallel.counter += 1;\n    local.storageClear(onParallel);\n    onParallel.counter += 1;\n    local.storageGetItem(\"undefined\", onParallel);\n    onParallel.counter += 1;\n    local.storageKeys(onParallel);\n    onParallel.counter += 1;\n    local.storageLength(onParallel);\n    onParallel.counter += 1;\n    local.storageRemoveItem(\"undefined\", onParallel);\n    onParallel.counter += 1;\n    local.storageSetItem(\"undefined\", \"undefined\", onParallel);\n    //!! onParallel.counter += 1;\n    //!! local.storageKeys(function () {\n        //!! if (local.isBrowser) {\n            //!! // test indexedDB's onupgradeneeded handling-behavior\n            //!! local._debugStorageRequestIndexedDB.onupgradeneeded();\n        //!! }\n        //!! onParallel();\n    //!! });\n    onParallel();\n};\n}());\n\n\n\n}());\n",
            "/assets.utility2.base.html": "<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<!-- \"assets.utility2.template.html\" -->\n<title>db-lite (2018.12.30)</title>\n<style>\n/* jslint utility2:true */\n/*csslint\n*/\n/* csslint ignore:start */\n*,\n*:after,\n*:before {\n    box-sizing: border-box;\n}\n/* csslint ignore:end */\n@keyframes uiAnimateShake {\n    0%, 50% {\n        transform: translateX(10px);\n    }\n    25%, 75% {\n        transform: translateX(-10px);\n    }\n    100% {\n        transform: translateX(0);\n    }\n}\n@keyframes uiAnimateSpin {\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(360deg);\n    }\n}\na {\n    overflow-wrap: break-word;\n}\nbody {\n    background: #eef;\n    font-family: Arial, Helvetica, sans-serif;\n    margin: 0 40px;\n}\nbody > div,\nbody > form > div,\nbody > form > input,\nbody > form > pre,\nbody > form > textarea,\nbody > form > .button,\nbody > input,\nbody > pre,\nbody > textarea,\nbody > .button {\n    margin-bottom: 20px;\n}\nbody > form > input,\nbody > form > .button,\nbody > input,\nbody > .button {\n    width: 20rem;\n}\nbody > form > textarea,\nbody > textarea {\n    height: 10rem;\n    width: 100%;\n}\nbody > textarea[readonly] {\n    background: #ddd;\n}\ncode,\npre,\ntextarea {\n    font-family: Consolas, Menlo, monospace;\n    font-size: small;\n}\npre {\n    overflow-wrap: break-word;\n    white-space: pre-wrap;\n}\ntextarea {\n    overflow: auto;\n    white-space: pre;\n}\n.button {\n    background-color: #fff;\n    border: 1px solid;\n    border-bottom-color: rgb(186, 186, 186);\n    border-left-color: rgb(209, 209, 209);\n    border-radius: 4px;\n    border-right-color: rgb(209, 209, 209);\n    border-top-color: rgb(216, 216, 216);\n    color: #00d;\n    cursor: pointer;\n    display: inline-block;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: normal;\n    margin: 0;\n    padding: 2px 7px 3px 7px;\n    text-align: center;\n    text-decoration: underline;\n}\n.colorError {\n    color: #d00;\n}\n.uiAnimateShake {\n    animation-duration: 500ms;\n    animation-name: uiAnimateShake;\n}\n.uiAnimateSlide {\n    overflow-y: hidden;\n    transition: max-height ease-in 250ms, min-height ease-in 250ms, padding-bottom ease-in 250ms, padding-top ease-in 250ms;\n}\n.utility2FooterDiv {\n    text-align: center;\n}\n.zeroPixel {\n    border: 0;\n    height: 0;\n    margin: 0;\n    padding: 0;\n    width: 0;\n}\n</style>\n</head>\n<body>\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 500ms, width 1500ms; width: 0%; z-index: 1;\"></div>\n<div class=\"uiAnimateSpin\" style=\"animation: uiAnimateSpin 2s linear infinite; border: 5px solid #999; border-radius: 50%; border-top: 5px solid #7d7; display: none; height: 25px; vertical-align: middle; width: 25px;\"></div>\n<a class=\"zeroPixel\" download=\"db.persistence.json\" href=\"\" id=\"dbExportA1\"></a>\n<input class=\"zeroPixel\" id=\"dbImportInput1\" type=\"file\">\n<script>\n/* jslint utility2:true */\n// init domOnEventWindowOnloadTimeElapsed\n(function () {\n/*\n * this function will measure and print the time-elapsed for window.onload\n */\n    \"use strict\";\n    if (window.domOnEventWindowOnloadTimeElapsed) {\n        return;\n    }\n    window.domOnEventWindowOnloadTimeElapsed = Date.now() + 100;\n    window.addEventListener(\"load\", function () {\n        setTimeout(function () {\n            window.domOnEventWindowOnloadTimeElapsed = (\n                Date.now()\n                - window.domOnEventWindowOnloadTimeElapsed\n            );\n            console.error(\n                \"domOnEventWindowOnloadTimeElapsed = \"\n                + window.domOnEventWindowOnloadTimeElapsed\n            );\n        }, 100);\n    });\n}());\n\n\n\n// init timerIntervalAjaxProgressUpdate\n(function () {\n/*\n * this function will increment the ajax-progress-bar\n * until the webpage has loaded\n */\n    \"use strict\";\n    var ajaxProgressDiv1;\n    var ajaxProgressState;\n    var ajaxProgressUpdate;\n    if (\n        window.timerIntervalAjaxProgressUpdate\n        || !document.querySelector(\n            \"#ajaxProgressDiv1\"\n        )\n    ) {\n        return;\n    }\n    ajaxProgressDiv1 = document.querySelector(\n        \"#ajaxProgressDiv1\"\n    );\n    setTimeout(function () {\n        ajaxProgressDiv1.style.width = \"25%\";\n    });\n    ajaxProgressState = 0;\n    ajaxProgressUpdate = (\n        window.local\n        && window.local.ajaxProgressUpdate\n    ) || function () {\n        ajaxProgressDiv1.style.width = \"100%\";\n        setTimeout(function () {\n            ajaxProgressDiv1.style.background = \"transparent\";\n            setTimeout(function () {\n                ajaxProgressDiv1.style.width = \"0%\";\n            }, 500);\n        }, 1000);\n    };\n    window.timerIntervalAjaxProgressUpdate = setInterval(function () {\n        ajaxProgressState += 1;\n        ajaxProgressDiv1.style.width = Math.max(\n            100 - 75 * Math.exp(-0.125 * ajaxProgressState),\n            ajaxProgressDiv1.style.width.slice(0, -1) | 0\n        ) + \"%\";\n    }, 1000);\n    window.addEventListener(\"load\", function () {\n        clearInterval(window.timerIntervalAjaxProgressUpdate);\n        ajaxProgressUpdate();\n    });\n}());\n\n\n\n// init domOnEventSelectAllWithinPre\n(function () {\n/*\n * this function will limit select-all within <pre tabIndex=\"0\"> elements\n * https://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse\n */\n    \"use strict\";\n    if (window.domOnEventSelectAllWithinPre) {\n        return;\n    }\n    window.domOnEventSelectAllWithinPre = function (event) {\n        var range;\n        var selection;\n        if (\n            event\n            && event.key === \"a\"\n            && (event.ctrlKey || event.metaKey)\n            && event.target.closest(\"pre\")\n        ) {\n            range = document.createRange();\n            range.selectNodeContents(event.target.closest(\"pre\"));\n            selection = window.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            event.preventDefault();\n        }\n    };\n    // init event-handling\n    document.addEventListener(\n        \"keydown\",\n        window.domOnEventSelectAllWithinPre\n    );\n}());\n</script>\n<h1>\n\n    <a\n        \n        href=\"https://github.com/kaizhu256/node-db-lite\"\n        \n        target=\"_blank\"\n    >\n\n        db-lite (2018.12.30)\n\n    </a>\n\n</h1>\n<h3>this zero-dependency package will provide a persistent, in-browser database, with a working web-demo</h3>\n\n<a class=\"button\" download href=\"assets.app.js\">download standalone app</a><br>\n<button class=\"button eventDelegateClick onreset\" data-onevent=\"testRunBrowser\" id=\"testRunButton1\">run internal test</button><br>\n<div class=\"uiAnimateSlide\" id=\"testReportDiv1\" style=\"border-bottom: 0; border-top: 0; margin-bottom: 0; margin-top: 0; max-height: 0; padding-bottom: 0; padding-top: 0;\"></div>\n\n\n\n\n<label>stderr and stdout</label>\n<textarea class=\"resettable\" id=\"outputStdoutTextarea1\" readonly></textarea>\n\n\n<script src=\"assets.app.js\"></script>\n\n\n<div class=\"utility2FooterDiv\">\n    [ this app was created with\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\n    ]\n</div>\n</body>\n</html>\n",
            "/index.rollup.html": "<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<!-- \"assets.utility2.template.html\" -->\n<title>db-lite (2018.12.30)</title>\n<style>\n/* jslint utility2:true */\n/*csslint\n*/\n/* csslint ignore:start */\n*,\n*:after,\n*:before {\n    box-sizing: border-box;\n}\n/* csslint ignore:end */\n@keyframes uiAnimateShake {\n    0%, 50% {\n        transform: translateX(10px);\n    }\n    25%, 75% {\n        transform: translateX(-10px);\n    }\n    100% {\n        transform: translateX(0);\n    }\n}\n@keyframes uiAnimateSpin {\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(360deg);\n    }\n}\na {\n    overflow-wrap: break-word;\n}\nbody {\n    background: #eef;\n    font-family: Arial, Helvetica, sans-serif;\n    margin: 0 40px;\n}\nbody > div,\nbody > form > div,\nbody > form > input,\nbody > form > pre,\nbody > form > textarea,\nbody > form > .button,\nbody > input,\nbody > pre,\nbody > textarea,\nbody > .button {\n    margin-bottom: 20px;\n}\nbody > form > input,\nbody > form > .button,\nbody > input,\nbody > .button {\n    width: 20rem;\n}\nbody > form > textarea,\nbody > textarea {\n    height: 10rem;\n    width: 100%;\n}\nbody > textarea[readonly] {\n    background: #ddd;\n}\ncode,\npre,\ntextarea {\n    font-family: Consolas, Menlo, monospace;\n    font-size: small;\n}\npre {\n    overflow-wrap: break-word;\n    white-space: pre-wrap;\n}\ntextarea {\n    overflow: auto;\n    white-space: pre;\n}\n.button {\n    background-color: #fff;\n    border: 1px solid;\n    border-bottom-color: rgb(186, 186, 186);\n    border-left-color: rgb(209, 209, 209);\n    border-radius: 4px;\n    border-right-color: rgb(209, 209, 209);\n    border-top-color: rgb(216, 216, 216);\n    color: #00d;\n    cursor: pointer;\n    display: inline-block;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: normal;\n    margin: 0;\n    padding: 2px 7px 3px 7px;\n    text-align: center;\n    text-decoration: underline;\n}\n.colorError {\n    color: #d00;\n}\n.uiAnimateShake {\n    animation-duration: 500ms;\n    animation-name: uiAnimateShake;\n}\n.uiAnimateSlide {\n    overflow-y: hidden;\n    transition: max-height ease-in 250ms, min-height ease-in 250ms, padding-bottom ease-in 250ms, padding-top ease-in 250ms;\n}\n.utility2FooterDiv {\n    text-align: center;\n}\n.zeroPixel {\n    border: 0;\n    height: 0;\n    margin: 0;\n    padding: 0;\n    width: 0;\n}\n</style>\n</head>\n<body>\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 500ms, width 1500ms; width: 0%; z-index: 1;\"></div>\n<div class=\"uiAnimateSpin\" style=\"animation: uiAnimateSpin 2s linear infinite; border: 5px solid #999; border-radius: 50%; border-top: 5px solid #7d7; display: none; height: 25px; vertical-align: middle; width: 25px;\"></div>\n<a class=\"zeroPixel\" download=\"db.persistence.json\" href=\"\" id=\"dbExportA1\"></a>\n<input class=\"zeroPixel\" id=\"dbImportInput1\" type=\"file\">\n<script>\n/* jslint utility2:true */\n// init domOnEventWindowOnloadTimeElapsed\n(function () {\n/*\n * this function will measure and print the time-elapsed for window.onload\n */\n    \"use strict\";\n    if (window.domOnEventWindowOnloadTimeElapsed) {\n        return;\n    }\n    window.domOnEventWindowOnloadTimeElapsed = Date.now() + 100;\n    window.addEventListener(\"load\", function () {\n        setTimeout(function () {\n            window.domOnEventWindowOnloadTimeElapsed = (\n                Date.now()\n                - window.domOnEventWindowOnloadTimeElapsed\n            );\n            console.error(\n                \"domOnEventWindowOnloadTimeElapsed = \"\n                + window.domOnEventWindowOnloadTimeElapsed\n            );\n        }, 100);\n    });\n}());\n\n\n\n// init timerIntervalAjaxProgressUpdate\n(function () {\n/*\n * this function will increment the ajax-progress-bar\n * until the webpage has loaded\n */\n    \"use strict\";\n    var ajaxProgressDiv1;\n    var ajaxProgressState;\n    var ajaxProgressUpdate;\n    if (\n        window.timerIntervalAjaxProgressUpdate\n        || !document.querySelector(\n            \"#ajaxProgressDiv1\"\n        )\n    ) {\n        return;\n    }\n    ajaxProgressDiv1 = document.querySelector(\n        \"#ajaxProgressDiv1\"\n    );\n    setTimeout(function () {\n        ajaxProgressDiv1.style.width = \"25%\";\n    });\n    ajaxProgressState = 0;\n    ajaxProgressUpdate = (\n        window.local\n        && window.local.ajaxProgressUpdate\n    ) || function () {\n        ajaxProgressDiv1.style.width = \"100%\";\n        setTimeout(function () {\n            ajaxProgressDiv1.style.background = \"transparent\";\n            setTimeout(function () {\n                ajaxProgressDiv1.style.width = \"0%\";\n            }, 500);\n        }, 1000);\n    };\n    window.timerIntervalAjaxProgressUpdate = setInterval(function () {\n        ajaxProgressState += 1;\n        ajaxProgressDiv1.style.width = Math.max(\n            100 - 75 * Math.exp(-0.125 * ajaxProgressState),\n            ajaxProgressDiv1.style.width.slice(0, -1) | 0\n        ) + \"%\";\n    }, 1000);\n    window.addEventListener(\"load\", function () {\n        clearInterval(window.timerIntervalAjaxProgressUpdate);\n        ajaxProgressUpdate();\n    });\n}());\n\n\n\n// init domOnEventSelectAllWithinPre\n(function () {\n/*\n * this function will limit select-all within <pre tabIndex=\"0\"> elements\n * https://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse\n */\n    \"use strict\";\n    if (window.domOnEventSelectAllWithinPre) {\n        return;\n    }\n    window.domOnEventSelectAllWithinPre = function (event) {\n        var range;\n        var selection;\n        if (\n            event\n            && event.key === \"a\"\n            && (event.ctrlKey || event.metaKey)\n            && event.target.closest(\"pre\")\n        ) {\n            range = document.createRange();\n            range.selectNodeContents(event.target.closest(\"pre\"));\n            selection = window.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            event.preventDefault();\n        }\n    };\n    // init event-handling\n    document.addEventListener(\n        \"keydown\",\n        window.domOnEventSelectAllWithinPre\n    );\n}());\n</script>\n<h1>\n\n    <a\n        \n        href=\"https://github.com/kaizhu256/node-db-lite\"\n        \n        target=\"_blank\"\n    >\n\n        db-lite (2018.12.30)\n\n    </a>\n\n</h1>\n<h3>this zero-dependency package will provide a persistent, in-browser database, with a working web-demo</h3>\n\n<a class=\"button\" download href=\"assets.app.js\">download standalone app</a><br>\n<button class=\"button eventDelegateClick onreset\" data-onevent=\"testRunBrowser\" id=\"testRunButton1\">run internal test</button><br>\n<div class=\"uiAnimateSlide\" id=\"testReportDiv1\" style=\"border-bottom: 0; border-top: 0; margin-bottom: 0; margin-top: 0; max-height: 0; padding-bottom: 0; padding-top: 0;\"></div>\n\n\n\n\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbResetButton1\" id=\"dbResetButton1\">\n    reset database\n</button><br>\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbExportButton1\" id=\"dbExportButton1\">\n    export database -&gt; file\n</button><br>\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbImportButton1\" id=\"dbImportButton1\">\n    import database &lt;- file\n</button><br>\n<label>edit or paste script below to\n    <a\n        href=\"https://kaizhu256.github.io/node-db-lite/build..beta..travis-ci.org/apidoc.html\"\n        target=\"_blank\"\n    >eval</a>\n</label>\n<textarea id=\"inputTextareaEval1\">\n/*jslint browser: true, node: true*/\n\"use strict\";\nvar dbTable1, modeNext, onNext;\nmodeNext = 0;\nonNext = function (error, data) {\n    modeNext = error\n        ? Infinity\n        : modeNext + 1;\n    switch (modeNext) {\n    case 1:\n        dbTable1 = window.dbTable1 = window.utility2_db.dbTableCreateOne({\n            name: \"dbTable1\"\n        }, onNext);\n        break;\n    case 2:\n        dbTable1.idIndexCreate({ name: \"field1\" }, onNext);\n        break;\n    case 3:\n        dbTable1.crudSetOneById({ field1: \"aa\", field2: 1, field3: \"foo\" }, onNext);\n        break;\n    case 4:\n        dbTable1.crudSetOneById({ field1: \"bb\", field2: 2, field3: \"bar\" }, onNext);\n        break;\n    case 5:\n        dbTable1.crudSetOneById({ field1: \"cc\", field2: 3, field3: \"baz\" }, onNext);\n        break;\n    case 6:\n        dbTable1.crudRemoveOneById({ field1: \"aa\" }, onNext);\n        break;\n    case 7:\n        dbTable1.crudUpdateOneById({ field1: \"bb\", field2: -1 }, onNext);\n        break;\n    case 8:\n        dbTable1.crudSetOneById({ field2: Math.random() }, onNext);\n        break;\n    case 9:\n        dbTable1.crudGetManyByQuery({\n            limit: Infinity,\n            query: { field2: { $gte: -Infinity, $lte: Infinity } },\n            skip: 0,\n            sort: [{ fieldName: \"_timeUpdated\", idDescending: true }]\n        }, onNext);\n        break;\n    case 10:\n        console.error(data);\n        dbTable1.crudCountAll(onNext);\n        break;\n    case 11:\n        console.error(\"number of rows: \" + data);\n        break;\n    default:\n        console.error(error.stack);\n    }\n};\nonNext();\n</textarea>\n<button class=\"button eventDelegateClick oneval onreset\" data-onevent=\"testRunBrowser\" id=\"dbEvalButton1\">eval script</button><br>\n<label>stderr and stdout</label>\n<textarea class=\"resettable\" id=\"outputStdoutTextarea1\" readonly></textarea>\n\n\n<script src=\"assets.app.js\"></script>\n\n\n<div class=\"utility2FooterDiv\">\n    [ this app was created with\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\n    ]\n</div>\n</body>\n</html>\n",
            "/": "<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<!-- \"assets.utility2.template.html\" -->\n<title>db-lite (2018.12.30)</title>\n<style>\n/* jslint utility2:true */\n/*csslint\n*/\n/* csslint ignore:start */\n*,\n*:after,\n*:before {\n    box-sizing: border-box;\n}\n/* csslint ignore:end */\n@keyframes uiAnimateShake {\n    0%, 50% {\n        transform: translateX(10px);\n    }\n    25%, 75% {\n        transform: translateX(-10px);\n    }\n    100% {\n        transform: translateX(0);\n    }\n}\n@keyframes uiAnimateSpin {\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(360deg);\n    }\n}\na {\n    overflow-wrap: break-word;\n}\nbody {\n    background: #eef;\n    font-family: Arial, Helvetica, sans-serif;\n    margin: 0 40px;\n}\nbody > div,\nbody > form > div,\nbody > form > input,\nbody > form > pre,\nbody > form > textarea,\nbody > form > .button,\nbody > input,\nbody > pre,\nbody > textarea,\nbody > .button {\n    margin-bottom: 20px;\n}\nbody > form > input,\nbody > form > .button,\nbody > input,\nbody > .button {\n    width: 20rem;\n}\nbody > form > textarea,\nbody > textarea {\n    height: 10rem;\n    width: 100%;\n}\nbody > textarea[readonly] {\n    background: #ddd;\n}\ncode,\npre,\ntextarea {\n    font-family: Consolas, Menlo, monospace;\n    font-size: small;\n}\npre {\n    overflow-wrap: break-word;\n    white-space: pre-wrap;\n}\ntextarea {\n    overflow: auto;\n    white-space: pre;\n}\n.button {\n    background-color: #fff;\n    border: 1px solid;\n    border-bottom-color: rgb(186, 186, 186);\n    border-left-color: rgb(209, 209, 209);\n    border-radius: 4px;\n    border-right-color: rgb(209, 209, 209);\n    border-top-color: rgb(216, 216, 216);\n    color: #00d;\n    cursor: pointer;\n    display: inline-block;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: normal;\n    margin: 0;\n    padding: 2px 7px 3px 7px;\n    text-align: center;\n    text-decoration: underline;\n}\n.colorError {\n    color: #d00;\n}\n.uiAnimateShake {\n    animation-duration: 500ms;\n    animation-name: uiAnimateShake;\n}\n.uiAnimateSlide {\n    overflow-y: hidden;\n    transition: max-height ease-in 250ms, min-height ease-in 250ms, padding-bottom ease-in 250ms, padding-top ease-in 250ms;\n}\n.utility2FooterDiv {\n    text-align: center;\n}\n.zeroPixel {\n    border: 0;\n    height: 0;\n    margin: 0;\n    padding: 0;\n    width: 0;\n}\n</style>\n</head>\n<body>\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 500ms, width 1500ms; width: 0%; z-index: 1;\"></div>\n<div class=\"uiAnimateSpin\" style=\"animation: uiAnimateSpin 2s linear infinite; border: 5px solid #999; border-radius: 50%; border-top: 5px solid #7d7; display: none; height: 25px; vertical-align: middle; width: 25px;\"></div>\n<a class=\"zeroPixel\" download=\"db.persistence.json\" href=\"\" id=\"dbExportA1\"></a>\n<input class=\"zeroPixel\" id=\"dbImportInput1\" type=\"file\">\n<script>\n/* jslint utility2:true */\n// init domOnEventWindowOnloadTimeElapsed\n(function () {\n/*\n * this function will measure and print the time-elapsed for window.onload\n */\n    \"use strict\";\n    if (window.domOnEventWindowOnloadTimeElapsed) {\n        return;\n    }\n    window.domOnEventWindowOnloadTimeElapsed = Date.now() + 100;\n    window.addEventListener(\"load\", function () {\n        setTimeout(function () {\n            window.domOnEventWindowOnloadTimeElapsed = (\n                Date.now()\n                - window.domOnEventWindowOnloadTimeElapsed\n            );\n            console.error(\n                \"domOnEventWindowOnloadTimeElapsed = \"\n                + window.domOnEventWindowOnloadTimeElapsed\n            );\n        }, 100);\n    });\n}());\n\n\n\n// init timerIntervalAjaxProgressUpdate\n(function () {\n/*\n * this function will increment the ajax-progress-bar\n * until the webpage has loaded\n */\n    \"use strict\";\n    var ajaxProgressDiv1;\n    var ajaxProgressState;\n    var ajaxProgressUpdate;\n    if (\n        window.timerIntervalAjaxProgressUpdate\n        || !document.querySelector(\n            \"#ajaxProgressDiv1\"\n        )\n    ) {\n        return;\n    }\n    ajaxProgressDiv1 = document.querySelector(\n        \"#ajaxProgressDiv1\"\n    );\n    setTimeout(function () {\n        ajaxProgressDiv1.style.width = \"25%\";\n    });\n    ajaxProgressState = 0;\n    ajaxProgressUpdate = (\n        window.local\n        && window.local.ajaxProgressUpdate\n    ) || function () {\n        ajaxProgressDiv1.style.width = \"100%\";\n        setTimeout(function () {\n            ajaxProgressDiv1.style.background = \"transparent\";\n            setTimeout(function () {\n                ajaxProgressDiv1.style.width = \"0%\";\n            }, 500);\n        }, 1000);\n    };\n    window.timerIntervalAjaxProgressUpdate = setInterval(function () {\n        ajaxProgressState += 1;\n        ajaxProgressDiv1.style.width = Math.max(\n            100 - 75 * Math.exp(-0.125 * ajaxProgressState),\n            ajaxProgressDiv1.style.width.slice(0, -1) | 0\n        ) + \"%\";\n    }, 1000);\n    window.addEventListener(\"load\", function () {\n        clearInterval(window.timerIntervalAjaxProgressUpdate);\n        ajaxProgressUpdate();\n    });\n}());\n\n\n\n// init domOnEventSelectAllWithinPre\n(function () {\n/*\n * this function will limit select-all within <pre tabIndex=\"0\"> elements\n * https://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse\n */\n    \"use strict\";\n    if (window.domOnEventSelectAllWithinPre) {\n        return;\n    }\n    window.domOnEventSelectAllWithinPre = function (event) {\n        var range;\n        var selection;\n        if (\n            event\n            && event.key === \"a\"\n            && (event.ctrlKey || event.metaKey)\n            && event.target.closest(\"pre\")\n        ) {\n            range = document.createRange();\n            range.selectNodeContents(event.target.closest(\"pre\"));\n            selection = window.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            event.preventDefault();\n        }\n    };\n    // init event-handling\n    document.addEventListener(\n        \"keydown\",\n        window.domOnEventSelectAllWithinPre\n    );\n}());\n</script>\n<h1>\n\n    <a\n        \n        href=\"https://github.com/kaizhu256/node-db-lite\"\n        \n        target=\"_blank\"\n    >\n\n        db-lite (2018.12.30)\n\n    </a>\n\n</h1>\n<h3>this zero-dependency package will provide a persistent, in-browser database, with a working web-demo</h3>\n\n<a class=\"button\" download href=\"assets.app.js\">download standalone app</a><br>\n<button class=\"button eventDelegateClick onreset\" data-onevent=\"testRunBrowser\" id=\"testRunButton1\">run internal test</button><br>\n<div class=\"uiAnimateSlide\" id=\"testReportDiv1\" style=\"border-bottom: 0; border-top: 0; margin-bottom: 0; margin-top: 0; max-height: 0; padding-bottom: 0; padding-top: 0;\"></div>\n\n\n\n\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbResetButton1\" id=\"dbResetButton1\">\n    reset database\n</button><br>\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbExportButton1\" id=\"dbExportButton1\">\n    export database -&gt; file\n</button><br>\n<button class=\"button eventDelegateClick\" data-onevent=\"testRunBrowser\" data-on-event-dom-db=\"dbImportButton1\" id=\"dbImportButton1\">\n    import database &lt;- file\n</button><br>\n<label>edit or paste script below to\n    <a\n        href=\"https://kaizhu256.github.io/node-db-lite/build..beta..travis-ci.org/apidoc.html\"\n        target=\"_blank\"\n    >eval</a>\n</label>\n<textarea id=\"inputTextareaEval1\">\n/*jslint browser: true, node: true*/\n\"use strict\";\nvar dbTable1, modeNext, onNext;\nmodeNext = 0;\nonNext = function (error, data) {\n    modeNext = error\n        ? Infinity\n        : modeNext + 1;\n    switch (modeNext) {\n    case 1:\n        dbTable1 = window.dbTable1 = window.utility2_db.dbTableCreateOne({\n            name: \"dbTable1\"\n        }, onNext);\n        break;\n    case 2:\n        dbTable1.idIndexCreate({ name: \"field1\" }, onNext);\n        break;\n    case 3:\n        dbTable1.crudSetOneById({ field1: \"aa\", field2: 1, field3: \"foo\" }, onNext);\n        break;\n    case 4:\n        dbTable1.crudSetOneById({ field1: \"bb\", field2: 2, field3: \"bar\" }, onNext);\n        break;\n    case 5:\n        dbTable1.crudSetOneById({ field1: \"cc\", field2: 3, field3: \"baz\" }, onNext);\n        break;\n    case 6:\n        dbTable1.crudRemoveOneById({ field1: \"aa\" }, onNext);\n        break;\n    case 7:\n        dbTable1.crudUpdateOneById({ field1: \"bb\", field2: -1 }, onNext);\n        break;\n    case 8:\n        dbTable1.crudSetOneById({ field2: Math.random() }, onNext);\n        break;\n    case 9:\n        dbTable1.crudGetManyByQuery({\n            limit: Infinity,\n            query: { field2: { $gte: -Infinity, $lte: Infinity } },\n            skip: 0,\n            sort: [{ fieldName: \"_timeUpdated\", idDescending: true }]\n        }, onNext);\n        break;\n    case 10:\n        console.error(data);\n        dbTable1.crudCountAll(onNext);\n        break;\n    case 11:\n        console.error(\"number of rows: \" + data);\n        break;\n    default:\n        console.error(error.stack);\n    }\n};\nonNext();\n</textarea>\n<button class=\"button eventDelegateClick oneval onreset\" data-onevent=\"testRunBrowser\" id=\"dbEvalButton1\">eval script</button><br>\n<label>stderr and stdout</label>\n<textarea class=\"resettable\" id=\"outputStdoutTextarea1\" readonly></textarea>\n\n\n\n<script src=\"assets.utility2.rollup.js\"></script>\n<script>window.utility2_onReadyBefore.counter += 1;</script>\n<script src=\"jsonp.utility2.stateInit?callback=window.utility2.stateInit\"></script>\n<script src=\"assets.db.js\"></script>\n<script src=\"assets.example.js\"></script>\n<script src=\"assets.test.js\"></script>\n<script>window.utility2_onReadyBefore();</script>\n\n\n\n<div class=\"utility2FooterDiv\">\n    [ this app was created with\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\n    ]\n</div>\n</body>\n</html>\n"
        },
        "env": {
            "NODE_ENV": "test",
            "npm_package_description": "this zero-dependency package will provide a persistent, in-browser database, with a working web-demo",
            "npm_package_homepage": "https://github.com/kaizhu256/node-db-lite",
            "npm_package_name": "db-lite",
            "npm_package_nameLib": "db",
            "npm_package_version": "2018.12.30"
        }
    }
});
/* jslint ignore:end */
    return local;
}(globalThis.utility2_rollup));
/* script-end local.stateInit */



/* script-begin /assets.my_app.js */
(function (local) {
    "use strict";
/* jslint ignore:start */
local.assetsDict["/assets.db.js"] = "// usr/bin/env node\n\
/*\n\
 * lib.db.js (2018.12.30)\n\
 * https://github.com/kaizhu256/node-db-lite\n\
 * this zero-dependency package will provide a persistent, in-browser database, with a working web-demo\n\
 *\n\
 * browser example:\n\
 *     <script src=\"assets.db-lite.js\"></script>\n\
 *     <script>\n\
 *     var dbTable1;\n\
 *     dbTable1 = window.dbTable1 = window.utility2_db.dbTableCreateOne({ name: \"dbTable1\" });\n\
 *     dbTable1.idIndexCreate({ name: \"field1\" });\n\
 *     dbTable1.crudSetOneById({ field1: \"hello\", field2: \"world\" });\n\
 *     console.log(dbTable1.crudGetManyByQuery({\n\
 *         limit: Infinity,\n\
 *         query: { field1: \"hello\" },\n\
 *         skip: 0,\n\
 *         sort: [{ fieldName: 'field1', isDescending: false }]\n\
 *     }));\n\
 *     </script>\n\
 *\n\
 * node example:\n\
 *     var db, dbTable1;\n\
 *     utility2_db = require(\"./assets.db-lite.js\");\n\
 *     dbTable1 = global.dbTable1 = utility2_db.dbTableCreateOne({ name: \"dbTable1\" });\n\
 *     dbTable1.idIndexCreate({ name: \"field1\" });\n\
 *     dbTable1.crudSetOneById({ field1: \"hello\", field2: \"world\" });\n\
 *     console.log(dbTable1.crudGetManyByQuery({\n\
 *         limit: Infinity,\n\
 *         query: { field1: \"hello\" },\n\
 *         skip: 0,\n\
 *         sort: [{ fieldName: 'field1', isDescending: false }]\n\
 *     }));\n\
 */\n\
\n\
\n\
\n\
/* istanbul instrument in package db */\n\
/* istanbul ignore next */\n\
/* jslint utility2:true */\n\
(function (globalThis) {\n\
    \"use strict\";\n\
    var consoleError;\n\
    var local;\n\
    // init globalThis\n\
    (function () {\n\
        try {\n\
            globalThis = Function(\"return this\")(); // jslint ignore:line\n\
        } catch (ignore) {}\n\
    }());\n\
    globalThis.globalThis = globalThis;\n\
    // init debug_inline\n\
    if (!globalThis[\"debug\\u0049nline\"]) {\n\
        consoleError = console.error;\n\
        globalThis[\"debug\\u0049nline\"] = function () {\n\
        /*\n\
         * this function will both print <arguments> to stderr\n\
         * and return <arguments>[0]\n\
         */\n\
            var argList;\n\
            argList = Array.from(arguments); // jslint ignore:line\n\
            // debug arguments\n\
            globalThis[\"debug\\u0049nlineArguments\"] = argList;\n\
            consoleError(\"\\n\\ndebug\\u0049nline\");\n\
            consoleError.apply(console, argList);\n\
            consoleError(\"\\n\");\n\
            // return arg0 for inspection\n\
            return argList[0];\n\
        };\n\
    }\n\
    // init local\n\
    local = {};\n\
    local.local = local;\n\
    globalThis.globalLocal = local;\n\
    // init isBrowser\n\
    local.isBrowser = (\n\
        typeof window === \"object\"\n\
        && window === globalThis\n\
        && typeof window.XMLHttpRequest === \"function\"\n\
        && window.document\n\
        && typeof window.document.querySelector === \"function\"\n\
    );\n\
    // init function\n\
    local.assertThrow = function (passed, message) {\n\
    /*\n\
     * this function will throw the error <message> if <passed> is falsy\n\
     */\n\
        var error;\n\
        if (passed) {\n\
            return;\n\
        }\n\
        error = (\n\
            // ternary-condition\n\
            (\n\
                message\n\
                && typeof message.message === \"string\"\n\
                && typeof message.stack === \"string\"\n\
            )\n\
            // if message is an error-object, then leave it as is\n\
            ? message\n\
            : new Error(\n\
                typeof message === \"string\"\n\
                // if message is a string, then leave it as is\n\
                ? message\n\
                // else JSON.stringify message\n\
                : JSON.stringify(message, null, 4)\n\
            )\n\
        );\n\
        throw error;\n\
    };\n\
    local.functionOrNop = function (fnc) {\n\
    /*\n\
     * this function will if <fnc> exists,\n\
     * them return <fnc>,\n\
     * else return <nop>\n\
     */\n\
        return fnc || local.nop;\n\
    };\n\
    local.identity = function (value) {\n\
    /*\n\
     * this function will return <value>\n\
     */\n\
        return value;\n\
    };\n\
    local.nop = function () {\n\
    /*\n\
     * this function will do nothing\n\
     */\n\
        return;\n\
    };\n\
    local.objectAssignDefault = function (target, source) {\n\
    /*\n\
     * this function will if items from <target> are\n\
     * null, undefined, or empty-string,\n\
     * then overwrite them with items from <source>\n\
     */\n\
        Object.keys(source).forEach(function (key) {\n\
            if (\n\
                target[key] === null\n\
                || target[key] === undefined\n\
                || target[key] === \"\"\n\
            ) {\n\
                target[key] = target[key] || source[key];\n\
            }\n\
        });\n\
    };\n\
    // require builtin\n\
    if (!local.isBrowser) {\n\
        local.assert = require(\"assert\");\n\
        local.buffer = require(\"buffer\");\n\
        local.child_process = require(\"child_process\");\n\
        local.cluster = require(\"cluster\");\n\
        local.crypto = require(\"crypto\");\n\
        local.dgram = require(\"dgram\");\n\
        local.dns = require(\"dns\");\n\
        local.domain = require(\"domain\");\n\
        local.events = require(\"events\");\n\
        local.fs = require(\"fs\");\n\
        local.http = require(\"http\");\n\
        local.https = require(\"https\");\n\
        local.net = require(\"net\");\n\
        local.os = require(\"os\");\n\
        local.path = require(\"path\");\n\
        local.querystring = require(\"querystring\");\n\
        local.readline = require(\"readline\");\n\
        local.repl = require(\"repl\");\n\
        local.stream = require(\"stream\");\n\
        local.string_decoder = require(\"string_decoder\");\n\
        local.timers = require(\"timers\");\n\
        local.tls = require(\"tls\");\n\
        local.tty = require(\"tty\");\n\
        local.url = require(\"url\");\n\
        local.util = require(\"util\");\n\
        local.vm = require(\"vm\");\n\
        local.zlib = require(\"zlib\");\n\
    }\n\
}(this));\n\
\n\
\n\
\n\
(function (local) {\n\
\"use strict\";\n\
\n\
\n\
\n\
/* istanbul ignore next */\n\
// run shared js-env code - init-before\n\
(function () {\n\
// init local\n\
local = (\n\
    globalThis.utility2_rollup\n\
    // || globalThis.utility2_rollup_old\n\
    // || require(\"./assets.utility2.rollup.js\")\n\
    || globalThis.globalLocal\n\
);\n\
// init exports\n\
if (local.isBrowser) {\n\
    globalThis.utility2_db = local;\n\
} else {\n\
    module.exports = local;\n\
    module.exports.__dirname = __dirname;\n\
}\n\
// init lib main\n\
local.db = local;\n\
\n\
\n\
\n\
/* validateLineSortedReset */\n\
local.cliRun = function (option) {\n\
/*\n\
 * this function will run the cli\n\
 */\n\
    local.cliDict._eval = local.cliDict._eval || function () {\n\
    /*\n\
     * <code>\n\
     * will eval <code>\n\
     */\n\
        globalThis.local = local;\n\
        local.vm.runInThisContext(process.argv[3]);\n\
    };\n\
    local.cliDict[\"--eval\"] = local.cliDict[\"--eval\"] || local.cliDict._eval;\n\
    local.cliDict[\"-e\"] = local.cliDict[\"-e\"] || local.cliDict._eval;\n\
    local.cliDict._help = local.cliDict._help || function () {\n\
    /*\n\
     *\n\
     * will print help\n\
     */\n\
        var commandList;\n\
        var file;\n\
        var packageJson;\n\
        var text;\n\
        var textDict;\n\
        commandList = [{\n\
            argList: \"<arg2>  ...\",\n\
            description: \"usage:\",\n\
            command: [\"<arg1>\"]\n\
        }, {\n\
            argList: \"'console.log(\\\"hello world\\\")'\",\n\
            description: \"example:\",\n\
            command: [\"--eval\"]\n\
        }];\n\
        file = __filename.replace((\n\
            /.*\\//\n\
        ), \"\");\n\
        option = Object.assign({}, option);\n\
        packageJson = require(\"./package.json\");\n\
        // validate comment\n\
        option.rgxComment = option.rgxComment || (\n\
            /\\)\\u0020\\{\\n(?:|\\u0020{4})\\/\\*\\n(?:\\u0020|\\u0020{5})\\*((?:\\u0020<[^>]*?>|\\u0020\\.\\.\\.)*?)\\n(?:\\u0020|\\u0020{5})\\*\\u0020(will\\u0020.*?\\S)\\n(?:\\u0020|\\u0020{5})\\*\\/\\n(?:\\u0020{4}|\\u0020{8})\\S/\n\
        );\n\
        textDict = {};\n\
        Object.keys(local.cliDict).sort().forEach(function (key, ii) {\n\
            if (key[0] === \"_\" && key !== \"_default\") {\n\
                return;\n\
            }\n\
            text = String(local.cliDict[key]);\n\
            if (key === \"_default\") {\n\
                key = \"\";\n\
            }\n\
            textDict[text] = textDict[text] || (ii + 2);\n\
            ii = textDict[text];\n\
            if (commandList[ii]) {\n\
                commandList[ii].command.push(key);\n\
                return;\n\
            }\n\
            try {\n\
                commandList[ii] = option.rgxComment.exec(text);\n\
                commandList[ii] = {\n\
                    argList: (commandList[ii][1] || \"\").trim(),\n\
                    command: [key],\n\
                    description: commandList[ii][2]\n\
                };\n\
            } catch (ignore) {\n\
                local.assertThrow(null, new Error(\n\
                    \"cliRun - cannot parse comment in COMMAND \"\n\
                    + key + \":\\nnew RegExp(\"\n\
                    + JSON.stringify(option.rgxComment.source)\n\
                    + \").exec(\" + JSON.stringify(text)\n\
                    .replace((\n\
                        /\\\\\\\\/g\n\
                    ), \"\\u0000\")\n\
                    .replace((\n\
                        /\\\\n/g\n\
                    ), \"\\\\n\\\\\\n\")\n\
                    .replace((\n\
                        /\\u0000/g\n\
                    ), \"\\\\\\\\\") + \");\"\n\
                ));\n\
            }\n\
        });\n\
        text = \"\";\n\
        text += packageJson.name + \" (\" + packageJson.version + \")\\n\\n\";\n\
        text += commandList\n\
        .filter(function (element) {\n\
            return element;\n\
        })\n\
        .map(function (element, ii) {\n\
            element.command = element.command.filter(function (element) {\n\
                return element;\n\
            });\n\
            switch (ii) {\n\
            case 0:\n\
            case 1:\n\
                element.argList = [element.argList];\n\
                break;\n\
            default:\n\
                element.argList = element.argList.split(\" \");\n\
                element.description = (\n\
                    \"# COMMAND \"\n\
                    + (element.command[0] || \"<none>\") + \"\\n# \"\n\
                    + element.description\n\
                );\n\
            }\n\
            return (\n\
                element.description + \"\\n  \" + file\n\
                + (\"  \" + element.command.sort().join(\"|\") + \"  \")\n\
                    .replace((\n\
                    /^\\u0020{4}$/\n\
                ), \"  \")\n\
                + element.argList.join(\"  \")\n\
            );\n\
        })\n\
        .join(\"\\n\\n\");\n\
        console.log(text);\n\
    };\n\
    local.cliDict[\"--help\"] = local.cliDict[\"--help\"] || local.cliDict._help;\n\
    local.cliDict[\"-h\"] = local.cliDict[\"-h\"] || local.cliDict._help;\n\
    local.cliDict._default = local.cliDict._default || local.cliDict._help;\n\
    local.cliDict.help = local.cliDict.help || local.cliDict._help;\n\
    local.cliDict._interactive = local.cliDict._interactive || function () {\n\
    /*\n\
     *\n\
     * will start interactive-mode\n\
     */\n\
        globalThis.local = local;\n\
        local.identity(local.replStart || require(\"repl\").start)({\n\
            useGlobal: true\n\
        });\n\
    };\n\
    local.cliDict[\"--interactive\"] = (\n\
        local.cliDict[\"--interactive\"]\n\
        || local.cliDict._interactive\n\
    );\n\
    local.cliDict[\"-i\"] = local.cliDict[\"-i\"] || local.cliDict._interactive;\n\
    local.cliDict._version = local.cliDict._version || function () {\n\
    /*\n\
     *\n\
     * will print version\n\
     */\n\
        console.log(require(__dirname + \"/package.json\").version);\n\
    };\n\
    local.cliDict[\"--version\"] = (\n\
        local.cliDict[\"--version\"]\n\
        || local.cliDict._version\n\
    );\n\
    local.cliDict[\"-v\"] = local.cliDict[\"-v\"] || local.cliDict._version;\n\
    // default to --help command if no arguments are given\n\
    if (process.argv.length <= 2) {\n\
        local.cliDict._help();\n\
        return;\n\
    }\n\
    if (local.cliDict[process.argv[2]]) {\n\
        local.cliDict[process.argv[2]]();\n\
        return;\n\
    }\n\
    local.cliDict._default();\n\
};\n\
\n\
local.jsonCopy = function (obj) {\n\
/*\n\
 * this function will deep-copy obj\n\
 */\n\
    return (\n\
        obj === undefined\n\
        ? undefined\n\
        : JSON.parse(JSON.stringify(obj))\n\
    );\n\
};\n\
\n\
local.jsonStringifyOrdered = function (obj, replacer, space) {\n\
/*\n\
 * this function will JSON.stringify <obj>,\n\
 * with object-keys sorted and circular-references removed\n\
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Syntax\n\
 */\n\
    var circularSet;\n\
    var stringify;\n\
    var tmp;\n\
    stringify = function (obj) {\n\
    /*\n\
     * this function will recursively JSON.stringify obj,\n\
     * with object-keys sorted and circular-references removed\n\
     */\n\
        // if obj is not an object or function, then JSON.stringify as normal\n\
        if (!(\n\
            obj\n\
            && typeof obj === \"object\"\n\
            && typeof obj.toJSON !== \"function\"\n\
        )) {\n\
            return JSON.stringify(obj);\n\
        }\n\
        // ignore circular-reference\n\
        if (circularSet.has(obj)) {\n\
            return;\n\
        }\n\
        circularSet.add(obj);\n\
        // if obj is an array, then recurse its items\n\
        if (Array.isArray(obj)) {\n\
            tmp = \"[\" + obj.map(function (obj) {\n\
                // recurse\n\
                tmp = stringify(obj);\n\
                return (\n\
                    typeof tmp === \"string\"\n\
                    ? tmp\n\
                    : \"null\"\n\
                );\n\
            }).join(\",\") + \"]\";\n\
            circularSet.delete(obj);\n\
            return tmp;\n\
        }\n\
        // if obj is not an array,\n\
        // then recurse its items with object-keys sorted\n\
        tmp = \"{\" + Object.keys(obj)\n\
        // sort object-keys\n\
        .sort()\n\
        .map(function (key) {\n\
            // recurse\n\
            tmp = stringify(obj[key]);\n\
            if (typeof tmp === \"string\") {\n\
                return JSON.stringify(key) + \":\" + tmp;\n\
            }\n\
        })\n\
        .filter(function (obj) {\n\
            return typeof obj === \"string\";\n\
        })\n\
        .join(\",\") + \"}\";\n\
        circularSet.delete(obj);\n\
        return tmp;\n\
    };\n\
    circularSet = new Set();\n\
    return JSON.stringify((\n\
        (typeof obj === \"object\" && obj)\n\
        // recurse\n\
        ? JSON.parse(stringify(obj))\n\
        : obj\n\
    ), replacer, space);\n\
};\n\
\n\
local.listShuffle = function (list) {\n\
/*\n\
 * this function will inplace shuffle the list using fisher-yates algorithm\n\
 * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\n\
 */\n\
    var ii;\n\
    var random;\n\
    var swap;\n\
    ii = list.length;\n\
    while (ii > 1) {\n\
        ii -= 1;\n\
        random = Math.floor(Math.random() * (ii + 1));\n\
        swap = list[ii];\n\
        list[ii] = list[random];\n\
        list[random] = swap;\n\
    }\n\
    return list;\n\
};\n\
\n\
local.objectSetOverride = function (dict, overrides, depth, env) {\n\
/*\n\
 * this function will recursively set overrides for items in dict\n\
 */\n\
    dict = dict || {};\n\
    env = env || (typeof process === \"object\" && process.env) || {};\n\
    overrides = overrides || {};\n\
    Object.keys(overrides).forEach(function (key) {\n\
        var dict2;\n\
        var overrides2;\n\
        dict2 = dict[key];\n\
        overrides2 = overrides[key];\n\
        if (overrides2 === undefined) {\n\
            return;\n\
        }\n\
        // if both dict2 and overrides2 are non-null and non-array objects,\n\
        // then recurse with dict2 and overrides2\n\
        if (\n\
            depth > 1\n\
            // dict2 is a non-null and non-array object\n\
            && typeof dict2 === \"object\" && dict2 && !Array.isArray(dict2)\n\
            // overrides2 is a non-null and non-array object\n\
            && typeof overrides2 === \"object\" && overrides2\n\
            && !Array.isArray(overrides2)\n\
        ) {\n\
            local.objectSetOverride(dict2, overrides2, depth - 1, env);\n\
            return;\n\
        }\n\
        // else set dict[key] with overrides[key]\n\
        dict[key] = (\n\
            dict === env\n\
            // if dict is env, then overrides falsy-value with empty-string\n\
            ? overrides2 || \"\"\n\
            : overrides2\n\
        );\n\
    });\n\
    return dict;\n\
};\n\
\n\
local.onErrorDefault = function (error) {\n\
/*\n\
 * this function will if <error> exists, then print it to stderr\n\
 */\n\
    if (error) {\n\
        console.error(error);\n\
    }\n\
    return error;\n\
};\n\
\n\
local.onErrorWithStack = function (onError) {\n\
/*\n\
 * this function will create a new callback that will call onError,\n\
 * and append the current stack to any error\n\
 */\n\
    var onError2;\n\
    var stack;\n\
    stack = new Error().stack.replace((\n\
        /(.*?)\\n.*?$/m\n\
    ), \"$1\");\n\
    onError2 = function (error, data, meta) {\n\
        if (\n\
            error\n\
            && typeof error.stack === \"string\"\n\
            && error !== local.errorDefault\n\
            && String(error.stack).indexOf(stack.split(\"\\n\")[2]) < 0\n\
        ) {\n\
            // append the current stack to error.stack\n\
            error.stack += \"\\n\" + stack;\n\
        }\n\
        onError(error, data, meta);\n\
    };\n\
    // debug onError\n\
    onError2.toString = function () {\n\
        return String(onError);\n\
    };\n\
    return onError2;\n\
};\n\
\n\
local.onParallel = function (onError, onEach, onRetry) {\n\
/*\n\
 * this function will create a function that will\n\
 * 1. run async tasks in parallel\n\
 * 2. if counter === 0 or error occurred, then call onError with error\n\
 */\n\
    var onParallel;\n\
    onError = local.onErrorWithStack(onError);\n\
    onEach = onEach || local.nop;\n\
    onRetry = onRetry || local.nop;\n\
    onParallel = function (error, data) {\n\
        if (onRetry(error, data)) {\n\
            return;\n\
        }\n\
        // decrement counter\n\
        onParallel.counter -= 1;\n\
        // validate counter\n\
        if (!(onParallel.counter >= 0 || error || onParallel.error)) {\n\
            error = new Error(\n\
                \"invalid onParallel.counter = \" + onParallel.counter\n\
            );\n\
        // ensure onError is run only once\n\
        } else if (onParallel.counter < 0) {\n\
            return;\n\
        }\n\
        // handle error\n\
        if (error) {\n\
            onParallel.error = error;\n\
            // ensure counter <= 0\n\
            onParallel.counter = -Math.abs(onParallel.counter);\n\
        }\n\
        // call onError when isDone\n\
        if (onParallel.counter <= 0) {\n\
            onError(error, data);\n\
            return;\n\
        }\n\
        onEach();\n\
    };\n\
    // init counter\n\
    onParallel.counter = 0;\n\
    // return callback\n\
    return onParallel;\n\
};\n\
\n\
local.replStart = function () {\n\
/*\n\
 * this function will start the repl-debugger\n\
 */\n\
    var that;\n\
    if (globalThis.utility2_serverRepl1) {\n\
        return;\n\
    }\n\
    // start replServer\n\
    that = require(\"repl\").start({\n\
        useGlobal: true\n\
    });\n\
    globalThis.utility2_serverRepl1 = that;\n\
    that.onError = function (error) {\n\
    /*\n\
     * this function will debug any repl-error\n\
     */\n\
        // debug error\n\
        globalThis.utility2_debugReplError = error;\n\
        console.error(error);\n\
    };\n\
    // save repl eval function\n\
    that.evalDefault = that.eval;\n\
    // hook custom repl eval function\n\
    that.eval = function (script, context, file, onError) {\n\
        var onError2;\n\
        onError2 = function (error, data) {\n\
            // debug error\n\
            globalThis.utility2_debugReplError = (\n\
                error\n\
                || globalThis.utility2_debugReplError\n\
            );\n\
            onError(error, data);\n\
        };\n\
        script.replace((\n\
            /^(\\S+)\\u0020(.*?)\\n/\n\
        ), function (ignore, match1, match2) {\n\
            switch (match1) {\n\
            // syntax-sugar to run async shell-command\n\
            case \"$\":\n\
                switch (match2) {\n\
                // syntax-sugar to run git diff\n\
                case \"git diff\":\n\
                    match2 = \"git diff --color | cat\";\n\
                    break;\n\
                // syntax-sugar to run git log\n\
                case \"git log\":\n\
                    match2 = \"git log -n 4 | cat\";\n\
                    break;\n\
                }\n\
                // source lib.utility2.sh\n\
                if (process.env.npm_config_dir_utility2 && (match2 !== \":\")) {\n\
                    match2 = (\n\
                        \". \" + process.env.npm_config_dir_utility2\n\
                        + \"/lib.utility2.sh;\" + match2\n\
                    );\n\
                }\n\
                // run async shell-command\n\
                require(\"child_process\").spawn(match2, {\n\
                    shell: true,\n\
                    stdio: [\"ignore\", 1, 2]\n\
                })\n\
                // on shell exit, print return prompt\n\
                .on(\"exit\", function (exitCode) {\n\
                    console.error(\"exit-code \" + exitCode);\n\
                    that.evalDefault(\n\
                        \"\\n\",\n\
                        context,\n\
                        file,\n\
                        onError2\n\
                    );\n\
                });\n\
                script = \"\\n\";\n\
                break;\n\
            // syntax-sugar to map text with charCodeAt\n\
            case \"charCode\":\n\
                console.error(\n\
                    match2.split(\"\").map(function (chr) {\n\
                        return (\n\
                            \"\\\\u\"\n\
                            + chr.charCodeAt(0).toString(16).padStart(4, 0)\n\
                        );\n\
                    }).join(\"\")\n\
                );\n\
                script = \"\\n\";\n\
                break;\n\
            // syntax-sugar to sort chr\n\
            case \"charSort\":\n\
                console.error(JSON.stringify(match2.split(\"\").sort().join(\"\")));\n\
                script = \"\\n\";\n\
                break;\n\
            // syntax-sugar to grep current dir\n\
            case \"grep\":\n\
                // run async shell-command\n\
                require(\"child_process\").spawn((\n\
                    \"find . -type f | grep -v -E \"\n\
/* jslint ignore:start */\n\
+ '\"\\\n\
/\\\\.|(\\\\b|_)(\\\\.\\\\d|\\\n\
archive|artifact|\\\n\
bower_component|build|\\\n\
coverage|\\\n\
doc|\\\n\
external|\\\n\
fixture|\\\n\
git_module|\\\n\
jquery|\\\n\
log|\\\n\
min|mock|\\\n\
node_module|\\\n\
rollup|\\\n\
swp|\\\n\
tmp|\\\n\
vendor)s{0,1}(\\\\b|_)\\\n\
\" '\n\
/* jslint ignore:end */\n\
                    + \"| tr \\\"\\\\n\\\" \\\"\\\\000\\\" | xargs -0 grep -HIin -E \\\"\"\n\
                    + match2 + \"\\\"\"\n\
                ), {\n\
                    shell: true,\n\
                    stdio: [\"ignore\", 1, 2]\n\
                })\n\
                // on shell exit, print return prompt\n\
                .on(\"exit\", function (exitCode) {\n\
                    console.error(\"exit-code \" + exitCode);\n\
                    that.evalDefault(\n\
                        \"\\n\",\n\
                        context,\n\
                        file,\n\
                        onError2\n\
                    );\n\
                });\n\
                script = \"\\n\";\n\
                break;\n\
            // syntax-sugar to list object's keys, sorted by item-type\n\
            // console.error(Object.keys(global).map(function(key){return(typeof global[key]==='object'&&global[key]&&global[key]===global[key]?'global':typeof global[key])+' '+key;}).sort().join('\\n')) // jslint ignore:line\n\
            case \"keys\":\n\
                script = (\n\
                    \"console.error(Object.keys(\" + match2\n\
                    + \").map(function(key){return(\"\n\
                    + \"typeof \" + match2 + \"[key]==='object'&&\"\n\
                    + match2 + \"[key]&&\"\n\
                    + match2 + \"[key]===global[key]\"\n\
                    + \"?'global'\"\n\
                    + \":typeof \" + match2 + \"[key]\"\n\
                    + \")+' '+key;\"\n\
                    + \"}).sort().join('\\\\n'))\\n\"\n\
                );\n\
                break;\n\
            // syntax-sugar to print stringified arg\n\
            case \"print\":\n\
                script = \"console.error(String(\" + match2 + \"))\\n\";\n\
                break;\n\
            // syntax-sugar to read file\n\
            case \"readFile\":\n\
                try {\n\
                    console.error(JSON.stringify(\n\
                        require(\"fs\").readFileSync(match2, \"utf8\")\n\
                    ));\n\
                } catch (errorCaught) {\n\
                    console.error(errorCaught);\n\
                }\n\
                script = \"\\n\";\n\
                break;\n\
            }\n\
        });\n\
        // eval the script\n\
        that.evalDefault(script, context, file, onError2);\n\
    };\n\
    that.socket = {\n\
        end: local.nop,\n\
        on: local.nop,\n\
        write: local.nop\n\
    };\n\
    // init process.stdout\n\
    process.stdout._writeDefault = (\n\
        process.stdout._writeDefault\n\
        || process.stdout._write\n\
    );\n\
    process.stdout._write = function (chunk, encoding, callback) {\n\
        process.stdout._writeDefault(chunk, encoding, callback);\n\
        // coverage-hack - ignore else-statement\n\
        local.nop(that.socket.writable && (function () {\n\
            that.socket.write(chunk, encoding);\n\
        }()));\n\
    };\n\
    // start tcp-server\n\
    globalThis.utility2_serverReplTcp1 = require(\"net\").createServer(function (\n\
        socket\n\
    ) {\n\
        // init socket\n\
        that.socket = socket;\n\
        that.socket.on(\"data\", that.write.bind(that));\n\
        that.socket.on(\"error\", that.onError);\n\
        that.socket.setKeepAlive(true);\n\
    });\n\
    // coverage-hack - ignore else-statement\n\
    local.nop(process.env.PORT_REPL && (function () {\n\
        console.error(\n\
            \"repl-server listening on tcp-port \" + process.env.PORT_REPL\n\
        );\n\
        globalThis.utility2_serverReplTcp1.listen(process.env.PORT_REPL);\n\
    }()));\n\
};\n\
\n\
local.setTimeoutOnError = function (onError, timeout, error, data) {\n\
/*\n\
 * this function will after timeout has passed, then call onError(error, data)\n\
 */\n\
    if (typeof onError === \"function\") {\n\
        setTimeout(function () {\n\
            onError(error, data);\n\
        }, timeout);\n\
    }\n\
    return data;\n\
};\n\
}());\n\
\n\
\n\
\n\
// run shared js-env code - lib.storage.js\n\
(function (local) {\n\
var child_process;\n\
var clear;\n\
var defer;\n\
var deferList;\n\
var fs;\n\
var getItem;\n\
var init;\n\
var keys;\n\
var length;\n\
var os;\n\
var removeItem;\n\
var setItem;\n\
var storage;\n\
var storageDir;\n\
\n\
storageDir = \"tmp/storage.\" + (\n\
    local.isBrowser\n\
    ? \"undefined\"\n\
    : process.env.NODE_ENV\n\
);\n\
if (!local.isBrowser) {\n\
    // require modules\n\
    child_process = require(\"child_process\");\n\
    fs = require(\"fs\");\n\
    os = require(\"os\");\n\
}\n\
\n\
clear = function (onError) {\n\
/*\n\
 * this function will clear storage\n\
 */\n\
    defer({\n\
        action: \"clear\"\n\
    }, onError);\n\
};\n\
\n\
defer = function (option, onError) {\n\
/*\n\
 * this function will defer option.action until storage is ready\n\
 */\n\
    var data;\n\
    var isDone;\n\
    var objectStore;\n\
    var onError2;\n\
    var request;\n\
    var tmp;\n\
    onError = onError || function (error) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
    };\n\
    if (!storage) {\n\
        deferList.push(function () {\n\
            defer(option, onError);\n\
        });\n\
        init();\n\
        return;\n\
    }\n\
    if (local.isBrowser) {\n\
        onError2 = function () {\n\
            /* istanbul ignore next */\n\
            if (isDone) {\n\
                return;\n\
            }\n\
            isDone = true;\n\
            onError(\n\
                request && (request.error || request.transaction.error),\n\
                data || request.result || \"\"\n\
            );\n\
        };\n\
        switch (option.action) {\n\
        case \"clear\":\n\
        case \"removeItem\":\n\
        case \"setItem\":\n\
            objectStore = storage\n\
            .transaction(storageDir, \"readwrite\")\n\
            .objectStore(storageDir);\n\
            break;\n\
        default:\n\
            objectStore = storage\n\
            .transaction(storageDir, \"readonly\")\n\
            .objectStore(storageDir);\n\
        }\n\
        switch (option.action) {\n\
        case \"clear\":\n\
            request = objectStore.clear();\n\
            break;\n\
        case \"getItem\":\n\
            request = objectStore.get(String(option.key));\n\
            break;\n\
        case \"keys\":\n\
            data = [];\n\
            request = objectStore.openCursor();\n\
            request.onsuccess = function () {\n\
                if (!request.result) {\n\
                    onError2();\n\
                    return;\n\
                }\n\
                data.push(request.result.key);\n\
                request.result.continue();\n\
            };\n\
            break;\n\
        case \"length\":\n\
            request = objectStore.count();\n\
            break;\n\
        case \"removeItem\":\n\
            request = objectStore.delete(String(option.key));\n\
            break;\n\
        case \"setItem\":\n\
            request = objectStore.put(option.value, String(option.key));\n\
            break;\n\
        }\n\
        [\"onabort\", \"onerror\", \"onsuccess\"].forEach(function (handler) {\n\
            request[handler] = request[handler] || onError2;\n\
        });\n\
        // debug request\n\
        local._debugStorageRequest = request;\n\
    } else {\n\
        switch (option.action) {\n\
        case \"clear\":\n\
            child_process.spawnSync(\"rm -f \" + storage + \"/*\", {\n\
                shell: true,\n\
                stdio: [\"ignore\", 1, 2]\n\
            });\n\
            setTimeout(onError);\n\
            break;\n\
        case \"getItem\":\n\
            fs.readFile(\n\
                storage + \"/\" + encodeURIComponent(String(option.key)),\n\
                \"utf8\",\n\
                function (ignore, data) {\n\
                    onError(null, data || \"\");\n\
                }\n\
            );\n\
            break;\n\
        case \"keys\":\n\
            fs.readdir(storage, function (error, data) {\n\
                onError(error, data && data.map(decodeURIComponent));\n\
            });\n\
            break;\n\
        case \"length\":\n\
            fs.readdir(storage, function (error, data) {\n\
                onError(error, data && data.length);\n\
            });\n\
            break;\n\
        case \"removeItem\":\n\
            fs.unlink(\n\
                storage + \"/\" + encodeURIComponent(String(option.key)),\n\
                // ignore error\n\
                function () {\n\
                    onError();\n\
                }\n\
            );\n\
            break;\n\
        case \"setItem\":\n\
            tmp = os.tmpdir() + \"/\" + Date.now() + Math.random();\n\
            // save to tmp\n\
            fs.writeFile(tmp, option.value, function (error) {\n\
                // validate no error occurred\n\
                local.assertThrow(!error, error);\n\
                // rename tmp to key\n\
                fs.rename(\n\
                    tmp,\n\
                    storage + \"/\" + encodeURIComponent(String(option.key)),\n\
                    onError\n\
                );\n\
            });\n\
            break;\n\
        }\n\
    }\n\
};\n\
\n\
deferList = [];\n\
\n\
getItem = function (key, onError) {\n\
/*\n\
 * this function will get the item with given key from storage\n\
 */\n\
    defer({\n\
        action: \"getItem\",\n\
        key: key\n\
    }, onError);\n\
};\n\
\n\
init = function () {\n\
/*\n\
 * this function will init storage\n\
 */\n\
    var onError;\n\
    var request;\n\
    onError = function (error) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        if (local.isBrowser) {\n\
            storage = globalThis[storageDir];\n\
        }\n\
        while (deferList.length) {\n\
            deferList.shift()();\n\
        }\n\
    };\n\
    if (local.isBrowser) {\n\
        storage = globalThis[storageDir];\n\
    }\n\
    if (storage) {\n\
        onError();\n\
        return;\n\
    }\n\
    if (local.isBrowser) {\n\
        // init indexedDB\n\
        try {\n\
            request = globalThis.indexedDB.open(storageDir);\n\
            // debug request\n\
            local._debugStorageRequestIndexedDB = request;\n\
            request.onerror = onError;\n\
            request.onsuccess = function () {\n\
                globalThis[storageDir] = request.result;\n\
                onError();\n\
            };\n\
            request.onupgradeneeded = function () {\n\
                if (!request.result.objectStoreNames.contains(storageDir)) {\n\
                    request.result.createObjectStore(storageDir);\n\
                }\n\
            };\n\
        } catch (ignore) {}\n\
    } else {\n\
        // mkdirp storage\n\
        storage = storageDir;\n\
        child_process.spawnSync(\"mkdir\", [\"-p\", storage], {\n\
            stdio: [\"ignore\", 1, 2]\n\
        });\n\
        onError();\n\
    }\n\
};\n\
\n\
keys = function (onError) {\n\
/*\n\
 * this function will get all the keys in storage\n\
 */\n\
    defer({\n\
        action: \"keys\"\n\
    }, onError);\n\
};\n\
\n\
length = function (onError) {\n\
/*\n\
 * this function will get the number of items in storage\n\
 */\n\
    defer({\n\
        action: \"length\"\n\
    }, onError);\n\
};\n\
\n\
removeItem = function (key, onError) {\n\
/*\n\
 * this function will remove the item with given key from storage\n\
 */\n\
    defer({\n\
        action: \"removeItem\",\n\
        key: key\n\
    }, onError);\n\
};\n\
\n\
setItem = function (key, value, onError) {\n\
/*\n\
 * this function will set the item with given key and value to storage\n\
 */\n\
    defer({\n\
        action: \"setItem\",\n\
        key: key,\n\
        value: value\n\
    }, onError);\n\
};\n\
\n\
// init local\n\
local.storage = storage;\n\
local.storageClear = clear;\n\
local.storageDefer = defer;\n\
local.storageDeferList = deferList;\n\
local.storageDir = storageDir;\n\
local.storageGetItem = getItem;\n\
local.storageInit = init;\n\
local.storageKeys = keys;\n\
local.storageLength = length;\n\
local.storageRemoveItem = removeItem;\n\
local.storageSetItem = setItem;\n\
}(local));\n\
\n\
\n\
\n\
// run shared js-env code - lib.dbTable.js\n\
(function () {\n\
local._DbTable = function (option) {\n\
/*\n\
 * this function will create a dbTable\n\
 */\n\
    this.name = String(option.name);\n\
    // register dbTable in dbTableDict\n\
    local.dbTableDict[this.name] = this;\n\
    this.dbRowList = [];\n\
    this.isDirty = null;\n\
    this.idIndexList = [{\n\
        isInteger: false,\n\
        name: \"_id\",\n\
        dict: {}\n\
    }];\n\
    this.onSaveList = [];\n\
    this.sizeLimit = option.sizeLimit || 0;\n\
};\n\
\n\
local._DbTable.prototype._cleanup = function () {\n\
/*\n\
 * this function will cleanup soft-deleted records from the dbTable\n\
 */\n\
    var dbRow;\n\
    var ii;\n\
    var list;\n\
    if (!this.isDirty && this.dbRowList.length <= this.sizeLimit) {\n\
        return;\n\
    }\n\
    this.isDirty = null;\n\
    // cleanup dbRowList\n\
    list = this.dbRowList;\n\
    this.dbRowList = [];\n\
    // optimization - while-loop\n\
    ii = 0;\n\
    while (ii < list.length) {\n\
        dbRow = list[ii];\n\
        // cleanup isRemoved\n\
        if (!dbRow.$isRemoved) {\n\
            this.dbRowList.push(dbRow);\n\
        }\n\
        ii += 1;\n\
    }\n\
    if (this.sizeLimit && this.dbRowList.length >= 1.5 * this.sizeLimit) {\n\
        this.dbRowList = this._crudGetManyByQuery({}, this.sortDefault, 0, this.sizeLimit);\n\
    }\n\
};\n\
\n\
local._DbTable.prototype._crudGetManyByQuery = function (\n\
    query,\n\
    sort,\n\
    skip,\n\
    limit,\n\
    shuffle\n\
) {\n\
/*\n\
 * this function will get the dbRow's in the dbTable,\n\
 * with given query, sort, skip, and limit\n\
 */\n\
    var ii;\n\
    var result;\n\
    result = this.dbRowList;\n\
    // get by query\n\
    if (result.length && query && Object.keys(query).length) {\n\
        result = local.dbRowListGetManyByQuery(this.dbRowList, query);\n\
    }\n\
    // sort\n\
    (sort || []).forEach(function (element) {\n\
        // bug-workaround - v8 does not have stable-sort\n\
        // optimization - while-loop\n\
        ii = 0;\n\
        while (ii < result.length) {\n\
            result[ii].$ii = ii;\n\
            ii += 1;\n\
        }\n\
        result.sort(function (aa, bb) {\n\
            return local.sortCompare(\n\
                local.dbRowGetItem(aa, element.fieldName),\n\
                local.dbRowGetItem(bb, element.fieldName),\n\
                aa.$ii,\n\
                bb.$ii\n\
            );\n\
        });\n\
        if (element.isDescending) {\n\
            result.reverse();\n\
        }\n\
    });\n\
    // skip\n\
    result = result.slice(skip || 0);\n\
    // shuffle\n\
    local.functionOrNop(shuffle && local.listShuffle)(result);\n\
    // limit\n\
    result = result.slice(0, limit || Infinity);\n\
    return result;\n\
};\n\
\n\
local._DbTable.prototype._crudGetOneById = function (idDict) {\n\
/*\n\
 * this function will get the dbRow in the dbTable with given idDict\n\
 */\n\
    var id;\n\
    var result;\n\
    idDict = local.objectSetOverride(idDict);\n\
    result = null;\n\
    this.idIndexList.some(function (idIndex) {\n\
        id = idDict[idIndex.name];\n\
        // optimization - hasOwnProperty\n\
        if (idIndex.dict.hasOwnProperty(id)) {\n\
            result = idIndex.dict[id];\n\
            return result;\n\
        }\n\
    });\n\
    return result;\n\
};\n\
\n\
local._DbTable.prototype._crudRemoveOneById = function (idDict, circularList) {\n\
/*\n\
 * this function will remove the dbRow from the dbTable with given idDict\n\
 */\n\
    var id;\n\
    var result;\n\
    var that;\n\
    if (!idDict) {\n\
        return null;\n\
    }\n\
    that = this;\n\
    circularList = circularList || [idDict];\n\
    result = null;\n\
    that.idIndexList.forEach(function (idIndex) {\n\
        id = idDict[idIndex.name];\n\
        // optimization - hasOwnProperty\n\
        if (!idIndex.dict.hasOwnProperty(id)) {\n\
            return;\n\
        }\n\
        result = idIndex.dict[id];\n\
        delete idIndex.dict[id];\n\
        // optimization - soft-delete\n\
        result.$isRemoved = true;\n\
        that.isDirty = true;\n\
        if (circularList.indexOf(result) >= 0) {\n\
            return;\n\
        }\n\
        circularList.push(result);\n\
        // recurse\n\
        that._crudRemoveOneById(result, circularList);\n\
    });\n\
    that.save();\n\
    return result;\n\
};\n\
\n\
local._DbTable.prototype._crudSetOneById = function (dbRow) {\n\
/*\n\
 * this function will set the dbRow into the dbTable with given dbRow._id\n\
 * WARNING - existing dbRow with conflicting dbRow._id will be removed\n\
 */\n\
    var existing;\n\
    var id;\n\
    var normalize;\n\
    var timeNow;\n\
    normalize = function (dbRow) {\n\
    /*\n\
     * this function will recursively normalize dbRow\n\
     */\n\
        switch (typeof dbRow) {\n\
        case \"boolean\":\n\
        case \"string\":\n\
            return dbRow;\n\
        case \"number\":\n\
            return (\n\
                Number.isFinite(dbRow)\n\
                ? dbRow\n\
                : undefined\n\
            );\n\
        case \"object\":\n\
            if (!dbRow) {\n\
                return;\n\
            }\n\
            break;\n\
        default:\n\
            return;\n\
        }\n\
        Object.keys(dbRow).forEach(function (key) {\n\
            dbRow[key] = (\n\
                (key[0] === \"$\" || key.indexOf(\".\") >= 0)\n\
                // invalid-property\n\
                ? undefined\n\
                // recurse\n\
                : normalize(dbRow[key])\n\
            );\n\
        });\n\
        return dbRow;\n\
    };\n\
    dbRow = local.jsonCopy(local.objectSetOverride(dbRow));\n\
    // update timestamp\n\
    timeNow = new Date().toISOString();\n\
    dbRow._timeCreated = dbRow._timeCreated || timeNow;\n\
    if (!local.modeImport) {\n\
        dbRow._timeUpdated = timeNow;\n\
    }\n\
    // normalize\n\
    dbRow = normalize(dbRow);\n\
    dbRow = local.jsonCopy(dbRow);\n\
    // remove existing dbRow\n\
    existing = this._crudRemoveOneById(dbRow) || dbRow;\n\
    this.idIndexList.forEach(function (idIndex) {\n\
        // auto-set id\n\
        id = local.dbRowSetId(existing, idIndex);\n\
        // copy id from existing to dbRow\n\
        dbRow[idIndex.name] = id;\n\
        // set dbRow\n\
        idIndex.dict[id] = dbRow;\n\
    });\n\
    // update dbRowList\n\
    this.dbRowList.push(dbRow);\n\
    this.save();\n\
    return dbRow;\n\
};\n\
\n\
local._DbTable.prototype._crudUpdateOneById = function (dbRow) {\n\
/*\n\
 * this function will update the dbRow in the dbTable,\n\
 * if it exists with given dbRow._id\n\
 * WARNING\n\
 * existing dbRow's with conflicting unique-keys (besides the one being updated)\n\
 * will be removed\n\
 */\n\
    var id;\n\
    var result;\n\
    dbRow = local.jsonCopy(local.objectSetOverride(dbRow));\n\
    result = {};\n\
    this.idIndexList.some(function (idIndex) {\n\
        id = dbRow[idIndex.name];\n\
        // optimization - hasOwnProperty\n\
        if (idIndex.dict.hasOwnProperty(id)) {\n\
            result = idIndex.dict[id];\n\
            return true;\n\
        }\n\
    });\n\
    // remove existing dbRow\n\
    result = local.jsonCopy(this._crudRemoveOneById(result)) || result;\n\
    // update dbRow\n\
    delete dbRow._timeCreated;\n\
    local.objectSetOverride(result, dbRow, 10);\n\
    // replace dbRow\n\
    result = this._crudSetOneById(result);\n\
    return result;\n\
};\n\
\n\
local._DbTable.prototype.crudCountAll = function (onError) {\n\
/*\n\
 * this function will count all of dbRow's in the dbTable\n\
 */\n\
    this._cleanup();\n\
    return local.setTimeoutOnError(onError, 0, null, this.dbRowList.length);\n\
};\n\
\n\
local._DbTable.prototype.crudCountManyByQuery = function (query, onError) {\n\
/*\n\
 * this function will count the number of dbRow's in the dbTable with given query\n\
 */\n\
    this._cleanup();\n\
    return local.setTimeoutOnError(\n\
        onError,\n\
        0,\n\
        null,\n\
        this._crudGetManyByQuery(query).length\n\
    );\n\
};\n\
\n\
local._DbTable.prototype.crudGetManyById = function (idDictList, onError) {\n\
/*\n\
 * this function will get the dbRow's in the dbTable with given idDictList\n\
 */\n\
    var that;\n\
    this._cleanup();\n\
    that = this;\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(\n\
        (idDictList || []).map(function (idDict) {\n\
            return that._crudGetOneById(idDict);\n\
        })\n\
    ));\n\
};\n\
\n\
local._DbTable.prototype.crudGetManyByQuery = function (option, onError) {\n\
/*\n\
 * this function will get the dbRow's in the dbTable with given option.query\n\
 */\n\
    this._cleanup();\n\
    option = local.objectSetOverride(option);\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(\n\
        this._crudGetManyByQuery(\n\
            option.query,\n\
            option.sort || this.sortDefault,\n\
            option.skip,\n\
            option.limit,\n\
            option.shuffle\n\
        ),\n\
        option.fieldList\n\
    ));\n\
};\n\
\n\
local._DbTable.prototype.crudGetOneById = function (idDict, onError) {\n\
/*\n\
 * this function will get the dbRow in the dbTable with given idDict\n\
 */\n\
    this._cleanup();\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(\n\
        this._crudGetOneById(idDict)\n\
    ));\n\
};\n\
\n\
local._DbTable.prototype.crudGetOneByQuery = function (query, onError) {\n\
/*\n\
 * this function will get the dbRow in the dbTable with given query\n\
 */\n\
    var ii;\n\
    var result;\n\
    this._cleanup();\n\
    // optimization - while-loop\n\
    ii = 0;\n\
    while (ii < this.dbRowList.length) {\n\
        result = local.dbRowListGetManyByQuery([this.dbRowList[ii]], query)[0];\n\
        if (result) {\n\
            break;\n\
        }\n\
        ii += 1;\n\
    }\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(result));\n\
};\n\
\n\
local._DbTable.prototype.crudGetOneByRandom = function (onError) {\n\
/*\n\
 * this function will get a random dbRow in the dbTable\n\
 */\n\
    this._cleanup();\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(\n\
        this.dbRowList[Math.floor(Math.random() * this.dbRowList.length)]\n\
    ));\n\
};\n\
\n\
local._DbTable.prototype.crudRemoveAll = function (onError) {\n\
/*\n\
 * this function will remove all of the dbRow's from the dbTable\n\
 */\n\
    var idIndexList;\n\
    // save idIndexList\n\
    idIndexList = this.idIndexList;\n\
    // reset dbTable\n\
    local._DbTable.call(this, this);\n\
    // restore idIndexList\n\
    local.dbTableCreateOne({\n\
        name: this.name,\n\
        idIndexCreateList: idIndexList\n\
    }, onError);\n\
};\n\
\n\
local._DbTable.prototype.crudRemoveManyById = function (idDictList, onError) {\n\
/*\n\
 * this function will remove the dbRow's from the dbTable with given idDictList\n\
 */\n\
    var that;\n\
    that = this;\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(\n\
        (idDictList || []).map(function (dbRow) {\n\
            return that._crudRemoveOneById(dbRow);\n\
        })\n\
    ));\n\
};\n\
\n\
local._DbTable.prototype.crudRemoveManyByQuery = function (query, onError) {\n\
/*\n\
 * this function will remove the dbRow's from the dbTable with given query\n\
 */\n\
    var that;\n\
    that = this;\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(\n\
        that._crudGetManyByQuery(query).map(function (dbRow) {\n\
            return that._crudRemoveOneById(dbRow);\n\
        })\n\
    ));\n\
};\n\
\n\
local._DbTable.prototype.crudRemoveOneById = function (idDict, onError) {\n\
/*\n\
 * this function will remove the dbRow from the dbTable with given idDict\n\
 */\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(\n\
        this._crudRemoveOneById(idDict)\n\
    ));\n\
};\n\
\n\
local._DbTable.prototype.crudSetManyById = function (dbRowList, onError) {\n\
/*\n\
 * this function will set the dbRowList into the dbTable\n\
 */\n\
    var that;\n\
    that = this;\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(\n\
        (dbRowList || []).map(function (dbRow) {\n\
            return that._crudSetOneById(dbRow);\n\
        })\n\
    ));\n\
};\n\
\n\
local._DbTable.prototype.crudSetOneById = function (dbRow, onError) {\n\
/*\n\
 * this function will set the dbRow into the dbTable with given dbRow._id\n\
 */\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(\n\
        this._crudSetOneById(dbRow)\n\
    ));\n\
};\n\
\n\
local._DbTable.prototype.crudUpdateManyById = function (dbRowList, onError) {\n\
/*\n\
 * this function will update the dbRowList in the dbTable,\n\
 * if they exist with given dbRow._id's\n\
 */\n\
    var that;\n\
    that = this;\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(\n\
        (dbRowList || []).map(function (dbRow) {\n\
            return that._crudUpdateOneById(dbRow);\n\
        })\n\
    ));\n\
};\n\
\n\
local._DbTable.prototype.crudUpdateManyByQuery = function (query, dbRow, onError) {\n\
/*\n\
 * this function will update the dbRow's in the dbTable with given query\n\
 */\n\
    var result;\n\
    var that;\n\
    var tmp;\n\
    that = this;\n\
    tmp = local.jsonCopy(local.objectSetOverride(dbRow));\n\
    result = that._crudGetManyByQuery(query).map(function (dbRow) {\n\
        tmp._id = dbRow._id;\n\
        return that._crudUpdateOneById(tmp);\n\
    });\n\
    return local.setTimeoutOnError(onError, 0, null, result);\n\
};\n\
\n\
local._DbTable.prototype.crudUpdateOneById = function (dbRow, onError) {\n\
/*\n\
 * this function will update the dbRow in the dbTable,\n\
 * if it exists with given dbRow._id\n\
 */\n\
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(\n\
        this._crudUpdateOneById(dbRow)\n\
    ));\n\
};\n\
\n\
local._DbTable.prototype.drop = function (onError) {\n\
/*\n\
 * this function will drop the dbTable\n\
 */\n\
    console.error(\"db - dropping dbTable \" + this.name + \" ...\");\n\
    // cancel pending save\n\
    this.timerSave = null;\n\
    while (this.onSaveList.length) {\n\
        this.onSaveList.shift()();\n\
    }\n\
    // reset dbTable\n\
    local._DbTable.call(this, this);\n\
    // clear persistence\n\
    local.storageRemoveItem(\"dbTable.\" + this.name + \".json\", onError);\n\
};\n\
\n\
local._DbTable.prototype.export = function (onError) {\n\
/*\n\
 * this function will export the db\n\
 */\n\
    var result;\n\
    var that;\n\
    this._cleanup();\n\
    that = this;\n\
    result = \"\";\n\
    that.idIndexList.forEach(function (idIndex) {\n\
        result += that.name + \" idIndexCreate \" + JSON.stringify({\n\
            isInteger: idIndex.isInteger,\n\
            name: idIndex.name\n\
        }) + \"\\n\";\n\
    });\n\
    result += that.name + \" sizeLimit \" + that.sizeLimit + \"\\n\";\n\
    result += that.name + \" sortDefault \" + JSON.stringify(that.sortDefault) + \"\\n\";\n\
    that.crudGetManyByQuery({}).forEach(function (dbRow) {\n\
        result += that.name + \" dbRowSet \" + JSON.stringify(dbRow) + \"\\n\";\n\
    });\n\
    return local.setTimeoutOnError(onError, 0, null, result.trim());\n\
};\n\
\n\
local._DbTable.prototype.idIndexCreate = function (option, onError) {\n\
/*\n\
 * this function will create an idIndex with given option.name\n\
 */\n\
    var dbRow;\n\
    var idIndex;\n\
    var ii;\n\
    var name;\n\
    option = local.objectSetOverride(option);\n\
    name = String(option.name);\n\
    // disallow idIndex with dot-name\n\
    if (name.indexOf(\".\") >= 0 || name === \"_id\") {\n\
        return local.setTimeoutOnError(onError);\n\
    }\n\
    // remove existing idIndex\n\
    this.idIndexRemove(option);\n\
    // init idIndex\n\
    idIndex = {\n\
        dict: {},\n\
        isInteger: Boolean(option.isInteger),\n\
        name: name\n\
    };\n\
    this.idIndexList.push(idIndex);\n\
    // populate idIndex with dbRowList\n\
    // optimization - while-loop\n\
    ii = 0;\n\
    while (ii < this.dbRowList.length) {\n\
        dbRow = this.dbRowList[ii];\n\
        // auto-set id\n\
        if (!dbRow.$isRemoved) {\n\
            idIndex.dict[local.dbRowSetId(dbRow, idIndex)] = dbRow;\n\
        }\n\
        ii += 1;\n\
    }\n\
    this.save();\n\
    return local.setTimeoutOnError(onError);\n\
};\n\
\n\
local._DbTable.prototype.idIndexRemove = function (option, onError) {\n\
/*\n\
 * this function will remove the idIndex with given option.name\n\
 */\n\
    var name;\n\
    option = local.objectSetOverride(option);\n\
    name = String(option.name);\n\
    this.idIndexList = this.idIndexList.filter(function (idIndex) {\n\
        return idIndex.name !== name || idIndex.name === \"_id\";\n\
    });\n\
    this.save();\n\
    return local.setTimeoutOnError(onError);\n\
};\n\
\n\
local._DbTable.prototype.save = function (onError) {\n\
/*\n\
 * this function will save the dbTable to storage\n\
 */\n\
    var that;\n\
    that = this;\n\
    if (local.modeImport) {\n\
        return;\n\
    }\n\
    if (onError) {\n\
        that.onSaveList.push(onError);\n\
    }\n\
    // throttle storage-writes to once every 1000 ms\n\
    that.timerSave = that.timerSave || setTimeout(function () {\n\
        that.timerSave = null;\n\
        local.storageSetItem(\"dbTable.\" + that.name + \".json\", that.export(), function (\n\
            error\n\
        ) {\n\
            while (that.onSaveList.length) {\n\
                that.onSaveList.shift()(error);\n\
            }\n\
        });\n\
    }, 1000);\n\
};\n\
\n\
local.dbCrudRemoveAll = function (onError) {\n\
/*\n\
 * this function will remove all dbRow's from the db\n\
 */\n\
    var onParallel;\n\
    onParallel = local.onParallel(function (error) {\n\
        local.setTimeoutOnError(onError, 0, error);\n\
    });\n\
    onParallel.counter += 1;\n\
    Object.keys(local.dbTableDict).forEach(function (key) {\n\
        onParallel.counter += 1;\n\
        local.dbTableDict[key].crudRemoveAll(onParallel);\n\
    });\n\
    onParallel();\n\
};\n\
\n\
local.dbDrop = function (onError) {\n\
/*\n\
 * this function will drop the db\n\
 */\n\
    var onParallel;\n\
    console.error(\"db - dropping database ...\");\n\
    onParallel = local.onParallel(function (error) {\n\
        local.setTimeoutOnError(onError, 0, error);\n\
    });\n\
    onParallel.counter += 1;\n\
    onParallel.counter += 1;\n\
    local.storageClear(onParallel);\n\
    Object.keys(local.dbTableDict).forEach(function (key) {\n\
        onParallel.counter += 1;\n\
        local.dbTableDict[key].drop(onParallel);\n\
    });\n\
    onParallel();\n\
};\n\
\n\
local.dbExport = function (onError) {\n\
/*\n\
 * this function will export the db as serialized text\n\
 */\n\
    var result;\n\
    result = \"\";\n\
    Object.keys(local.dbTableDict).forEach(function (key) {\n\
        console.error(\"db - exporting dbTable \" + local.dbTableDict[key].name + \" ...\");\n\
        result += local.dbTableDict[key].export();\n\
        result += \"\\n\\n\";\n\
    });\n\
    return local.setTimeoutOnError(onError, 0, null, result.trim());\n\
};\n\
\n\
local.dbImport = function (text, onError) {\n\
/*\n\
 * this function will import the serialized text into the db\n\
 */\n\
    var dbTable;\n\
    var dbTableDict;\n\
    dbTableDict = {};\n\
    local.modeImport = true;\n\
    setTimeout(function () {\n\
        local.modeImport = null;\n\
    });\n\
    text.replace((\n\
        /^(\\w\\S*?)\\u0020(\\S+?)\\u0020(\\S.*?)$/gm\n\
    ), function (match0, match1, match2, match3) {\n\
        switch (match2) {\n\
        case \"dbRowSet\":\n\
            dbTableDict[match1] = true;\n\
            dbTable = local.dbTableCreateOne({\n\
                isLoaded: true,\n\
                name: match1\n\
            });\n\
            dbTable.crudSetOneById(JSON.parse(match3));\n\
            break;\n\
        case \"idIndexCreate\":\n\
            dbTableDict[match1] = true;\n\
            dbTable = local.dbTableCreateOne({\n\
                isLoaded: true,\n\
                name: match1\n\
            });\n\
            dbTable.idIndexCreate(JSON.parse(match3));\n\
            break;\n\
        case \"sizeLimit\":\n\
            dbTableDict[match1] = true;\n\
            dbTable = local.dbTableCreateOne({\n\
                isLoaded: true,\n\
                name: match1\n\
            });\n\
            dbTable.sizeLimit = JSON.parse(match3);\n\
            break;\n\
        case \"sortDefault\":\n\
            dbTableDict[match1] = true;\n\
            dbTable = local.dbTableCreateOne({\n\
                isLoaded: true,\n\
                name: match1\n\
            });\n\
            dbTable.sortDefault = JSON.parse(match3);\n\
            break;\n\
        default:\n\
            local.onErrorDefault(new Error(\n\
                \"db - dbImport - invalid operation - \" + match0\n\
            ));\n\
        }\n\
    });\n\
    Object.keys(dbTableDict).forEach(function (name) {\n\
        console.error(\"db - importing dbTable \" + name + \" ...\");\n\
    });\n\
    local.modeImport = null;\n\
    return local.setTimeoutOnError(onError);\n\
};\n\
\n\
local.dbLoad = function (onError) {\n\
/*\n\
 * this function will load the db from storage\n\
 */\n\
    var onParallel;\n\
    onParallel = local.onParallel(function (error) {\n\
        local.setTimeoutOnError(onError, 0, error);\n\
    });\n\
    local.storageKeys(function (error, data) {\n\
        onParallel.counter += 1;\n\
        // validate no error occurred\n\
        onParallel.counter += 1;\n\
        onParallel(error);\n\
        (data || []).forEach(function (key) {\n\
            if (key.indexOf(\"dbTable.\") !== 0) {\n\
                return;\n\
            }\n\
            onParallel.counter += 1;\n\
            local.storageGetItem(key, function (error, data) {\n\
                onParallel.counter += 1;\n\
                onParallel(error);\n\
                local.dbImport(data, onParallel);\n\
            });\n\
        });\n\
        onParallel();\n\
    });\n\
};\n\
\n\
local.dbReset = function (dbSeedList, onError) {\n\
/*\n\
 * this function will drop and seed the db with given dbSeedList\n\
 */\n\
    var onParallel;\n\
    onParallel = globalThis.utility2_onReadyBefore || local.onParallel(onError);\n\
    onParallel.counter += 1;\n\
    // drop db\n\
    onParallel.counter += 1;\n\
    local.dbDrop(function (error) {\n\
        local.onErrorDefault(error);\n\
        // seed db\n\
        local.dbSeed(dbSeedList, !globalThis.utility2_onReadyBefore && onParallel);\n\
        local.functionOrNop(globalThis.utility2_onReadyBefore)();\n\
    });\n\
    local.functionOrNop(globalThis.utility2_onReadyAfter)(onError);\n\
    onParallel();\n\
};\n\
\n\
local.dbRowGetItem = function (dbRow, key) {\n\
/*\n\
 * this function will get the item with given key from dbRow\n\
 */\n\
    var ii;\n\
    var value;\n\
    value = dbRow;\n\
    key = String(key).split(\".\");\n\
    // optimization - while-loop\n\
    ii = 0;\n\
    while (ii < key.length && typeof value === \"object\" && value) {\n\
        value = value[key[ii]];\n\
        ii += 1;\n\
    }\n\
    return (\n\
        value === undefined\n\
        ? null\n\
        : value\n\
    );\n\
};\n\
\n\
local.dbRowListGetManyByOperator = function (dbRowList, fieldName, operator, bb, not) {\n\
/*\n\
 * this function will get the dbRow's in dbRowList with given operator\n\
 */\n\
    var fieldValue;\n\
    var ii;\n\
    var jj;\n\
    var result;\n\
    var test;\n\
    var typeof2;\n\
    result = [];\n\
    typeof2 = typeof bb;\n\
    if (bb && typeof2 === \"object\") {\n\
        switch (operator) {\n\
        case \"$in\":\n\
        case \"$nin\":\n\
        case \"$regex\":\n\
            break;\n\
        default:\n\
            return result;\n\
        }\n\
    }\n\
    switch (operator) {\n\
    case \"$eq\":\n\
        test = function (aa, bb) {\n\
            return aa === bb;\n\
        };\n\
        break;\n\
    case \"$exists\":\n\
        bb = !bb;\n\
        test = function (aa, bb) {\n\
            return !((aa === null) ^ bb); // jslint ignore:line\n\
        };\n\
        break;\n\
    case \"$gt\":\n\
        test = function (aa, bb, typeof1, typeof2) {\n\
            return typeof1 === typeof2 && aa > bb;\n\
        };\n\
        break;\n\
    case \"$gte\":\n\
        test = function (aa, bb, typeof1, typeof2) {\n\
            return typeof1 === typeof2 && aa >= bb;\n\
        };\n\
        break;\n\
    case \"$in\":\n\
        if (bb && typeof bb.indexOf === \"function\") {\n\
            if (typeof2 === \"string\") {\n\
                test = function (aa, bb, typeof1, typeof2) {\n\
                    return typeof1 === typeof2 && bb.indexOf(aa) >= 0;\n\
                };\n\
            } else {\n\
                test = function (aa, bb) {\n\
                    return bb.indexOf(aa) >= 0;\n\
                };\n\
            }\n\
        }\n\
        break;\n\
    case \"$lt\":\n\
        test = function (aa, bb, typeof1, typeof2) {\n\
            return typeof1 === typeof2 && aa < bb;\n\
        };\n\
        break;\n\
    case \"$lte\":\n\
        test = function (aa, bb, typeof1, typeof2) {\n\
            return typeof1 === typeof2 && aa <= bb;\n\
        };\n\
        break;\n\
    case \"$ne\":\n\
        test = function (aa, bb) {\n\
            return aa !== bb;\n\
        };\n\
        break;\n\
    case \"$nin\":\n\
        if (bb && typeof bb.indexOf === \"function\") {\n\
            if (typeof2 === \"string\") {\n\
                test = function (aa, bb, typeof1, typeof2) {\n\
                    return typeof1 === typeof2 && bb.indexOf(aa) < 0;\n\
                };\n\
            } else {\n\
                test = function (aa, bb) {\n\
                    return bb.indexOf(aa) < 0;\n\
                };\n\
            }\n\
        }\n\
        break;\n\
    case \"$regex\":\n\
        if (bb && typeof bb.test === \"function\") {\n\
            test = function (aa, bb) {\n\
                return bb.test(aa);\n\
            };\n\
        }\n\
        break;\n\
    case \"$typeof\":\n\
        test = function (ignore, bb, typeof1) {\n\
            return typeof1 === bb;\n\
        };\n\
        break;\n\
    }\n\
    if (!test) {\n\
        return result;\n\
    }\n\
    // optimization - while-loop\n\
    ii = dbRowList.length;\n\
    while (ii >= 1) {\n\
        ii -= 1;\n\
        fieldValue = local.dbRowGetItem(dbRowList[ii], fieldName);\n\
        // normalize to list\n\
        if (!Array.isArray(fieldValue)) {\n\
            fieldValue = [fieldValue];\n\
        }\n\
        // optimization - while-loop\n\
        jj = fieldValue.length;\n\
        while (jj >= 1) {\n\
            jj -= 1;\n\
            if (Boolean(not ^ test(fieldValue[jj], bb, typeof fieldValue[jj], typeof2))) {\n\
                result.push(dbRowList[ii]);\n\
                break;\n\
            }\n\
        }\n\
    }\n\
    return result;\n\
};\n\
\n\
local.dbRowListGetManyByQuery = function (dbRowList, query, fieldName, not) {\n\
/*\n\
 * this function will get the dbRow's in dbRowList with given query\n\
 */\n\
    var bb;\n\
    var dbRowDict;\n\
    var result;\n\
    // optimization - convert to boolean\n\
    not = Boolean(not);\n\
    result = dbRowList;\n\
    if (!(typeof query === \"object\" && query)) {\n\
        result = local.dbRowListGetManyByOperator(result, fieldName, \"$eq\", query, not);\n\
        return result;\n\
    }\n\
    Object.keys(query).some(function (key) {\n\
        bb = query[key];\n\
        switch (key) {\n\
        case \"$not\":\n\
            key = fieldName;\n\
            not = !not;\n\
            break;\n\
        case \"$or\":\n\
            if (!Array.isArray(bb)) {\n\
                break;\n\
            }\n\
            dbRowDict = {};\n\
            bb.forEach(function (query) {\n\
                // recurse\n\
                local.dbRowListGetManyByQuery(result, query).forEach(function (dbRow) {\n\
                    dbRowDict[dbRow._id] = dbRow;\n\
                });\n\
            });\n\
            result = Object.keys(dbRowDict).map(function (id) {\n\
                return dbRowDict[id];\n\
            });\n\
            return !result.length;\n\
        }\n\
        if (key[0] === \"$\") {\n\
            result = local.dbRowListGetManyByOperator(result, fieldName, key, bb, not);\n\
            return !result.length;\n\
        }\n\
        // recurse\n\
        result = local.dbRowListGetManyByQuery(result, bb, key, not);\n\
        return !result.length;\n\
    });\n\
    return result;\n\
};\n\
\n\
local.dbRowProject = function (dbRow, fieldList) {\n\
/*\n\
 * this function will deepcopy and project the dbRow with given fieldList\n\
 */\n\
    var result;\n\
    if (!dbRow) {\n\
        return null;\n\
    }\n\
    // handle list-case\n\
    if (Array.isArray(dbRow)) {\n\
        return dbRow.map(function (dbRow) {\n\
            // recurse\n\
            return local.dbRowProject(dbRow, fieldList);\n\
        });\n\
    }\n\
    // normalize to list\n\
    if (!(Array.isArray(fieldList) && fieldList.length)) {\n\
        fieldList = Object.keys(dbRow);\n\
    }\n\
    result = {};\n\
    fieldList.forEach(function (key) {\n\
        if (key[0] !== \"$\") {\n\
            result[key] = dbRow[key];\n\
        }\n\
    });\n\
    return JSON.parse(local.jsonStringifyOrdered(result));\n\
};\n\
\n\
local.dbRowSetId = function (dbRow, idIndex) {\n\
/*\n\
 * this function will if does not exist,\n\
 * then set a random and unique id into dbRow for given idIndex,\n\
 */\n\
    var id;\n\
    id = dbRow[idIndex.name];\n\
    if (typeof id !== \"number\" && typeof id !== \"string\") {\n\
        do {\n\
            id = (\n\
                idIndex.isInteger\n\
                ? (1 + Math.random()) * 0x10000000000000\n\
                : \"a\" + ((1 + Math.random()) * 0x10000000000000).toString(36).slice(1)\n\
            );\n\
        // optimization - hasOwnProperty\n\
        } while (idIndex.dict.hasOwnProperty(id));\n\
        dbRow[idIndex.name] = id;\n\
    }\n\
    return id;\n\
};\n\
\n\
local.dbSave = function (onError) {\n\
/*\n\
 * this function will save the db to storage\n\
 */\n\
    var onParallel;\n\
    onParallel = local.onParallel(function (error) {\n\
        local.setTimeoutOnError(onError, 0, error);\n\
    });\n\
    onParallel.counter += 1;\n\
    Object.keys(local.dbTableDict).forEach(function (key) {\n\
        onParallel.counter += 1;\n\
        local.dbTableDict[key].save(onParallel);\n\
    });\n\
    onParallel();\n\
};\n\
\n\
local.dbSeed = function (dbSeedList, onError) {\n\
/*\n\
 * this function will seed the db with given dbSeedList\n\
 */\n\
    var dbTableDict;\n\
    var onParallel;\n\
    dbTableDict = {};\n\
    onParallel = globalThis.utility2_onReadyBefore || local.onParallel(onError);\n\
    onParallel.counter += 1;\n\
    // seed db\n\
    onParallel.counter += 1;\n\
    local.dbTableCreateMany(dbSeedList, onParallel);\n\
    (dbSeedList || []).forEach(function (option) {\n\
        dbTableDict[option.name] = true;\n\
    });\n\
    Object.keys(dbTableDict).forEach(function (name) {\n\
        console.error(\"db - seeding dbTable \" + name + \" ...\");\n\
    });\n\
    local.functionOrNop(globalThis.utility2_onReadyAfter)(onError);\n\
    onParallel();\n\
};\n\
\n\
local.dbTableCreateMany = function (optionList, onError) {\n\
/*\n\
 * this function will create many dbTables with given optionList\n\
 */\n\
    var onParallel;\n\
    var result;\n\
    onParallel = local.onParallel(function (error) {\n\
        local.setTimeoutOnError(onError, 0, error, result);\n\
    });\n\
    onParallel.counter += 1;\n\
    result = (optionList || []).map(function (option) {\n\
        onParallel.counter += 1;\n\
        return local.dbTableCreateOne(option, onParallel);\n\
    });\n\
    return local.setTimeoutOnError(onParallel, 0, null, result);\n\
};\n\
\n\
local.dbTableCreateOne = function (option, onError) {\n\
/*\n\
 * this function will create a dbTable with given option\n\
 */\n\
    var DbTable;\n\
    var that;\n\
    option = local.objectSetOverride(option);\n\
    // register dbTable\n\
    DbTable = local._DbTable;\n\
    local.dbTableDict[option.name] = local.dbTableDict[option.name] || new DbTable(option);\n\
    that = local.dbTableDict[option.name];\n\
    that.sortDefault = (\n\
        option.sortDefault\n\
        || that.sortDefault\n\
        || [{\n\
            fieldName: \"_timeUpdated\",\n\
            isDescending: true\n\
        }]\n\
    );\n\
    // remove idIndex\n\
    (option.idIndexRemoveList || []).forEach(function (idIndex) {\n\
        that.idIndexRemove(idIndex);\n\
    });\n\
    // create idIndex\n\
    (option.idIndexCreateList || []).forEach(function (idIndex) {\n\
        that.idIndexCreate(idIndex);\n\
    });\n\
    // upsert dbRow\n\
    that.crudSetManyById(option.dbRowList);\n\
    // restore dbTable from persistent-storage\n\
    that.isLoaded = that.isLoaded || option.isLoaded;\n\
    if (!that.isLoaded) {\n\
        local.storageGetItem(\"dbTable.\" + that.name + \".json\", function (error, data) {\n\
            // validate no error occurred\n\
            local.assertThrow(!error, error);\n\
            if (!that.isLoaded) {\n\
                local.dbImport(data);\n\
            }\n\
            that.isLoaded = true;\n\
            local.setTimeoutOnError(onError, 0, null, that);\n\
        });\n\
        return that;\n\
    }\n\
    return local.setTimeoutOnError(onError, 0, null, that);\n\
};\n\
\n\
local.dbTableDict = {};\n\
\n\
local.onEventDomDb = function (event) {\n\
/*\n\
 * this function will handle db dom-events\n\
 */\n\
    var ajaxProgressUpdate;\n\
    var reader;\n\
    var tmp;\n\
    var utility2;\n\
    utility2 = globalThis.utility2 || {};\n\
    ajaxProgressUpdate = utility2.ajaxProgressUpdate || local.nop;\n\
    switch (event.target.dataset.onEventDomDb || event.target.id) {\n\
    case \"dbExportButton1\":\n\
        tmp = globalThis.URL.createObjectURL(new globalThis.Blob([local.dbExport()]));\n\
        document.querySelector(\n\
            \"#dbExportA1\"\n\
        ).href = tmp;\n\
        document.querySelector(\n\
            \"#dbExportA1\"\n\
        ).click();\n\
        setTimeout(function () {\n\
            globalThis.URL.revokeObjectURL(tmp);\n\
        }, 30000);\n\
        break;\n\
    case \"dbImportButton1\":\n\
        tmp = document.querySelector(\n\
            \"#dbImportInput1\"\n\
        );\n\
        if (!tmp.onEventDomDb) {\n\
            tmp.onEventDomDb = local.onEventDomDb;\n\
            tmp.addEventListener(\"change\", local.onEventDomDb);\n\
        }\n\
        tmp.click();\n\
        break;\n\
    case \"dbImportInput1\":\n\
        if (event.type !== \"change\") {\n\
            return;\n\
        }\n\
        ajaxProgressUpdate();\n\
        reader = new FileReader();\n\
        tmp = document.querySelector(\n\
            \"#dbImportInput1\"\n\
        ).files[0];\n\
        if (!tmp) {\n\
            return;\n\
        }\n\
        reader.addEventListener(\"load\", function () {\n\
            local.dbImport(reader.result);\n\
            ajaxProgressUpdate();\n\
        });\n\
        reader.readAsText(tmp);\n\
        break;\n\
    case \"dbResetButton1\":\n\
        ajaxProgressUpdate();\n\
        local.dbReset(globalThis.utility2_dbSeedList, function (error) {\n\
            local.onErrorDefault(error);\n\
            if (\n\
                utility2.uiEventListenerDict\n\
                && typeof utility2.uiEventListenerDict[\".onEventUiReload\"] === \"function\"\n\
            ) {\n\
                utility2.uiEventListenerDict[\".onEventUiReload\"]();\n\
            }\n\
        });\n\
        break;\n\
    }\n\
};\n\
\n\
local.sortCompare = function (aa, bb, ii, jj) {\n\
/*\n\
 * this function will compare aa vs bb and return:\n\
 * -1 if aa < bb\n\
 *  0 if aa === bb\n\
 *  1 if aa > bb\n\
 * the priority for comparing different typeof's is:\n\
 * null < boolean < number < string < object < undefined\n\
 */\n\
    var typeof1;\n\
    var typeof2;\n\
    if (aa === bb) {\n\
        return (\n\
            ii < jj\n\
            ? -1\n\
            : 1\n\
        );\n\
    }\n\
    if (aa === null) {\n\
        return -1;\n\
    }\n\
    if (bb === null) {\n\
        return 1;\n\
    }\n\
    typeof1 = typeof aa;\n\
    typeof2 = typeof bb;\n\
    if (typeof1 === typeof2) {\n\
        return (\n\
            typeof1 === \"object\"\n\
            ? 0\n\
            : aa > bb\n\
            ? 1\n\
            : -1\n\
        );\n\
    }\n\
    if (typeof1 === \"boolean\") {\n\
        return -1;\n\
    }\n\
    if (typeof2 === \"boolean\") {\n\
        return 1;\n\
    }\n\
    if (typeof1 === \"number\") {\n\
        return -1;\n\
    }\n\
    if (typeof2 === \"number\") {\n\
        return 1;\n\
    }\n\
    if (typeof1 === \"string\") {\n\
        return -1;\n\
    }\n\
    if (typeof2 === \"string\") {\n\
        return 1;\n\
    }\n\
    return 0;\n\
};\n\
}());\n\
\n\
\n\
\n\
// run node js-env code - init-after\n\
/* istanbul ignore next */\n\
(function () {\n\
if (local.isBrowser) {\n\
    return;\n\
}\n\
\n\
\n\
\n\
local.cliDict = {};\n\
\n\
local.cliDict.dbTableCrudGetManyByQuery = function () {\n\
/*\n\
 * <dbTable> <query>\n\
 * will get from <dbTable> with json <query>, <dbRowList>\n\
 */\n\
    local.dbTableCreateOne({\n\
        name: process.argv[3]\n\
    }, function (error, that) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        console.log(JSON.stringify(that.crudGetManyByQuery(\n\
            JSON.parse(process.argv[4] || \"{}\")\n\
        ), null, 4));\n\
    });\n\
};\n\
\n\
local.cliDict.dbTableCrudRemoveManyByQuery = function () {\n\
/*\n\
 * <dbTable> <query>\n\
 * will remove from <dbTable> with json <query>, <dbRowList>\n\
 */\n\
    local.dbTableCreateOne({\n\
        name: process.argv[3]\n\
    }, function (error, that) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        console.log(JSON.stringify(that.crudRemoveManyByQuery(\n\
            JSON.parse(process.argv[4])\n\
        ), null, 4));\n\
    });\n\
};\n\
\n\
local.cliDict.dbTableCrudSetManyById = function () {\n\
/*\n\
 * <dbTable> <dbRowList>\n\
 * will set in <dbTable>, <dbRowList>\n\
 */\n\
    local.dbTableCreateOne({\n\
        name: process.argv[3]\n\
    }, function (error, that) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        that.crudSetManyById(JSON.parse(process.argv[4]));\n\
    });\n\
};\n\
\n\
local.cliDict.dbTableHeaderDictGet = function () {\n\
/*\n\
 * <dbTable>\n\
 * will get from <dbTable>, <headerDict>\n\
 */\n\
    local.dbTableCreateOne({\n\
        name: process.argv[3]\n\
    }, function (error, that) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        var tmp;\n\
        tmp = [];\n\
        that.idIndexList.forEach(function (idIndex) {\n\
            tmp.push({\n\
                isInteger: idIndex.isInteger,\n\
                name: idIndex.name\n\
            });\n\
        });\n\
        console.log(JSON.stringify({\n\
            idIndexList: tmp,\n\
            sizeLimit: that.sizeLimit,\n\
            sortDefault: that.sortDefault\n\
        }, null, 4));\n\
    });\n\
};\n\
\n\
local.cliDict.dbTableHeaderDictSet = function () {\n\
/*\n\
 * <dbTable> <headerDict>\n\
 * will set in <dbTable>, <headerDict>\n\
 */\n\
    local.dbTableCreateOne({\n\
        name: process.argv[3]\n\
    }, function (error, that) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        local.tmp = JSON.parse(process.argv[4]);\n\
        that.sizeLimit = local.tmp.sizeLimit || that.sizeLimit;\n\
        that.sortDefault = local.tmp.sortDefault || that.sortDefault;\n\
        that.save();\n\
        local.tmp = [];\n\
        that.idIndexList.forEach(function (idIndex) {\n\
            local.tmp.push({\n\
                isInteger: idIndex.isInteger,\n\
                name: idIndex.name\n\
            });\n\
        });\n\
        local.cliDict.dbTableHeaderDictGet();\n\
    });\n\
};\n\
\n\
local.cliDict.dbTableIdIndexCreate = function () {\n\
/*\n\
 * <dbTable> <idIndex>\n\
 * will create in <dbTable>, <idIndex>\n\
 */\n\
    local.dbTableCreateOne({\n\
        name: process.argv[3]\n\
    }, function (error, that) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        that.idIndexCreate(JSON.parse(process.argv[4]));\n\
        that.save();\n\
        local.tmp = [];\n\
        that.idIndexList.forEach(function (idIndex) {\n\
            local.tmp.push({\n\
                isInteger: idIndex.isInteger,\n\
                name: idIndex.name\n\
            });\n\
        });\n\
        local.cliDict.dbTableHeaderDictGet();\n\
    });\n\
};\n\
\n\
local.cliDict.dbTableIdIndexRemove = function () {\n\
/*\n\
 * <dbTable> <idIndex>\n\
 * will remove from <dbTable>, <idIndex>\n\
 */\n\
    local.dbTableCreateOne({\n\
        name: process.argv[3]\n\
    }, function (error, that) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        that.idIndexRemove(JSON.parse(process.argv[4]));\n\
        that.save();\n\
        local.cliDict.dbTableHeaderDictGet();\n\
    });\n\
};\n\
\n\
local.cliDict.dbTableList = function () {\n\
/*\n\
 *\n\
 * will get from db, <dbTableList>\n\
 */\n\
    local.storageKeys(function (error, data) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        console.log(JSON.stringify(data.map(function (element) {\n\
            return element.split(\".\").slice(1, -1).join(\".\");\n\
        }), null, 4));\n\
    });\n\
};\n\
\n\
local.cliDict.dbTableRemove = function () {\n\
/*\n\
 * <dbTable>\n\
 * will remove from db, <dbTable>\n\
 */\n\
    local.storageRemoveItem(\"dbTable.\" + process.argv[3] + \".json\", function (error) {\n\
        // validate no error occurred\n\
        local.assertThrow(!error, error);\n\
        local.cliDict.dbTableList();\n\
    });\n\
};\n\
\n\
// run cli\n\
if (module === require.main && !globalThis.utility2_rollup) {\n\
    local.cliRun();\n\
}\n\
}());\n\
\n\
\n\
\n\
}());\n\
"
/* jslint ignore:end */
    return local;
}(globalThis.utility2_rollup));

// usr/bin/env node
/*
 * lib.db.js (2018.12.30)
 * https://github.com/kaizhu256/node-db-lite
 * this zero-dependency package will provide a persistent, in-browser database, with a working web-demo
 *
 * browser example:
 *     <script src="assets.db-lite.js"></script>
 *     <script>
 *     var dbTable1;
 *     dbTable1 = window.dbTable1 = window.utility2_db.dbTableCreateOne({ name: "dbTable1" });
 *     dbTable1.idIndexCreate({ name: "field1" });
 *     dbTable1.crudSetOneById({ field1: "hello", field2: "world" });
 *     console.log(dbTable1.crudGetManyByQuery({
 *         limit: Infinity,
 *         query: { field1: "hello" },
 *         skip: 0,
 *         sort: [{ fieldName: 'field1', isDescending: false }]
 *     }));
 *     </script>
 *
 * node example:
 *     var db, dbTable1;
 *     utility2_db = require("./assets.db-lite.js");
 *     dbTable1 = global.dbTable1 = utility2_db.dbTableCreateOne({ name: "dbTable1" });
 *     dbTable1.idIndexCreate({ name: "field1" });
 *     dbTable1.crudSetOneById({ field1: "hello", field2: "world" });
 *     console.log(dbTable1.crudGetManyByQuery({
 *         limit: Infinity,
 *         query: { field1: "hello" },
 *         skip: 0,
 *         sort: [{ fieldName: 'field1', isDescending: false }]
 *     }));
 */



/* istanbul instrument in package db */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



/* istanbul ignore next */
// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    // || globalThis.utility2_rollup_old
    // || require("./assets.utility2.rollup.js")
    || globalThis.globalLocal
);
// init exports
if (local.isBrowser) {
    globalThis.utility2_db = local;
} else {
    module.exports = local;
    module.exports.__dirname = __dirname;
}
// init lib main
local.db = local;



/* validateLineSortedReset */
local.cliRun = function (option) {
/*
 * this function will run the cli
 */
    local.cliDict._eval = local.cliDict._eval || function () {
    /*
     * <code>
     * will eval <code>
     */
        globalThis.local = local;
        local.vm.runInThisContext(process.argv[3]);
    };
    local.cliDict["--eval"] = local.cliDict["--eval"] || local.cliDict._eval;
    local.cliDict["-e"] = local.cliDict["-e"] || local.cliDict._eval;
    local.cliDict._help = local.cliDict._help || function () {
    /*
     *
     * will print help
     */
        var commandList;
        var file;
        var packageJson;
        var text;
        var textDict;
        commandList = [{
            argList: "<arg2>  ...",
            description: "usage:",
            command: ["<arg1>"]
        }, {
            argList: "'console.log(\"hello world\")'",
            description: "example:",
            command: ["--eval"]
        }];
        file = __filename.replace((
            /.*\//
        ), "");
        option = Object.assign({}, option);
        packageJson = require("./package.json");
        // validate comment
        option.rgxComment = option.rgxComment || (
            /\)\u0020\{\n(?:|\u0020{4})\/\*\n(?:\u0020|\u0020{5})\*((?:\u0020<[^>]*?>|\u0020\.\.\.)*?)\n(?:\u0020|\u0020{5})\*\u0020(will\u0020.*?\S)\n(?:\u0020|\u0020{5})\*\/\n(?:\u0020{4}|\u0020{8})\S/
        );
        textDict = {};
        Object.keys(local.cliDict).sort().forEach(function (key, ii) {
            if (key[0] === "_" && key !== "_default") {
                return;
            }
            text = String(local.cliDict[key]);
            if (key === "_default") {
                key = "";
            }
            textDict[text] = textDict[text] || (ii + 2);
            ii = textDict[text];
            if (commandList[ii]) {
                commandList[ii].command.push(key);
                return;
            }
            try {
                commandList[ii] = option.rgxComment.exec(text);
                commandList[ii] = {
                    argList: (commandList[ii][1] || "").trim(),
                    command: [key],
                    description: commandList[ii][2]
                };
            } catch (ignore) {
                local.assertThrow(null, new Error(
                    "cliRun - cannot parse comment in COMMAND "
                    + key + ":\nnew RegExp("
                    + JSON.stringify(option.rgxComment.source)
                    + ").exec(" + JSON.stringify(text)
                    .replace((
                        /\\\\/g
                    ), "\u0000")
                    .replace((
                        /\\n/g
                    ), "\\n\\\n")
                    .replace((
                        /\u0000/g
                    ), "\\\\") + ");"
                ));
            }
        });
        text = "";
        text += packageJson.name + " (" + packageJson.version + ")\n\n";
        text += commandList
        .filter(function (element) {
            return element;
        })
        .map(function (element, ii) {
            element.command = element.command.filter(function (element) {
                return element;
            });
            switch (ii) {
            case 0:
            case 1:
                element.argList = [element.argList];
                break;
            default:
                element.argList = element.argList.split(" ");
                element.description = (
                    "# COMMAND "
                    + (element.command[0] || "<none>") + "\n# "
                    + element.description
                );
            }
            return (
                element.description + "\n  " + file
                + ("  " + element.command.sort().join("|") + "  ")
                    .replace((
                    /^\u0020{4}$/
                ), "  ")
                + element.argList.join("  ")
            );
        })
        .join("\n\n");
        console.log(text);
    };
    local.cliDict["--help"] = local.cliDict["--help"] || local.cliDict._help;
    local.cliDict["-h"] = local.cliDict["-h"] || local.cliDict._help;
    local.cliDict._default = local.cliDict._default || local.cliDict._help;
    local.cliDict.help = local.cliDict.help || local.cliDict._help;
    local.cliDict._interactive = local.cliDict._interactive || function () {
    /*
     *
     * will start interactive-mode
     */
        globalThis.local = local;
        local.identity(local.replStart || require("repl").start)({
            useGlobal: true
        });
    };
    local.cliDict["--interactive"] = (
        local.cliDict["--interactive"]
        || local.cliDict._interactive
    );
    local.cliDict["-i"] = local.cliDict["-i"] || local.cliDict._interactive;
    local.cliDict._version = local.cliDict._version || function () {
    /*
     *
     * will print version
     */
        console.log(require(__dirname + "/package.json").version);
    };
    local.cliDict["--version"] = (
        local.cliDict["--version"]
        || local.cliDict._version
    );
    local.cliDict["-v"] = local.cliDict["-v"] || local.cliDict._version;
    // default to --help command if no arguments are given
    if (process.argv.length <= 2) {
        local.cliDict._help();
        return;
    }
    if (local.cliDict[process.argv[2]]) {
        local.cliDict[process.argv[2]]();
        return;
    }
    local.cliDict._default();
};

local.jsonCopy = function (obj) {
/*
 * this function will deep-copy obj
 */
    return (
        obj === undefined
        ? undefined
        : JSON.parse(JSON.stringify(obj))
    );
};

local.jsonStringifyOrdered = function (obj, replacer, space) {
/*
 * this function will JSON.stringify <obj>,
 * with object-keys sorted and circular-references removed
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Syntax
 */
    var circularSet;
    var stringify;
    var tmp;
    stringify = function (obj) {
    /*
     * this function will recursively JSON.stringify obj,
     * with object-keys sorted and circular-references removed
     */
        // if obj is not an object or function, then JSON.stringify as normal
        if (!(
            obj
            && typeof obj === "object"
            && typeof obj.toJSON !== "function"
        )) {
            return JSON.stringify(obj);
        }
        // ignore circular-reference
        if (circularSet.has(obj)) {
            return;
        }
        circularSet.add(obj);
        // if obj is an array, then recurse its items
        if (Array.isArray(obj)) {
            tmp = "[" + obj.map(function (obj) {
                // recurse
                tmp = stringify(obj);
                return (
                    typeof tmp === "string"
                    ? tmp
                    : "null"
                );
            }).join(",") + "]";
            circularSet.delete(obj);
            return tmp;
        }
        // if obj is not an array,
        // then recurse its items with object-keys sorted
        tmp = "{" + Object.keys(obj)
        // sort object-keys
        .sort()
        .map(function (key) {
            // recurse
            tmp = stringify(obj[key]);
            if (typeof tmp === "string") {
                return JSON.stringify(key) + ":" + tmp;
            }
        })
        .filter(function (obj) {
            return typeof obj === "string";
        })
        .join(",") + "}";
        circularSet.delete(obj);
        return tmp;
    };
    circularSet = new Set();
    return JSON.stringify((
        (typeof obj === "object" && obj)
        // recurse
        ? JSON.parse(stringify(obj))
        : obj
    ), replacer, space);
};

local.listShuffle = function (list) {
/*
 * this function will inplace shuffle the list using fisher-yates algorithm
 * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle
 */
    var ii;
    var random;
    var swap;
    ii = list.length;
    while (ii > 1) {
        ii -= 1;
        random = Math.floor(Math.random() * (ii + 1));
        swap = list[ii];
        list[ii] = list[random];
        list[random] = swap;
    }
    return list;
};

local.objectSetOverride = function (dict, overrides, depth, env) {
/*
 * this function will recursively set overrides for items in dict
 */
    dict = dict || {};
    env = env || (typeof process === "object" && process.env) || {};
    overrides = overrides || {};
    Object.keys(overrides).forEach(function (key) {
        var dict2;
        var overrides2;
        dict2 = dict[key];
        overrides2 = overrides[key];
        if (overrides2 === undefined) {
            return;
        }
        // if both dict2 and overrides2 are non-null and non-array objects,
        // then recurse with dict2 and overrides2
        if (
            depth > 1
            // dict2 is a non-null and non-array object
            && typeof dict2 === "object" && dict2 && !Array.isArray(dict2)
            // overrides2 is a non-null and non-array object
            && typeof overrides2 === "object" && overrides2
            && !Array.isArray(overrides2)
        ) {
            local.objectSetOverride(dict2, overrides2, depth - 1, env);
            return;
        }
        // else set dict[key] with overrides[key]
        dict[key] = (
            dict === env
            // if dict is env, then overrides falsy-value with empty-string
            ? overrides2 || ""
            : overrides2
        );
    });
    return dict;
};

local.onErrorDefault = function (error) {
/*
 * this function will if <error> exists, then print it to stderr
 */
    if (error) {
        console.error(error);
    }
    return error;
};

local.onErrorWithStack = function (onError) {
/*
 * this function will create a new callback that will call onError,
 * and append the current stack to any error
 */
    var onError2;
    var stack;
    stack = new Error().stack.replace((
        /(.*?)\n.*?$/m
    ), "$1");
    onError2 = function (error, data, meta) {
        if (
            error
            && typeof error.stack === "string"
            && error !== local.errorDefault
            && String(error.stack).indexOf(stack.split("\n")[2]) < 0
        ) {
            // append the current stack to error.stack
            error.stack += "\n" + stack;
        }
        onError(error, data, meta);
    };
    // debug onError
    onError2.toString = function () {
        return String(onError);
    };
    return onError2;
};

local.onParallel = function (onError, onEach, onRetry) {
/*
 * this function will create a function that will
 * 1. run async tasks in parallel
 * 2. if counter === 0 or error occurred, then call onError with error
 */
    var onParallel;
    onError = local.onErrorWithStack(onError);
    onEach = onEach || local.nop;
    onRetry = onRetry || local.nop;
    onParallel = function (error, data) {
        if (onRetry(error, data)) {
            return;
        }
        // decrement counter
        onParallel.counter -= 1;
        // validate counter
        if (!(onParallel.counter >= 0 || error || onParallel.error)) {
            error = new Error(
                "invalid onParallel.counter = " + onParallel.counter
            );
        // ensure onError is run only once
        } else if (onParallel.counter < 0) {
            return;
        }
        // handle error
        if (error) {
            onParallel.error = error;
            // ensure counter <= 0
            onParallel.counter = -Math.abs(onParallel.counter);
        }
        // call onError when isDone
        if (onParallel.counter <= 0) {
            onError(error, data);
            return;
        }
        onEach();
    };
    // init counter
    onParallel.counter = 0;
    // return callback
    return onParallel;
};

local.replStart = function () {
/*
 * this function will start the repl-debugger
 */
    var that;
    if (globalThis.utility2_serverRepl1) {
        return;
    }
    // start replServer
    that = require("repl").start({
        useGlobal: true
    });
    globalThis.utility2_serverRepl1 = that;
    that.onError = function (error) {
    /*
     * this function will debug any repl-error
     */
        // debug error
        globalThis.utility2_debugReplError = error;
        console.error(error);
    };
    // save repl eval function
    that.evalDefault = that.eval;
    // hook custom repl eval function
    that.eval = function (script, context, file, onError) {
        var onError2;
        onError2 = function (error, data) {
            // debug error
            globalThis.utility2_debugReplError = (
                error
                || globalThis.utility2_debugReplError
            );
            onError(error, data);
        };
        script.replace((
            /^(\S+)\u0020(.*?)\n/
        ), function (ignore, match1, match2) {
            switch (match1) {
            // syntax-sugar to run async shell-command
            case "$":
                switch (match2) {
                // syntax-sugar to run git diff
                case "git diff":
                    match2 = "git diff --color | cat";
                    break;
                // syntax-sugar to run git log
                case "git log":
                    match2 = "git log -n 4 | cat";
                    break;
                }
                // source lib.utility2.sh
                if (process.env.npm_config_dir_utility2 && (match2 !== ":")) {
                    match2 = (
                        ". " + process.env.npm_config_dir_utility2
                        + "/lib.utility2.sh;" + match2
                    );
                }
                // run async shell-command
                require("child_process").spawn(match2, {
                    shell: true,
                    stdio: ["ignore", 1, 2]
                })
                // on shell exit, print return prompt
                .on("exit", function (exitCode) {
                    console.error("exit-code " + exitCode);
                    that.evalDefault(
                        "\n",
                        context,
                        file,
                        onError2
                    );
                });
                script = "\n";
                break;
            // syntax-sugar to map text with charCodeAt
            case "charCode":
                console.error(
                    match2.split("").map(function (chr) {
                        return (
                            "\\u"
                            + chr.charCodeAt(0).toString(16).padStart(4, 0)
                        );
                    }).join("")
                );
                script = "\n";
                break;
            // syntax-sugar to sort chr
            case "charSort":
                console.error(JSON.stringify(match2.split("").sort().join("")));
                script = "\n";
                break;
            // syntax-sugar to grep current dir
            case "grep":
                // run async shell-command
                require("child_process").spawn((
                    "find . -type f | grep -v -E "
/* jslint ignore:start */
+ '"\
/\\.|(\\b|_)(\\.\\d|\
archive|artifact|\
bower_component|build|\
coverage|\
doc|\
external|\
fixture|\
git_module|\
jquery|\
log|\
min|mock|\
node_module|\
rollup|\
swp|\
tmp|\
vendor)s{0,1}(\\b|_)\
" '
/* jslint ignore:end */
                    + "| tr \"\\n\" \"\\000\" | xargs -0 grep -HIin -E \""
                    + match2 + "\""
                ), {
                    shell: true,
                    stdio: ["ignore", 1, 2]
                })
                // on shell exit, print return prompt
                .on("exit", function (exitCode) {
                    console.error("exit-code " + exitCode);
                    that.evalDefault(
                        "\n",
                        context,
                        file,
                        onError2
                    );
                });
                script = "\n";
                break;
            // syntax-sugar to list object's keys, sorted by item-type
            // console.error(Object.keys(global).map(function(key){return(typeof global[key]==='object'&&global[key]&&global[key]===global[key]?'global':typeof global[key])+' '+key;}).sort().join('\n')) // jslint ignore:line
            case "keys":
                script = (
                    "console.error(Object.keys(" + match2
                    + ").map(function(key){return("
                    + "typeof " + match2 + "[key]==='object'&&"
                    + match2 + "[key]&&"
                    + match2 + "[key]===global[key]"
                    + "?'global'"
                    + ":typeof " + match2 + "[key]"
                    + ")+' '+key;"
                    + "}).sort().join('\\n'))\n"
                );
                break;
            // syntax-sugar to print stringified arg
            case "print":
                script = "console.error(String(" + match2 + "))\n";
                break;
            // syntax-sugar to read file
            case "readFile":
                try {
                    console.error(JSON.stringify(
                        require("fs").readFileSync(match2, "utf8")
                    ));
                } catch (errorCaught) {
                    console.error(errorCaught);
                }
                script = "\n";
                break;
            }
        });
        // eval the script
        that.evalDefault(script, context, file, onError2);
    };
    that.socket = {
        end: local.nop,
        on: local.nop,
        write: local.nop
    };
    // init process.stdout
    process.stdout._writeDefault = (
        process.stdout._writeDefault
        || process.stdout._write
    );
    process.stdout._write = function (chunk, encoding, callback) {
        process.stdout._writeDefault(chunk, encoding, callback);
        // coverage-hack - ignore else-statement
        local.nop(that.socket.writable && (function () {
            that.socket.write(chunk, encoding);
        }()));
    };
    // start tcp-server
    globalThis.utility2_serverReplTcp1 = require("net").createServer(function (
        socket
    ) {
        // init socket
        that.socket = socket;
        that.socket.on("data", that.write.bind(that));
        that.socket.on("error", that.onError);
        that.socket.setKeepAlive(true);
    });
    // coverage-hack - ignore else-statement
    local.nop(process.env.PORT_REPL && (function () {
        console.error(
            "repl-server listening on tcp-port " + process.env.PORT_REPL
        );
        globalThis.utility2_serverReplTcp1.listen(process.env.PORT_REPL);
    }()));
};

local.setTimeoutOnError = function (onError, timeout, error, data) {
/*
 * this function will after timeout has passed, then call onError(error, data)
 */
    if (typeof onError === "function") {
        setTimeout(function () {
            onError(error, data);
        }, timeout);
    }
    return data;
};
}());



// run shared js-env code - lib.storage.js
(function (local) {
var child_process;
var clear;
var defer;
var deferList;
var fs;
var getItem;
var init;
var keys;
var length;
var os;
var removeItem;
var setItem;
var storage;
var storageDir;

storageDir = "tmp/storage." + (
    local.isBrowser
    ? "undefined"
    : process.env.NODE_ENV
);
if (!local.isBrowser) {
    // require modules
    child_process = require("child_process");
    fs = require("fs");
    os = require("os");
}

clear = function (onError) {
/*
 * this function will clear storage
 */
    defer({
        action: "clear"
    }, onError);
};

defer = function (option, onError) {
/*
 * this function will defer option.action until storage is ready
 */
    var data;
    var isDone;
    var objectStore;
    var onError2;
    var request;
    var tmp;
    onError = onError || function (error) {
        // validate no error occurred
        local.assertThrow(!error, error);
    };
    if (!storage) {
        deferList.push(function () {
            defer(option, onError);
        });
        init();
        return;
    }
    if (local.isBrowser) {
        onError2 = function () {
            /* istanbul ignore next */
            if (isDone) {
                return;
            }
            isDone = true;
            onError(
                request && (request.error || request.transaction.error),
                data || request.result || ""
            );
        };
        switch (option.action) {
        case "clear":
        case "removeItem":
        case "setItem":
            objectStore = storage
            .transaction(storageDir, "readwrite")
            .objectStore(storageDir);
            break;
        default:
            objectStore = storage
            .transaction(storageDir, "readonly")
            .objectStore(storageDir);
        }
        switch (option.action) {
        case "clear":
            request = objectStore.clear();
            break;
        case "getItem":
            request = objectStore.get(String(option.key));
            break;
        case "keys":
            data = [];
            request = objectStore.openCursor();
            request.onsuccess = function () {
                if (!request.result) {
                    onError2();
                    return;
                }
                data.push(request.result.key);
                request.result.continue();
            };
            break;
        case "length":
            request = objectStore.count();
            break;
        case "removeItem":
            request = objectStore.delete(String(option.key));
            break;
        case "setItem":
            request = objectStore.put(option.value, String(option.key));
            break;
        }
        ["onabort", "onerror", "onsuccess"].forEach(function (handler) {
            request[handler] = request[handler] || onError2;
        });
        // debug request
        local._debugStorageRequest = request;
    } else {
        switch (option.action) {
        case "clear":
            child_process.spawnSync("rm -f " + storage + "/*", {
                shell: true,
                stdio: ["ignore", 1, 2]
            });
            setTimeout(onError);
            break;
        case "getItem":
            fs.readFile(
                storage + "/" + encodeURIComponent(String(option.key)),
                "utf8",
                function (ignore, data) {
                    onError(null, data || "");
                }
            );
            break;
        case "keys":
            fs.readdir(storage, function (error, data) {
                onError(error, data && data.map(decodeURIComponent));
            });
            break;
        case "length":
            fs.readdir(storage, function (error, data) {
                onError(error, data && data.length);
            });
            break;
        case "removeItem":
            fs.unlink(
                storage + "/" + encodeURIComponent(String(option.key)),
                // ignore error
                function () {
                    onError();
                }
            );
            break;
        case "setItem":
            tmp = os.tmpdir() + "/" + Date.now() + Math.random();
            // save to tmp
            fs.writeFile(tmp, option.value, function (error) {
                // validate no error occurred
                local.assertThrow(!error, error);
                // rename tmp to key
                fs.rename(
                    tmp,
                    storage + "/" + encodeURIComponent(String(option.key)),
                    onError
                );
            });
            break;
        }
    }
};

deferList = [];

getItem = function (key, onError) {
/*
 * this function will get the item with given key from storage
 */
    defer({
        action: "getItem",
        key: key
    }, onError);
};

init = function () {
/*
 * this function will init storage
 */
    var onError;
    var request;
    onError = function (error) {
        // validate no error occurred
        local.assertThrow(!error, error);
        if (local.isBrowser) {
            storage = globalThis[storageDir];
        }
        while (deferList.length) {
            deferList.shift()();
        }
    };
    if (local.isBrowser) {
        storage = globalThis[storageDir];
    }
    if (storage) {
        onError();
        return;
    }
    if (local.isBrowser) {
        // init indexedDB
        try {
            request = globalThis.indexedDB.open(storageDir);
            // debug request
            local._debugStorageRequestIndexedDB = request;
            request.onerror = onError;
            request.onsuccess = function () {
                globalThis[storageDir] = request.result;
                onError();
            };
            request.onupgradeneeded = function () {
                if (!request.result.objectStoreNames.contains(storageDir)) {
                    request.result.createObjectStore(storageDir);
                }
            };
        } catch (ignore) {}
    } else {
        // mkdirp storage
        storage = storageDir;
        child_process.spawnSync("mkdir", ["-p", storage], {
            stdio: ["ignore", 1, 2]
        });
        onError();
    }
};

keys = function (onError) {
/*
 * this function will get all the keys in storage
 */
    defer({
        action: "keys"
    }, onError);
};

length = function (onError) {
/*
 * this function will get the number of items in storage
 */
    defer({
        action: "length"
    }, onError);
};

removeItem = function (key, onError) {
/*
 * this function will remove the item with given key from storage
 */
    defer({
        action: "removeItem",
        key: key
    }, onError);
};

setItem = function (key, value, onError) {
/*
 * this function will set the item with given key and value to storage
 */
    defer({
        action: "setItem",
        key: key,
        value: value
    }, onError);
};

// init local
local.storage = storage;
local.storageClear = clear;
local.storageDefer = defer;
local.storageDeferList = deferList;
local.storageDir = storageDir;
local.storageGetItem = getItem;
local.storageInit = init;
local.storageKeys = keys;
local.storageLength = length;
local.storageRemoveItem = removeItem;
local.storageSetItem = setItem;
}(local));



// run shared js-env code - lib.dbTable.js
(function () {
local._DbTable = function (option) {
/*
 * this function will create a dbTable
 */
    this.name = String(option.name);
    // register dbTable in dbTableDict
    local.dbTableDict[this.name] = this;
    this.dbRowList = [];
    this.isDirty = null;
    this.idIndexList = [{
        isInteger: false,
        name: "_id",
        dict: {}
    }];
    this.onSaveList = [];
    this.sizeLimit = option.sizeLimit || 0;
};

local._DbTable.prototype._cleanup = function () {
/*
 * this function will cleanup soft-deleted records from the dbTable
 */
    var dbRow;
    var ii;
    var list;
    if (!this.isDirty && this.dbRowList.length <= this.sizeLimit) {
        return;
    }
    this.isDirty = null;
    // cleanup dbRowList
    list = this.dbRowList;
    this.dbRowList = [];
    // optimization - while-loop
    ii = 0;
    while (ii < list.length) {
        dbRow = list[ii];
        // cleanup isRemoved
        if (!dbRow.$isRemoved) {
            this.dbRowList.push(dbRow);
        }
        ii += 1;
    }
    if (this.sizeLimit && this.dbRowList.length >= 1.5 * this.sizeLimit) {
        this.dbRowList = this._crudGetManyByQuery({}, this.sortDefault, 0, this.sizeLimit);
    }
};

local._DbTable.prototype._crudGetManyByQuery = function (
    query,
    sort,
    skip,
    limit,
    shuffle
) {
/*
 * this function will get the dbRow's in the dbTable,
 * with given query, sort, skip, and limit
 */
    var ii;
    var result;
    result = this.dbRowList;
    // get by query
    if (result.length && query && Object.keys(query).length) {
        result = local.dbRowListGetManyByQuery(this.dbRowList, query);
    }
    // sort
    (sort || []).forEach(function (element) {
        // bug-workaround - v8 does not have stable-sort
        // optimization - while-loop
        ii = 0;
        while (ii < result.length) {
            result[ii].$ii = ii;
            ii += 1;
        }
        result.sort(function (aa, bb) {
            return local.sortCompare(
                local.dbRowGetItem(aa, element.fieldName),
                local.dbRowGetItem(bb, element.fieldName),
                aa.$ii,
                bb.$ii
            );
        });
        if (element.isDescending) {
            result.reverse();
        }
    });
    // skip
    result = result.slice(skip || 0);
    // shuffle
    local.functionOrNop(shuffle && local.listShuffle)(result);
    // limit
    result = result.slice(0, limit || Infinity);
    return result;
};

local._DbTable.prototype._crudGetOneById = function (idDict) {
/*
 * this function will get the dbRow in the dbTable with given idDict
 */
    var id;
    var result;
    idDict = local.objectSetOverride(idDict);
    result = null;
    this.idIndexList.some(function (idIndex) {
        id = idDict[idIndex.name];
        // optimization - hasOwnProperty
        if (idIndex.dict.hasOwnProperty(id)) {
            result = idIndex.dict[id];
            return result;
        }
    });
    return result;
};

local._DbTable.prototype._crudRemoveOneById = function (idDict, circularList) {
/*
 * this function will remove the dbRow from the dbTable with given idDict
 */
    var id;
    var result;
    var that;
    if (!idDict) {
        return null;
    }
    that = this;
    circularList = circularList || [idDict];
    result = null;
    that.idIndexList.forEach(function (idIndex) {
        id = idDict[idIndex.name];
        // optimization - hasOwnProperty
        if (!idIndex.dict.hasOwnProperty(id)) {
            return;
        }
        result = idIndex.dict[id];
        delete idIndex.dict[id];
        // optimization - soft-delete
        result.$isRemoved = true;
        that.isDirty = true;
        if (circularList.indexOf(result) >= 0) {
            return;
        }
        circularList.push(result);
        // recurse
        that._crudRemoveOneById(result, circularList);
    });
    that.save();
    return result;
};

local._DbTable.prototype._crudSetOneById = function (dbRow) {
/*
 * this function will set the dbRow into the dbTable with given dbRow._id
 * WARNING - existing dbRow with conflicting dbRow._id will be removed
 */
    var existing;
    var id;
    var normalize;
    var timeNow;
    normalize = function (dbRow) {
    /*
     * this function will recursively normalize dbRow
     */
        switch (typeof dbRow) {
        case "boolean":
        case "string":
            return dbRow;
        case "number":
            return (
                Number.isFinite(dbRow)
                ? dbRow
                : undefined
            );
        case "object":
            if (!dbRow) {
                return;
            }
            break;
        default:
            return;
        }
        Object.keys(dbRow).forEach(function (key) {
            dbRow[key] = (
                (key[0] === "$" || key.indexOf(".") >= 0)
                // invalid-property
                ? undefined
                // recurse
                : normalize(dbRow[key])
            );
        });
        return dbRow;
    };
    dbRow = local.jsonCopy(local.objectSetOverride(dbRow));
    // update timestamp
    timeNow = new Date().toISOString();
    dbRow._timeCreated = dbRow._timeCreated || timeNow;
    if (!local.modeImport) {
        dbRow._timeUpdated = timeNow;
    }
    // normalize
    dbRow = normalize(dbRow);
    dbRow = local.jsonCopy(dbRow);
    // remove existing dbRow
    existing = this._crudRemoveOneById(dbRow) || dbRow;
    this.idIndexList.forEach(function (idIndex) {
        // auto-set id
        id = local.dbRowSetId(existing, idIndex);
        // copy id from existing to dbRow
        dbRow[idIndex.name] = id;
        // set dbRow
        idIndex.dict[id] = dbRow;
    });
    // update dbRowList
    this.dbRowList.push(dbRow);
    this.save();
    return dbRow;
};

local._DbTable.prototype._crudUpdateOneById = function (dbRow) {
/*
 * this function will update the dbRow in the dbTable,
 * if it exists with given dbRow._id
 * WARNING
 * existing dbRow's with conflicting unique-keys (besides the one being updated)
 * will be removed
 */
    var id;
    var result;
    dbRow = local.jsonCopy(local.objectSetOverride(dbRow));
    result = {};
    this.idIndexList.some(function (idIndex) {
        id = dbRow[idIndex.name];
        // optimization - hasOwnProperty
        if (idIndex.dict.hasOwnProperty(id)) {
            result = idIndex.dict[id];
            return true;
        }
    });
    // remove existing dbRow
    result = local.jsonCopy(this._crudRemoveOneById(result)) || result;
    // update dbRow
    delete dbRow._timeCreated;
    local.objectSetOverride(result, dbRow, 10);
    // replace dbRow
    result = this._crudSetOneById(result);
    return result;
};

local._DbTable.prototype.crudCountAll = function (onError) {
/*
 * this function will count all of dbRow's in the dbTable
 */
    this._cleanup();
    return local.setTimeoutOnError(onError, 0, null, this.dbRowList.length);
};

local._DbTable.prototype.crudCountManyByQuery = function (query, onError) {
/*
 * this function will count the number of dbRow's in the dbTable with given query
 */
    this._cleanup();
    return local.setTimeoutOnError(
        onError,
        0,
        null,
        this._crudGetManyByQuery(query).length
    );
};

local._DbTable.prototype.crudGetManyById = function (idDictList, onError) {
/*
 * this function will get the dbRow's in the dbTable with given idDictList
 */
    var that;
    this._cleanup();
    that = this;
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        (idDictList || []).map(function (idDict) {
            return that._crudGetOneById(idDict);
        })
    ));
};

local._DbTable.prototype.crudGetManyByQuery = function (option, onError) {
/*
 * this function will get the dbRow's in the dbTable with given option.query
 */
    this._cleanup();
    option = local.objectSetOverride(option);
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this._crudGetManyByQuery(
            option.query,
            option.sort || this.sortDefault,
            option.skip,
            option.limit,
            option.shuffle
        ),
        option.fieldList
    ));
};

local._DbTable.prototype.crudGetOneById = function (idDict, onError) {
/*
 * this function will get the dbRow in the dbTable with given idDict
 */
    this._cleanup();
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this._crudGetOneById(idDict)
    ));
};

local._DbTable.prototype.crudGetOneByQuery = function (query, onError) {
/*
 * this function will get the dbRow in the dbTable with given query
 */
    var ii;
    var result;
    this._cleanup();
    // optimization - while-loop
    ii = 0;
    while (ii < this.dbRowList.length) {
        result = local.dbRowListGetManyByQuery([this.dbRowList[ii]], query)[0];
        if (result) {
            break;
        }
        ii += 1;
    }
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(result));
};

local._DbTable.prototype.crudGetOneByRandom = function (onError) {
/*
 * this function will get a random dbRow in the dbTable
 */
    this._cleanup();
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this.dbRowList[Math.floor(Math.random() * this.dbRowList.length)]
    ));
};

local._DbTable.prototype.crudRemoveAll = function (onError) {
/*
 * this function will remove all of the dbRow's from the dbTable
 */
    var idIndexList;
    // save idIndexList
    idIndexList = this.idIndexList;
    // reset dbTable
    local._DbTable.call(this, this);
    // restore idIndexList
    local.dbTableCreateOne({
        name: this.name,
        idIndexCreateList: idIndexList
    }, onError);
};

local._DbTable.prototype.crudRemoveManyById = function (idDictList, onError) {
/*
 * this function will remove the dbRow's from the dbTable with given idDictList
 */
    var that;
    that = this;
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        (idDictList || []).map(function (dbRow) {
            return that._crudRemoveOneById(dbRow);
        })
    ));
};

local._DbTable.prototype.crudRemoveManyByQuery = function (query, onError) {
/*
 * this function will remove the dbRow's from the dbTable with given query
 */
    var that;
    that = this;
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        that._crudGetManyByQuery(query).map(function (dbRow) {
            return that._crudRemoveOneById(dbRow);
        })
    ));
};

local._DbTable.prototype.crudRemoveOneById = function (idDict, onError) {
/*
 * this function will remove the dbRow from the dbTable with given idDict
 */
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this._crudRemoveOneById(idDict)
    ));
};

local._DbTable.prototype.crudSetManyById = function (dbRowList, onError) {
/*
 * this function will set the dbRowList into the dbTable
 */
    var that;
    that = this;
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        (dbRowList || []).map(function (dbRow) {
            return that._crudSetOneById(dbRow);
        })
    ));
};

local._DbTable.prototype.crudSetOneById = function (dbRow, onError) {
/*
 * this function will set the dbRow into the dbTable with given dbRow._id
 */
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this._crudSetOneById(dbRow)
    ));
};

local._DbTable.prototype.crudUpdateManyById = function (dbRowList, onError) {
/*
 * this function will update the dbRowList in the dbTable,
 * if they exist with given dbRow._id's
 */
    var that;
    that = this;
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        (dbRowList || []).map(function (dbRow) {
            return that._crudUpdateOneById(dbRow);
        })
    ));
};

local._DbTable.prototype.crudUpdateManyByQuery = function (query, dbRow, onError) {
/*
 * this function will update the dbRow's in the dbTable with given query
 */
    var result;
    var that;
    var tmp;
    that = this;
    tmp = local.jsonCopy(local.objectSetOverride(dbRow));
    result = that._crudGetManyByQuery(query).map(function (dbRow) {
        tmp._id = dbRow._id;
        return that._crudUpdateOneById(tmp);
    });
    return local.setTimeoutOnError(onError, 0, null, result);
};

local._DbTable.prototype.crudUpdateOneById = function (dbRow, onError) {
/*
 * this function will update the dbRow in the dbTable,
 * if it exists with given dbRow._id
 */
    return local.setTimeoutOnError(onError, 0, null, local.dbRowProject(
        this._crudUpdateOneById(dbRow)
    ));
};

local._DbTable.prototype.drop = function (onError) {
/*
 * this function will drop the dbTable
 */
    console.error("db - dropping dbTable " + this.name + " ...");
    // cancel pending save
    this.timerSave = null;
    while (this.onSaveList.length) {
        this.onSaveList.shift()();
    }
    // reset dbTable
    local._DbTable.call(this, this);
    // clear persistence
    local.storageRemoveItem("dbTable." + this.name + ".json", onError);
};

local._DbTable.prototype.export = function (onError) {
/*
 * this function will export the db
 */
    var result;
    var that;
    this._cleanup();
    that = this;
    result = "";
    that.idIndexList.forEach(function (idIndex) {
        result += that.name + " idIndexCreate " + JSON.stringify({
            isInteger: idIndex.isInteger,
            name: idIndex.name
        }) + "\n";
    });
    result += that.name + " sizeLimit " + that.sizeLimit + "\n";
    result += that.name + " sortDefault " + JSON.stringify(that.sortDefault) + "\n";
    that.crudGetManyByQuery({}).forEach(function (dbRow) {
        result += that.name + " dbRowSet " + JSON.stringify(dbRow) + "\n";
    });
    return local.setTimeoutOnError(onError, 0, null, result.trim());
};

local._DbTable.prototype.idIndexCreate = function (option, onError) {
/*
 * this function will create an idIndex with given option.name
 */
    var dbRow;
    var idIndex;
    var ii;
    var name;
    option = local.objectSetOverride(option);
    name = String(option.name);
    // disallow idIndex with dot-name
    if (name.indexOf(".") >= 0 || name === "_id") {
        return local.setTimeoutOnError(onError);
    }
    // remove existing idIndex
    this.idIndexRemove(option);
    // init idIndex
    idIndex = {
        dict: {},
        isInteger: Boolean(option.isInteger),
        name: name
    };
    this.idIndexList.push(idIndex);
    // populate idIndex with dbRowList
    // optimization - while-loop
    ii = 0;
    while (ii < this.dbRowList.length) {
        dbRow = this.dbRowList[ii];
        // auto-set id
        if (!dbRow.$isRemoved) {
            idIndex.dict[local.dbRowSetId(dbRow, idIndex)] = dbRow;
        }
        ii += 1;
    }
    this.save();
    return local.setTimeoutOnError(onError);
};

local._DbTable.prototype.idIndexRemove = function (option, onError) {
/*
 * this function will remove the idIndex with given option.name
 */
    var name;
    option = local.objectSetOverride(option);
    name = String(option.name);
    this.idIndexList = this.idIndexList.filter(function (idIndex) {
        return idIndex.name !== name || idIndex.name === "_id";
    });
    this.save();
    return local.setTimeoutOnError(onError);
};

local._DbTable.prototype.save = function (onError) {
/*
 * this function will save the dbTable to storage
 */
    var that;
    that = this;
    if (local.modeImport) {
        return;
    }
    if (onError) {
        that.onSaveList.push(onError);
    }
    // throttle storage-writes to once every 1000 ms
    that.timerSave = that.timerSave || setTimeout(function () {
        that.timerSave = null;
        local.storageSetItem("dbTable." + that.name + ".json", that.export(), function (
            error
        ) {
            while (that.onSaveList.length) {
                that.onSaveList.shift()(error);
            }
        });
    }, 1000);
};

local.dbCrudRemoveAll = function (onError) {
/*
 * this function will remove all dbRow's from the db
 */
    var onParallel;
    onParallel = local.onParallel(function (error) {
        local.setTimeoutOnError(onError, 0, error);
    });
    onParallel.counter += 1;
    Object.keys(local.dbTableDict).forEach(function (key) {
        onParallel.counter += 1;
        local.dbTableDict[key].crudRemoveAll(onParallel);
    });
    onParallel();
};

local.dbDrop = function (onError) {
/*
 * this function will drop the db
 */
    var onParallel;
    console.error("db - dropping database ...");
    onParallel = local.onParallel(function (error) {
        local.setTimeoutOnError(onError, 0, error);
    });
    onParallel.counter += 1;
    onParallel.counter += 1;
    local.storageClear(onParallel);
    Object.keys(local.dbTableDict).forEach(function (key) {
        onParallel.counter += 1;
        local.dbTableDict[key].drop(onParallel);
    });
    onParallel();
};

local.dbExport = function (onError) {
/*
 * this function will export the db as serialized text
 */
    var result;
    result = "";
    Object.keys(local.dbTableDict).forEach(function (key) {
        console.error("db - exporting dbTable " + local.dbTableDict[key].name + " ...");
        result += local.dbTableDict[key].export();
        result += "\n\n";
    });
    return local.setTimeoutOnError(onError, 0, null, result.trim());
};

local.dbImport = function (text, onError) {
/*
 * this function will import the serialized text into the db
 */
    var dbTable;
    var dbTableDict;
    dbTableDict = {};
    local.modeImport = true;
    setTimeout(function () {
        local.modeImport = null;
    });
    text.replace((
        /^(\w\S*?)\u0020(\S+?)\u0020(\S.*?)$/gm
    ), function (match0, match1, match2, match3) {
        switch (match2) {
        case "dbRowSet":
            dbTableDict[match1] = true;
            dbTable = local.dbTableCreateOne({
                isLoaded: true,
                name: match1
            });
            dbTable.crudSetOneById(JSON.parse(match3));
            break;
        case "idIndexCreate":
            dbTableDict[match1] = true;
            dbTable = local.dbTableCreateOne({
                isLoaded: true,
                name: match1
            });
            dbTable.idIndexCreate(JSON.parse(match3));
            break;
        case "sizeLimit":
            dbTableDict[match1] = true;
            dbTable = local.dbTableCreateOne({
                isLoaded: true,
                name: match1
            });
            dbTable.sizeLimit = JSON.parse(match3);
            break;
        case "sortDefault":
            dbTableDict[match1] = true;
            dbTable = local.dbTableCreateOne({
                isLoaded: true,
                name: match1
            });
            dbTable.sortDefault = JSON.parse(match3);
            break;
        default:
            local.onErrorDefault(new Error(
                "db - dbImport - invalid operation - " + match0
            ));
        }
    });
    Object.keys(dbTableDict).forEach(function (name) {
        console.error("db - importing dbTable " + name + " ...");
    });
    local.modeImport = null;
    return local.setTimeoutOnError(onError);
};

local.dbLoad = function (onError) {
/*
 * this function will load the db from storage
 */
    var onParallel;
    onParallel = local.onParallel(function (error) {
        local.setTimeoutOnError(onError, 0, error);
    });
    local.storageKeys(function (error, data) {
        onParallel.counter += 1;
        // validate no error occurred
        onParallel.counter += 1;
        onParallel(error);
        (data || []).forEach(function (key) {
            if (key.indexOf("dbTable.") !== 0) {
                return;
            }
            onParallel.counter += 1;
            local.storageGetItem(key, function (error, data) {
                onParallel.counter += 1;
                onParallel(error);
                local.dbImport(data, onParallel);
            });
        });
        onParallel();
    });
};

local.dbReset = function (dbSeedList, onError) {
/*
 * this function will drop and seed the db with given dbSeedList
 */
    var onParallel;
    onParallel = globalThis.utility2_onReadyBefore || local.onParallel(onError);
    onParallel.counter += 1;
    // drop db
    onParallel.counter += 1;
    local.dbDrop(function (error) {
        local.onErrorDefault(error);
        // seed db
        local.dbSeed(dbSeedList, !globalThis.utility2_onReadyBefore && onParallel);
        local.functionOrNop(globalThis.utility2_onReadyBefore)();
    });
    local.functionOrNop(globalThis.utility2_onReadyAfter)(onError);
    onParallel();
};

local.dbRowGetItem = function (dbRow, key) {
/*
 * this function will get the item with given key from dbRow
 */
    var ii;
    var value;
    value = dbRow;
    key = String(key).split(".");
    // optimization - while-loop
    ii = 0;
    while (ii < key.length && typeof value === "object" && value) {
        value = value[key[ii]];
        ii += 1;
    }
    return (
        value === undefined
        ? null
        : value
    );
};

local.dbRowListGetManyByOperator = function (dbRowList, fieldName, operator, bb, not) {
/*
 * this function will get the dbRow's in dbRowList with given operator
 */
    var fieldValue;
    var ii;
    var jj;
    var result;
    var test;
    var typeof2;
    result = [];
    typeof2 = typeof bb;
    if (bb && typeof2 === "object") {
        switch (operator) {
        case "$in":
        case "$nin":
        case "$regex":
            break;
        default:
            return result;
        }
    }
    switch (operator) {
    case "$eq":
        test = function (aa, bb) {
            return aa === bb;
        };
        break;
    case "$exists":
        bb = !bb;
        test = function (aa, bb) {
            return !((aa === null) ^ bb); // jslint ignore:line
        };
        break;
    case "$gt":
        test = function (aa, bb, typeof1, typeof2) {
            return typeof1 === typeof2 && aa > bb;
        };
        break;
    case "$gte":
        test = function (aa, bb, typeof1, typeof2) {
            return typeof1 === typeof2 && aa >= bb;
        };
        break;
    case "$in":
        if (bb && typeof bb.indexOf === "function") {
            if (typeof2 === "string") {
                test = function (aa, bb, typeof1, typeof2) {
                    return typeof1 === typeof2 && bb.indexOf(aa) >= 0;
                };
            } else {
                test = function (aa, bb) {
                    return bb.indexOf(aa) >= 0;
                };
            }
        }
        break;
    case "$lt":
        test = function (aa, bb, typeof1, typeof2) {
            return typeof1 === typeof2 && aa < bb;
        };
        break;
    case "$lte":
        test = function (aa, bb, typeof1, typeof2) {
            return typeof1 === typeof2 && aa <= bb;
        };
        break;
    case "$ne":
        test = function (aa, bb) {
            return aa !== bb;
        };
        break;
    case "$nin":
        if (bb && typeof bb.indexOf === "function") {
            if (typeof2 === "string") {
                test = function (aa, bb, typeof1, typeof2) {
                    return typeof1 === typeof2 && bb.indexOf(aa) < 0;
                };
            } else {
                test = function (aa, bb) {
                    return bb.indexOf(aa) < 0;
                };
            }
        }
        break;
    case "$regex":
        if (bb && typeof bb.test === "function") {
            test = function (aa, bb) {
                return bb.test(aa);
            };
        }
        break;
    case "$typeof":
        test = function (ignore, bb, typeof1) {
            return typeof1 === bb;
        };
        break;
    }
    if (!test) {
        return result;
    }
    // optimization - while-loop
    ii = dbRowList.length;
    while (ii >= 1) {
        ii -= 1;
        fieldValue = local.dbRowGetItem(dbRowList[ii], fieldName);
        // normalize to list
        if (!Array.isArray(fieldValue)) {
            fieldValue = [fieldValue];
        }
        // optimization - while-loop
        jj = fieldValue.length;
        while (jj >= 1) {
            jj -= 1;
            if (Boolean(not ^ test(fieldValue[jj], bb, typeof fieldValue[jj], typeof2))) {
                result.push(dbRowList[ii]);
                break;
            }
        }
    }
    return result;
};

local.dbRowListGetManyByQuery = function (dbRowList, query, fieldName, not) {
/*
 * this function will get the dbRow's in dbRowList with given query
 */
    var bb;
    var dbRowDict;
    var result;
    // optimization - convert to boolean
    not = Boolean(not);
    result = dbRowList;
    if (!(typeof query === "object" && query)) {
        result = local.dbRowListGetManyByOperator(result, fieldName, "$eq", query, not);
        return result;
    }
    Object.keys(query).some(function (key) {
        bb = query[key];
        switch (key) {
        case "$not":
            key = fieldName;
            not = !not;
            break;
        case "$or":
            if (!Array.isArray(bb)) {
                break;
            }
            dbRowDict = {};
            bb.forEach(function (query) {
                // recurse
                local.dbRowListGetManyByQuery(result, query).forEach(function (dbRow) {
                    dbRowDict[dbRow._id] = dbRow;
                });
            });
            result = Object.keys(dbRowDict).map(function (id) {
                return dbRowDict[id];
            });
            return !result.length;
        }
        if (key[0] === "$") {
            result = local.dbRowListGetManyByOperator(result, fieldName, key, bb, not);
            return !result.length;
        }
        // recurse
        result = local.dbRowListGetManyByQuery(result, bb, key, not);
        return !result.length;
    });
    return result;
};

local.dbRowProject = function (dbRow, fieldList) {
/*
 * this function will deepcopy and project the dbRow with given fieldList
 */
    var result;
    if (!dbRow) {
        return null;
    }
    // handle list-case
    if (Array.isArray(dbRow)) {
        return dbRow.map(function (dbRow) {
            // recurse
            return local.dbRowProject(dbRow, fieldList);
        });
    }
    // normalize to list
    if (!(Array.isArray(fieldList) && fieldList.length)) {
        fieldList = Object.keys(dbRow);
    }
    result = {};
    fieldList.forEach(function (key) {
        if (key[0] !== "$") {
            result[key] = dbRow[key];
        }
    });
    return JSON.parse(local.jsonStringifyOrdered(result));
};

local.dbRowSetId = function (dbRow, idIndex) {
/*
 * this function will if does not exist,
 * then set a random and unique id into dbRow for given idIndex,
 */
    var id;
    id = dbRow[idIndex.name];
    if (typeof id !== "number" && typeof id !== "string") {
        do {
            id = (
                idIndex.isInteger
                ? (1 + Math.random()) * 0x10000000000000
                : "a" + ((1 + Math.random()) * 0x10000000000000).toString(36).slice(1)
            );
        // optimization - hasOwnProperty
        } while (idIndex.dict.hasOwnProperty(id));
        dbRow[idIndex.name] = id;
    }
    return id;
};

local.dbSave = function (onError) {
/*
 * this function will save the db to storage
 */
    var onParallel;
    onParallel = local.onParallel(function (error) {
        local.setTimeoutOnError(onError, 0, error);
    });
    onParallel.counter += 1;
    Object.keys(local.dbTableDict).forEach(function (key) {
        onParallel.counter += 1;
        local.dbTableDict[key].save(onParallel);
    });
    onParallel();
};

local.dbSeed = function (dbSeedList, onError) {
/*
 * this function will seed the db with given dbSeedList
 */
    var dbTableDict;
    var onParallel;
    dbTableDict = {};
    onParallel = globalThis.utility2_onReadyBefore || local.onParallel(onError);
    onParallel.counter += 1;
    // seed db
    onParallel.counter += 1;
    local.dbTableCreateMany(dbSeedList, onParallel);
    (dbSeedList || []).forEach(function (option) {
        dbTableDict[option.name] = true;
    });
    Object.keys(dbTableDict).forEach(function (name) {
        console.error("db - seeding dbTable " + name + " ...");
    });
    local.functionOrNop(globalThis.utility2_onReadyAfter)(onError);
    onParallel();
};

local.dbTableCreateMany = function (optionList, onError) {
/*
 * this function will create many dbTables with given optionList
 */
    var onParallel;
    var result;
    onParallel = local.onParallel(function (error) {
        local.setTimeoutOnError(onError, 0, error, result);
    });
    onParallel.counter += 1;
    result = (optionList || []).map(function (option) {
        onParallel.counter += 1;
        return local.dbTableCreateOne(option, onParallel);
    });
    return local.setTimeoutOnError(onParallel, 0, null, result);
};

local.dbTableCreateOne = function (option, onError) {
/*
 * this function will create a dbTable with given option
 */
    var DbTable;
    var that;
    option = local.objectSetOverride(option);
    // register dbTable
    DbTable = local._DbTable;
    local.dbTableDict[option.name] = local.dbTableDict[option.name] || new DbTable(option);
    that = local.dbTableDict[option.name];
    that.sortDefault = (
        option.sortDefault
        || that.sortDefault
        || [{
            fieldName: "_timeUpdated",
            isDescending: true
        }]
    );
    // remove idIndex
    (option.idIndexRemoveList || []).forEach(function (idIndex) {
        that.idIndexRemove(idIndex);
    });
    // create idIndex
    (option.idIndexCreateList || []).forEach(function (idIndex) {
        that.idIndexCreate(idIndex);
    });
    // upsert dbRow
    that.crudSetManyById(option.dbRowList);
    // restore dbTable from persistent-storage
    that.isLoaded = that.isLoaded || option.isLoaded;
    if (!that.isLoaded) {
        local.storageGetItem("dbTable." + that.name + ".json", function (error, data) {
            // validate no error occurred
            local.assertThrow(!error, error);
            if (!that.isLoaded) {
                local.dbImport(data);
            }
            that.isLoaded = true;
            local.setTimeoutOnError(onError, 0, null, that);
        });
        return that;
    }
    return local.setTimeoutOnError(onError, 0, null, that);
};

local.dbTableDict = {};

local.onEventDomDb = function (event) {
/*
 * this function will handle db dom-events
 */
    var ajaxProgressUpdate;
    var reader;
    var tmp;
    var utility2;
    utility2 = globalThis.utility2 || {};
    ajaxProgressUpdate = utility2.ajaxProgressUpdate || local.nop;
    switch (event.target.dataset.onEventDomDb || event.target.id) {
    case "dbExportButton1":
        tmp = globalThis.URL.createObjectURL(new globalThis.Blob([local.dbExport()]));
        document.querySelector(
            "#dbExportA1"
        ).href = tmp;
        document.querySelector(
            "#dbExportA1"
        ).click();
        setTimeout(function () {
            globalThis.URL.revokeObjectURL(tmp);
        }, 30000);
        break;
    case "dbImportButton1":
        tmp = document.querySelector(
            "#dbImportInput1"
        );
        if (!tmp.onEventDomDb) {
            tmp.onEventDomDb = local.onEventDomDb;
            tmp.addEventListener("change", local.onEventDomDb);
        }
        tmp.click();
        break;
    case "dbImportInput1":
        if (event.type !== "change") {
            return;
        }
        ajaxProgressUpdate();
        reader = new FileReader();
        tmp = document.querySelector(
            "#dbImportInput1"
        ).files[0];
        if (!tmp) {
            return;
        }
        reader.addEventListener("load", function () {
            local.dbImport(reader.result);
            ajaxProgressUpdate();
        });
        reader.readAsText(tmp);
        break;
    case "dbResetButton1":
        ajaxProgressUpdate();
        local.dbReset(globalThis.utility2_dbSeedList, function (error) {
            local.onErrorDefault(error);
            if (
                utility2.uiEventListenerDict
                && typeof utility2.uiEventListenerDict[".onEventUiReload"] === "function"
            ) {
                utility2.uiEventListenerDict[".onEventUiReload"]();
            }
        });
        break;
    }
};

local.sortCompare = function (aa, bb, ii, jj) {
/*
 * this function will compare aa vs bb and return:
 * -1 if aa < bb
 *  0 if aa === bb
 *  1 if aa > bb
 * the priority for comparing different typeof's is:
 * null < boolean < number < string < object < undefined
 */
    var typeof1;
    var typeof2;
    if (aa === bb) {
        return (
            ii < jj
            ? -1
            : 1
        );
    }
    if (aa === null) {
        return -1;
    }
    if (bb === null) {
        return 1;
    }
    typeof1 = typeof aa;
    typeof2 = typeof bb;
    if (typeof1 === typeof2) {
        return (
            typeof1 === "object"
            ? 0
            : aa > bb
            ? 1
            : -1
        );
    }
    if (typeof1 === "boolean") {
        return -1;
    }
    if (typeof2 === "boolean") {
        return 1;
    }
    if (typeof1 === "number") {
        return -1;
    }
    if (typeof2 === "number") {
        return 1;
    }
    if (typeof1 === "string") {
        return -1;
    }
    if (typeof2 === "string") {
        return 1;
    }
    return 0;
};
}());



// run node js-env code - init-after
/* istanbul ignore next */
(function () {
if (local.isBrowser) {
    return;
}



local.cliDict = {};

local.cliDict.dbTableCrudGetManyByQuery = function () {
/*
 * <dbTable> <query>
 * will get from <dbTable> with json <query>, <dbRowList>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        console.log(JSON.stringify(that.crudGetManyByQuery(
            JSON.parse(process.argv[4] || "{}")
        ), null, 4));
    });
};

local.cliDict.dbTableCrudRemoveManyByQuery = function () {
/*
 * <dbTable> <query>
 * will remove from <dbTable> with json <query>, <dbRowList>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        console.log(JSON.stringify(that.crudRemoveManyByQuery(
            JSON.parse(process.argv[4])
        ), null, 4));
    });
};

local.cliDict.dbTableCrudSetManyById = function () {
/*
 * <dbTable> <dbRowList>
 * will set in <dbTable>, <dbRowList>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        that.crudSetManyById(JSON.parse(process.argv[4]));
    });
};

local.cliDict.dbTableHeaderDictGet = function () {
/*
 * <dbTable>
 * will get from <dbTable>, <headerDict>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        var tmp;
        tmp = [];
        that.idIndexList.forEach(function (idIndex) {
            tmp.push({
                isInteger: idIndex.isInteger,
                name: idIndex.name
            });
        });
        console.log(JSON.stringify({
            idIndexList: tmp,
            sizeLimit: that.sizeLimit,
            sortDefault: that.sortDefault
        }, null, 4));
    });
};

local.cliDict.dbTableHeaderDictSet = function () {
/*
 * <dbTable> <headerDict>
 * will set in <dbTable>, <headerDict>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        local.tmp = JSON.parse(process.argv[4]);
        that.sizeLimit = local.tmp.sizeLimit || that.sizeLimit;
        that.sortDefault = local.tmp.sortDefault || that.sortDefault;
        that.save();
        local.tmp = [];
        that.idIndexList.forEach(function (idIndex) {
            local.tmp.push({
                isInteger: idIndex.isInteger,
                name: idIndex.name
            });
        });
        local.cliDict.dbTableHeaderDictGet();
    });
};

local.cliDict.dbTableIdIndexCreate = function () {
/*
 * <dbTable> <idIndex>
 * will create in <dbTable>, <idIndex>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        that.idIndexCreate(JSON.parse(process.argv[4]));
        that.save();
        local.tmp = [];
        that.idIndexList.forEach(function (idIndex) {
            local.tmp.push({
                isInteger: idIndex.isInteger,
                name: idIndex.name
            });
        });
        local.cliDict.dbTableHeaderDictGet();
    });
};

local.cliDict.dbTableIdIndexRemove = function () {
/*
 * <dbTable> <idIndex>
 * will remove from <dbTable>, <idIndex>
 */
    local.dbTableCreateOne({
        name: process.argv[3]
    }, function (error, that) {
        // validate no error occurred
        local.assertThrow(!error, error);
        that.idIndexRemove(JSON.parse(process.argv[4]));
        that.save();
        local.cliDict.dbTableHeaderDictGet();
    });
};

local.cliDict.dbTableList = function () {
/*
 *
 * will get from db, <dbTableList>
 */
    local.storageKeys(function (error, data) {
        // validate no error occurred
        local.assertThrow(!error, error);
        console.log(JSON.stringify(data.map(function (element) {
            return element.split(".").slice(1, -1).join(".");
        }), null, 4));
    });
};

local.cliDict.dbTableRemove = function () {
/*
 * <dbTable>
 * will remove from db, <dbTable>
 */
    local.storageRemoveItem("dbTable." + process.argv[3] + ".json", function (error) {
        // validate no error occurred
        local.assertThrow(!error, error);
        local.cliDict.dbTableList();
    });
};

// run cli
if (module === require.main && !globalThis.utility2_rollup) {
    local.cliRun();
}
}());



}());
/* script-end /assets.my_app.js */



/* script-begin /assets.example.js */
/*
example.js

this script will run a web-demo of db-lite

instruction
    1. save this script as example.js
    2. run the shell-command:
        $ npm install db-lite && PORT=8081 node example.js
    3. open a browser to http://127.0.0.1:8081 and play with the web-demo
    4. edit this script to suit your needs
*/



/* istanbul instrument in package db */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



// run shared js-env code - init-before
(function () {
// init local
local = (
    globalThis.utility2_rollup
    || globalThis.utility2_db
    || globalThis.utility2_moduleExports
);
// init exports
globalThis.local = local;
}());



/* istanbul ignore next */
// run browser js-env code - init-test
(function () {
if (!local.isBrowser) {
    return;
}
local.testRunBrowser = function (event) {
    if (!event || (
        event
        && event.currentTarget
        && event.currentTarget.className
        && event.currentTarget.className.includes
        && event.currentTarget.className.includes("onreset")
    )) {
        // reset output
        Array.from(document.querySelectorAll(
            "body > .resettable"
        )).forEach(function (element) {
            switch (element.tagName) {
            case "INPUT":
            case "TEXTAREA":
                element.value = "";
                break;
            default:
                element.textContent = "";
            }
        });
    }
    switch (event && event.currentTarget && event.currentTarget.id) {
    case "testRunButton1":
        // show tests
        if (document.querySelector(
            "#testReportDiv1"
        ).style.maxHeight === "0px") {
            local.uiAnimateSlideDown(document.querySelector(
                "#testReportDiv1"
            ));
            document.querySelector(
                "#testRunButton1"
            ).textContent = "hide internal test";
            local.modeTest = 1;
            local.testRunDefault(local);
        // hide tests
        } else {
            local.uiAnimateSlideUp(document.querySelector(
                "#testReportDiv1"
            ));
            document.querySelector(
                "#testRunButton1"
            ).textContent = "run internal test";
        }
        break;
    /* validateLineSortedReset */
    // custom-case
    case "dbExportButton1":
    case "dbImportButton1":
    case "dbImportInput1":
    case "dbResetButton1":
        local.db.onEventDomDb(event);
        break;
    }
    if (document.querySelector(
        "#inputTextareaEval1"
    ) && (!event || (
        event
        && event.currentTarget
        && event.currentTarget.className
        && event.currentTarget.className.includes
        && event.currentTarget.className.includes("oneval")
    ))) {
        // try to eval input-code
        try {
            eval(document.querySelector( // jslint ignore:line
                "#inputTextareaEval1"
            ).value);
        } catch (errorCaught) {
            console.error(errorCaught);
        }
    }
};

local.uiEventDelegate = local.uiEventDelegate || function (event) {
    // filter non-input keyup-event
    event.targetOnEvent = event.target.closest("[data-onevent]");
    if (!event.targetOnEvent) {
        return;
    }
    // rate-limit keyup
    if (event.type === "keyup") {
        local.uiEventDelegateKeyupEvent = event;
        if (local.uiEventDelegateKeyupTimerTimeout !== 2) {
            local.uiEventDelegateKeyupTimerTimeout = (
                local.uiEventDelegateKeyupTimerTimeout
                || setTimeout(function () {
                    local.uiEventDelegateKeyupTimerTimeout = 2;
                    local.uiEventDelegate(local.uiEventDelegateKeyupEvent);
                }, 100)
            );
            return;
        }
        local.uiEventDelegateKeyupTimerTimeout = null;
        if (!event.target.closest("input, option, select, textarea")) {
            return;
        }
    }
    switch (event.targetOnEvent.tagName) {
    case "BUTTON":
    case "FORM":
        event.preventDefault();
        break;
    }
    event.stopPropagation();
    local.uiEventListenerDict[event.targetOnEvent.dataset.onevent](event);
};

local.uiEventListenerDict = local.uiEventListenerDict || {};

local.uiEventListenerDict.testRunBrowser = local.testRunBrowser;

// log stderr and stdout to #outputStdoutTextarea1
["error", "log"].forEach(function (key) {
    console[key + "_original"] = console[key + "_original"] || console[key];
    console[key] = function () {
        var argList;
        var element;
        argList = Array.from(arguments); // jslint ignore:line
        console[key + "_original"].apply(console, argList);
        element = document.querySelector(
            "#outputStdoutTextarea1"
        );
        if (!element) {
            return;
        }
        // append text to #outputStdoutTextarea1
        element.value += argList.map(function (arg) {
            return (
                typeof arg === "string"
                ? arg
                : JSON.stringify(arg, null, 4)
            );
        }).join(" ").replace((
            /\u001b\[\d*m/g
        ), "") + "\n";
        // scroll textarea to bottom
        element.scrollTop = element.scrollHeight;
    };
});
// init event-handling
["Change", "Click", "Keyup", "Submit"].forEach(function (eventType) {
    Array.from(document.querySelectorAll(
        ".eventDelegate" + eventType
    )).forEach(function (element) {
        element.addEventListener(eventType.toLowerCase(), local.uiEventDelegate);
    });
});
// run tests
local.testRunBrowser();
}());



/* istanbul ignore next */
// run node js-env code - init-test
(function () {
if (local.isBrowser) {
    return;
}
// init exports
module.exports = local;
/* validateLineSortedReset */
// init assets
local.assetsDict = local.assetsDict || {};
[
    "assets.index.template.html",
    "assets.swgg.swagger.json",
    "assets.swgg.swagger.server.json"
].forEach(function (file) {
    file = "/" + file;
    local.assetsDict[file] = local.assetsDict[file] || "";
    if (local.fs.existsSync(local.__dirname + file)) {
        local.assetsDict[file] = local.fs.readFileSync(
            local.__dirname + file,
            "utf8"
        );
    }
});
/* jslint ignore:start */
local.assetsDict["/assets.index.template.html"] = '\
<!doctype html>\n\
<html lang="en">\n\
<head>\n\
<meta charset="utf-8">\n\
<meta name="viewport" content="width=device-width, initial-scale=1">\n\
<!-- "assets.utility2.template.html" -->\n\
<title>{{env.npm_package_name}} ({{env.npm_package_version}})</title>\n\
<style>\n\
/* jslint utility2:true */\n\
/*csslint\n\
*/\n\
/* csslint ignore:start */\n\
*,\n\
*:after,\n\
*:before {\n\
    box-sizing: border-box;\n\
}\n\
/* csslint ignore:end */\n\
@keyframes uiAnimateShake {\n\
    0%, 50% {\n\
        transform: translateX(10px);\n\
    }\n\
    25%, 75% {\n\
        transform: translateX(-10px);\n\
    }\n\
    100% {\n\
        transform: translateX(0);\n\
    }\n\
}\n\
@keyframes uiAnimateSpin {\n\
    0% {\n\
        transform: rotate(0deg);\n\
    }\n\
    100% {\n\
        transform: rotate(360deg);\n\
    }\n\
}\n\
a {\n\
    overflow-wrap: break-word;\n\
}\n\
body {\n\
    background: #eef;\n\
    font-family: Arial, Helvetica, sans-serif;\n\
    margin: 0 40px;\n\
}\n\
body > div,\n\
body > form > div,\n\
body > form > input,\n\
body > form > pre,\n\
body > form > textarea,\n\
body > form > .button,\n\
body > input,\n\
body > pre,\n\
body > textarea,\n\
body > .button {\n\
    margin-bottom: 20px;\n\
}\n\
body > form > input,\n\
body > form > .button,\n\
body > input,\n\
body > .button {\n\
    width: 20rem;\n\
}\n\
body > form > textarea,\n\
body > textarea {\n\
    height: 10rem;\n\
    width: 100%;\n\
}\n\
body > textarea[readonly] {\n\
    background: #ddd;\n\
}\n\
code,\n\
pre,\n\
textarea {\n\
    font-family: Consolas, Menlo, monospace;\n\
    font-size: small;\n\
}\n\
pre {\n\
    overflow-wrap: break-word;\n\
    white-space: pre-wrap;\n\
}\n\
textarea {\n\
    overflow: auto;\n\
    white-space: pre;\n\
}\n\
.button {\n\
    background-color: #fff;\n\
    border: 1px solid;\n\
    border-bottom-color: rgb(186, 186, 186);\n\
    border-left-color: rgb(209, 209, 209);\n\
    border-radius: 4px;\n\
    border-right-color: rgb(209, 209, 209);\n\
    border-top-color: rgb(216, 216, 216);\n\
    color: #00d;\n\
    cursor: pointer;\n\
    display: inline-block;\n\
    font-family: Arial, Helvetica, sans-serif;\n\
    font-size: 12px;\n\
    font-style: normal;\n\
    font-weight: normal;\n\
    margin: 0;\n\
    padding: 2px 7px 3px 7px;\n\
    text-align: center;\n\
    text-decoration: underline;\n\
}\n\
.colorError {\n\
    color: #d00;\n\
}\n\
.uiAnimateShake {\n\
    animation-duration: 500ms;\n\
    animation-name: uiAnimateShake;\n\
}\n\
.uiAnimateSlide {\n\
    overflow-y: hidden;\n\
    transition: max-height ease-in 250ms, min-height ease-in 250ms, padding-bottom ease-in 250ms, padding-top ease-in 250ms;\n\
}\n\
.utility2FooterDiv {\n\
    text-align: center;\n\
}\n\
.zeroPixel {\n\
    border: 0;\n\
    height: 0;\n\
    margin: 0;\n\
    padding: 0;\n\
    width: 0;\n\
}\n\
</style>\n\
</head>\n\
<body>\n\
<div id="ajaxProgressDiv1" style="background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 500ms, width 1500ms; width: 0%; z-index: 1;"></div>\n\
<div class="uiAnimateSpin" style="animation: uiAnimateSpin 2s linear infinite; border: 5px solid #999; border-radius: 50%; border-top: 5px solid #7d7; display: none; height: 25px; vertical-align: middle; width: 25px;"></div>\n\
<a class="zeroPixel" download="db.persistence.json" href="" id="dbExportA1"></a>\n\
<input class="zeroPixel" id="dbImportInput1" type="file">\n\
<script>\n\
/* jslint utility2:true */\n\
// init domOnEventWindowOnloadTimeElapsed\n\
(function () {\n\
/*\n\
 * this function will measure and print the time-elapsed for window.onload\n\
 */\n\
    "use strict";\n\
    if (window.domOnEventWindowOnloadTimeElapsed) {\n\
        return;\n\
    }\n\
    window.domOnEventWindowOnloadTimeElapsed = Date.now() + 100;\n\
    window.addEventListener("load", function () {\n\
        setTimeout(function () {\n\
            window.domOnEventWindowOnloadTimeElapsed = (\n\
                Date.now()\n\
                - window.domOnEventWindowOnloadTimeElapsed\n\
            );\n\
            console.error(\n\
                "domOnEventWindowOnloadTimeElapsed = "\n\
                + window.domOnEventWindowOnloadTimeElapsed\n\
            );\n\
        }, 100);\n\
    });\n\
}());\n\
\n\
\n\
\n\
// init timerIntervalAjaxProgressUpdate\n\
(function () {\n\
/*\n\
 * this function will increment the ajax-progress-bar\n\
 * until the webpage has loaded\n\
 */\n\
    "use strict";\n\
    var ajaxProgressDiv1;\n\
    var ajaxProgressState;\n\
    var ajaxProgressUpdate;\n\
    if (\n\
        window.timerIntervalAjaxProgressUpdate\n\
        || !document.querySelector(\n\
            "#ajaxProgressDiv1"\n\
        )\n\
    ) {\n\
        return;\n\
    }\n\
    ajaxProgressDiv1 = document.querySelector(\n\
        "#ajaxProgressDiv1"\n\
    );\n\
    setTimeout(function () {\n\
        ajaxProgressDiv1.style.width = "25%";\n\
    });\n\
    ajaxProgressState = 0;\n\
    ajaxProgressUpdate = (\n\
        window.local\n\
        && window.local.ajaxProgressUpdate\n\
    ) || function () {\n\
        ajaxProgressDiv1.style.width = "100%";\n\
        setTimeout(function () {\n\
            ajaxProgressDiv1.style.background = "transparent";\n\
            setTimeout(function () {\n\
                ajaxProgressDiv1.style.width = "0%";\n\
            }, 500);\n\
        }, 1000);\n\
    };\n\
    window.timerIntervalAjaxProgressUpdate = setInterval(function () {\n\
        ajaxProgressState += 1;\n\
        ajaxProgressDiv1.style.width = Math.max(\n\
            100 - 75 * Math.exp(-0.125 * ajaxProgressState),\n\
            ajaxProgressDiv1.style.width.slice(0, -1) | 0\n\
        ) + "%";\n\
    }, 1000);\n\
    window.addEventListener("load", function () {\n\
        clearInterval(window.timerIntervalAjaxProgressUpdate);\n\
        ajaxProgressUpdate();\n\
    });\n\
}());\n\
\n\
\n\
\n\
// init domOnEventSelectAllWithinPre\n\
(function () {\n\
/*\n\
 * this function will limit select-all within <pre tabIndex="0"> elements\n\
 * https://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse\n\
 */\n\
    "use strict";\n\
    if (window.domOnEventSelectAllWithinPre) {\n\
        return;\n\
    }\n\
    window.domOnEventSelectAllWithinPre = function (event) {\n\
        var range;\n\
        var selection;\n\
        if (\n\
            event\n\
            && event.key === "a"\n\
            && (event.ctrlKey || event.metaKey)\n\
            && event.target.closest("pre")\n\
        ) {\n\
            range = document.createRange();\n\
            range.selectNodeContents(event.target.closest("pre"));\n\
            selection = window.getSelection();\n\
            selection.removeAllRanges();\n\
            selection.addRange(range);\n\
            event.preventDefault();\n\
        }\n\
    };\n\
    // init event-handling\n\
    document.addEventListener(\n\
        "keydown",\n\
        window.domOnEventSelectAllWithinPre\n\
    );\n\
}());\n\
</script>\n\
<h1>\n\
<!-- utility2-comment\n\
    <a\n\
        {{#if env.npm_package_homepage}}\n\
        href="{{env.npm_package_homepage}}"\n\
        {{/if env.npm_package_homepage}}\n\
        target="_blank"\n\
    >\n\
utility2-comment -->\n\
        {{env.npm_package_name}} ({{env.npm_package_version}})\n\
<!-- utility2-comment\n\
    </a>\n\
utility2-comment -->\n\
</h1>\n\
<h3>{{env.npm_package_description}}</h3>\n\
<!-- utility2-comment\n\
<a class="button" download href="assets.app.js">download standalone app</a><br>\n\
<button class="button eventDelegateClick onreset" data-onevent="testRunBrowser" id="testRunButton1">run internal test</button><br>\n\
<div class="uiAnimateSlide" id="testReportDiv1" style="border-bottom: 0; border-top: 0; margin-bottom: 0; margin-top: 0; max-height: 0; padding-bottom: 0; padding-top: 0;"></div>\n\
utility2-comment -->\n\
\n\
\n\
\n\
<button class="button eventDelegateClick" data-onevent="testRunBrowser" data-on-event-dom-db="dbResetButton1" id="dbResetButton1">\n\
    reset database\n\
</button><br>\n\
<button class="button eventDelegateClick" data-onevent="testRunBrowser" data-on-event-dom-db="dbExportButton1" id="dbExportButton1">\n\
    export database -&gt; file\n\
</button><br>\n\
<button class="button eventDelegateClick" data-onevent="testRunBrowser" data-on-event-dom-db="dbImportButton1" id="dbImportButton1">\n\
    import database &lt;- file\n\
</button><br>\n\
<label>edit or paste script below to\n\
    <a\n\
        href="https://kaizhu256.github.io/node-db-lite/build..beta..travis-ci.org/apidoc.html"\n\
        target="_blank"\n\
    >eval</a>\n\
</label>\n\
<textarea id="inputTextareaEval1">\n\
/*jslint browser: true, node: true*/\n\
"use strict";\n\
var dbTable1, modeNext, onNext;\n\
modeNext = 0;\n\
onNext = function (error, data) {\n\
    modeNext = error\n\
        ? Infinity\n\
        : modeNext + 1;\n\
    switch (modeNext) {\n\
    case 1:\n\
        dbTable1 = window.dbTable1 = window.utility2_db.dbTableCreateOne({\n\
            name: "dbTable1"\n\
        }, onNext);\n\
        break;\n\
    case 2:\n\
        dbTable1.idIndexCreate({ name: "field1" }, onNext);\n\
        break;\n\
    case 3:\n\
        dbTable1.crudSetOneById({ field1: "aa", field2: 1, field3: "foo" }, onNext);\n\
        break;\n\
    case 4:\n\
        dbTable1.crudSetOneById({ field1: "bb", field2: 2, field3: "bar" }, onNext);\n\
        break;\n\
    case 5:\n\
        dbTable1.crudSetOneById({ field1: "cc", field2: 3, field3: "baz" }, onNext);\n\
        break;\n\
    case 6:\n\
        dbTable1.crudRemoveOneById({ field1: "aa" }, onNext);\n\
        break;\n\
    case 7:\n\
        dbTable1.crudUpdateOneById({ field1: "bb", field2: -1 }, onNext);\n\
        break;\n\
    case 8:\n\
        dbTable1.crudSetOneById({ field2: Math.random() }, onNext);\n\
        break;\n\
    case 9:\n\
        dbTable1.crudGetManyByQuery({\n\
            limit: Infinity,\n\
            query: { field2: { $gte: -Infinity, $lte: Infinity } },\n\
            skip: 0,\n\
            sort: [{ fieldName: "_timeUpdated", idDescending: true }]\n\
        }, onNext);\n\
        break;\n\
    case 10:\n\
        console.error(data);\n\
        dbTable1.crudCountAll(onNext);\n\
        break;\n\
    case 11:\n\
        console.error("number of rows: " + data);\n\
        break;\n\
    default:\n\
        console.error(error.stack);\n\
    }\n\
};\n\
onNext();\n\
</textarea>\n\
<button class="button eventDelegateClick oneval onreset" data-onevent="testRunBrowser" id="dbEvalButton1">eval script</button><br>\n\
<label>stderr and stdout</label>\n\
<textarea class="resettable" id="outputStdoutTextarea1" readonly></textarea>\n\
<!-- utility2-comment\n\
{{#if isRollup}}\n\
<script src="assets.app.js"></script>\n\
{{#unless isRollup}}\n\
utility2-comment -->\n\
<script src="assets.utility2.rollup.js"></script>\n\
<script>window.utility2_onReadyBefore.counter += 1;</script>\n\
<script src="jsonp.utility2.stateInit?callback=window.utility2.stateInit"></script>\n\
<script src="assets.db.js"></script>\n\
<script src="assets.example.js"></script>\n\
<script src="assets.test.js"></script>\n\
<script>window.utility2_onReadyBefore();</script>\n\
<!-- utility2-comment\n\
{{/if isRollup}}\n\
utility2-comment -->\n\
<div class="utility2FooterDiv">\n\
    [ this app was created with\n\
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>\n\
    ]\n\
</div>\n\
</body>\n\
</html>\n\
';
/* jslint ignore:end */
/* validateLineSortedReset */
/* jslint ignore:start */
local.assetsDict["/assets.db.js"] =
    local.assetsDict["/assets.db.js"] ||
    local.fs.readFileSync(local.__dirname + "/lib.db.js", "utf8"
).replace((/^#!\//), "// ");
/* jslint ignore:end */
/* validateLineSortedReset */
local.assetsDict["/"] = local.assetsDict["/assets.index.template.html"]
.replace((
    /\{\{env\.(\w+?)\}\}/g
), function (match0, match1) {
    switch (match1) {
    case "npm_package_description":
        return "the greatest app in the world!";
    case "npm_package_name":
        return "db-lite";
    case "npm_package_nameLib":
        return "db";
    case "npm_package_version":
        return "0.0.1";
    default:
        return match0;
    }
});
local.assetsDict["/assets.example.html"] = local.assetsDict["/"];
local.assetsDict["/index.html"] = local.assetsDict["/"];
// init cli
if (module !== require.main || globalThis.utility2_rollup) {
    return;
}
/* validateLineSortedReset */
local.assetsDict["/assets.example.js"] = (
    local.assetsDict["/assets.example.js"]
    || local.fs.readFileSync(__filename, "utf8")
);
local.assetsDict["/favicon.ico"] = local.assetsDict["/favicon.ico"] || "";
// if $npm_config_timeout_exit exists,
// then exit this process after $npm_config_timeout_exit ms
if (Number(process.env.npm_config_timeout_exit)) {
    setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));
}
// start server
if (globalThis.utility2_serverHttp1) {
    return;
}
process.env.PORT = process.env.PORT || "8081";
console.error("server starting on port " + process.env.PORT);
local.http.createServer(function (request, response) {
    request.urlParsed = local.url.parse(request.url);
    if (local.assetsDict[request.urlParsed.pathname] !== undefined) {
        response.end(local.assetsDict[request.urlParsed.pathname]);
        return;
    }
    response.statusCode = 404;
    response.end();
}).listen(process.env.PORT);
}());



}());
/* script-end /assets.example.js */



/* script-begin /assets.test.js */
/* istanbul instrument in package db */
/* istanbul ignore next */
/* jslint utility2:true */
(function (globalThis) {
    "use strict";
    var consoleError;
    var local;
    // init globalThis
    (function () {
        try {
            globalThis = Function("return this")(); // jslint ignore:line
        } catch (ignore) {}
    }());
    globalThis.globalThis = globalThis;
    // init debug_inline
    if (!globalThis["debug\u0049nline"]) {
        consoleError = console.error;
        globalThis["debug\u0049nline"] = function () {
        /*
         * this function will both print <arguments> to stderr
         * and return <arguments>[0]
         */
            var argList;
            argList = Array.from(arguments); // jslint ignore:line
            // debug arguments
            globalThis["debug\u0049nlineArguments"] = argList;
            consoleError("\n\ndebug\u0049nline");
            consoleError.apply(console, argList);
            consoleError("\n");
            // return arg0 for inspection
            return argList[0];
        };
    }
    // init local
    local = {};
    local.local = local;
    globalThis.globalLocal = local;
    // init isBrowser
    local.isBrowser = (
        typeof window === "object"
        && window === globalThis
        && typeof window.XMLHttpRequest === "function"
        && window.document
        && typeof window.document.querySelector === "function"
    );
    // init function
    local.assertThrow = function (passed, message) {
    /*
     * this function will throw the error <message> if <passed> is falsy
     */
        var error;
        if (passed) {
            return;
        }
        error = (
            // ternary-condition
            (
                message
                && typeof message.message === "string"
                && typeof message.stack === "string"
            )
            // if message is an error-object, then leave it as is
            ? message
            : new Error(
                typeof message === "string"
                // if message is a string, then leave it as is
                ? message
                // else JSON.stringify message
                : JSON.stringify(message, null, 4)
            )
        );
        throw error;
    };
    local.functionOrNop = function (fnc) {
    /*
     * this function will if <fnc> exists,
     * them return <fnc>,
     * else return <nop>
     */
        return fnc || local.nop;
    };
    local.identity = function (value) {
    /*
     * this function will return <value>
     */
        return value;
    };
    local.nop = function () {
    /*
     * this function will do nothing
     */
        return;
    };
    local.objectAssignDefault = function (target, source) {
    /*
     * this function will if items from <target> are
     * null, undefined, or empty-string,
     * then overwrite them with items from <source>
     */
        Object.keys(source).forEach(function (key) {
            if (
                target[key] === null
                || target[key] === undefined
                || target[key] === ""
            ) {
                target[key] = target[key] || source[key];
            }
        });
    };
    // require builtin
    if (!local.isBrowser) {
        local.assert = require("assert");
        local.buffer = require("buffer");
        local.child_process = require("child_process");
        local.cluster = require("cluster");
        local.crypto = require("crypto");
        local.dgram = require("dgram");
        local.dns = require("dns");
        local.domain = require("domain");
        local.events = require("events");
        local.fs = require("fs");
        local.http = require("http");
        local.https = require("https");
        local.net = require("net");
        local.os = require("os");
        local.path = require("path");
        local.querystring = require("querystring");
        local.readline = require("readline");
        local.repl = require("repl");
        local.stream = require("stream");
        local.string_decoder = require("string_decoder");
        local.timers = require("timers");
        local.tls = require("tls");
        local.tty = require("tty");
        local.url = require("url");
        local.util = require("util");
        local.vm = require("vm");
        local.zlib = require("zlib");
    }
}(this));



(function (local) {
"use strict";



// run shared js-env code - init-before
(function () {
// init local
local = (globalThis.utility2 || require("utility2")).requireReadme();
globalThis.local = local;
// init test
local.testRunDefault(local);
}());



// run shared js-env code - function
(function () {
local.testCase_dbLoad_error = function (options, onError) {
/*
 * this function will test dbLoad's error handling-behavior
 */
    local.testMock([
        [local, {
            storageKeys: function (fnc) {
                fnc(local.errorDefault);
            }
        }]
    ], function (onError) {
        local.dbLoad(function (error) {
            // validate error occurred
            local.assertThrow(error, error);
        });
        onError(null, options);
    }, onError);
};

local.testCase_dbTable_crudGetManyByQuery = function (options, onError) {
/*
 * this function will test dbTable's crudGetManyByQuery handling-behavior
 */
    options = {};
    // test dbTableCreateOne's create handling-behavior
    options.dbTable = local.dbTableCreateOne({
        name: "testCase_dbTable_crudGetManyByQuery"
    });
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // test isDirty handling-behavior
    options.dbTable.crudRemoveOneById(options.dbTable.crudSetOneById({
        field1: "dirty"
    }));
    // test null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        // test shuffle handling-behavior
        shuffle: true
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    options.data = local.identity([
        [],
        [[], "", 0, {}, false, null, undefined],
        -0.5,
        -1,
        -Infinity,
        0,
        0.5,
        1,
        Infinity,
        NaN,
        {},
        false,
        null,
        true,
        undefined
    ]).sort().map(function (element) {
        return {
            field1: element
        };
    });
    options.data = options.data.concat(options.data.map(function (dbRow) {
        return {
            field1: JSON.stringify(dbRow.field1)
        };
    }));
    // test dbTableCreateOne's crudSetManyById handling-behavior
    options.data = options.dbTable.crudSetManyById(options.data);
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 30);
    // validate data
    [
        [],
        [[], "", 0, {}, false, null, undefined],
        -0.5,
        -1,
        undefined,
        0,
        0.5,
        1,
        undefined,
        undefined,
        {},
        false,
        undefined,
        true,
        undefined,
        "[]",
        "[[],\"\",0,{},false,null,null]",
        "-0.5",
        "-1",
        "null",
        "0",
        "0.5",
        "1",
        "null",
        "null",
        "{}",
        "false",
        "null",
        "true",
        undefined
    ].forEach(function (element, ii) {
        local.assertJsonEqual(element, options.data[ii].field1);
    });
    // test null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: { $undefined: null}
        },
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    // test null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $undefined: {}
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    // test $eq's boolean handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: true
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 1);
    local.assertJsonEqual(options.data, [true]);
    // test $eq's null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: null
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 7);
    local.assertJsonEqual(
        options.data.slice(0, -1),
        [null, null, null, null, null, null]
    );
    // test $eq's number handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: 0
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 2);
    local.assertJsonEqual(options.data.slice(0, -1), [0]);
    // test $eq's string handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: "{}"
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 1);
    local.assertJsonEqual(options.data, ["{}"]);
    // test $exists's false handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: { $exists: false}
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 7);
    // test $exists's null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $exists: null
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 7);
    // test $exists's true handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $exists: true
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 23);
    // test $gt's boolean handling-behavior
    // test $lt's boolean handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: { $gt: false, $lt: true}
        },
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    // test $gt's null-case handling-behavior
    // test $lt's null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $gt: false,
                $lt: true
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    // test $gt's number handling-behavior
    // test $lt's number handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $gt: -1,
                $lt: 1
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 4);
    local.assertJsonEqual(options.data.slice(0, -1), [-0.5, 0, 0.5]);
    // test $gt's string handling-behavior
    // test $lt's string handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $gt: "false",
                $lt: "true"
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 4);
    local.assertJsonEqual(options.data, ["null", "null", "null", "null"]);
    // test $gte's boolean handling-behavior
    // test $lte's boolean handling-behavior
    // test $ne's boolean handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: { $gte: false, $lte: true, $ne: false}
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 2);
    local.assertJsonEqual(options.data.slice(0, -1), [true]);
    // test $gte's null-case handling-behavior
    // test $lte's null-case handling-behavior
    // test $ne's null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $gte: null,
                $lte: null,
                $ne: null
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 1);
    local.assertJsonEqual(options.data.slice(0, -1), []);
    // test $gte's number handling-behavior
    // test $lte's number handling-behavior
    // test $ne's number handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $gte: -1,
                $lte: 1,
                $ne: 0
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 5);
    local.assertJsonEqual(options.data.slice(0, -1), [-1, -0.5, 0.5, 1]);
    // test $gte's number handling-behavior
    // test $lte's number handling-behavior
    // test $ne's number handling-behavior
    // test fieldList handling-behavior
    // test limit handling-behavior
    // test skip handling-behavior
    // test sort's isDescending handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        fieldList: ["field1"],
        limit: 2,
        query: {
            field1: {
                $gte: -1,
                $lte: 1,
                $ne: 0
            }
        },
        skip: 2,
        sort: [{
            fieldName: "field1",
            isDescending: true
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 2);
    local.assertJsonEqual(options.data.slice(), [0.5, -0.5]);
    // test $gte's string handling-behavior
    // test $lte's string handling-behavior
    // test $ne's string handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $gte: "false",
                $lte: "true",
                $ne: "null"
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 2);
    local.assertJsonEqual(options.data, ["false", "true"]);
    // test $in's list handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: { $in: [true, 1]}
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 2);
    local.assertJsonEqual(options.data, [true, 1]);
    // test $in's null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $in: null
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    // test $in's string handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $in: "0.5"
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 3);
    local.assertJsonEqual(options.data.slice(0, -1), ["0", "0.5"]);
    // test $nin's list handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: { $nin: [0, null]}
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 22);
    // test $nin's null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $nin: null
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    // test $nin's string handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $nin: "[[],\"\",0,1,{},false,null,true]"
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 4);
    local.assertJsonEqual(options.data.slice(0, -1), ["-0.5", "-1", "0.5"]);
    // test $not's number handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
            $not: {
                    $gte: 0
                }
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 26);
    local.assertJsonEqual(options.data.slice(0, 15), [
        null,
        null,
        null,
        null,
        null,
        null,
        false,
        true,
        -1,
        -0.5,
        "-0.5",
        "-1",
        "0",
        "0.5",
        "1"
    ]);
    // test $not's string handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $not: {
                    $gte: "0"
                }
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 17);
    local.assertJsonEqual(options.data.slice(0, -1), [
        null,
        null,
        null,
        null,
        null,
        null,
        false,
        true,
        -1,
        -0.5,
        0,
        0.5,
        1,
        "-0.5",
        "-1",
        {}
    ]);
    // test $or's null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: { $or: null},
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    // test $or's empty-list handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            $or: []
        },
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    // test $or's list handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            $or: [{
                field1: { $eq: -0.5}
            }, {
                field1: {
                    $eq: 0
                }
            }, {
                field1: {
                    $eq: 0.5
                }
            }]
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 4);
    local.assertJsonEqual(options.data.slice(0, -1), [-0.5, 0, 0.5]);
    // test $regex's regex handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: { $regex: (
                /1|true/
            )}
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 6);
    local.assertJsonEqual(options.data, [true, -1, 1, "-1", "1", "true"]);
    // test $regex's null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $regex: null
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    // test $typeof's boolean handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: { $typeof: "boolean"}
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 3);
    // test $typeof's null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $typeof: null
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    // test $typeof's number handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $typeof: "number"
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 6);
    // test $typeof's object handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $typeof: "object"
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 8);
    // test $typeof's string handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $typeof: "string"
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    }).map(function (dbRow) {
        return dbRow.field1;
    });
    local.assertJsonEqual(options.data.length, 15);
    // test $typeof's symbol handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $typeof: "symbol"
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    // test $typeof's undefined handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            field1: {
                $typeof: "undefined"
            }
        },
        sort: [{
            fieldName: "field1"
        }]
    });
    local.assertJsonEqual(options.data.length, 0);
    local.assertJsonEqual(options.data, []);
    onError();
};

local.testCase_dbTable_crudNullCase = function (options, onError) {
/*
 * this function will test dbTable's crud null-case handling-behavior
 */
    options = {};
    // test dbTableCreateMany's null-case handling-behavior
    local.dbTableCreateMany();
    // test dbTableCreateOne's onError handling-behavior
    options.dbTable = local.dbTableCreateOne({
        name: "testCase_dbTable_crudNullCase"
    }, local.onErrorDefault);
    // test dbTableCreateOne's null-case handling-behavior
    options.dbTable = local.dbTableCreateOne({
        name: "testCase_dbTable_crudNullCase"
    });
    // test crudRemoveAll's null-case handling-behavior
    options.dbTable.crudRemoveAll();
    // test cancel-pending-save handling-behavior
    options.dbTable.save(local.nop);
    // test drop's null-case handling-behavior
    options.dbTable.drop();
    // test idIndexCreate's null-case handling-behavior
    options.dbTable.idIndexCreate({
        name: "_id"
    });
    // test idIndexRemove's null-case handling-behavior
    options.dbTable.idIndexRemove({
        name: "_id"
    });
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // test crudCountManyByQuery's null-case handling-behavior
    options.data = options.dbTable.crudCountManyByQuery();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, 0);
    // test crudGetManyById's null-case handling-behavior
    options.data = options.dbTable.crudGetManyById();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, []);
    // test crudGetManyByQuery's null-case handling-behavior
    options.data = options.dbTable.crudGetManyByQuery();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, []);
    // test crudGetOneById's null-case handling-behavior
    options.data = options.dbTable.crudGetOneById();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, null);
    // test crudGetOneByRandom's null-case handling-behavior
    options.data = options.dbTable.crudGetOneByRandom();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, null);
    // test crudGetOneByQuery's null-case handling-behavior
    options.data = options.dbTable.crudGetOneByQuery();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, null);
    // test crudRemoveManyById's null-case handling-behavior
    options.data = options.dbTable.crudRemoveManyById();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, []);
    // test crudRemoveManyByQuery's null-case handling-behavior
    options.data = options.dbTable.crudRemoveManyByQuery();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, []);
    // test crudRemoveOneById's null-case handling-behavior
    options.data = options.dbTable.crudRemoveOneById();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, null);
    // test crudUpdateManyById's null-case handling-behavior
    options.data = options.dbTable.crudUpdateManyById();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, []);
    // test crudUpdateManyByQuery's null-case handling-behavior
    options.data = options.dbTable.crudUpdateManyByQuery();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, []);
    // test crudSetOneById's and crudUpdateOneById's null-case handling-behavior
    ["crudSetOneById", "crudUpdateOneById"].forEach(function (operation) {
        options.data = options.dbTable[operation]();
        // validate dbRowCount
        local.assertJsonEqual(options.dbTable.crudCountAll(), 1);
        options._id = options.data._id;
        // validate timestamp
        local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);
        // test crudRemoveOneById's soft-delete handling-behavior
        options.data = options.dbTable.crudRemoveOneById(options);
        // validate dbRowCount
        local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
        // validate data
        local.assertJsonEqual(options.data._id, options._id);
    });
    // test crudGetOneById's null-case handling-behavior
    options.data = options.dbTable.crudGetOneById(options);
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, null);
    // test crudRemoveOneById's null-case handling-behavior
    options.data = options.dbTable.crudRemoveOneById(options);
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data, null);
    onError();
};

local.testCase_dbTable_crudXxxById = function (options, onError) {
/*
 * this function will test dbTable's crudXxxById handling-behavior
 */
    options = {};
    // test dbTableCreateMany's create handling-behavior
    options.dbTable = local.dbTableCreateMany([{
        idIndexCreateList: [null],
        idIndexRemoveList: [null],
        name: "testCase_dbTable_crudXxxById"
    }])[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // test crudSetManyById's insert handling-behavior
    options.data = options.dbTable.crudSetManyById([null, null]);
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);
    // validate data
    local.assertJsonEqual(options.data.length, 2);
    // test crudRemoveManyById's soft-delete handling-behavior
    options.data = options.dbTable.crudRemoveManyById(options.data);
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 0);
    // validate data
    local.assertJsonEqual(options.data.length, 2);
    // test crudSetManyById's insert handling-behavior
    options.data = options.dbTable.crudSetManyById([null, {
        field1: 1,
        field2: 2,
        field3: 3
    }])[1];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);
    // validate timestamp
    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);
    // validate data
    local.assertJsonNotEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, undefined);
    local.assertJsonEqual(options.data.field1, 1);
    local.assertJsonEqual(options.data.field2, 2);
    local.assertJsonEqual(options.data.field3, 3);
    // test idIndexCreate's create handling-behavior
    // coverage-hack - $isRemoved
    options.dbTable.crudSetOneById({
        _id: "undefined"
    });
    options.dbTable.crudRemoveOneById({
        _id: "undefined"
    });
    options._id = options.data._id;
    options.dbTable.idIndexCreate({
        isInteger: true,
        name: "id2"
    });
    // test crudGetManyById's get handling-behavior
    options.data = options.dbTable.crudGetManyById([{
        _id: options._id
    }])[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonNotEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, 1);
    local.assertJsonEqual(options.data.field2, 2);
    // test crudUpdateManyById's update handling-behavior
    options.id2 = options.data.id2;
    options.data = options.dbTable.crudUpdateManyById([{
        id2: options.id2,
        field2: NaN,
        field3: [new Date(0)]
    }])[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);
    // validate timestamp
    local.assertThrow(options.data._timeCreated <= options.data._timeUpdated, options.data);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, 1);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, ["1970-01-01T00:00:00.000Z"]);
    // test crudSetManyById's replace handling-behavior
    options.data = options.dbTable.crudSetManyById([{
        id2: options.id2
    }])[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);
    // validate timestamp
    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, undefined);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, undefined);
    // test crudUpdateManyById's update handling-behavior
    options.data = options.dbTable.crudUpdateManyById([{
        id2: options.id2,
        field1: 1
    }])[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);
    // validate timestamp
    local.assertThrow(options.data._timeCreated <= options.data._timeUpdated, options.data);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, 1);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, undefined);
    // test crudRemoveManyById's soft-delete handling-behavior
    options.data = options.dbTable.crudRemoveManyById([options])[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 1);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, 1);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, undefined);
    // test crudSetManyById's re-insert handling-behavior
    options.data = options.dbTable.crudSetManyById([{
        id2: options.id2
    }])[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);
    // validate timestamp
    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);
    // validate data
    local.assertJsonNotEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, undefined);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, undefined);
    // test crudRemoveManyById's soft-delete handling-behavior
    options._id = options.data._id;
    options.data = options.dbTable.crudRemoveManyById([options])[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 1);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, undefined);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, undefined);
    onError();
};

local.testCase_dbTable_crudXxxByQuery = function (options, onError) {
/*
 * this function will test dbTable's crudXxxByQuery handling-behavior
 */
    options = {};
    // test dbTableCreateMany's create handling-behavior
    options.dbTable = local.dbTableCreateMany([{
        idIndexCreateList: [null],
        idIndexRemoveList: [null],
        name: "testCase_dbTable_crudXxxByQuery"
    }])[0];
    // drop dbTable
    options.dbTable.drop();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 0);
    // test crudSetManyById's insert handling-behavior
    options.data = options.dbTable.crudSetManyById([null, null]);
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);
    // validate data
    local.assertJsonEqual(options.data.length, 2);
    // test crudRemoveManyByQuery's soft-delete handling-behavior
    options.data = options.dbTable.crudRemoveManyByQuery();
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 0);
    // validate data
    local.assertJsonEqual(options.data.length, 2);
    // test crudSetManyById's insert handling-behavior
    options.data = options.dbTable.crudSetManyById([null, {
        field1: 1,
        field2: 2,
        field3: 3
    }])[1];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);
    // validate timestamp
    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);
    // validate data
    local.assertJsonNotEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, undefined);
    local.assertJsonEqual(options.data.field1, 1);
    local.assertJsonEqual(options.data.field2, 2);
    local.assertJsonEqual(options.data.field3, 3);
    // test idIndexCreate's create handling-behavior
    options._id = options.data._id;
    options.dbTable.idIndexCreate({
        isInteger: true,
        name: "id2"
    });
    // test crudGetManyByQuery's get handling-behavior
    options.data = options.dbTable.crudGetManyByQuery({
        query: {
            _id: options._id
        }
    })[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonNotEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, 1);
    local.assertJsonEqual(options.data.field2, 2);
    // test crudGetOneByQuery's get handling-behavior
    options.data = options.dbTable.crudGetOneByQuery({
        _id: options._id
    });
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonNotEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, 1);
    local.assertJsonEqual(options.data.field2, 2);
    // test crudUpdateManyByQuery's update handling-behavior
    options.id2 = options.data.id2;
    options.data = options.dbTable.crudUpdateManyByQuery({
        id2: options.id2
    }, {
        id2: options.id2,
        field2: NaN,
        field3: [new Date(0)]
    })[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);
    // validate timestamp
    local.assertThrow(options.data._timeCreated <= options.data._timeUpdated, options.data);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, 1);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, ["1970-01-01T00:00:00.000Z"]);
    // test crudSetManyById's replace handling-behavior
    options.data = options.dbTable.crudSetManyById([{
        id2: options.id2
    }])[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);
    // validate timestamp
    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, undefined);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, undefined);
    // test crudUpdateManyByQuery's update handling-behavior
    options.data = options.dbTable.crudUpdateManyByQuery({
        id2: options.id2
    }, {
        id2: options.id2,
        field1: 1
    })[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);
    // validate timestamp
    local.assertThrow(options.data._timeCreated <= options.data._timeUpdated, options.data);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, 1);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, undefined);
    // test crudRemoveManyByQuery's soft-delete handling-behavior
    options.data = options.dbTable.crudRemoveManyByQuery({
        _id: options._id
    })[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 1);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, 1);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, undefined);
    // test crudSetManyById's re-insert handling-behavior
    options.data = options.dbTable.crudSetManyById([{
        id2: options.id2
    }])[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 2);
    // validate timestamp
    local.assertJsonEqual(options.data._timeCreated, options.data._timeUpdated);
    // validate data
    local.assertJsonNotEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, undefined);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, undefined);
    // test crudRemoveManyByQuery's soft-delete handling-behavior
    options._id = options.data._id;
    options.data = options.dbTable.crudRemoveManyByQuery({
        _id: options._id
    })[0];
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountManyByQuery(), 1);
    // validate data
    local.assertJsonEqual(options.data._id, options._id);
    local.assertJsonEqual(options.data.id2, options.id2);
    local.assertJsonEqual(options.data.field1, undefined);
    local.assertJsonEqual(options.data.field2, undefined);
    local.assertJsonEqual(options.data.field3, undefined);
    onError();
};

local.testCase_dbTable_persistence = function (options, onError) {
/*
 * this function will test dbTable's persistence handling-behavior
 */
    options = {};
    // remove all dbRow's from db
    local.dbCrudRemoveAll();
    // drop db
    local.dbDrop();
    // save db
    local.dbSave();
    // load db
    local.dbLoad();
    // import db
    local.dbImport(
        "testCase_dbTable_persistence idIndexCreate {\"name\":\"_id\"}\n"
        + "testCase_dbTable_persistence idIndexCreate {\"name\":\"id2\"}\n"
        + "testCase_dbTable_persistence sizeLimit 0\n"
        + "testCase_dbTable_persistence sortDefault []\n"
        + "testCase_dbTable_persistence dbRowSet {\"_id\":\"id1\"}\n"
        + "undefined undefined undefined"
    );
    options.dbTable = local.dbTableCreateOne({
        name: "testCase_dbTable_persistence"
    });
    options.data = local.dbExport();
    // validate dbTable has idIndex._id
    local.assertThrow(options.data.indexOf(
        "testCase_dbTable_persistence idIndexCreate {\"isInteger\":false,\"name\":\"_id\"}"
    ) >= 0, options.data);
    // validate dbTable has idIndex.id2
    local.assertThrow(options.data.indexOf(
        "testCase_dbTable_persistence idIndexCreate {\"isInteger\":false,\"name\":\"id2\"}"
    ) >= 0, options.data);
    // validate dbTable has dbRow1
    local.assertThrow(options.data.indexOf(
        "testCase_dbTable_persistence dbRowSet {\"_id\":\"id1\","
    ) >= 0, options.data);
    // remove all dbRow's from dbTable
    options.dbTable.crudRemoveAll();
    options.data = options.dbTable.export();
    // validate dbTable has idIndex._id
    local.assertThrow(options.data.indexOf(
        "testCase_dbTable_persistence idIndexCreate {\"isInteger\":false,\"name\":\"_id\"}"
    ) >= 0, options.data);
    // validate dbTable has idIndex.id2
    local.assertThrow(options.data.indexOf(
        "testCase_dbTable_persistence idIndexCreate {\"isInteger\":false,\"name\":\"id2\"}"
    ) >= 0, options.data);
    // validate dbTable has no dbRow1
    local.assertThrow(options.data.indexOf(
        "testCase_dbTable_persistence dbRowSet {\"_id\":\"id1\","
    ) < 0, options.data);
    // drop dbTable
    options.dbTable.drop();
    options.data = options.dbTable.export();
    // validate dbTable has idIndex._id
    local.assertThrow(options.data.indexOf(
        "testCase_dbTable_persistence idIndexCreate {\"isInteger\":false,\"name\":\"_id\"}"
    ) >= 0, options.data);
    // validate dbTable has no idIndex.id2
    local.assertThrow(options.data.indexOf(
        "testCase_dbTable_persistence idIndexCreate {\"isInteger\":false,\"name\":\"id2\"}"
    ) < 0, options.data);
    // validate dbTable has no dbRow1
    local.assertThrow(options.data.indexOf(
        "testCase_dbTable_persistence dbRowSet {\"_id\":\"id1\","
    ) < 0, options.data);
    // save db
    options.dbTable.save(function (error) {
        // validate no error occurred
        local.assertThrow(!error, error);
        // load db
        local.dbLoad(onError);
    });
};

local.testCase_dbTable_sizeLimit = function (options, onError) {
/*
 * this function will test dbTable's sizeLimit handling-behavior
 */
    options = {};
    options.dbTable = local.dbTableCreateOne({
        name: "testCase_dbTable_sizeLimit",
        sizeLimit: 2
    });
    options.dbTable.crudSetOneById({});
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 1);
    options.dbTable.crudSetOneById({});
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);
    options.dbTable.crudSetOneById({});
    // validate dbRowCount
    local.assertJsonEqual(options.dbTable.crudCountAll(), 2);
    onError();
};

local.testCase_onEventDomDb_default = function (options, onError) {
/*
 * this function will test onEventDomDb's default handling-behavior
 */
    if (!local.isBrowser) {
        onError(null, options);
        return;
    }
    options = {};
    options.addEventListener = local.nop;
    options.click = local.nop;
    options.files = [];
    local.testMock([
        [document, {
            querySelector: function () {
                return options;
            }
        }],
        [local, {
            dbDrop: function (onError) {
                onError();
            },
            dbExport: local.nop,
            dbImport: local.nop
        }],
        [globalThis, {
            FileReader: function () {
                this.addEventListener = function (_, fnc) {
                    fnc(_);
                };
                this.readAsText = local.nop;
            },
            setTimeout: function (fnc) {
                fnc();
            },
            utility2: null,
            utility2_dbSeedList: null,
            utility2_onReadyAfter: null,
            utility2_onReadyBefore: null
        }]
    ], function (onError) {
        [
            "dbExportButton1",
            "dbImportButton1",
            "dbImportInput1",
            "dbResetButton1"
        ].forEach(function (id) {
            ["change", "click"].forEach(function (type) {
                [0, 1].forEach(function (ii) {
                    options.files[0] = ii;
                    local.onEventDomDb({
                        target: {
                            dataset: {},
                            id: id
                        },
                        type: type
                    });
                    globalThis.utility2_dbSeedList = ii && [{
                        name: "dbTable1"
                    }];
                });
            });
        });
        onError();
    }, onError);
};

local.testCase_sortCompare_default = function (options, onError) {
/*
 * this function will test sortCompare's default handling-behavior
 */
    options = {};
    options.data = local.identity([
        undefined,
        [],
        "",
        -1, -Infinity, 0, 0, 1, Infinity,
        {},
        "a", "aa",
        false, false, null, null, true, true
    ]).sort();
    options.data = options.data.sort(local.sortCompare);
    local.assertJsonEqual(options.data.slice(0, -3), [
        null, null,
        false, false, true, true,
        -Infinity, -1, 0, 0, 1, Infinity,
        "", "a", "aa"
    ]);
    options.data = options.data.reverse().sort(local.sortCompare);
    local.assertJsonEqual(options.data.slice(0, -3), [
        null, null,
        false, false, true, true,
        -Infinity, -1, 0, 0, 1, Infinity,
        "", "a", "aa"
    ]);
    // coverage-hack
    options.data.forEach(function (aa) {
        [{}, null, Symbol()].forEach(function (bb) {
            local.sortCompare(aa, bb);
            local.sortCompare(bb, aa);
        });
    });
    onError();
};

local.testCase_storageXxx_misc = function (options, onError) {
/*
 * this function will test storageXxx's misc handling-behavior
 */
    var onParallel;
    // jslint-hack
    local.nop(options);
    onParallel = local.onParallel(onError);
    onParallel.counter += 1;
    // test storageInit's init handling-behavior
    local.storageInit();
    // test storageInit's re-init handling-behavior
    local.storageInit();
    // test crud handling-behavior
    onParallel.counter += 1;
    local.storageClear(onParallel);
    onParallel.counter += 1;
    local.storageGetItem("undefined", onParallel);
    onParallel.counter += 1;
    local.storageKeys(onParallel);
    onParallel.counter += 1;
    local.storageLength(onParallel);
    onParallel.counter += 1;
    local.storageRemoveItem("undefined", onParallel);
    onParallel.counter += 1;
    local.storageSetItem("undefined", "undefined", onParallel);
    //!! onParallel.counter += 1;
    //!! local.storageKeys(function () {
        //!! if (local.isBrowser) {
            //!! // test indexedDB's onupgradeneeded handling-behavior
            //!! local._debugStorageRequestIndexedDB.onupgradeneeded();
        //!! }
        //!! onParallel();
    //!! });
    onParallel();
};
}());



}());
/* script-end /assets.test.js */



/* script-begin /assets.utility2.rollup.end.js */
(function () {
    "use strict";
    globalThis.utility2_rollup_old = globalThis.utility2_rollup;
    globalThis.utility2_rollup = null;
}());
/* utility2.rollup.js end */
/* script-end /assets.utility2.rollup.end.js */
